/*! For license information please see openseadragon-annotorious.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Annotorious=e():(t.OpenSeadragon=t.OpenSeadragon||{},t.OpenSeadragon.Annotorious=e())}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=574)}([function(t,e,n){"use strict";n.r(e),n.d(e,"version",(function(){return q})),n.d(e,"Children",(function(){return d})),n.d(e,"render",(function(){return C})),n.d(e,"hydrate",(function(){return I})),n.d(e,"unmountComponentAtNode",(function(){return $})),n.d(e,"createPortal",(function(){return S})),n.d(e,"createFactory",(function(){return W})),n.d(e,"cloneElement",(function(){return X})),n.d(e,"isValidElement",(function(){return Y})),n.d(e,"findDOMNode",(function(){return K})),n.d(e,"PureComponent",(function(){return u})),n.d(e,"memo",(function(){return l})),n.d(e,"forwardRef",(function(){return f})),n.d(e,"unstable_batchedUpdates",(function(){return Z})),n.d(e,"StrictMode",(function(){return J})),n.d(e,"Suspense",(function(){return y})),n.d(e,"SuspenseList",(function(){return b})),n.d(e,"lazy",(function(){return v})),n.d(e,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(function(){return j})),n.d(e,"unstable_ImmediatePriority",(function(){return F})),n.d(e,"unstable_UserBlockingPriority",(function(){return B})),n.d(e,"unstable_NormalPriority",(function(){return z})),n.d(e,"unstable_LowPriority",(function(){return V})),n.d(e,"unstable_IdlePriority",(function(){return U})),n.d(e,"unstable_runWithPriority",(function(){return H})),n.d(e,"unstable_now",(function(){return G}));var r=n(5);n.d(e,"useState",(function(){return r.k})),n.d(e,"useReducer",(function(){return r.i})),n.d(e,"useEffect",(function(){return r.d})),n.d(e,"useLayoutEffect",(function(){return r.g})),n.d(e,"useRef",(function(){return r.j})),n.d(e,"useImperativeHandle",(function(){return r.f})),n.d(e,"useMemo",(function(){return r.h})),n.d(e,"useCallback",(function(){return r.a})),n.d(e,"useContext",(function(){return r.b})),n.d(e,"useDebugValue",(function(){return r.c})),n.d(e,"useErrorBoundary",(function(){return r.e}));var o=n(4);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n in e)t[n]=e[n];return t}function a(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}function u(t){this.props=t}function l(t,e){function n(t){var n=this.props.ref,r=n==t.ref;return!r&&n&&(n.call?n(null):n.current=null),e?!e(this.props,t)||!r:a(this.props,t)}function r(e){return this.shouldComponentUpdate=n,Object(o.e)(t,e)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}n.d(e,"createElement",(function(){return o.e})),n.d(e,"createContext",(function(){return o.d})),n.d(e,"createRef",(function(){return o.f})),n.d(e,"Fragment",(function(){return o.b})),n.d(e,"Component",(function(){return o.a})),(u.prototype=new o.a).isPureReactComponent=!0,u.prototype.shouldComponentUpdate=function(t,e){return a(this.props,t)||a(this.state,e)};var c=o.h.__b;o.h.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),c&&c(t)};var p="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function f(t){function e(e,n){var r=s({},e);return delete r.ref,t(r,(n=e.ref||n)&&("object"!=i(n)||"current"in n)?n:null)}return e.$$typeof=p,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var h=function(t,e){return null==t?null:Object(o.j)(Object(o.j)(t).map(e))},d={map:h,forEach:h,count:function(t){return t?Object(o.j)(t).length:0},only:function(t){var e=Object(o.j)(t);if(1!==e.length)throw"Children.only";return e[0]},toArray:o.j},g=o.h.__e;function y(){this.__u=0,this.t=null,this.__b=null}function m(t){var e=t.__.__c;return e&&e.__e&&e.__e(t)}function v(t){var e,n,r;function i(i){if(e||(e=t()).then((function(t){n=t.default||t}),(function(t){r=t})),r)throw r;if(!n)throw e;return Object(o.e)(n,i)}return i.displayName="Lazy",i.__f=!0,i}function b(){this.u=null,this.o=null}o.h.__e=function(t,e,n){if(t.then)for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e);g(t,e,n)},(y.prototype=new o.a).__c=function(t,e){var n=e.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=m(r.__v),i=!1,s=function(){i||(i=!0,n.componentWillUnmount=n.__c,o?o(a):a())};n.__c=n.componentWillUnmount,n.componentWillUnmount=function(){s(),n.__c&&n.__c()};var a=function(){if(!--r.__u){if(r.state.__e){var t=r.state.__e;r.__v.__k[0]=function t(e,n,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)})),e.__c&&e.__c.__P===n&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}(t,t.__c.__P,t.__c.__O)}var e;for(r.setState({__e:r.__b=null});e=r.t.pop();)e.forceUpdate()}},u=!0===e.__h;r.__u++||u||r.setState({__e:r.__b=r.__v.__k[0]}),t.then(s,s)},y.prototype.componentWillUnmount=function(){this.t=[]},y.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function t(e,n,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),e.__c.__H=null),null!=(e=s({},e)).__c&&(e.__c.__P===r&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return t(e,n,r)}))),e}(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__e&&Object(o.e)(o.b,null,t.fallback);return i&&(i.__h=null),[Object(o.e)(o.b,null,e.__e?null:t.children),i]};var _=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function w(t){return this.getChildContext=function(){return t.context},t.children}function x(t){var e=this,n=t.i;e.componentWillUnmount=function(){Object(o.i)(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(t){this.childNodes.push(t),e.i.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.i.appendChild(t)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.i.removeChild(t)}}),Object(o.i)(Object(o.e)(w,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function S(t,e){return Object(o.e)(x,{__v:t,i:e})}(b.prototype=new o.a).__e=function(t){var e=this,n=m(e.__v),r=e.o.get(t);return r[0]++,function(o){var i=function(){e.props.revealOrder?(r.push(o),_(e,t,r)):o()};n?n(i):i()}},b.prototype.render=function(t){this.u=null,this.o=new Map;var e=Object(o.j)(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},b.prototype.componentDidUpdate=b.prototype.componentDidMount=function(){var t=this;this.o.forEach((function(e,n){_(t,n,e)}))};var E="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,O=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,P=function(t){return("undefined"!=typeof Symbol&&"symbol"==i(Symbol())?/fil|che|rad/i:/fil|che|ra/i).test(t)};function C(t,e,n){return null==e.__k&&(e.textContent=""),Object(o.i)(t,e),"function"==typeof n&&n(),t?t.__c:null}function I(t,e,n){return Object(o.g)(t,e),"function"==typeof n&&n(),t?t.__c:null}o.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(o.a.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var T=o.h.event;function R(){}function M(){return this.cancelBubble}function A(){return this.defaultPrevented}o.h.event=function(t){return T&&(t=T(t)),t.persist=R,t.isPropagationStopped=M,t.isDefaultPrevented=A,t.nativeEvent=t};var N,k={configurable:!0,get:function(){return this.class}},L=o.h.vnode;o.h.vnode=function(t){var e=t.type,n=t.props,r=n;if("string"==typeof e){for(var i in r={},n){var s=n[i];"value"===i&&"defaultValue"in n&&null==s||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===s?s="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+e)&&!P(n.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():O.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===s&&(s=void 0),r[i]=s)}"select"==e&&r.multiple&&Array.isArray(r.value)&&(r.value=Object(o.j)(n.children).forEach((function(t){t.props.selected=-1!=r.value.indexOf(t.props.value)}))),"select"==e&&null!=r.defaultValue&&(r.value=Object(o.j)(n.children).forEach((function(t){t.props.selected=r.multiple?-1!=r.defaultValue.indexOf(t.props.value):r.defaultValue==t.props.value}))),t.props=r}e&&n.class!=n.className&&(k.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",k)),t.$$typeof=E,L&&L(t)};var D=o.h.__r;o.h.__r=function(t){D&&D(t),N=t.__c};var j={ReactCurrentDispatcher:{current:{readContext:function(t){return N.__n[t.__c].props.value}}}},F=1,B=2,z=3,V=4,U=5;function H(t,e){return e()}var G="object"==("undefined"==typeof performance?"undefined":i(performance))&&"function"==typeof performance.now?performance.now.bind(performance):function(){return Date.now()},q="16.8.0";function W(t){return o.e.bind(null,t)}function Y(t){return!!t&&t.$$typeof===E}function X(t){return Y(t)?o.c.apply(null,arguments):t}function $(t){return!!t.__k&&(Object(o.i)(null,t),!0)}function K(t){return t&&(t.base||1===t.nodeType&&t)||null}var Z=function(t,e){return t(e)},J=o.b;e.default={useState:r.k,useReducer:r.i,useEffect:r.d,useLayoutEffect:r.g,useRef:r.j,useImperativeHandle:r.f,useMemo:r.h,useCallback:r.a,useContext:r.b,useDebugValue:r.c,version:"16.8.0",Children:d,render:C,hydrate:I,unmountComponentAtNode:$,createPortal:S,createElement:o.e,createContext:o.d,createFactory:W,cloneElement:X,createRef:o.f,Fragment:o.b,isValidElement:Y,findDOMNode:K,Component:o.a,PureComponent:u,memo:l,forwardRef:f,unstable_batchedUpdates:Z,StrictMode:o.b,Suspense:y,SuspenseList:b,lazy:v,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:j}},function(t,e,n){var r=n(6),o=n(12),i=n(19),s=n(16),a=n(22),u=function t(e,n,u){var l,c,p,f,h=e&t.F,d=e&t.G,g=e&t.P,y=e&t.B,m=d?r:e&t.S?r[n]||(r[n]={}):(r[n]||{}).prototype,v=d?o:o[n]||(o[n]={}),b=v.prototype||(v.prototype={});for(l in d&&(u=n),u)p=((c=!h&&m&&void 0!==m[l])?m:u)[l],f=y&&c?a(p,r):g&&"function"==typeof p?a(Function.call,p):p,m&&s(m,l,p,e&t.U),v[l]!=p&&i(v,l,f),g&&b[l]!=p&&(b[l]=p)};r.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){t.exports=n(244)()},function(t,e,n){t.exports=n(363)()},function(t,e,n){"use strict";n.d(e,"i",(function(){return D})),n.d(e,"g",(function(){return j})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return y})),n.d(e,"f",(function(){return g})),n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return F})),n.d(e,"d",(function(){return B})),n.d(e,"j",(function(){return E})),n.d(e,"h",(function(){return r}));var r,o,i,s,a,u={},l=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(t,e){for(var n in e)t[n]=e[n];return t}function f(t){var e=t.parentNode;e&&e.removeChild(t)}function h(t,e,n){var r,o,i,s=arguments,a={};for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:a[i]=e[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(s[i]);if(null!=n&&(a.children=n),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===a[i]&&(a[i]=t.defaultProps[i]);return d(t,a,r,o,null)}function d(t,e,n,o,i){var s={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++r.__v:i};return null!=r.vnode&&r.vnode(s),s}function g(){return{current:null}}function y(t){return t.children}function m(t,e){this.props=t,this.context=e}function v(t,e){if(null==e)return t.__?v(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?v(t):null}function b(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return b(t)}}function _(t){(!t.__d&&(t.__d=!0)&&o.push(t)&&!w.__r++||s!==r.debounceRendering)&&((s=r.debounceRendering)||i)(w)}function w(){for(var t;w.__r=o.length;)t=o.sort((function(t,e){return t.__v.__b-e.__v.__b})),o=[],t.some((function(t){var e,n,r,o,i,s;t.__d&&(i=(o=(e=t).__v).__e,(s=e.__P)&&(n=[],(r=p({},o)).__v=o.__v+1,R(s,o,r,e.__n,void 0!==s.ownerSVGElement,null!=o.__h?[i]:null,n,null==i?v(o):i,o.__h),M(n,o),o.__e!=i&&b(o)))}))}function x(t,e,n,r,o,i,s,a,c,p){var f,h,g,m,b,_,w,x=r&&r.__k||l,E=x.length;for(n.__k=[],f=0;f<e.length;f++)if(null!=(m=n.__k[f]=null==(m=e[f])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m?d(null,m,null,null,m):Array.isArray(m)?d(y,{children:m},null,null,null):m.__b>0?d(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(g=x[f])||g&&m.key==g.key&&m.type===g.type)x[f]=void 0;else for(h=0;h<E;h++){if((g=x[h])&&m.key==g.key&&m.type===g.type){x[h]=void 0;break}g=null}R(t,m,g=g||u,o,i,s,a,c,p),b=m.__e,(h=m.ref)&&g.ref!=h&&(w||(w=[]),g.ref&&w.push(g.ref,null,m),w.push(h,m.__c||b,m)),null!=b?(null==_&&(_=b),"function"==typeof m.type&&null!=m.__k&&m.__k===g.__k?m.__d=c=S(m,c,t):c=O(t,m,g,x,b,c),p||"option"!==n.type?"function"==typeof n.type&&(n.__d=c):t.value=""):c&&g.__e==c&&c.parentNode!=t&&(c=v(g))}for(n.__e=_,f=E;f--;)null!=x[f]&&("function"==typeof n.type&&null!=x[f].__e&&x[f].__e==n.__d&&(n.__d=v(r,f+1)),k(x[f],x[f]));if(w)for(f=0;f<w.length;f++)N(w[f],w[++f],w[++f])}function S(t,e,n){var r,o;for(r=0;r<t.__k.length;r++)(o=t.__k[r])&&(o.__=t,e="function"==typeof o.type?S(o,e,n):O(n,o,o,t.__k,o.__e,e));return e}function E(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){E(t,e)})):e.push(t)),e}function O(t,e,n,r,o,i){var s,a,u;if(void 0!==e.__d)s=e.__d,e.__d=void 0;else if(null==n||o!=i||null==o.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(o),s=null;else{for(a=i,u=0;(a=a.nextSibling)&&u<r.length;u+=2)if(a==o)break t;t.insertBefore(o,i),s=i}return void 0!==s?s:o.nextSibling}function P(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||c.test(e)?n:n+"px"}function C(t,e,n,r,o){var i;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||P(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||P(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r||t.addEventListener(e,i?T:I,i):t.removeEventListener(e,i?T:I,i);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"download"!==e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null!=n&&(!1!==n||"a"===e[0]&&"r"===e[1])?t.setAttribute(e,n):t.removeAttribute(e))}}function I(t){this.l[t.type+!1](r.event?r.event(t):t)}function T(t){this.l[t.type+!0](r.event?r.event(t):t)}function R(t,e,n,o,i,s,a,u,l){var c,f,h,d,g,v,b,_,w,S,E,O=e.type;if(void 0!==e.constructor)return null;null!=n.__h&&(l=n.__h,u=e.__e=n.__e,e.__h=null,s=[u]),(c=r.__b)&&c(e);try{t:if("function"==typeof O){if(_=e.props,w=(c=O.contextType)&&o[c.__c],S=c?w?w.props.value:c.__:o,n.__c?b=(f=e.__c=n.__c).__=f.__E:("prototype"in O&&O.prototype.render?e.__c=f=new O(_,S):(e.__c=f=new m(_,S),f.constructor=O,f.render=L),w&&w.sub(f),f.props=_,f.state||(f.state={}),f.context=S,f.__n=o,h=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=O.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=p({},f.__s)),p(f.__s,O.getDerivedStateFromProps(_,f.__s))),d=f.props,g=f.state,h)null==O.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==O.getDerivedStateFromProps&&_!==d&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(_,S),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(_,f.__s,S)||e.__v===n.__v){f.props=_,f.state=f.__s,e.__v!==n.__v&&(f.__d=!1),f.__v=e,e.__e=n.__e,e.__k=n.__k,f.__h.length&&a.push(f);break t}null!=f.componentWillUpdate&&f.componentWillUpdate(_,f.__s,S),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(d,g,v)}))}f.context=S,f.props=_,f.state=f.__s,(c=r.__r)&&c(e),f.__d=!1,f.__v=e,f.__P=t,c=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(o=p(p({},o),f.getChildContext())),h||null==f.getSnapshotBeforeUpdate||(v=f.getSnapshotBeforeUpdate(d,g)),E=null!=c&&c.type===y&&null==c.key?c.props.children:c,x(t,Array.isArray(E)?E:[E],e,n,o,i,s,a,u,l),f.base=e.__e,e.__h=null,f.__h.length&&a.push(f),b&&(f.__E=f.__=null),f.__e=!1}else null==s&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=A(n.__e,e,n,o,i,s,a,l);(c=r.diffed)&&c(e)}catch(t){e.__v=null,(l||null!=s)&&(e.__e=u,e.__h=!!l,s[s.indexOf(u)]=null),r.__e(t,e,n)}}function M(t,e){r.__c&&r.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){r.__e(t,e.__v)}}))}function A(t,e,n,r,o,i,s,a){var c,p,h,d,g=n.props,y=e.props,m=e.type,v=0;if("svg"===m&&(o=!0),null!=i)for(;v<i.length;v++)if((c=i[v])&&(c===t||(m?c.localName==m:3==c.nodeType))){t=c,i[v]=null;break}if(null==t){if(null===m)return document.createTextNode(y);t=o?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,y.is&&y),i=null,a=!1}if(null===m)g===y||a&&t.data===y||(t.data=y);else{if(i=i&&l.slice.call(t.childNodes),p=(g=n.props||u).dangerouslySetInnerHTML,h=y.dangerouslySetInnerHTML,!a){if(null!=i)for(g={},d=0;d<t.attributes.length;d++)g[t.attributes[d].name]=t.attributes[d].value;(h||p)&&(h&&(p&&h.__html==p.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(t,e,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in e||C(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||C(t,i,e[i],n[i],r)}(t,y,g,o,a),h)e.__k=[];else if(v=e.props.children,x(t,Array.isArray(v)?v:[v],e,n,r,o&&"foreignObject"!==m,i,s,t.firstChild,a),null!=i)for(v=i.length;v--;)null!=i[v]&&f(i[v]);a||("value"in y&&void 0!==(v=y.value)&&(v!==t.value||"progress"===m&&!v)&&C(t,"value",v,g.value,!1),"checked"in y&&void 0!==(v=y.checked)&&v!==t.checked&&C(t,"checked",v,g.checked,!1))}return t}function N(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(t){r.__e(t,n)}}function k(t,e,n){var o,i,s;if(r.unmount&&r.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||N(o,null,e)),n||"function"==typeof t.type||(n=null!=(i=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){r.__e(t,e)}o.base=o.__P=null}if(o=t.__k)for(s=0;s<o.length;s++)o[s]&&k(o[s],e,n);null!=i&&f(i)}function L(t,e,n){return this.constructor(t,n)}function D(t,e,n){var o,i,s;r.__&&r.__(t,e),i=(o="function"==typeof n)?null:n&&n.__k||e.__k,s=[],R(e,t=(!o&&n||e).__k=h(y,null,[t]),i||u,u,void 0!==e.ownerSVGElement,!o&&n?[n]:i?null:e.firstChild?l.slice.call(e.childNodes):null,s,!o&&n?n:i?i.__e:e.firstChild,o),M(s,t)}function j(t,e){D(t,e,j)}function F(t,e,n){var r,o,i,s=arguments,a=p({},t.props);for(i in e)"key"==i?r=e[i]:"ref"==i?o=e[i]:a[i]=e[i];if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(s[i]);return null!=n&&(a.children=n),d(t.type,a,r||t.key,o||t.ref,null)}function B(t,e){var n={__c:e="__cC"+a++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=[],(r={})[e]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.some(_)},this.sub=function(t){n.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n.splice(n.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}r={__e:function(t,e){for(var n,r,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(t)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(t),o=n.__d),o)return n.__E=n}catch(e){t=e}throw t},__v:0},m.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof t&&(t=t(p({},n),this.props)),t&&p(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),_(this))},m.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),_(this))},m.prototype.render=y,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,w.__r=0,a=0},function(t,e,n){"use strict";n.d(e,"k",(function(){return g})),n.d(e,"i",(function(){return y})),n.d(e,"d",(function(){return m})),n.d(e,"g",(function(){return v})),n.d(e,"j",(function(){return b})),n.d(e,"f",(function(){return _})),n.d(e,"h",(function(){return w})),n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return E})),n.d(e,"e",(function(){return O}));var r,o,i,s=n(4),a=0,u=[],l=s.h.__b,c=s.h.__r,p=s.h.diffed,f=s.h.__c,h=s.h.unmount;function d(t,e){s.h.__h&&s.h.__h(o,t,a||e),a=0;var n=o.__H||(o.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function g(t){return a=1,y(M,t)}function y(t,e,n){var i=d(r++,2);return i.t=t,i.__c||(i.__=[n?n(e):M(void 0,e),function(t){var e=i.t(i.__[0],t);i.__[0]!==e&&(i.__=[e,i.__[1]],i.__c.setState({}))}],i.__c=o),i.__}function m(t,e){var n=d(r++,3);!s.h.__s&&R(n.__H,e)&&(n.__=t,n.__H=e,o.__H.__h.push(n))}function v(t,e){var n=d(r++,4);!s.h.__s&&R(n.__H,e)&&(n.__=t,n.__H=e,o.__h.push(n))}function b(t){return a=5,w((function(){return{current:t}}),[])}function _(t,e,n){a=6,v((function(){"function"==typeof t?t(e()):t&&(t.current=e())}),null==n?n:n.concat(t))}function w(t,e){var n=d(r++,7);return R(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function x(t,e){return a=8,w((function(){return t}),e)}function S(t){var e=o.context[t.__c],n=d(r++,9);return n.__c=t,e?(null==n.__&&(n.__=!0,e.sub(o)),e.props.value):t.__}function E(t,e){s.h.useDebugValue&&s.h.useDebugValue(e?e(t):t)}function O(t){var e=d(r++,10),n=g();return e.__=t,o.componentDidCatch||(o.componentDidCatch=function(t){e.__&&e.__(t),n[1](t)}),[n[0],function(){n[1](void 0)}]}function P(){u.forEach((function(t){if(t.__P)try{t.__H.__h.forEach(I),t.__H.__h.forEach(T),t.__H.__h=[]}catch(e){t.__H.__h=[],s.h.__e(e,t.__v)}})),u=[]}s.h.__b=function(t){o=null,l&&l(t)},s.h.__r=function(t){c&&c(t),r=0;var e=(o=t.__c).__H;e&&(e.__h.forEach(I),e.__h.forEach(T),e.__h=[])},s.h.diffed=function(t){p&&p(t);var e=t.__c;e&&e.__H&&e.__H.__h.length&&(1!==u.push(e)&&i===s.h.requestAnimationFrame||((i=s.h.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),C&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);C&&(e=requestAnimationFrame(n))})(P)),o=void 0},s.h.__c=function(t,e){e.some((function(t){try{t.__h.forEach(I),t.__h=t.__h.filter((function(t){return!t.__||T(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],s.h.__e(n,t.__v)}})),f&&f(t,e)},s.h.unmount=function(t){h&&h(t);var e=t.__c;if(e&&e.__H)try{e.__H.__.forEach(I)}catch(t){s.h.__e(t,e.__v)}};var C="function"==typeof requestAnimationFrame;function I(t){var e=o;"function"==typeof t.__c&&t.__c(),o=e}function T(t){var e=o;t.__c=t.__(),o=e}function R(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function M(t,e){return"function"==typeof e?e(t):e}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(9);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===n(t)?null!==t:"function"==typeof t}},function(t,e,n){var r=n(67)("wks"),o=n(35),i=n(6).Symbol,s="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=s&&i[t]||(s?i:o)("Symbol."+t))}).store=r},function(t,e,n){var r=n(24),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e,n){t.exports=!n(7)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(8),o=n(149),i=n(32),s=Object.defineProperty;e.f=n(13)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(30);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(6),o=n(19),i=n(18),s=n(35)("src"),a=n(390),u="toString",l=(""+a).split(u);n(12).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(u&&(i(n,s)||o(n,s,t[e]?""+t[e]:l.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},function(t,e,n){var r=n(1),o=n(7),i=n(30),s=/"/g,a=function(t,e,n,r){var o=String(i(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),a+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),r(r.P+r.F*o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(14),o=n(34);t.exports=n(13)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(54),o=n(30);t.exports=function(t){return r(o(t))}},function(t,e,n){"use strict";var r=n(7);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,n){var r=n(23);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(55),o=n(34),i=n(20),s=n(32),a=n(18),u=n(149),l=Object.getOwnPropertyDescriptor;e.f=n(13)?l:function(t,e){if(t=i(t),e=s(e,!0),u)try{return l(t,e)}catch(t){}if(a(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(1),o=n(12),i=n(7);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",s)}},function(t,e,n){var r=n(22),o=n(54),i=n(15),s=n(11),a=n(165);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,p=6==t,f=5==t||p,h=e||a;return function(e,a,d){for(var g,y,m=i(e),v=o(m),b=r(a,d,3),_=s(v.length),w=0,x=n?h(e,_):u?h(e,0):void 0;_>w;w++)if((f||w in v)&&(y=b(g=v[w],w,m),t))if(n)x[w]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:x.push(g)}else if(c)return!1;return p?-1:l||c?c:x}}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(133),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,s=o||i||Function("return this")();t.exports=s},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if(n(13)){var o=n(36),i=n(6),s=n(7),a=n(1),u=n(78),l=n(112),c=n(22),p=n(49),f=n(34),h=n(19),d=n(50),g=n(24),y=n(11),m=n(176),v=n(38),b=n(32),_=n(18),w=n(56),x=n(9),S=n(15),E=n(104),O=n(39),P=n(41),C=n(40).f,I=n(106),T=n(35),R=n(10),M=n(27),A=n(68),N=n(57),k=n(108),L=n(47),D=n(71),j=n(48),F=n(107),B=n(167),z=n(14),V=n(25),U=z.f,H=V.f,G=i.RangeError,q=i.TypeError,W=i.Uint8Array,Y="ArrayBuffer",X="SharedArrayBuffer",$="BYTES_PER_ELEMENT",K=Array.prototype,Z=l.ArrayBuffer,J=l.DataView,Q=M(0),tt=M(2),et=M(3),nt=M(4),rt=M(5),ot=M(6),it=A(!0),st=A(!1),at=k.values,ut=k.keys,lt=k.entries,ct=K.lastIndexOf,pt=K.reduce,ft=K.reduceRight,ht=K.join,dt=K.sort,gt=K.slice,yt=K.toString,mt=K.toLocaleString,vt=R("iterator"),bt=R("toStringTag"),_t=T("typed_constructor"),wt=T("def_constructor"),xt=u.CONSTR,St=u.TYPED,Et=u.VIEW,Ot="Wrong length!",Pt=M(1,(function(t,e){return Mt(N(t,t[wt]),e)})),Ct=s((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),It=!!W&&!!W.prototype.set&&s((function(){new W(1).set({})})),Tt=function(t,e){var n=g(t);if(n<0||n%e)throw G("Wrong offset!");return n},Rt=function(t){if(x(t)&&St in t)return t;throw q(t+" is not a typed array!")},Mt=function(t,e){if(!x(t)||!(_t in t))throw q("It is not a typed array constructor!");return new t(e)},At=function(t,e){return Nt(N(t,t[wt]),e)},Nt=function(t,e){for(var n=0,r=e.length,o=Mt(t,r);r>n;)o[n]=e[n++];return o},kt=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},Lt=function(t){var e,n,r,o,i,s,a=S(t),u=arguments.length,l=u>1?arguments[1]:void 0,p=void 0!==l,f=I(a);if(null!=f&&!E(f)){for(s=f.call(a),r=[],e=0;!(i=s.next()).done;e++)r.push(i.value);a=r}for(p&&u>2&&(l=c(l,arguments[2],2)),e=0,n=y(a.length),o=Mt(this,n);n>e;e++)o[e]=p?l(a[e],e):a[e];return o},Dt=function(){for(var t=0,e=arguments.length,n=Mt(this,e);e>t;)n[t]=arguments[t++];return n},jt=!!W&&s((function(){mt.call(new W(1))})),Ft=function(){return mt.apply(jt?gt.call(Rt(this)):Rt(this),arguments)},Bt={copyWithin:function(t,e){return B.call(Rt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Rt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return F.apply(Rt(this),arguments)},filter:function(t){return At(this,tt(Rt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(Rt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return ot(Rt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Q(Rt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Rt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return it(Rt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ht.apply(Rt(this),arguments)},lastIndexOf:function(t){return ct.apply(Rt(this),arguments)},map:function(t){return Pt(Rt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return pt.apply(Rt(this),arguments)},reduceRight:function(t){return ft.apply(Rt(this),arguments)},reverse:function(){for(var t,e=this,n=Rt(e).length,r=Math.floor(n/2),o=0;o<r;)t=e[o],e[o++]=e[--n],e[n]=t;return e},some:function(t){return et(Rt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Rt(this),t)},subarray:function(t,e){var n=Rt(this),r=n.length,o=v(t,r);return new(N(n,n[wt]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,y((void 0===e?r:v(e,r))-o))}},zt=function(t,e){return At(this,gt.call(Rt(this),t,e))},Vt=function(t){Rt(this);var e=Tt(arguments[1],1),n=this.length,r=S(t),o=y(r.length),i=0;if(o+e>n)throw G(Ot);for(;i<o;)this[e+i]=r[i++]},Ut={entries:function(){return lt.call(Rt(this))},keys:function(){return ut.call(Rt(this))},values:function(){return at.call(Rt(this))}},Ht=function(t,e){return x(t)&&t[St]&&"symbol"!=r(e)&&e in t&&String(+e)==String(e)},Gt=function(t,e){return Ht(t,e=b(e,!0))?f(2,t[e]):H(t,e)},qt=function(t,e,n){return!(Ht(t,e=b(e,!0))&&x(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};xt||(V.f=Gt,z.f=qt),a(a.S+a.F*!xt,"Object",{getOwnPropertyDescriptor:Gt,defineProperty:qt}),s((function(){yt.call({})}))&&(yt=mt=function(){return ht.call(this)});var Wt=d({},Bt);d(Wt,Ut),h(Wt,vt,Ut.values),d(Wt,{slice:zt,set:Vt,constructor:function(){},toString:yt,toLocaleString:Ft}),kt(Wt,"buffer","b"),kt(Wt,"byteOffset","o"),kt(Wt,"byteLength","l"),kt(Wt,"length","e"),U(Wt,bt,{get:function(){return this[St]}}),t.exports=function(t,e,n,r){var l=t+((r=!!r)?"Clamped":"")+"Array",c="get"+t,f="set"+t,d=i[l],g=d||{},v=d&&P(d),b=!d||!u.ABV,_={},S=d&&d.prototype,E=function(t,n){U(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[c](n*e+r.o,Ct)}(this,n)},set:function(t){return function(t,n,o){var i=t._d;r&&(o=(o=Math.round(o))<0?0:o>255?255:255&o),i.v[f](n*e+i.o,o,Ct)}(this,n,t)},enumerable:!0})};b?(d=n((function(t,n,r,o){p(t,d,l,"_d");var i,s,a,u,c=0,f=0;if(x(n)){if(!(n instanceof Z||(u=w(n))==Y||u==X))return St in n?Nt(d,n):Lt.call(d,n);i=n,f=Tt(r,e);var g=n.byteLength;if(void 0===o){if(g%e)throw G(Ot);if((s=g-f)<0)throw G(Ot)}else if((s=y(o)*e)+f>g)throw G(Ot);a=s/e}else a=m(n),i=new Z(s=a*e);for(h(t,"_d",{b:i,o:f,l:s,e:a,v:new J(i)});c<a;)E(t,c++)})),S=d.prototype=O(Wt),h(S,"constructor",d)):s((function(){d(1)}))&&s((function(){new d(-1)}))&&D((function(t){new d,new d(null),new d(1.5),new d(t)}),!0)||(d=n((function(t,n,r,o){var i;return p(t,d,l),x(n)?n instanceof Z||(i=w(n))==Y||i==X?void 0!==o?new g(n,Tt(r,e),o):void 0!==r?new g(n,Tt(r,e)):new g(n):St in n?Nt(d,n):Lt.call(d,n):new g(m(n))})),Q(v!==Function.prototype?C(g).concat(C(v)):C(g),(function(t){t in d||h(d,t,g[t])})),d.prototype=S,o||(S.constructor=d));var I=S[vt],T=!!I&&("values"==I.name||null==I.name),R=Ut.values;h(d,_t,!0),h(S,St,l),h(S,Et,!0),h(S,wt,d),(r?new d(1)[bt]==l:bt in S)||U(S,bt,{get:function(){return l}}),_[l]=d,a(a.G+a.W+a.F*(d!=g),_),a(a.S,l,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*s((function(){g.of.call(d,1)})),l,{from:Lt,of:Dt}),$ in S||h(S,$,e),a(a.P,l,Bt),j(l),a(a.P+a.F*It,l,{set:Vt}),a(a.P+a.F*!T,l,Ut),o||S.toString==yt||(S.toString=yt),a(a.P+a.F*s((function(){new d(1).slice()})),l,{slice:zt}),a(a.P+a.F*(s((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!s((function(){S.toLocaleString.call([1,2])}))),l,{toLocaleString:Ft}),L[l]=T?I:R,o||T||h(S,vt,R)}}else t.exports=function(){}},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(35)("meta"),i=n(9),s=n(18),a=n(14).f,u=0,l=Object.isExtensible||function(){return!0},c=!n(7)((function(){return l(Object.preventExtensions({}))})),p=function(t){a(t,o,{value:{i:"O"+ ++u,w:{}}})},f=t.exports={KEY:o,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==r(t)?t:("string"==typeof t?"S":"P")+t;if(!s(t,o)){if(!l(t))return"F";if(!e)return"E";p(t)}return t[o].i},getWeak:function(t,e){if(!s(t,o)){if(!l(t))return!0;if(!e)return!1;p(t)}return t[o].w},onFreeze:function(t){return c&&f.NEED&&l(t)&&!s(t,o)&&p(t),t}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=!1},function(t,e,n){var r=n(151),o=n(91);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e,n){var r=n(24),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(8),o=n(152),i=n(91),s=n(90)("IE_PROTO"),a=function(){},u=function(){var t,e=n(88)("iframe"),r=i.length;for(e.style.display="none",n(92).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[i[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(151),o=n(91).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(18),o=n(15),i=n(90)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(10)("unscopables"),o=Array.prototype;null==o[r]&&n(19)(o,r,{}),t.exports=function(t){o[r][t]=!0}},function(t,e,n){var r=n(9);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){var r=n(279),o=n(285);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(14).f,o=n(18),i=n(10)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){var r=n(1),o=n(30),i=n(7),s=n(94),a="["+s+"]",u=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),c=function(t,e,n){var o={},a=i((function(){return!!s[t]()||"​"!="​"[t]()})),u=o[t]=a?e(p):s[t];n&&(o[n]=u),r(r.P+r.F*a,"String",o)},p=c.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(6),o=n(14),i=n(13),s=n(10)("species");t.exports=function(t){var e=r[t];i&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(16);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){var r=n(266);t.exports=function(t,e){return r(t,e)}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,s=r.length;i<s;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,e,t,r,o,s,a,d,h,R,c,u,p,v;function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OpenSeadragon(t){return new OpenSeadragon.Viewer(t)}!function(t){t.version={versionStr:"2.4.2",major:parseInt("2",10),minor:parseInt("4",10),revision:parseInt("2",10)};var e,n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},r=Object.prototype.toString,o=Object.prototype.hasOwnProperty;t.isFunction=function(e){return"function"===t.type(e)},t.isArray=Array.isArray||function(e){return"array"===t.type(e)},t.isWindow=function(t){return t&&"object"==_typeof(t)&&"setInterval"in t},t.type=function(t){return null==t?String(t):n[r.call(t)]||"object"},t.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||t.isWindow(e))return!1;if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(var r in e)n=r;return void 0===n||o.call(e,n)},t.isEmptyObject=function(t){for(var e in t)return!1;return!0},t.freezeObject=function(e){return Object.freeze?t.freezeObject=Object.freeze:t.freezeObject=function(t){return t},t.freezeObject(e)},t.supportsCanvas=(e=document.createElement("canvas"),!(!t.isFunction(e.getContext)||!e.getContext("2d"))),t.isCanvasTainted=function(t){var e=!1;try{t.getContext("2d").getImageData(0,0,1,1)}catch(t){e=!0}return e},t.pixelDensityRatio=function(){if(t.supportsCanvas){var e=document.createElement("canvas").getContext("2d"),n=window.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return Math.max(n,1)/r}return 1}()}(OpenSeadragon),function($){$.extend=function(){var t,e,n,r,o,i,s=arguments[0]||{},a=arguments.length,u=!1,l=1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),"object"==_typeof(s)||OpenSeadragon.isFunction(s)||(s={}),a===l&&(s=this,--l);l<a;l++)if(null!==(t=arguments[l])||void 0!==t)for(e in t)n=s[e],s!==(r=t[e])&&(u&&r&&(OpenSeadragon.isPlainObject(r)||(o=OpenSeadragon.isArray(r)))?(o?(o=!1,i=n&&OpenSeadragon.isArray(n)?n:[]):i=n&&OpenSeadragon.isPlainObject(n)?n:{},s[e]=OpenSeadragon.extend(u,i,r)):void 0!==r&&(s[e]=r));return s};var isIOSDevice=function(){if("object"!=("undefined"==typeof navigator?"undefined":_typeof(navigator)))return!1;var t=navigator.userAgent;return"string"==typeof t&&(-1!==t.indexOf("iPhone")||-1!==t.indexOf("iPad")||-1!==t.indexOf("iPod"))};$.extend($,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:isIOSDevice(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"]},SIGNAL:"----seadragon----",delegate:function(t,e){return function(){var n=arguments;return void 0===n&&(n=[]),e.apply(t,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t},getElementPosition:function(t){var e,n,r=new $.Point;for(n=getOffsetParent(t=$.getElement(t),e="fixed"==$.getElementStyle(t).position);n;)r.x+=t.offsetLeft,r.y+=t.offsetTop,e&&(r=r.plus($.getPageScroll())),n=getOffsetParent(t=n,e="fixed"==$.getElementStyle(t).position);return r},getElementOffset:function(t){var e,n,r=(t=$.getElement(t))&&t.ownerDocument,o={top:0,left:0};return r?(e=r.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),n=r==r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),new $.Point(o.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0),o.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0))):new $.Point},getElementSize:function(t){return t=$.getElement(t),new $.Point(t.clientWidth,t.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(t){return(t=$.getElement(t)).currentStyle}:function(t){return t=$.getElement(t),window.getComputedStyle(t,"")},getCssPropertyWithVendorPrefix:function(t){var e={};return $.getCssPropertyWithVendorPrefix=function(t){if(void 0!==e[t])return e[t];var n=document.createElement("div").style,r=null;if(void 0!==n[t])r=t;else for(var o=["Webkit","Moz","MS","O","webkit","moz","ms","o"],i=$.capitalizeFirstLetter(t),s=0;s<o.length;s++){var a=o[s]+i;if(void 0!==n[a]){r=a;break}}return e[t]=r},$.getCssPropertyWithVendorPrefix(t)},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},positiveModulo:function(t,e){var n=t%e;return n<0&&(n+=e),n},pointInElement:function(t,e){t=$.getElement(t);var n=$.getElementOffset(t),r=$.getElementSize(t);return e.x>=n.x&&e.x<n.x+r.x&&e.y<n.y+r.y&&e.y>=n.y},getEvent:function(t){return $.getEvent=t?function(t){return t}:function(){return window.event},$.getEvent(t)},getMousePosition:function(t){if("number"==typeof t.pageX)$.getMousePosition=function(t){var e=new $.Point;return t=$.getEvent(t),e.x=t.pageX,e.y=t.pageY,e};else{if("number"!=typeof t.clientX)throw new Error("Unknown event mouse position, no known technique.");$.getMousePosition=function(t){var e=new $.Point;return t=$.getEvent(t),e.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop,e}}return $.getMousePosition(t)},getPageScroll:function(){var t=document.documentElement||{},e=document.body||{};if("number"==typeof window.pageXOffset)$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset)};else if(e.scrollLeft||e.scrollTop)$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!t.scrollLeft&&!t.scrollTop)return new $.Point(0,0);$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return $.getPageScroll()},setPageScroll:function(t){if(void 0!==window.scrollTo)$.setPageScroll=function(t){window.scrollTo(t.x,t.y)};else{var e=$.getPageScroll();if(e.x===t.x&&e.y===t.y)return;document.body.scrollLeft=t.x,document.body.scrollTop=t.y;var n=$.getPageScroll();if(n.x!==e.x&&n.y!==e.y)return void($.setPageScroll=function(t){document.body.scrollLeft=t.x,document.body.scrollTop=t.y});if(document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y,(n=$.getPageScroll()).x!==e.x&&n.y!==e.y)return void($.setPageScroll=function(t){document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y});$.setPageScroll=function(t){}}return $.setPageScroll(t)},getWindowSize:function(){var t=document.documentElement||{},e=document.body||{};if("number"==typeof window.innerWidth)$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight)};else if(t.clientWidth||t.clientHeight)$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!e.clientWidth&&!e.clientHeight)throw new Error("Unknown window size, no known technique.");$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight)}}return $.getWindowSize()},makeCenteredNode:function(t){t=$.getElement(t);var e=[$.makeNeutralElement("div"),$.makeNeutralElement("div"),$.makeNeutralElement("div")];return $.extend(e[0].style,{display:"table",height:"100%",width:"100%"}),$.extend(e[1].style,{display:"table-row"}),$.extend(e[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),e[0].appendChild(e[1]),e[1].appendChild(e[2]),e[2].appendChild(t),e[0]},makeNeutralElement:function(t){var e=document.createElement(t),n=e.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",e},now:function(){return Date.now?$.now=Date.now:$.now=function(){return(new Date).getTime()},$.now()},makeTransparentImage:function(t){return $.makeTransparentImage=function(t){var e=$.makeNeutralElement("img");return e.src=t,e},$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7&&($.makeTransparentImage=function(t){var e=$.makeNeutralElement("img"),n=null;return(n=$.makeNeutralElement("span")).style.display="inline-block",e.onload=function(){n.style.width=n.style.width||e.width+"px",n.style.height=n.style.height||e.height+"px",e.onload=null,e=null},e.src=t,n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale')",n}),$.makeTransparentImage(t)},setElementOpacity:function(t,e,n){var r;t=$.getElement(t),n&&!$.Browser.alpha&&(e=Math.round(e)),$.Browser.opacity?t.style.opacity=e<1?e:"":e<1?(r="alpha(opacity="+Math.round(100*e)+")",t.style.filter=r):t.style.filter=""},setElementTouchActionNone:function(t){void 0!==(t=$.getElement(t)).style.touchAction?t.style.touchAction="none":void 0!==t.style.msTouchAction&&(t.style.msTouchAction="none")},addClass:function(t,e){(t=$.getElement(t)).className?-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=" "+e):t.className=e},indexOf:function(t,e,n){return Array.prototype.indexOf?this.indexOf=function(t,e,n){return t.indexOf(e,n)}:this.indexOf=function(t,e,n){var r,o,i=n||0;if(!t)throw new TypeError;if(0===(o=t.length)||o<=i)return-1;for(i<0&&(i=o-Math.abs(i)),r=i;r<o;r++)if(t[r]===e)return r;return-1},this.indexOf(t,e,n)},removeClass:function(t,e){var n,r,o=[];for(n=(t=$.getElement(t)).className.split(/\s+/),r=0;r<n.length;r++)n[r]&&n[r]!==e&&o.push(n[r]);t.className=o.join(" ")},addEvent:function(){if(window.addEventListener)return function(t,e,n,r){(t=$.getElement(t)).addEventListener(e,n,r)};if(window.attachEvent)return function(t,e,n,r){(t=$.getElement(t)).attachEvent("on"+e,n)};throw new Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(t,e,n,r){(t=$.getElement(t)).removeEventListener(e,n,r)};if(window.detachEvent)return function(t,e,n,r){(t=$.getElement(t)).detachEvent("on"+e,n)};throw new Error("No known event model.")}(),cancelEvent:function(t){(t=$.getEvent(t)).preventDefault?$.cancelEvent=function(t){t.preventDefault()}:$.cancelEvent=function(t){(t=$.getEvent(t)).cancel=!0,t.returnValue=!1},$.cancelEvent(t)},stopEvent:function(t){(t=$.getEvent(t)).stopPropagation?$.stopEvent=function(t){t.stopPropagation()}:$.stopEvent=function(t){(t=$.getEvent(t)).cancelBubble=!0},$.stopEvent(t)},createCallback:function(t,e){var n,r=[];for(n=2;n<arguments.length;n++)r.push(arguments[n]);return function(){var n,o=r.concat([]);for(n=0;n<arguments.length;n++)o.push(arguments[n]);return e.apply(t,o)}},getUrlParameter:function(t){return URLPARAMS[t]||null},getUrlProtocol:function(t){var e=t.match(/^([a-z]+:)\/\//i);return null===e?window.location.protocol:e[1].toLowerCase()},createAjaxRequest:function(t){var e;try{e=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}if(e)window.XMLHttpRequest?$.createAjaxRequest=function(t){return t?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");$.createAjaxRequest=function(){return new XMLHttpRequest}}return $.createAjaxRequest(t)},makeAjaxRequest:function(t,e,n){var r,o,i;$.isPlainObject(t)&&(e=t.success,n=t.error,r=t.withCredentials,o=t.headers,i=t.responseType||null,t=t.url);var s=$.getUrlProtocol(t),a=$.createAjaxRequest("file:"===s);if(!$.isFunction(e))throw new Error("makeAjaxRequest requires a success callback");a.onreadystatechange=function(){4==a.readyState&&(a.onreadystatechange=function(){},200<=a.status&&a.status<300||0===a.status&&"http:"!==s&&"https:"!==s?e(a):($.console.log("AJAX request returned %d: %s",a.status,t),$.isFunction(n)&&n(a)))};try{if(a.open("GET",t,!0),i&&(a.responseType=i),o)for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&a.setRequestHeader(u,o[u]);r&&(a.withCredentials=!0),a.send(null)}catch(r){var l=r.message;if($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10&&void 0!==r.number&&-2147024891==r.number&&(l+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),$.console.log("%s while making AJAX request: %s",r.name,l),a.onreadystatechange=function(){},window.XDomainRequest){var c=new window.XDomainRequest;if(c){c.onload=function(t){$.isFunction(e)&&e({responseText:c.responseText,status:200,statusText:"OK"})},c.onerror=function(t){$.isFunction(n)&&n({responseText:c.responseText,status:444,statusText:"An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser."})};try{c.open("GET",t),c.send()}catch(t){$.isFunction(n)&&n(a,r)}}}else $.isFunction(n)&&n(a,r)}return a},jsonp:function(t){var e,n=t.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=t.callbackName||"openseadragon"+$.now(),i=window[o],s="$1"+o+"$2",a=t.param||"callback",u=t.callback;n=n.replace(/(\=)\?(&|$)|\?\?/i,s),n+=(/\?/.test(n)?"&":"?")+a+"="+o,window[o]=function(t){if(i)window[o]=i;else try{delete window[o]}catch(t){}u&&$.isFunction(u)&&u(t)},e=document.createElement("script"),void 0===t.async&&!1===t.async||(e.async="async"),t.scriptCharset&&(e.charset=t.scriptCharset),e.src=n,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,r&&e.parentNode&&r.removeChild(e),e=void 0)},r.insertBefore(e,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(t){if(window.DOMParser)$.parseXml=function(t){return(new DOMParser).parseFromString(t,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");$.parseXml=function(t){var e=null;return(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t),e}}return $.parseXml(t)},parseJSON:function parseJSON(string){return window.JSON&&window.JSON.parse?$.parseJSON=window.JSON.parse:$.parseJSON=function(string){return eval("("+string+")")},$.parseJSON(string)},imageFormatSupported:function(t){return!!FILEFORMATS[(t=t||"").toLowerCase()]}});var nullfunction=function(t){};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction},$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:!0};var FILEFORMATS={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},URLPARAMS={};function getOffsetParent(t,e){return e&&t!=document.body?document.body:t.offsetParent}!function(){var t=navigator.appVersion,e=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(e.substring(e.indexOf("MSIE")+5,e.indexOf(";",e.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(0<=e.indexOf("Firefox")?($.Browser.vendor=$.BROWSERS.FIREFOX,$.Browser.version=parseFloat(e.substring(e.indexOf("Firefox")+8))):0<=e.indexOf("Safari")?($.Browser.vendor=0<=e.indexOf("Chrome")?$.BROWSERS.CHROME:$.BROWSERS.SAFARI,$.Browser.version=parseFloat(e.substring(e.substring(0,e.indexOf("Safari")).lastIndexOf("/")+1,e.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(e)&&($.Browser.vendor=$.BROWSERS.IE,$.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA,$.Browser.version=parseFloat(t)}var n,r,o,i=window.location.search.substring(1).split("&");for(o=0;o<i.length;o++)if(0<(r=(n=i[o]).indexOf("="))){var s=n.substring(0,r),a=n.substring(r+1);try{URLPARAMS[s]=decodeURIComponent(a)}catch(t){$.console.error("Ignoring malformed URL parameter: %s=%s",s,a)}}$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2),$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9)}(),function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame,n=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame;if(e&&n)$.requestAnimationFrame=function(){return e.apply(t,arguments)},$.cancelAnimationFrame=function(){return n.apply(t,arguments)};else{var r,o=[],i=[],s=0;$.requestAnimationFrame=function(t){return o.push([++s,t]),r=r||setInterval((function(){if(o.length){var t=$.now(),e=i;for(i=o,o=e;i.length;)i.shift()[1](t)}else clearInterval(r),r=void 0}),20),s},$.cancelAnimationFrame=function(t){var e,n;for(e=0,n=o.length;e<n;e+=1)if(o[e][0]===t)return void o.splice(e,1);for(e=0,n=i.length;e<n;e+=1)if(i[e][0]===t)return void i.splice(e,1)}}}(window)}(OpenSeadragon),__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){return OpenSeadragon})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),e=OpenSeadragon,t={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""},document.exitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.fullscreenElement},t.requestFullScreen=function(t){return t.requestFullscreen()},t.exitFullScreen=function(){document.exitFullscreen()},t.fullScreenEventName="fullscreenchange",t.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.msFullscreenElement},t.requestFullScreen=function(t){return t.msRequestFullscreen()},t.exitFullScreen=function(){document.msExitFullscreen()},t.fullScreenEventName="MSFullscreenChange",t.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitFullscreenElement},t.requestFullScreen=function(t){return t.webkitRequestFullscreen()},t.exitFullScreen=function(){document.webkitExitFullscreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},t.requestFullScreen=function(t){return t.webkitRequestFullScreen()},t.exitFullScreen=function(){document.webkitCancelFullScreen()},t.fullScreenEventName="webkitfullscreenchange",t.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(t.supportsFullScreen=!0,t.getFullScreenElement=function(){return document.mozFullScreenElement},t.requestFullScreen=function(t){return t.mozRequestFullScreen()},t.exitFullScreen=function(){document.mozCancelFullScreen()},t.fullScreenEventName="mozfullscreenchange",t.fullScreenErrorEventName="mozfullscreenerror"),t.isFullScreen=function(){return null!==t.getFullScreenElement()},t.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),t.exitFullScreen()},e.extend(e,t),r=OpenSeadragon,r.EventSource=function(){this.events={}},r.EventSource.prototype={addOnceHandler:function(t,e,n,r){var o=this;r=r||1;var i=0;this.addHandler(t,(function n(s){++i===r&&o.removeHandler(t,n),e(s)}),n)},addHandler:function(t,e,n){var o=this.events[t];o||(this.events[t]=o=[]),e&&r.isFunction(e)&&(o[o.length]={handler:e,userData:n||null})},removeHandler:function(t,e){var n,o=this.events[t],i=[];if(o&&r.isArray(o)){for(n=0;n<o.length;n++)o[n].handler!==e&&i.push(o[n]);this.events[t]=i}},removeAllHandlers:function(t){if(t)this.events[t]=[];else for(var e in this.events)this.events[e]=[]},getHandler:function(t){var e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,n){var r,o=e.length;for(r=0;r<o;r++)e[r]&&(n.eventSource=t,n.userData=e[r].userData,e[r].handler(n))}):null},raiseEvent:function(t,e){var n=this.getHandler(t);n&&n(this,e=e||{})}},function(t){var e,n,r,o,i=[],s={};function a(t,e){return t.hash.toString()+e.type+e.id.toString()}function u(){var n,o,i,s,a,u,l=e.length,c=t.now();for(s=c-r,r=c,n=0;n<l;n++)(i=(o=e[n]).gPoint).direction=Math.atan2(i.currentPos.y-o.lastPos.y,i.currentPos.x-o.lastPos.x),a=o.lastPos.distanceTo(i.currentPos),o.lastPos=i.currentPos,u=1e3*a/(1+s),i.speed=.75*u+.25*i.speed}function l(e){var n,r=s[e.hash],o=r.activePointersLists.length;for(n=0;n<o;n++)0<r.activePointersLists[n].captureCount&&(t.removeEvent(t.MouseTracker.captureElement,"mousemove",r.mousemovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"mouseup",r.mouseupcaptured,!0),t.removeEvent(t.MouseTracker.captureElement,t.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",r.pointermovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,t.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",r.pointerupcaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"touchmove",r.touchmovecaptured,!0),t.removeEvent(t.MouseTracker.captureElement,"touchend",r.touchendcaptured,!0),r.activePointersLists[n].captureCount=0);for(n=0;n<o;n++)r.activePointersLists.pop()}function c(e){var n,r,o=s[e.hash];if(o.tracking){for(r=0;r<t.MouseTracker.subscribeEvents.length;r++)n=t.MouseTracker.subscribeEvents[r],t.removeEvent(e.element,n,o[n],!1);l(e),o.tracking=!1}}function p(e,n){var r=s[e.hash];if("pointerevent"===n)return{upName:t.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",upHandler:r.pointerupcaptured,moveName:t.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",moveHandler:r.pointermovecaptured};if("mouse"===n)return{upName:"mouseup",upHandler:r.mouseupcaptured,moveName:"mousemove",moveHandler:r.mousemovecaptured};if("touch"===n)return{upName:"touchend",upHandler:r.touchendcaptured,moveName:"touchmove",moveHandler:r.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function f(e,n,r){var o,i=e.getActivePointersListByType(n);i.captureCount+=r||1,1===i.captureCount&&(t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?e.element.setCapture(!0):(o=p(e,t.MouseTracker.havePointerEvents?"pointerevent":n),q&&W(window.top)&&t.addEvent(window.top,o.upName,o.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,o.upName,o.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,o.moveName,o.moveHandler,!0)))}function h(e,n,r){var o,i=e.getActivePointersListByType(n);i.captureCount-=r||1,0===i.captureCount&&(t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?e.element.releaseCapture():(o=p(e,t.MouseTracker.havePointerEvents?"pointerevent":n),q&&W(window.top)&&t.removeEvent(window.top,o.upName,o.upHandler,!0),t.removeEvent(t.MouseTracker.captureElement,o.moveName,o.moveHandler,!0),t.removeEvent(t.MouseTracker.captureElement,o.upName,o.upHandler,!0)))}function d(e){var n;if(t.MouseTracker.unprefixedPointerEvents)n=e.pointerType;else switch(e.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function g(e){return t.getMousePosition(e)}function y(t,e){return m(g(t),e)}function m(e,n){var r=t.getElementOffset(n);return e.minus(r)}function v(e,n){return new t.Point((e.x+n.x)/2,(e.y+n.y)/2)}function b(e,n){var r={target:(n=t.getEvent(n)).target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};"mousewheel"==t.MouseTracker.wheelEventName?r.deltaY=-n.wheelDelta/t.DEFAULT_SETTINGS.pixelsPerWheelLine:r.deltaY=n.detail,_(e,r,n)}function _(e,n,r){var o;o=n.deltaY<0?1:-1,e.scrollHandler&&!1===e.scrollHandler({eventSource:e,pointerType:"mouse",position:y(n,e.element),scroll:o,shift:n.shiftKey,isTouchEvent:!1,originalEvent:r,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(r)}function w(t,e){if(t===e)return!1;for(;e&&e!==t;)e=e.parentNode;return e===t}function x(e,n){z(e,n,[{id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:t.now()}])}function S(e,n){V(e,n,[{id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:t.now()}])}function E(e){return t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?1===e?0:2===e?2:4===e?1:-1:e}function O(e,n){H(e,n=t.getEvent(n),[{id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:t.now()}],E(n.button))&&h(e,"mouse")}function P(e,n){G(e,n=t.getEvent(n),[{id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:t.now()}])}function C(t,e,n){var r,o=n.getLength(),i=[];if("touch"===n.type||0<n.contacts){for(r=0;r<o;r++)i.push(n.getByIndex(r));0<i.length&&(H(t,e,i,0),n.captureCount=1,h(t,n.type),V(t,e,i))}}function I(e,n){var r,o,s,a,u=n.changedTouches.length,l=[];for(r=t.now(),o=0;o<u;o++)l.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:g(n.changedTouches[o]),currentTime:r});for(H(e,n,l,0)&&h(e,"touch",u),V(e,n,l),o=0;o<i.length;o++)if(i[o]!==e&&i[o].isTracking()&&w(i[o].element,e.element)){for(a=[],s=0;s<u;s++)a.push({id:n.changedTouches[s].identifier,type:"touch",currentPos:g(n.changedTouches[s]),currentTime:r});V(i[o],n,a)}t.cancelEvent(n)}function T(e,n){var r,o=n.changedTouches.length,i=[];for(r=0;r<o;r++)i.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:g(n.changedTouches[r]),currentTime:t.now()});G(e,n,i),t.cancelEvent(n)}function R(e,n){n.currentTarget===n.relatedTarget||w(n.currentTarget,n.relatedTarget)||z(e,n,[{id:n.pointerId,type:d(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:t.now()}])}function M(e,n){n.currentTarget===n.relatedTarget||w(n.currentTarget,n.relatedTarget)||V(e,n,[{id:n.pointerId,type:d(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:t.now()}])}function A(e,n){var r;U(e,n,[r={id:n.pointerId,type:d(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:t.now()}],n.button)&&(t.stopEvent(n),f(e,r.type)),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.cancelEvent(n)}function N(t,e){k(t,e)}function k(e,n){var r;H(e,n,[r={id:n.pointerId,type:d(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:t.now()}],n.button)&&h(e,r.type)}function L(t,e){D(t,e)}function D(e,n){G(e,n,[{id:n.pointerId,type:d(n),isPrimary:n.isPrimary,currentPos:g(n),currentTime:t.now()}])}function j(t,e){!function(t,e,n){H(t,e,n,0),V(t,e,n)}(t,e,[{id:e.pointerId,type:d(e)}])}function F(t,e){return Object.prototype.hasOwnProperty.call(e,"isPrimary")||(0===t.getLength()?e.isPrimary=!0:e.isPrimary=!1),e.speed=0,e.direction=0,e.contactPos=e.currentPos,e.contactTime=e.currentTime,e.lastPos=e.currentPos,e.lastTime=e.currentTime,t.add(e)}function B(t,e){var n,r;return t.getById(e.id)?(n=t.removeById(e.id),Object.prototype.hasOwnProperty.call(e,"isPrimary")||(r=t.getPrimary())||(r=t.getByIndex(0))&&(r.isPrimary=!0)):n=t.getLength(),n}function z(e,n,r){var o,i,s,a=e.getActivePointersListByType(r[0].type),u=r.length;for(o=0;o<u;o++)i=r[o],(s=a.getById(i.id))?(s.insideElement=!0,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=i.currentPos,s.currentTime=i.currentTime,i=s):(i.captured=!1,i.insideElementPressed=!1,i.insideElement=!0,F(a,i)),e.enterHandler&&!1===e.enterHandler({eventSource:e,pointerType:i.type,position:m(i.currentPos,e.element),buttons:a.buttons,pointers:e.getActivePointerCount(),insideElementPressed:i.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===i.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)}function V(e,n,r){var o,i,s,a=e.getActivePointersListByType(r[0].type),u=r.length;for(o=0;o<u;o++)i=r[o],(s=a.getById(i.id))&&(s.captured?(s.insideElement=!1,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=i.currentPos,s.currentTime=i.currentTime):B(a,s),i=s),e.exitHandler&&!1===e.exitHandler({eventSource:e,pointerType:i.type,position:i.currentPos&&m(i.currentPos,e.element),buttons:a.buttons,pointers:e.getActivePointerCount(),insideElementPressed:!!s&&s.insideElementPressed,buttonDownAny:0!==a.buttons,isTouchEvent:"touch"===i.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)}function U(e,n,r,o){var i,a,u,l=s[e.hash],c=e.getActivePointersListByType(r[0].type),p=r.length;void 0!==n.buttons?c.buttons=n.buttons:t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?0===o?c.buttons+=1:1===o?c.buttons+=4:2===o?c.buttons+=2:3===o?c.buttons+=8:4===o?c.buttons+=16:5===o&&(c.buttons+=32):0===o?c.buttons|=1:1===o?c.buttons|=4:2===o?c.buttons|=2:3===o?c.buttons|=8:4===o?c.buttons|=16:5===o&&(c.buttons|=32);var f=e.getActivePointersListsExceptType(r[0].type);for(i=0;i<f.length;i++)C(e,n,f[i]);if(0!==o)return e.nonPrimaryPressHandler&&!1===e.nonPrimaryPressHandler({eventSource:e,pointerType:r[0].type,position:m(r[0].currentPos,e.element),button:o,buttons:c.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),!1;for(i=0;i<p;i++)a=r[i],(u=c.getById(a.id))?(u.captured=!0,u.insideElementPressed=!0,u.insideElement=!0,u.contactPos=a.currentPos,u.contactTime=a.currentTime,u.lastPos=u.currentPos,u.lastTime=u.currentTime,u.currentPos=a.currentPos,u.currentTime=a.currentTime,a=u):(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,F(c,a)),c.addContact(),(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.addPoint(e,a),1===c.contacts?e.pressHandler&&!1===e.pressHandler({eventSource:e,pointerType:a.type,position:m(a.contactPos,e.element),buttons:c.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n):2===c.contacts&&e.pinchHandler&&"touch"===a.type&&(l.pinchGPoints=c.asArray(),l.lastPinchDist=l.currentPinchDist=l.pinchGPoints[0].currentPos.distanceTo(l.pinchGPoints[1].currentPos),l.lastPinchCenter=l.currentPinchCenter=v(l.pinchGPoints[0].currentPos,l.pinchGPoints[1].currentPos));return!0}function H(e,n,r,o){var i,a,u,l,c,p,f=s[e.hash],h=e.getActivePointersListByType(r[0].type),d=r.length,g=!1,y=!1;if(void 0!==n.buttons?h.buttons=n.buttons:t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?0===o?--h.buttons:1===o?h.buttons-=4:2===o?h.buttons-=2:3===o?h.buttons-=8:4===o?h.buttons-=16:5===o&&(h.buttons-=32):0===o?h.buttons^=-2:1===o?h.buttons^=-5:2===o?h.buttons^=-3:3===o?h.buttons^=-9:4===o?h.buttons^=-17:5===o&&(h.buttons^=-33),0!==o){e.nonPrimaryReleaseHandler&&!1===e.nonPrimaryReleaseHandler({eventSource:e,pointerType:r[0].type,position:m(r[0].currentPos,e.element),button:o,buttons:h.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n);var b=e.getActivePointersListByType("mouse");return C(e,n,b),!1}if(void 0===r[0].currentPos)return C(e,n,h),!1;for(u=0;u<d;u++)l=r[u],(c=h.getById(l.id))&&(c.captured&&(y=g=!(c.captured=!1)),c.lastPos=c.currentPos,c.lastTime=c.currentTime,c.currentPos=l.currentPos,c.currentTime=l.currentTime,c.insideElement||B(h,c),i=c.currentPos,a=c.currentTime,y?(h.removeContact(),(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.removePoint(e,c),0===h.contacts?(e.releaseHandler&&!1===e.releaseHandler({eventSource:e,pointerType:c.type,position:m(i,e.element),buttons:h.buttons,insideElementPressed:c.insideElementPressed,insideElementReleased:c.insideElement,isTouchEvent:"touch"===c.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),e.dragEndHandler&&!c.currentPos.equals(c.contactPos)&&!1===e.dragEndHandler({eventSource:e,pointerType:c.type,position:m(c.currentPos,e.element),speed:c.speed,direction:c.direction,shift:n.shiftKey,isTouchEvent:"touch"===c.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),(e.clickHandler||e.dblClickHandler)&&c.insideElement&&(p=a-c.contactTime<=e.clickTimeThreshold&&c.contactPos.distanceTo(i)<=e.clickDistThreshold,e.clickHandler&&!1===e.clickHandler({eventSource:e,pointerType:c.type,position:m(c.currentPos,e.element),quick:p,shift:n.shiftKey,isTouchEvent:"touch"===c.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),e.dblClickHandler&&p&&(h.clicks++,1===h.clicks?(f.lastClickPos=i,f.dblClickTimeOut=setTimeout((function(){h.clicks=0}),e.dblClickTimeThreshold)):2===h.clicks&&(clearTimeout(f.dblClickTimeOut),h.clicks=0,f.lastClickPos.distanceTo(i)<=e.dblClickDistThreshold&&!1===e.dblClickHandler({eventSource:e,pointerType:c.type,position:m(c.currentPos,e.element),shift:n.shiftKey,isTouchEvent:"touch"===c.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n),f.lastClickPos=null)))):2===h.contacts&&e.pinchHandler&&"touch"===c.type&&(f.pinchGPoints=h.asArray(),f.lastPinchDist=f.currentPinchDist=f.pinchGPoints[0].currentPos.distanceTo(f.pinchGPoints[1].currentPos),f.lastPinchCenter=f.currentPinchCenter=v(f.pinchGPoints[0].currentPos,f.pinchGPoints[1].currentPos))):e.releaseHandler&&!1===e.releaseHandler({eventSource:e,pointerType:c.type,position:m(i,e.element),buttons:h.buttons,insideElementPressed:c.insideElementPressed,insideElementReleased:c.insideElement,isTouchEvent:"touch"===c.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n));return g}function G(e,n,r){var o,i,a,u,l,c=s[e.hash],p=e.getActivePointersListByType(r[0].type),f=r.length;for(void 0!==n.buttons&&(p.buttons=n.buttons),o=0;o<f;o++)i=r[o],(a=p.getById(i.id))?(Object.prototype.hasOwnProperty.call(i,"isPrimary")&&(a.isPrimary=i.isPrimary),a.lastPos=a.currentPos,a.lastTime=a.currentTime,a.currentPos=i.currentPos,a.currentTime=i.currentTime):(i.captured=!1,i.insideElementPressed=!1,i.insideElement=!0,F(p,i));e.stopHandler&&"mouse"===r[0].type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout((function(){var t,o,i;t=e,o=n,i=r[0].type,t.stopHandler&&t.stopHandler({eventSource:t,pointerType:i,position:y(o,t.element),buttons:t.getActivePointersListByType(i).buttons,isTouchEvent:"touch"===i,originalEvent:o,preventDefaultAction:!1,userData:t.userData})}),e.stopDelay)),0===p.contacts?e.moveHandler&&!1===e.moveHandler({eventSource:e,pointerType:r[0].type,position:m(r[0].currentPos,e.element),buttons:p.buttons,isTouchEvent:"touch"===r[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n):1===p.contacts?(e.moveHandler&&(a=p.asArray()[0],!1===e.moveHandler({eventSource:e,pointerType:a.type,position:m(a.currentPos,e.element),buttons:p.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)),e.dragHandler&&(l=(a=p.asArray()[0]).currentPos.minus(a.lastPos),!1===e.dragHandler({eventSource:e,pointerType:a.type,position:m(a.currentPos,e.element),buttons:p.buttons,delta:l,speed:a.speed,direction:a.direction,shift:n.shiftKey,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n))):2===p.contacts&&(e.moveHandler&&(u=p.asArray(),!1===e.moveHandler({eventSource:e,pointerType:u[0].type,position:m(v(u[0].currentPos,u[1].currentPos),e.element),buttons:p.buttons,isTouchEvent:"touch"===u[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)),e.pinchHandler&&"touch"===r[0].type&&(l=c.pinchGPoints[0].currentPos.distanceTo(c.pinchGPoints[1].currentPos))!=c.currentPinchDist&&(c.lastPinchDist=c.currentPinchDist,c.currentPinchDist=l,c.lastPinchCenter=c.currentPinchCenter,c.currentPinchCenter=v(c.pinchGPoints[0].currentPos,c.pinchGPoints[1].currentPos),!1===e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:c.pinchGPoints,lastCenter:m(c.lastPinchCenter,e.element),center:m(c.currentPinchCenter,e.element),lastDistance:c.lastPinchDist,distance:c.currentPinchDist,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n)))}t.MouseTracker=function(e){i.push(this);var n=arguments;t.isPlainObject(e)||(e={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=t.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold||t.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold||t.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=e.dblClickTimeThreshold||t.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=e.dblClickDistThreshold||t.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=e.userData||null,this.stopDelay=e.stopDelay||50,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.nonPrimaryPressHandler=e.nonPrimaryPressHandler||null,this.releaseHandler=e.releaseHandler||null,this.nonPrimaryReleaseHandler=e.nonPrimaryReleaseHandler||null,this.moveHandler=e.moveHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dblClickHandler=e.dblClickHandler||null,this.dragHandler=e.dragHandler||null,this.dragEndHandler=e.dragEndHandler||null,this.pinchHandler=e.pinchHandler||null,this.stopHandler=e.stopHandler||null,this.keyDownHandler=e.keyDownHandler||null,this.keyUpHandler=e.keyUpHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var r=this;s[this.hash]={click:function(e){var n;n=e,r.clickHandler&&t.cancelEvent(n)},dblclick:function(e){var n;n=e,r.dblClickHandler&&t.cancelEvent(n)},keydown:function(e){!function(e,n){e.keyDownHandler&&(n=t.getEvent(n),e.keyDownHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData})||t.cancelEvent(n))}(r,e)},keyup:function(e){!function(e,n){e.keyUpHandler&&(n=t.getEvent(n),e.keyUpHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData})||t.cancelEvent(n))}(r,e)},keypress:function(e){!function(e,n){e.keyHandler&&(n=t.getEvent(n),e.keyHandler({eventSource:e,keyCode:n.keyCode?n.keyCode:n.charCode,ctrl:n.ctrlKey,shift:n.shiftKey,alt:n.altKey,meta:n.metaKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData})||t.cancelEvent(n))}(r,e)},focus:function(e){!function(e,n){e.focusHandler&&(n=t.getEvent(n),!1===e.focusHandler({eventSource:e,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n))}(r,e)},blur:function(e){!function(e,n){e.blurHandler&&(n=t.getEvent(n),!1===e.blurHandler({eventSource:e,originalEvent:n,preventDefaultAction:!1,userData:e.userData})&&t.cancelEvent(n))}(r,e)},wheel:function(t){var e;_(r,e=t,e)},mousewheel:function(t){b(r,t)},DOMMouseScroll:function(t){b(r,t)},MozMousePixelScroll:function(t){b(r,t)},mouseenter:function(e){!function(e,n){x(e,n=t.getEvent(n))}(r,e)},mouseleave:function(e){!function(e,n){S(e,n=t.getEvent(n))}(r,e)},mouseover:function(e){!function(e,n){(n=t.getEvent(n)).currentTarget===n.relatedTarget||w(n.currentTarget,n.relatedTarget)||x(e,n)}(r,e)},mouseout:function(e){!function(e,n){(n=t.getEvent(n)).currentTarget===n.relatedTarget||w(n.currentTarget,n.relatedTarget)||S(e,n)}(r,e)},mousedown:function(e){!function(e,n){U(e,n=t.getEvent(n),[{id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:g(n),currentTime:t.now()}],E(n.button))&&(t.stopEvent(n),f(e,"mouse")),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler)&&t.cancelEvent(n)}(r,e)},mouseup:function(t){O(r,t)},mouseupcaptured:function(e){!function(e,n){O(e,n),t.stopEvent(n)}(r,e)},mousemove:function(t){P(r,t)},mousemovecaptured:function(e){!function(e,n){P(e,n),t.stopEvent(n)}(r,e)},touchstart:function(e){!function(e,n){var r,o,s,a,u=n.changedTouches.length,l=[],c=e.getActivePointersListByType("touch");for(r=t.now(),c.getLength()>n.touches.length-u&&(t.console.warn("Tracked touch contact count doesn't match event.touches.length. Removing all tracked touch pointers."),C(e,n,c)),o=0;o<u;o++)l.push({id:n.changedTouches[o].identifier,type:"touch",currentPos:g(n.changedTouches[o]),currentTime:r});for(z(e,n,l),o=0;o<i.length;o++)if(i[o]!==e&&i[o].isTracking()&&w(i[o].element,e.element)){for(a=[],s=0;s<u;s++)a.push({id:n.changedTouches[s].identifier,type:"touch",currentPos:g(n.changedTouches[s]),currentTime:r});z(i[o],n,a)}U(e,n,l,0)&&(t.stopEvent(n),f(e,"touch",u)),t.cancelEvent(n)}(r,e)},touchend:function(t){I(r,t)},touchendcaptured:function(e){!function(e,n){I(e,n),t.stopEvent(n)}(r,e)},touchmove:function(t){T(r,t)},touchmovecaptured:function(e){!function(e,n){T(e,n),t.stopEvent(n)}(r,e)},touchcancel:function(t){var e,n,o;n=t,o=(e=r).getActivePointersListByType("touch"),C(e,n,o)},gesturestart:function(t){!function(t){t.stopPropagation(),t.preventDefault()}(t)},gesturechange:function(t){!function(t){t.stopPropagation(),t.preventDefault()}(t)},pointerover:function(t){R(r,t)},MSPointerOver:function(t){R(r,t)},pointerout:function(t){M(r,t)},MSPointerOut:function(t){M(r,t)},pointerdown:function(t){A(r,t)},MSPointerDown:function(t){A(r,t)},pointerup:function(t){N(r,t)},MSPointerUp:function(t){N(r,t)},pointermove:function(t){L(r,t)},MSPointerMove:function(t){L(r,t)},pointercancel:function(t){j(r,t)},MSPointerCancel:function(t){j(r,t)},pointerupcaptured:function(e){!function(e,n){e.getActivePointersListByType(d(n)).getById(n.pointerId)&&k(e,n),t.stopEvent(n)}(r,e)},pointermovecaptured:function(e){!function(e,n){e.getActivePointersListByType(d(n)).getById(n.pointerId)&&D(e,n),t.stopEvent(n)}(r,e)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null},e.startDisabled||this.setTracking(!0)},t.MouseTracker.prototype={destroy:function(){var t;for(c(this),this.element=null,t=0;t<i.length;t++)if(i[t]===this){i.splice(t,1);break}s[this.hash]=null,delete s[this.hash]},isTracking:function(){return s[this.hash].tracking},setTracking:function(e){return(e?function(e){var n,r,o=s[e.hash];if(!o.tracking){for(r=0;r<t.MouseTracker.subscribeEvents.length;r++)n=t.MouseTracker.subscribeEvents[r],t.addEvent(e.element,n,o[n],!1);l(e),o.tracking=!0}}:c)(this),this},getActivePointersListsExceptType:function(t){for(var e=s[this.hash],n=[],r=0;r<e.activePointersLists.length;++r)e.activePointersLists[r].type!==t&&n.push(e.activePointersLists[r]);return n},getActivePointersListByType:function(e){var n,r,o=s[this.hash],i=o.activePointersLists.length;for(n=0;n<i;n++)if(o.activePointersLists[n].type===e)return o.activePointersLists[n];return r=new t.MouseTracker.GesturePointList(e),o.activePointersLists.push(r),r},getActivePointerCount:function(){var t,e=s[this.hash],n=e.activePointersLists.length,r=0;for(t=0;t<n;t++)r+=e.activePointersLists[t].getLength();return r},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},t.MouseTracker.resetAllMouseTrackers=function(){for(var t=0;t<i.length;t++)i[t].isTracking()&&(i[t].setTracking(!1),i[t].setTracking(!0))},t.MouseTracker.gesturePointVelocityTracker=(e=[],r=n=0,{addPoint:function(o,i){var s=a(o,i);e.push({guid:s,gPoint:i,lastPos:i.currentPos}),1===e.length&&(r=t.now(),n=window.setInterval(u,50))},removePoint:function(t,r){var o,i=a(t,r),s=e.length;for(o=0;o<s;o++)if(e[o].guid===i){e.splice(o,1),0==--s&&window.clearInterval(n);break}}}),t.MouseTracker.captureElement=document,t.MouseTracker.wheelEventName=t.Browser.vendor==t.BROWSERS.IE&&8<t.Browser.version||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",t.MouseTracker.supportsMouseCapture=(o=document.createElement("div"),t.isFunction(o.setCapture)&&t.isFunction(o.releaseCapture)),t.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",t.MouseTracker.wheelEventName],"DOMMouseScroll"==t.MouseTracker.wheelEventName&&t.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent&&(window.navigator.pointerEnabled||t.Browser.vendor!==t.BROWSERS.IE)?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),t.MouseTracker.unprefixedPointerEvents=!0,navigator.maxTouchPoints?t.MouseTracker.maxTouchPoints=navigator.maxTouchPoints:t.MouseTracker.maxTouchPoints=0,t.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent&&window.navigator.msPointerEnabled?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),t.MouseTracker.unprefixedPointerEvents=!1,navigator.msMaxTouchPoints?t.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints:t.MouseTracker.maxTouchPoints=0,t.MouseTracker.haveMouseEnter=!1):(t.MouseTracker.havePointerEvents=!1,t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<9?(t.MouseTracker.subscribeEvents.push("mouseenter","mouseleave"),t.MouseTracker.haveMouseEnter=!0):(t.MouseTracker.subscribeEvents.push("mouseover","mouseout"),t.MouseTracker.haveMouseEnter=!1),t.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove"),"ontouchstart"in window&&t.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&t.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),t.MouseTracker.mousePointerId="legacy-mouse",t.MouseTracker.maxTouchPoints=10),t.MouseTracker.GesturePointList=function(t){this._gPoints=[],this.type=t,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},t.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(t){return this._gPoints.push(t)},removeById:function(t){var e,n=this._gPoints.length;for(e=0;e<n;e++)if(this._gPoints[e].id===t){this._gPoints.splice(e,1);break}return this._gPoints.length},getByIndex:function(t){return t<this._gPoints.length?this._gPoints[t]:null},getById:function(t){var e,n=this._gPoints.length;for(e=0;e<n;e++)if(this._gPoints[e].id===t)return this._gPoints[e];return null},getPrimary:function(t){var e,n=this._gPoints.length;for(e=0;e<n;e++)if(this._gPoints[e].isPrimary)return this._gPoints[e];return null},addContact:function(){++this.contacts,1<this.contacts&&("mouse"===this.type||"pen"===this.type)&&(this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};var q=function(){try{return window.self!==window.top}catch(t){return!0}}();function W(t){try{return t.addEventListener&&t.removeEventListener}catch(t){return!1}}}(OpenSeadragon),o=OpenSeadragon,o.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},o.Control=function(t,e,n){var r=t.parentNode;"number"==typeof e&&(o.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),e={anchor:e}),e.attachToViewer=void 0===e.attachToViewer||e.attachToViewer,this.autoFade=void 0===e.autoFade||e.autoFade,this.element=t,this.anchor=e.anchor,this.container=n,this.anchor==o.ControlAnchor.ABSOLUTE?(this.wrapper=o.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof e.top?e.top+"px":e.top,this.wrapper.style.left="number"==typeof e.left?e.left+"px":e.left,this.wrapper.style.height="number"==typeof e.height?e.height+"px":e.height,this.wrapper.style.width="number"==typeof e.width?e.width+"px":e.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=o.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==o.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),e.attachToViewer?this.anchor==o.ControlAnchor.TOP_RIGHT||this.anchor==o.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},o.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(t){this.wrapper.style.display=t?this.anchor==o.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(t){this.element[o.SIGNAL]&&o.Browser.vendor==o.BROWSERS.IE?o.setElementOpacity(this.element,t,!0):o.setElementOpacity(this.wrapper,t,!0)}},function(t){function e(t,e){var n,r=t.controls;for(n=r.length-1;0<=n;n--)if(r[n].element==e)return n;return-1}t.ControlDock=function(e){var n,r,o=["topleft","topright","bottomright","bottomleft"];for(t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(1e6*Math.random()),container:t.makeNeutralElement("div"),controls:[]},e),this.container.onsubmit=function(){return!1},this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),r=0;r<o.length;r++)n=o[r],this.controls[n]=t.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(n,r){var o=null;if(!(0<=e(this,n=t.getElement(n)))){switch(r.anchor){case t.ControlAnchor.TOP_RIGHT:o=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:o=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:o=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:o=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.ABSOLUTE:o=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case t.ControlAnchor.NONE:o=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new t.Control(n,r,o)),n.style.display="inline-block"}},removeControl:function(n){var r=e(this,n=t.getElement(n));return 0<=r&&(this.controls[r].destroy(),this.controls.splice(r,1)),this},clearControls:function(){for(;0<this.controls.length;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var t;for(t=this.controls.length-1;0<=t;t--)if(this.controls[t].isVisible())return!0;return!1},setControlsEnabled:function(t){var e;for(e=this.controls.length-1;0<=e;e--)this.controls[e].setVisible(t);return this}}}(OpenSeadragon),OpenSeadragon.Placement=OpenSeadragon.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}}),function(t){var e={},n=1;function r(e){return e=t.getElement(e),new t.Point(0===e.clientWidth?1:e.clientWidth,0===e.clientHeight?1:e.clientHeight)}function o(e,n){if(n instanceof t.Overlay)return n;var r=null;if(n.element)r=t.getElement(n.element);else{var o=n.id?n.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(r=t.getElement(n.id))||((r=document.createElement("a")).href="#/overlay/"+o),r.id=o,t.addClass(r,n.className?n.className:"openseadragon-overlay")}var i=n.location,s=n.width,a=n.height;if(!i){var u=n.x,l=n.y;if(void 0!==n.px){var c=e.viewport.imageToViewportRectangle(new t.Rect(n.px,n.py,s||0,a||0));u=c.x,l=c.y,s=void 0!==s?c.width:void 0,a=void 0!==a?c.height:void 0}i=new t.Point(u,l)}var p=n.placement;return p&&"string"===t.type(p)&&(p=t.Placement[n.placement.toUpperCase()]),new t.Overlay({element:r,location:i,placement:p,onDraw:n.onDraw,checkResize:n.checkResize,width:s,height:a,rotationMode:n.rotationMode})}function i(t,e){var n;for(n=t.length-1;0<=n;n--)if(t[n].element===e)return n;return-1}function s(e,n){return t.requestAnimationFrame((function(){n(e)}))}function a(e){t.requestAnimationFrame((function(){!function(e){var n,r;if(e.controlsShouldFade){for(n=1-(t.now()-e.controlsFadeBeginTime)/e.controlsFadeLength,n=Math.min(1,n),n=Math.max(0,n),r=e.controls.length-1;0<=r;r--)e.controls[r].autoFade&&e.controls[r].setOpacity(n);0<n&&a(e)}}(e)}))}function u(e){e.autoHideControls&&(e.controlsShouldFade=!0,e.controlsFadeBeginTime=t.now()+e.controlsFadeDelay,window.setTimeout((function(){a(e)}),e.controlsFadeDelay))}function l(t){var e;for(t.controlsShouldFade=!1,e=t.controls.length-1;0<=e;e--)t.controls[e].setOpacity(1)}function c(){l(this)}function p(){u(this)}function f(e){var n={originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction,preventVerticalPan:e.preventVerticalPan,preventHorizontalPan:e.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 38:return n.preventVerticalPan||(e.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 40:return n.preventVerticalPan||(e.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),!1;case 37:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;case 39:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),!1;default:return!0}}function h(e){var n={originalEvent:e.originalEvent,preventDefaultAction:e.preventDefaultAction,preventVerticalPan:e.preventVerticalPan,preventHorizontalPan:e.preventHorizontalPan};if(this.raiseEvent("canvas-key",n),n.preventDefaultAction||e.ctrl||e.alt||e.meta)return!0;switch(e.keyCode){case 43:case 61:return this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),!1;case 45:return this.viewport.zoomBy(.9),this.viewport.applyConstraints(),!1;case 48:return this.viewport.goHome(),this.viewport.applyConstraints(),!1;case 119:case 87:return n.preventVerticalPan||(e.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,-40))),this.viewport.applyConstraints()),!1;case 115:case 83:return n.preventVerticalPan||(e.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,40))),this.viewport.applyConstraints()),!1;case 97:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(-40,0))),this.viewport.applyConstraints()),!1;case 100:return n.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(40,0))),this.viewport.applyConstraints()),!1;case 114:return this.viewport.flipped?this.viewport.setRotation(t.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)):this.viewport.setRotation(t.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 82:return this.viewport.flipped?this.viewport.setRotation(t.positiveModulo(this.viewport.degrees+this.rotationIncrement,360)):this.viewport.setRotation(t.positiveModulo(this.viewport.degrees-this.rotationIncrement,360)),this.viewport.applyConstraints(),!1;case 102:return this.viewport.toggleFlip(),!1;default:return!0}}function d(t){var e;document.activeElement==this.canvas||this.canvas.focus(),this.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x);var n={tracker:t.eventSource,position:t.position,quick:t.quick,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction};this.raiseEvent("canvas-click",n),!n.preventDefaultAction&&this.viewport&&t.quick&&(e=this.gestureSettingsByDeviceType(t.pointerType)).clickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,e.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints())}function g(t){var e,n={tracker:t.eventSource,position:t.position,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction};this.raiseEvent("canvas-double-click",n),!n.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,e.zoomToRefPoint?this.viewport.pointFromPixel(t.position,!0):null),this.viewport.applyConstraints())}function y(t){var e,n={tracker:t.eventSource,position:t.position,delta:t.delta,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction};if(this.raiseEvent("canvas-drag",n),!n.preventDefaultAction&&this.viewport){if(e=this.gestureSettingsByDeviceType(t.pointerType),this.panHorizontal||(t.delta.x=0),this.panVertical||(t.delta.y=0),this.viewport.flipped&&(t.delta.x=-t.delta.x),this.constrainDuringPan){var r=this.viewport.deltaPointsFromPixels(t.delta.negate());this.viewport.centerSpringX.target.value+=r.x,this.viewport.centerSpringY.target.value+=r.y;var o=this.viewport.getBounds(),i=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=r.x,this.viewport.centerSpringY.target.value-=r.y,o.x!=i.x&&(t.delta.x=0),o.y!=i.y&&(t.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(t.delta.negate()),e.flickEnabled&&!this.constrainDuringPan)}}function m(e){if(!e.preventDefaultAction&&this.viewport){var n=this.gestureSettingsByDeviceType(e.pointerType);if(n.flickEnabled&&e.speed>=n.flickMinSpeed){var r=0;this.panHorizontal&&(r=n.flickMomentum*e.speed*Math.cos(e.direction));var o=0;this.panVertical&&(o=n.flickMomentum*e.speed*Math.sin(e.direction));var i=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),s=this.viewport.pointFromPixel(new t.Point(i.x-r,i.y-o));this.viewport.panTo(s,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:e.eventSource,position:e.position,speed:e.speed,direction:e.direction,shift:e.shift,originalEvent:e.originalEvent})}function v(t){this.raiseEvent("canvas-enter",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function b(e){window.location!=window.parent.location&&t.MouseTracker.resetAllMouseTrackers(),this.raiseEvent("canvas-exit",{tracker:e.eventSource,pointerType:e.pointerType,position:e.position,buttons:e.buttons,pointers:e.pointers,insideElementPressed:e.insideElementPressed,buttonDownAny:e.buttonDownAny,originalEvent:e.originalEvent})}function _(t){this.raiseEvent("canvas-press",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent})}function w(t){this.raiseEvent("canvas-release",{tracker:t.eventSource,pointerType:t.pointerType,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent})}function x(t){this.raiseEvent("canvas-nonprimary-press",{tracker:t.eventSource,position:t.position,pointerType:t.pointerType,button:t.button,buttons:t.buttons,originalEvent:t.originalEvent})}function S(t){this.raiseEvent("canvas-nonprimary-release",{tracker:t.eventSource,position:t.position,pointerType:t.pointerType,button:t.button,buttons:t.buttons,originalEvent:t.originalEvent})}function E(t){var e,n,r;if(!t.preventDefaultAction&&this.viewport&&((e=this.gestureSettingsByDeviceType(t.pointerType)).pinchToZoom&&(n=this.viewport.pointFromPixel(t.center,!0),r=this.viewport.pointFromPixel(t.lastCenter,!0).minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(t.distance/t.lastDistance,n,!0),e.zoomToRefPoint&&this.viewport.panBy(r,!0),this.viewport.applyConstraints()),e.pinchRotate)){var o=Math.atan2(t.gesturePoints[0].currentPos.y-t.gesturePoints[1].currentPos.y,t.gesturePoints[0].currentPos.x-t.gesturePoints[1].currentPos.x),i=Math.atan2(t.gesturePoints[0].lastPos.y-t.gesturePoints[1].lastPos.y,t.gesturePoints[0].lastPos.x-t.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-i)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:t.eventSource,gesturePoints:t.gesturePoints,lastCenter:t.lastCenter,center:t.center,lastDistance:t.lastDistance,distance:t.distance,shift:t.shift,originalEvent:t.originalEvent}),!1}function O(e){var n,r,o;if((o=t.now())-this._lastScrollTime>this.minScrollDeltaTime){if(this._lastScrollTime=o,this.viewport.flipped&&(e.position.x=this.viewport.getContainerSize().x-e.position.x),!e.preventDefaultAction&&this.viewport&&(n=this.gestureSettingsByDeviceType(e.pointerType)).scrollToZoom&&(r=Math.pow(this.zoomPerScroll,e.scroll),this.viewport.zoomBy(r,n.zoomToRefPoint?this.viewport.pointFromPixel(e.position,!0):null),this.viewport.applyConstraints()),this.raiseEvent("canvas-scroll",{tracker:e.eventSource,position:e.position,scroll:e.scroll,shift:e.shift,originalEvent:e.originalEvent}),n&&n.scrollToZoom)return!1}else if((n=this.gestureSettingsByDeviceType(e.pointerType))&&n.scrollToZoom)return!1}function P(t){e[this.hash].mouseInside=!0,l(this),this.raiseEvent("container-enter",{tracker:t.eventSource,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function C(t){t.pointers<1&&(e[this.hash].mouseInside=!1,e[this.hash].animating||u(this)),this.raiseEvent("container-exit",{tracker:t.eventSource,position:t.position,buttons:t.buttons,pointers:t.pointers,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function I(t){!function(t){if(!t._opening){if(t.autoResize){var n=r(t.container),o=e[t.hash].prevContainerSize;if(!n.equals(o)){var i=t.viewport;if(t.preserveImageSizeOnResize){var s=o.x/n.x,a=i.getZoom()*s,c=i.getCenter();i.resize(n,!1),i.zoomTo(a,null,!0),i.panTo(c,!0)}else{var p=i.getBounds();i.resize(n,!0),i.fitBoundsWithConstraints(p,!0)}e[t.hash].prevContainerSize=n,e[t.hash].forceRedraw=!0}}var f=t.viewport.update(),h=t.world.update()||f;f&&t.raiseEvent("viewport-change"),t.referenceStrip&&(h=t.referenceStrip.update(t.viewport)||h),!e[t.hash].animating&&h&&(t.raiseEvent("animation-start"),l(t)),(h||e[t.hash].forceRedraw||t.world.needsDraw())&&(!function(t){t.imageLoader.clear(),t.drawer.clear(),t.world.draw(),t.raiseEvent("update-viewport",{})}(t),t._drawOverlays(),t.navigator&&t.navigator.update(t.viewport),e[t.hash].forceRedraw=!1,h&&t.raiseEvent("animation")),e[t.hash].animating&&!h&&(t.raiseEvent("animation-finish"),e[t.hash].mouseInside||u(t)),e[t.hash].animating=h}}(t),t.isOpen()?t._updateRequestId=s(t,I):t._updateRequestId=!1}function T(t,e){return t?t+e:e}function R(){e[this.hash].lastZoomTime=t.now(),e[this.hash].zoomFactor=this.zoomPerSecond,e[this.hash].zooming=!0,N(this)}function M(){e[this.hash].lastZoomTime=t.now(),e[this.hash].zoomFactor=1/this.zoomPerSecond,e[this.hash].zooming=!0,N(this)}function A(){e[this.hash].zooming=!1}function N(e){t.requestAnimationFrame(t.delegate(e,k))}function k(){var n,r,o;e[this.hash].zooming&&this.viewport&&(r=(n=t.now())-e[this.hash].lastZoomTime,o=Math.pow(e[this.hash].zoomFactor,r/1e3),this.viewport.zoomBy(o),this.viewport.applyConstraints(),e[this.hash].lastZoomTime=n,N(this))}function L(){this.viewport&&(e[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function D(){this.viewport&&(e[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function j(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function F(){this.viewport&&this.viewport.goHome()}function B(){this.isFullPage()&&!t.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function z(){if(this.viewport){var e=this.viewport.getRotation();e=this.viewport.flipped?t.positiveModulo(e+this.rotationIncrement,360):t.positiveModulo(e-this.rotationIncrement,360),this.viewport.setRotation(e)}}function V(){if(this.viewport){var e=this.viewport.getRotation();e=this.viewport.flipped?t.positiveModulo(e-this.rotationIncrement,360):t.positiveModulo(e+this.rotationIncrement,360),this.viewport.setRotation(e)}}function U(){this.viewport.toggleFlip()}function H(){var t=this._sequenceIndex-1;this.navPrevNextWrap&&t<0&&(t+=this.tileSources.length),this.goToPage(t)}function G(){var t=this._sequenceIndex+1;this.navPrevNextWrap&&t>=this.tileSources.length&&(t=0),this.goToPage(t)}t.Viewer=function(o){var i,a=arguments,l=this;if(t.isPlainObject(o)||(o={id:a[0],xmlPath:1<a.length?a[1]:void 0,prefixUrl:2<a.length?a[2]:void 0,controls:3<a.length?a[3]:void 0,overlays:4<a.length?a[4]:void 0}),o.config&&(t.extend(!0,o,o.config),delete o.config),t.extend(!0,this,{id:o.id,hash:o.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},t.DEFAULT_SETTINGS,o),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==e[this.hash]&&t.console.warn("Hash "+this.hash+" has already been used."),e[this.hash]={fsBoundsDelta:new t.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._lastScrollTime=t.now(),t.EventSource.call(this),this.addHandler("open-failed",(function(e){var n=t.getString("Errors.OpenFailed",e.eventSource,e.message);l._showMessage(n)})),t.ControlDock.call(this,o),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=t.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px"}(this.canvas.style),t.setElementTouchActionNone(this.canvas),""!==o.tabIndex&&(this.canvas.tabIndex=void 0===o.tabIndex?0:o.tabIndex),this.container.className="openseadragon-container",function(t){t.width="100%",t.height="100%",t.position="relative",t.overflow="hidden",t.left="0px",t.top="0px",t.textAlign="left"}(this.container.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new t.MouseTracker({element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:t.delegate(this,f),keyHandler:t.delegate(this,h),clickHandler:t.delegate(this,d),dblClickHandler:t.delegate(this,g),dragHandler:t.delegate(this,y),dragEndHandler:t.delegate(this,m),enterHandler:t.delegate(this,v),exitHandler:t.delegate(this,b),pressHandler:t.delegate(this,_),releaseHandler:t.delegate(this,w),nonPrimaryPressHandler:t.delegate(this,x),nonPrimaryReleaseHandler:t.delegate(this,S),scrollHandler:t.delegate(this,O),pinchHandler:t.delegate(this,E)}),this.outerTracker=new t.MouseTracker({element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:t.delegate(this,P),exitHandler:t.delegate(this,C)}),this.toolbar&&(this.toolbar=new t.ControlDock({element:this.toolbar})),this.bindStandardControls(),e[this.hash].prevContainerSize=r(this.container),this.world=new t.World({viewer:this}),this.world.addHandler("add-item",(function(t){l.source=l.world.getItemAt(0).source,e[l.hash].forceRedraw=!0,l._updateRequestId||(l._updateRequestId=s(l,I))})),this.world.addHandler("remove-item",(function(t){l.world.getItemCount()?l.source=l.world.getItemAt(0).source:l.source=null,e[l.hash].forceRedraw=!0})),this.world.addHandler("metrics-change",(function(t){l.viewport&&l.viewport._setContentBounds(l.world.getHomeBounds(),l.world.getContentFactor())})),this.world.addHandler("item-index-change",(function(t){l.source=l.world.getItemAt(0).source})),this.viewport=new t.Viewport({containerSize:e[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new t.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:o.timeout}),this.tileCache=new t.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new t.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=t.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(i=this.buttons.buttons.indexOf(this.rotateLeft),this.buttons.buttons.splice(i,1),this.buttons.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(i=this.buttons.buttons.indexOf(this.rotateRight),this.buttons.buttons.splice(i,1),this.buttons.element.removeChild(this.rotateRight.element))),this.showNavigator&&(this.navigator=new t.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),i=0;i<this.customControls.length;i++)this.addControl(this.customControls[i].id,{anchor:this.customControls[i].anchor});t.requestAnimationFrame((function(){u(l)})),void 0===this.imageSmoothingEnabled||this.imageSmoothingEnabled||this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled)},t.extend(t.Viewer.prototype,t.EventSource.prototype,t.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(e){return t.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(e)},openTileSource:function(e){return t.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(e)},open:function(e,n){var r=this;if(this.close(),e)if(this.sequenceMode&&t.isArray(e))this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0===n||isNaN(n)||(this.initialPage=n),this.tileSources=e,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex);else if(t.isArray(e)||(e=[e]),e.length){var i=function(){if(l+c===u)if(l){!r._firstOpen&&r.preserveViewport||(r.viewport.goHome(!0),r.viewport.update()),r._firstOpen=!1;var t=e[0];if(t.tileSource&&(t=t.tileSource),r.overlays&&!r.preserveOverlays)for(var n=0;n<r.overlays.length;n++)r.currentOverlays[n]=o(r,r.overlays[n]);r._drawOverlays(),r._opening=!1,r.raiseEvent("open",{source:t})}else r._opening=!1,r.raiseEvent("open-failed",a)},s=function(e){t.isPlainObject(e)&&e.tileSource||(e={tileSource:e}),void 0!==e.index&&(t.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete e.index),void 0===e.collectionImmediately&&(e.collectionImmediately=!0);var n=e.success;e.success=function(t){if(l++,e.tileSource.overlays)for(var o=0;o<e.tileSource.overlays.length;o++)r.addOverlay(e.tileSource.overlays[o]);n&&n(t),i()};var o=e.error;e.error=function(t){c++,a=a||t,o&&o(t),i()},r.addTiledImage(e)};this._opening=!0;for(var a,u=e.length,l=0,c=0,p=0;p<e.length;p++)s(e[p]);return this}},close:function(){return e[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),e[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(e[this.hash]){if(this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(t.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),e[this.hash]=null,delete e[this.hash],this.canvas=null,this.container=null,this.element=null}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(t){return this.innerTracker.setTracking(t),this.outerTracker.setTracking(t),this.raiseEvent("mouse-enabled",{enabled:t}),this},areControlsEnabled:function(){var t,e=this.controls.length;for(t=0;t<this.controls.length;t++)e=e&&this.controls[t].isVisible();return e},setControlsEnabled:function(t){return(t?l:u)(this),this.raiseEvent("controls-enabled",{enabled:t}),this},setDebugMode:function(t){for(var e=0;e<this.world.getItemCount();e++)this.world.getItemAt(e).debugMode=t;this.debugMode=t,this.forceRedraw()},isFullPage:function(){return e[this.hash].fullPage},setFullPage:function(n){var r,o,i=document.body,s=i.style,a=document.documentElement.style,u=this;if(n==this.isFullPage())return this;var l={fullPage:n,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",l),l.preventDefaultAction)return this;if(n){for(this.elementSize=t.getElementSize(this.element),this.pageScroll=t.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=s.margin,this.docMargin=a.margin,s.margin="0",a.margin="0",this.bodyPadding=s.padding,this.docPadding=a.padding,s.padding="0",a.padding="0",this.bodyWidth=s.width,this.docWidth=a.width,s.width="100%",a.width="100%",this.bodyHeight=s.height,this.docHeight=a.height,s.height="100%",a.height="100%",this.previousBody=[],e[this.hash].prevElementParent=this.element.parentNode,e[this.hash].prevNextSibling=this.element.nextSibling,e[this.hash].prevElementWidth=this.element.style.width,e[this.hash].prevElementHeight=this.element.style.height,r=i.childNodes.length,o=0;o<r;o++)this.previousBody.push(i.childNodes[0]),i.removeChild(i.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,i.appendChild(this.toolbar.element),t.addClass(this.toolbar.element,"fullpage")),t.addClass(this.element,"fullpage"),i.appendChild(this.element),this.element.style.height=t.getWindowSize().y+"px",this.element.style.width=t.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=t.getElementSize(this.element).y-t.getElementSize(this.toolbar.element).y+"px"),e[this.hash].fullPage=!0,t.delegate(this,P)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,s.margin=this.bodyMargin,a.margin=this.docMargin,s.padding=this.bodyPadding,a.padding=this.docPadding,s.width=this.bodyWidth,a.width=this.docWidth,s.height=this.bodyHeight,a.height=this.docHeight,i.removeChild(this.element),r=this.previousBody.length,o=0;o<r;o++)i.appendChild(this.previousBody.shift());t.removeClass(this.element,"fullpage"),e[this.hash].prevElementParent.insertBefore(this.element,e[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(i.removeChild(this.toolbar.element),t.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=e[this.hash].prevElementWidth,this.element.style.height=e[this.hash].prevElementHeight;var c=0;t.requestAnimationFrame((function e(){t.setPageScroll(u.pageScroll);var n=t.getPageScroll();++c<10&&(n.x!==u.pageScroll.x||n.y!==u.pageScroll.y)&&t.requestAnimationFrame(e)})),e[this.hash].fullPage=!1,t.delegate(this,C)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:n}),this},setFullScreen:function(e){var n=this;if(!t.supportsFullScreen)return this.setFullPage(e);if(t.isFullScreen()===e)return this;var r={fullScreen:e,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",r),r.preventDefaultAction)return this;if(e){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var o=function e(){var r=t.isFullScreen();r||(t.removeEvent(document,t.fullScreenEventName,e),t.removeEvent(document,t.fullScreenErrorEventName,e),n.setFullPage(!1),n.isFullPage()&&(n.element.style.width=n.fullPageStyleWidth,n.element.style.height=n.fullPageStyleHeight)),n.navigator&&n.viewport&&setTimeout((function(){n.navigator.update(n.viewport)})),n.raiseEvent("full-screen",{fullScreen:r})};t.addEvent(document,t.fullScreenEventName,o),t.addEvent(document,t.fullScreenErrorEventName,o),t.requestFullScreen(document.body)}else t.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(t){return this.container.style.visibility=t?"":"hidden",this.raiseEvent("visible",{visible:t}),this},addTiledImage:function(e){t.console.assert(e,"[Viewer.addTiledImage] options is required"),t.console.assert(e.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),t.console.assert(!e.replace||-1<e.index&&e.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var n=this;e.replace&&(e.replaceItem=n.world.getItemAt(e.index)),this._hideMessage(),void 0===e.placeholderFillStyle&&(e.placeholderFillStyle=this.placeholderFillStyle),void 0===e.opacity&&(e.opacity=this.opacity),void 0===e.preload&&(e.preload=this.preload),void 0===e.compositeOperation&&(e.compositeOperation=this.compositeOperation),void 0===e.crossOriginPolicy&&(e.crossOriginPolicy=void 0!==e.tileSource.crossOriginPolicy?e.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===e.ajaxWithCredentials&&(e.ajaxWithCredentials=this.ajaxWithCredentials),void 0===e.loadTilesWithAjax&&(e.loadTilesWithAjax=this.loadTilesWithAjax),void 0===e.ajaxHeaders||null===e.ajaxHeaders?e.ajaxHeaders=this.ajaxHeaders:t.isPlainObject(e.ajaxHeaders)&&t.isPlainObject(this.ajaxHeaders)&&(e.ajaxHeaders=t.extend({},this.ajaxHeaders,e.ajaxHeaders));var r={options:e};function o(t){for(var o=0;o<n._loadQueue.length;o++)if(n._loadQueue[o]===r){n._loadQueue.splice(o,1);break}0===n._loadQueue.length&&i(r),n.raiseEvent("add-item-failed",t),e.error&&e.error(t)}function i(t){n.collectionMode&&(n.world.arrange({immediately:t.options.collectionImmediately,rows:n.collectionRows,columns:n.collectionColumns,layout:n.collectionLayout,tileSize:n.collectionTileSize,tileMargin:n.collectionTileMargin}),n.world.setAutoRefigureSizes(!0))}function s(){for(var e,r,o;n._loadQueue.length&&(e=n._loadQueue[0]).tileSource;){if(n._loadQueue.splice(0,1),e.options.replace){var s=n.world.getIndexOfItem(e.options.replaceItem);-1!=s&&(e.options.index=s),n.world.removeItem(e.options.replaceItem)}r=new t.TiledImage({viewer:n,source:e.tileSource,viewport:n.viewport,drawer:n.drawer,tileCache:n.tileCache,imageLoader:n.imageLoader,x:e.options.x,y:e.options.y,width:e.options.width,height:e.options.height,fitBounds:e.options.fitBounds,fitBoundsPlacement:e.options.fitBoundsPlacement,clip:e.options.clip,placeholderFillStyle:e.options.placeholderFillStyle,opacity:e.options.opacity,preload:e.options.preload,degrees:e.options.degrees,compositeOperation:e.options.compositeOperation,springStiffness:n.springStiffness,animationTime:n.animationTime,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,smoothTileEdgesMinZoom:n.smoothTileEdgesMinZoom,iOSDevice:n.iOSDevice,crossOriginPolicy:e.options.crossOriginPolicy,ajaxWithCredentials:e.options.ajaxWithCredentials,loadTilesWithAjax:e.options.loadTilesWithAjax,ajaxHeaders:e.options.ajaxHeaders,debugMode:n.debugMode}),n.collectionMode&&n.world.setAutoRefigureSizes(!1),n.world.addItem(r,{index:e.options.index}),0===n._loadQueue.length&&i(e),1!==n.world.getItemCount()||n.preserveViewport||n.viewport.goHome(!0),n.navigator&&(o=t.extend({},e.options,{replace:!1,originalTiledImage:r,tileSource:e.tileSource}),n.navigator.addTiledImage(o)),e.options.success&&e.options.success({item:r})}}t.isArray(e.tileSource)?setTimeout((function(){o({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:e.tileSource,options:e})})):(this._loadQueue.push(r),function(e,n,r,o,i){var s=e;if("string"==t.type(n))if(n.match(/^\s*<.*>\s*$/))n=t.parseXml(n);else if(n.match(/^\s*[\{\[].*[\}\]]\s*$/))try{var a=t.parseJSON(n);n=a}catch(a){}function u(t,e){t.ready?o(t):(t.addHandler("ready",(function(){o(t)})),t.addHandler("open-failed",(function(t){i({message:t.message,source:e})})))}setTimeout((function(){if("string"==t.type(n))(n=new t.TileSource({url:n,crossOriginPolicy:void 0!==r.crossOriginPolicy?r.crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,ajaxHeaders:e.ajaxHeaders,useCanvas:e.useCanvas,success:function(t){o(t.tileSource)}})).addHandler("open-failed",(function(t){i(t)}));else if(t.isPlainObject(n)||n.nodeType)if(void 0!==n.crossOriginPolicy||void 0===r.crossOriginPolicy&&void 0===e.crossOriginPolicy||(n.crossOriginPolicy=void 0!==r.crossOriginPolicy?r.crossOriginPolicy:e.crossOriginPolicy),void 0===n.ajaxWithCredentials&&(n.ajaxWithCredentials=e.ajaxWithCredentials),void 0===n.useCanvas&&(n.useCanvas=e.useCanvas),t.isFunction(n.getTileUrl)){var a=new t.TileSource(n);a.getTileUrl=n.getTileUrl,o(a)}else{var l=t.TileSource.determineType(s,n);if(!l)return void i({message:"Unable to load TileSource",source:n});var c=l.prototype.configure.apply(s,[n]);u(new l(c),n)}else u(n,n)}))}(this,e.tileSource,e,(function(t){r.tileSource=t,s()}),(function(t){t.options=e,o(t),s()})))},addSimpleImage:function(e){t.console.assert(e,"[Viewer.addSimpleImage] options is required"),t.console.assert(e.url,"[Viewer.addSimpleImage] options.url is required");var n=t.extend({},e,{tileSource:{type:"image",url:e.url}});delete n.url,this.addTiledImage(n)},addLayer:function(e){var n=this;t.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var r=t.extend({},e,{success:function(t){n.raiseEvent("add-layer",{options:e,drawer:t.item})},error:function(t){n.raiseEvent("add-layer-failed",t)}});return this.addTiledImage(r),this},getLayerAtLevel:function(e){return t.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(e)},getLevelOfLayer:function(e){return t.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(e)},getLayersCount:function(){return t.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(e,n){return t.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(e,n)},removeLayer:function(e){return t.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(e)},forceRedraw:function(){return e[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var e=t.delegate(this,c),n=t.delegate(this,p),r=t.delegate(this,G),o=t.delegate(this,H),i=this.navImages,s=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(s=!1),this.previousButton=new t.Button({element:this.previousButton?t.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.PreviousPage"),srcRest:T(this.prefixUrl,i.previous.REST),srcGroup:T(this.prefixUrl,i.previous.GROUP),srcHover:T(this.prefixUrl,i.previous.HOVER),srcDown:T(this.prefixUrl,i.previous.DOWN),onRelease:o,onFocus:e,onBlur:n}),this.nextButton=new t.Button({element:this.nextButton?t.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.NextPage"),srcRest:T(this.prefixUrl,i.next.REST),srcGroup:T(this.prefixUrl,i.next.GROUP),srcHover:T(this.prefixUrl,i.next.HOVER),srcDown:T(this.prefixUrl,i.next.DOWN),onRelease:r,onFocus:e,onBlur:n}),this.navPrevNextWrap||this.previousButton.disable(),this.tileSources&&this.tileSources.length||this.nextButton.disable(),s&&(this.paging=new t.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:t.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||t.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var e=t.delegate(this,R),n=t.delegate(this,A),r=t.delegate(this,L),o=t.delegate(this,M),i=t.delegate(this,D),s=t.delegate(this,F),a=t.delegate(this,B),u=t.delegate(this,z),l=t.delegate(this,V),f=t.delegate(this,U),h=t.delegate(this,c),d=t.delegate(this,p),g=this.navImages,y=[],m=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(m=!1),this.showZoomControl&&(y.push(this.zoomInButton=new t.Button({element:this.zoomInButton?t.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomIn"),srcRest:T(this.prefixUrl,g.zoomIn.REST),srcGroup:T(this.prefixUrl,g.zoomIn.GROUP),srcHover:T(this.prefixUrl,g.zoomIn.HOVER),srcDown:T(this.prefixUrl,g.zoomIn.DOWN),onPress:e,onRelease:n,onClick:r,onEnter:e,onExit:n,onFocus:h,onBlur:d})),y.push(this.zoomOutButton=new t.Button({element:this.zoomOutButton?t.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomOut"),srcRest:T(this.prefixUrl,g.zoomOut.REST),srcGroup:T(this.prefixUrl,g.zoomOut.GROUP),srcHover:T(this.prefixUrl,g.zoomOut.HOVER),srcDown:T(this.prefixUrl,g.zoomOut.DOWN),onPress:o,onRelease:n,onClick:i,onEnter:o,onExit:n,onFocus:h,onBlur:d}))),this.showHomeControl&&y.push(this.homeButton=new t.Button({element:this.homeButton?t.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Home"),srcRest:T(this.prefixUrl,g.home.REST),srcGroup:T(this.prefixUrl,g.home.GROUP),srcHover:T(this.prefixUrl,g.home.HOVER),srcDown:T(this.prefixUrl,g.home.DOWN),onRelease:s,onFocus:h,onBlur:d})),this.showFullPageControl&&y.push(this.fullPageButton=new t.Button({element:this.fullPageButton?t.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.FullPage"),srcRest:T(this.prefixUrl,g.fullpage.REST),srcGroup:T(this.prefixUrl,g.fullpage.GROUP),srcHover:T(this.prefixUrl,g.fullpage.HOVER),srcDown:T(this.prefixUrl,g.fullpage.DOWN),onRelease:a,onFocus:h,onBlur:d})),this.showRotationControl&&(y.push(this.rotateLeftButton=new t.Button({element:this.rotateLeftButton?t.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateLeft"),srcRest:T(this.prefixUrl,g.rotateleft.REST),srcGroup:T(this.prefixUrl,g.rotateleft.GROUP),srcHover:T(this.prefixUrl,g.rotateleft.HOVER),srcDown:T(this.prefixUrl,g.rotateleft.DOWN),onRelease:u,onFocus:h,onBlur:d})),y.push(this.rotateRightButton=new t.Button({element:this.rotateRightButton?t.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateRight"),srcRest:T(this.prefixUrl,g.rotateright.REST),srcGroup:T(this.prefixUrl,g.rotateright.GROUP),srcHover:T(this.prefixUrl,g.rotateright.HOVER),srcDown:T(this.prefixUrl,g.rotateright.DOWN),onRelease:l,onFocus:h,onBlur:d}))),this.showFlipControl&&y.push(this.flipButton=new t.Button({element:this.flipButton?t.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Flip"),srcRest:T(this.prefixUrl,g.flip.REST),srcGroup:T(this.prefixUrl,g.flip.GROUP),srcHover:T(this.prefixUrl,g.flip.HOVER),srcDown:T(this.prefixUrl,g.flip.DOWN),onRelease:f,onFocus:h,onBlur:d})),m&&(this.buttons=new t.ButtonGroup({buttons:y,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",t.delegate(this,j)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return this._sequenceIndex},goToPage:function(t){return this.tileSources&&0<=t&&t<this.tileSources.length&&(this._sequenceIndex=t,this._updateSequenceButtons(t),this.open(this.tileSources[t]),this.referenceStrip&&this.referenceStrip.setFocus(t),this.raiseEvent("page",{page:t})),this},addOverlay:function(e,n,r,s){var a;if(a=t.isPlainObject(e)?e:{element:e,location:n,placement:r,onDraw:s},e=t.getElement(a.element),0<=i(this.currentOverlays,e))return this;var u=o(this,a);return this.currentOverlays.push(u),u.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:e,location:a.location,placement:a.placement}),this},updateOverlay:function(n,r,o){var s;return n=t.getElement(n),0<=(s=i(this.currentOverlays,n))&&(this.currentOverlays[s].update(r,o),e[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:n,location:r,placement:o})),this},removeOverlay:function(n){var r;return n=t.getElement(n),0<=(r=i(this.currentOverlays,n))&&(this.currentOverlays[r].destroy(),this.currentOverlays.splice(r,1),e[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:n})),this},clearOverlays:function(){for(;0<this.currentOverlays.length;)this.currentOverlays.pop().destroy();return e[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(e){var n;return e=t.getElement(e),0<=(n=i(this.currentOverlays,e))?this.currentOverlays[n]:null},_updateSequenceButtons:function(t){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==t?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(0<t?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(e){this._hideMessage();var n=t.makeNeutralElement("div");n.appendChild(document.createTextNode(e)),this.messageDiv=t.makeCenteredNode(n),t.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var t=this.messageDiv;t&&(t.parentNode.removeChild(t),delete this.messageDiv)},gestureSettingsByDeviceType:function(t){switch(t){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var t,e=this.currentOverlays.length;for(t=0;t<e;t++)this.currentOverlays[t].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&1<this.tileSources.length&&(this.referenceStrip=new t.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else t.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')}})}(OpenSeadragon),function(t){function e(t){var e={tracker:t.eventSource,position:t.position,quick:t.quick,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction};if(this.viewer.raiseEvent("navigator-click",e),!e.preventDefaultAction&&t.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(t.position.x=this.viewport.getContainerSize().x-t.position.x);var n=this.viewport.pointFromPixel(t.position);this.panVertical?this.panHorizontal||(n.x=this.viewer.viewport.getCenter(!0).x):n.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(n),this.viewer.viewport.applyConstraints()}}function n(t){var e={tracker:t.eventSource,position:t.position,delta:t.delta,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent,preventDefaultAction:t.preventDefaultAction};this.viewer.raiseEvent("navigator-drag",e),!e.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(t.delta.x=0),this.panVertical||(t.delta.y=0),this.viewer.viewport.flipped&&(t.delta.x=-t.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(t.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function r(t){t.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function o(t){return this.viewer.raiseEvent("navigator-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),!1}function i(t,e){s(t,"rotate("+e+"deg)")}function s(t,e){t.style.webkitTransform=e,t.style.mozTransform=e,t.style.msTransform=e,t.style.oTransform=e,t.style.transform=e}t.Navigator=function(s){var a,u,l=s.viewer,c=this;function p(t){i(c.displayRegionContainer,t),i(c.displayRegion,-t),c.viewport.setRotation(t)}s.id?(this.element=document.getElementById(s.id),s.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),s.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:s.autoFade},s.position&&("BOTTOM_RIGHT"==s.position?s.controlOptions.anchor=t.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==s.position?s.controlOptions.anchor=t.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==s.position?s.controlOptions.anchor=t.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==s.position?s.controlOptions.anchor=t.ControlAnchor.TOP_LEFT:"ABSOLUTE"==s.position&&(s.controlOptions.anchor=t.ControlAnchor.ABSOLUTE,s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",(s=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:s.autoResize,minZoomImageRatio:1,background:s.background,opacity:s.opacity,borderColor:s.borderColor,displayRegionColor:s.displayRegionColor})).minPixelRatio=this.minPixelRatio=l.minPixelRatio,t.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!=t.ControlAnchor.NONE&&function(t,e){t.margin="0px",t.border=e+"px solid "+s.borderColor,t.padding="0px",t.background=s.background,t.opacity=s.opacity,t.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(t,e){t.position="relative",t.top="0px",t.left="0px",t.fontSize="0px",t.overflow="hidden",t.border=e+"px solid "+s.displayRegionColor,t.margin="0px",t.padding="0px",t.background="transparent",t.float="left",t.cssFloat="left",t.styleFloat="left",t.zIndex=999999999,t.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=t.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",l.addControl(this.element,s.controlOptions),this._resizeWithViewer=s.controlOptions.anchor!=t.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!=t.ControlAnchor.NONE,s.width&&s.height?(this.setWidth(s.width),this.setHeight(s.height)):this._resizeWithViewer&&(a=t.getElementSize(l.element),this.element.style.height=Math.round(a.y*s.sizeRatio)+"px",this.element.style.width=Math.round(a.x*s.sizeRatio)+"px",this.oldViewerSize=a,u=t.getElementSize(this.element),this.elementArea=u.x*u.y),this.oldContainerSize=new t.Point(0,0),t.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),s.navigatorRotate&&(p(s.viewer.viewport?s.viewer.viewport.getRotation():s.viewer.degrees||0),s.viewer.addHandler("rotate",(function(t){p(t.degrees)}))),this.innerTracker.destroy(),this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,n),clickHandler:t.delegate(this,e),releaseHandler:t.delegate(this,r),scrollHandler:t.delegate(this,o)}),this.addHandler("reset-size",(function(){c.viewport&&c.viewport.goHome(!0)})),l.world.addHandler("item-index-change",(function(t){window.setTimeout((function(){var e=c.world.getItemAt(t.previousIndex);c.world.setItemIndex(e,t.newIndex)}),1)})),l.world.addHandler("remove-item",(function(t){var e=t.item,n=c._getMatchingItem(e);n&&c.world.removeItem(n)})),this.update(l.viewport)},t.extend(t.Navigator.prototype,t.EventSource.prototype,t.Viewer.prototype,{updateSize:function(){if(this.viewport){var e=new t.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);e.equals(this.oldContainerSize)||(this.viewport.resize(e,!0),this.viewport.goHome(!0),this.oldContainerSize=e,this.drawer.clear(),this.world.draw())}},setWidth:function(t){this.width=t,this.element.style.width="number"==typeof t?t+"px":t,this._resizeWithViewer=!1},setHeight:function(t){this.height=t,this.element.style.height="number"==typeof t?t+"px":t,this._resizeWithViewer=!1},setFlip:function(t){return this.viewport.setFlip(t),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(t){s(this.displayRegion,t),s(this.canvas,t),s(this.element,t)},update:function(e){var n,r,o,i,s,a;if(n=t.getElementSize(this.viewer.element),this._resizeWithViewer&&n.x&&n.y&&!n.equals(this.oldViewerSize)&&(this.oldViewerSize=n,this.maintainSizeRatio||!this.elementArea?(r=n.x*this.sizeRatio,o=n.y*this.sizeRatio):(r=Math.sqrt(this.elementArea*(n.x/n.y)),o=this.elementArea/r),this.element.style.width=Math.round(r)+"px",this.element.style.height=Math.round(o)+"px",this.elementArea||(this.elementArea=r*o),this.updateSize()),e&&this.viewport){i=e.getBoundsNoRotate(!0),s=this.viewport.pixelFromPointNoRotate(i.getTopLeft(),!1),a=this.viewport.pixelFromPointNoRotate(i.getBottomRight(),!1).minus(this.totalBorderWidths);var u=this.displayRegion.style;u.display=this.world.getItemCount()?"block":"none",u.top=Math.round(s.y)+"px",u.left=Math.round(s.x)+"px";var l=Math.abs(s.x-a.x),c=Math.abs(s.y-a.y);u.width=Math.round(Math.max(l,0))+"px",u.height=Math.round(Math.max(c,0))+"px"}},addTiledImage:function(e){var n=this,r=e.originalTiledImage;delete e.original;var o=t.extend({},e,{success:function(t){var e=t.item;function o(){n._matchBounds(e,r)}e._originalForNavigator=r,n._matchBounds(e,r,!0),r.addHandler("bounds-change",o),r.addHandler("clip-change",o),r.addHandler("opacity-change",(function(){n._matchOpacity(e,r)})),r.addHandler("composite-operation-change",(function(){n._matchCompositeOperation(e,r)}))}});return t.Viewer.prototype.addTiledImage.apply(this,[o])},_getMatchingItem:function(t){for(var e,n=this.world.getItemCount(),r=0;r<n;r++)if((e=this.world.getItemAt(r))._originalForNavigator===t)return e;return null},_matchBounds:function(t,e,n){var r=e.getBoundsNoRotate();t.setPosition(r.getTopLeft(),n),t.setWidth(r.width,n),t.setRotation(e.getRotation(),n),t.setClip(e.getClip())},_matchOpacity:function(t,e){t.setOpacity(e.opacity)},_matchCompositeOperation:function(t,e){t.setCompositeOperation(e.compositeOperation)}})}(OpenSeadragon),s=OpenSeadragon,a={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}},s.extend(s,{getString:function(t){var e,n=t.split("."),r=null,o=arguments,i=a;for(e=0;e<n.length-1;e++)i=i[n[e]]||{};return"string"!=typeof(r=i[n[e]])&&(s.console.log("Untranslated source string:",t),r=""),r.replace(/\{\d+\}/g,(function(t){var e=parseInt(t.match(/\d+/),10)+1;return e<o.length?o[e]:""}))},setString:function(t,e){var n,r=t.split("."),o=a;for(n=0;n<r.length-1;n++)o[r[n]]||(o[r[n]]={}),o=o[r[n]];o[r[n]]=e}}),function(t){t.Point=function(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0},t.Point.prototype={clone:function(){return new t.Point(this.x,this.y)},plus:function(e){return new t.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new t.Point(this.x-e.x,this.y-e.y)},times:function(e){return new t.Point(this.x*e,this.y*e)},divide:function(e){return new t.Point(this.x/e,this.y/e)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},squaredDistanceTo:function(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)},apply:function(e){return new t.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},rotate:function(e,n){var r,o;if(n=n||new t.Point(0,0),e%90==0)switch(t.positiveModulo(e,360)){case 0:r=1,o=0;break;case 90:r=0,o=1;break;case 180:r=-1,o=0;break;case 270:r=0,o=-1}else{var i=e*Math.PI/180;r=Math.cos(i),o=Math.sin(i)}var s=r*(this.x-n.x)-o*(this.y-n.y)+n.x,a=o*(this.x-n.x)+r*(this.y-n.y)+n.y;return new t.Point(s,a)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),d=OpenSeadragon,d.TileSource=function(t,e,n,r,o,i){var s,a,u=this,l=arguments;if(s=d.isPlainObject(t)?t:{width:l[0],height:l[1],tileSize:l[2],tileOverlap:l[3],minLevel:l[4],maxLevel:l[5]},d.EventSource.call(this),d.extend(!0,this,s),!this.success)for(a=0;a<arguments.length;a++)if(d.isFunction(arguments[a])){this.success=arguments[a];break}this.success&&this.addHandler("ready",(function(t){u.success(t)})),"string"==d.type(t)&&(this.url=t),this.url?(this.aspectRatio=1,this.dimensions=new d.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=s.width&&s.height?s.width/s.height:1,this.dimensions=new d.Point(s.width,s.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=s.tileOverlap?s.tileOverlap:0,this.minLevel=s.minLevel?s.minLevel:0,this.maxLevel=void 0!==s.maxLevel&&null!==s.maxLevel?s.maxLevel:s.width&&s.height?Math.ceil(Math.log(Math.max(s.width,s.height))/Math.log(2)):0,this.success&&d.isFunction(this.success)&&this.success(this))},d.TileSource.prototype={getTileSize:function(t){return d.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(t){return this._tileWidth?this._tileWidth:this.getTileSize(t)},getTileHeight:function(t){return this._tileHeight?this._tileHeight:this.getTileSize(t)},getLevelScale:function(t){var e,n={};for(e=0;e<=this.maxLevel;e++)n[e]=1/Math.pow(2,this.maxLevel-e);return this.getLevelScale=function(t){return n[t]},this.getLevelScale(t)},getNumTiles:function(t){var e=this.getLevelScale(t),n=Math.ceil(e*this.dimensions.x/this.getTileWidth(t)),r=Math.ceil(e*this.dimensions.y/this.getTileHeight(t));return new d.Point(n,r)},getPixelRatio:function(t){var e=this.dimensions.times(this.getLevelScale(t)),n=1/e.x,r=1/e.y;return new d.Point(n,r)},getClosestLevel:function(){var t,e;for(t=this.minLevel+1;t<=this.maxLevel&&!(1<(e=this.getNumTiles(t)).x||1<e.y);t++);return t-1},getTileAtPoint:function(t,e){var n=0<=e.x&&e.x<=1&&0<=e.y&&e.y<=1/this.aspectRatio;d.console.assert(n,"[TileSource.getTileAtPoint] must be called with a valid point.");var r=this.dimensions.x*this.getLevelScale(t),o=e.x*r,i=e.y*r,s=Math.floor(o/this.getTileWidth(t)),a=Math.floor(i/this.getTileHeight(t));return 1<=e.x&&(s=this.getNumTiles(t).x-1),e.y>=1/this.aspectRatio-1e-15&&(a=this.getNumTiles(t).y-1),new d.Point(s,a)},getTileBounds:function(t,e,n,r){var o=this.dimensions.times(this.getLevelScale(t)),i=this.getTileWidth(t),s=this.getTileHeight(t),a=0===e?0:i*e-this.tileOverlap,u=0===n?0:s*n-this.tileOverlap,l=i+(0===e?1:2)*this.tileOverlap,c=s+(0===n?1:2)*this.tileOverlap,p=1/o.x;return l=Math.min(l,o.x-a),c=Math.min(c,o.y-u),r?new d.Rect(0,0,l,c):new d.Rect(a*p,u*p,l*p,c*p)},getImageInfo:function(t){var e,n,r,o,i,s,a,u=this;t&&-1<(a=(s=(i=t.split("/"))[i.length-1]).lastIndexOf("."))&&(i[i.length-1]=s.slice(0,a)),n=function(e){"string"==typeof e&&(e=d.parseXml(e));var n=d.TileSource.determineType(u,e,t);n?(void 0===(o=n.prototype.configure.apply(u,[e,t])).ajaxWithCredentials&&(o.ajaxWithCredentials=u.ajaxWithCredentials),r=new n(o),u.ready=!0,u.raiseEvent("ready",{tileSource:r})):u.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(e=t.split("/").pop().replace(".js",""),d.jsonp({url:t,async:!1,callbackName:e,callback:n})):d.makeAjaxRequest({url:t,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(t){var e=function(t){var e,n,r=t.responseText,o=t.status;if(!t)throw new Error(d.getString("Errors.Security"));if(200!==t.status&&0!==t.status)throw e=404==(o=t.status)?"Not Found":t.statusText,new Error(d.getString("Errors.Status",o,e));if(r.match(/\s*<.*/))try{n=t.responseXML&&t.responseXML.documentElement?t.responseXML:d.parseXml(r)}catch(e){n=t.responseText}else if(r.match(/\s*[\{\[].*/))try{n=d.parseJSON(r)}catch(e){n=r}else n=r;return n}(t);n(e)},error:function(e,n){var r;try{r="HTTP "+e.status+" attempting to load TileSource"}catch(e){r=(void 0!==n&&n.toString?n.toString():"Unknown error")+" attempting to load TileSource"}u.raiseEvent("open-failed",{message:r,source:t})}})},supports:function(t,e){return!1},configure:function(t,e){throw new Error("Method not implemented.")},getTileUrl:function(t,e,n){throw new Error("Method not implemented.")},getTileAjaxHeaders:function(t,e,n){return{}},tileExists:function(t,e,n){var r=this.getNumTiles(t);return t>=this.minLevel&&t<=this.maxLevel&&0<=e&&0<=n&&e<r.x&&n<r.y}},d.extend(!0,d.TileSource.prototype,d.EventSource.prototype),d.TileSource.determineType=function(t,e,n){var r;for(r in OpenSeadragon)if(r.match(/.+TileSource$/)&&d.isFunction(OpenSeadragon[r])&&d.isFunction(OpenSeadragon[r].prototype.supports)&&OpenSeadragon[r].prototype.supports.call(t,e,n))return OpenSeadragon[r];d.console.error("No TileSource was able to open %s %s",n,e)},function(t){function e(e,n){var r,o,i=n.Image,s=i.Url,a=i.Format,u=i.Size,l=i.DisplayRect||[],c=parseInt(u.Width,10),p=parseInt(u.Height,10),f=parseInt(i.TileSize,10),h=parseInt(i.Overlap,10),d=[];for(o=0;o<l.length;o++)r=l[o].Rect,d.push(new t.DisplayRect(parseInt(r.X,10),parseInt(r.Y,10),parseInt(r.Width,10),parseInt(r.Height,10),parseInt(r.MinLevel,10),parseInt(r.MaxLevel,10)));return t.extend(!0,{width:c,height:p,tileSize:f,tileOverlap:h,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:d},n)}t.DziTileSource=function(e,n,r,o,i,s,a,u,l){var c,p,f,h;if(h=t.isPlainObject(e)?e:{width:e,height:n,tileSize:r,tileOverlap:o,tilesUrl:i,fileFormat:s,displayRects:a,minLevel:u,maxLevel:l},this._levelRects={},this.tilesUrl=h.tilesUrl,this.fileFormat=h.fileFormat,this.displayRects=h.displayRects,this.displayRects)for(c=this.displayRects.length-1;0<=c;c--)for(f=(p=this.displayRects[c]).minLevel;f<=p.maxLevel;f++)this._levelRects[f]||(this._levelRects[f]=[]),this._levelRects[f].push(p);t.TileSource.apply(this,[h])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){var n;return t.Image?n=t.Image.xmlns:t.documentElement&&("Image"!=t.documentElement.localName&&"Image"!=t.documentElement.tagName||(n=t.documentElement.namespaceURI)),-1!==(n=(n||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==n.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(n,r){var o;return o=(t.isPlainObject(n)?e:function(n,r){if(!r||!r.documentElement)throw new Error(t.getString("Errors.Xml"));var o,i,s,a,u,l=r.documentElement,c=l.localName||l.tagName,p=r.documentElement.namespaceURI,f=null,h=[];if("Image"==c)try{if(void 0===(a=l.getElementsByTagName("Size")[0])&&(a=l.getElementsByTagNameNS(p,"Size")[0]),f={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:l.getAttribute("Url"),Format:l.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(l.getAttribute("Overlap"),10),TileSize:parseInt(l.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!t.imageFormatSupported(f.Image.Format))throw new Error(t.getString("Errors.ImageFormat",f.Image.Format.toUpperCase()));for(void 0===(o=l.getElementsByTagName("DisplayRect"))&&(o=l.getElementsByTagNameNS(p,"DisplayRect")[0]),u=0;u<o.length;u++)void 0===(s=(i=o[u]).getElementsByTagName("Rect")[0])&&(s=i.getElementsByTagNameNS(p,"Rect")[0]),h.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(i.getAttribute("MinLevel"),10),MaxLevel:parseInt(i.getAttribute("MaxLevel"),10)}});return h.length&&(f.Image.DisplayRect=h),e(n,f)}catch(n){throw n instanceof Error?n:new Error(t.getString("Errors.Dzi"))}else{if("Collection"==c)throw new Error(t.getString("Errors.Dzc"));if("Error"==c){var d=l.getElementsByTagName("Message")[0].firstChild.nodeValue;throw new Error(d)}}throw new Error(t.getString("Errors.Dzi"))})(this,n),r&&!o.tilesUrl&&(o.tilesUrl=r.replace(/([^\/]+?)(\.(dzi|xml|js)?(\?[^\/]*)?)?\/?$/,"$1_files/"),-1!=r.search(/\.(dzi|xml|js)\?/)?o.queryParams=r.match(/\?.*/):o.queryParams=""),o},getTileUrl:function(t,e,n){return[this.tilesUrl,t,"/",e,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(t,e,n){var r,o,i,s,a,u,l,c=this._levelRects[t];if(this.minLevel&&t<this.minLevel||this.maxLevel&&t>this.maxLevel)return!1;if(!c||!c.length)return!0;for(l=c.length-1;0<=l;l--)if(!(t<(r=c[l]).minLevel||t>r.maxLevel)&&(o=this.getLevelScale(t),i=r.x*o,s=r.y*o,a=i+r.width*o,u=s+r.height*o,i=Math.floor(i/this._tileWidth),s=Math.floor(s/this._tileWidth),a=Math.ceil(a/this._tileWidth),u=Math.ceil(u/this._tileWidth),i<=e&&e<a&&s<=n&&n<u))return!0;return!1}})}(OpenSeadragon),function(t){function e(t){var e=Array.isArray(t.profile)?t.profile[0]:t.profile,n=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(e),r=!1;return 2===t.version&&1<t.profile.length&&t.profile[1].supports&&(r=-1!==t.profile[1].supports.indexOf("sizeByW")),3===t.version&&t.extraFeatures&&(r=-1!==t.extraFeatures.indexOf("sizeByWh")),!n||r}function n(t){for(var e=[],n=0;n<t.sizes.length;n++)e.push({url:t["@id"]+"/full/"+t.sizes[n].width+","+(3===t.version?t.sizes[n].height:"")+"/0/default."+t.tileFormat,width:t.sizes[n].width,height:t.sizes[n].height});return e.sort((function(t,e){return t.width-e.width}))}t.IIIFTileSource=function(r){if(t.extend(!0,this,r),!(this.height&&this.width&&this["@id"]))throw new Error("IIIF required parameters not provided.");if(r.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=r.version,this.tile_width&&this.tile_height)r.tileWidth=this.tile_width,r.tileHeight=this.tile_height;else if(this.tile_width)r.tileSize=this.tile_width;else if(this.tile_height)r.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)r.tileWidth=this.tiles[0].width,r.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var o=0;o<this.tiles.length;o++)for(var i=0;i<this.tiles[o].scaleFactors.length;i++){var s=this.tiles[o].scaleFactors[i];this.scale_factors.push(s),r.tileSizePerScaleFactor[s]={width:this.tiles[o].width,height:this.tiles[o].height||this.tiles[o].width}}}else if(e(r)){for(var a=Math.min(this.height,this.width),u=[256,512,1024],l=[],c=0;c<u.length;c++)u[c]<=a&&l.push(u[c]);0<l.length?r.tileSize=Math.max.apply(null,l):r.tileSize=a}else this.sizes&&0<this.sizes.length?(this.emulateLegacyImagePyramid=!0,r.levels=n(this),t.extend(!0,r,{width:r.levels[r.levels.length-1].width,height:r.levels[r.levels.length-1].height,tileSize:Math.max(r.height,r.width),tileOverlap:0,minLevel:0,maxLevel:r.levels.length-1}),this.levels=r.levels):t.console.error("Nothing in the info.json to construct image pyramids from");if(!r.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var p=Math.max.apply(null,this.scale_factors);r.maxLevel=Math.round(Math.log(p)*Math.LOG2E)}else r.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));t.TileSource.apply(this,[r])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return!!(t.protocol&&"http://iiif.io/api/image"==t.protocol||t["@context"]&&("http://library.stanford.edu/iiif/image-api/1.1/context.json"==t["@context"]||"http://iiif.io/api/image/1/context.json"==t["@context"])||t.profile&&0===t.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")||t.identifier&&t.width&&t.height||t.documentElement&&"info"==t.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"==t.documentElement.namespaceURI)},configure:function(e,n){if(t.isPlainObject(e)){if(e["@context"]){var r=e["@context"];if(Array.isArray(r))for(var o=0;o<r.length;o++)if("string"==typeof r[o]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(r[o])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===r[o])){r=r[o];break}switch(r){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":e.version=1;break;case"http://iiif.io/api/image/2/context.json":e.version=2;break;case"http://iiif.io/api/image/3/context.json":e.version=3;break;default:t.console.error("Data has a @context property which contains no known IIIF context URI.")}}else e["@context"]="http://iiif.io/api/image/1.0/context.json",e["@id"]=n.replace("/info.json",""),e.version=1;if(!e["@id"]&&e.id&&(e["@id"]=e.id),e.preferredFormats)for(var i=0;i<e.preferredFormats.length;i++)if(OpenSeadragon.imageFormatSupported(e.preferredFormats[i])){e.tileFormat=e.preferredFormats[i];break}return e}var s=function(e){if(!e||!e.documentElement)throw new Error(t.getString("Errors.Xml"));var n=e.documentElement,r=null;if("info"==n.tagName)try{return function e(n,r,o){var i,s;if(3==n.nodeType&&o)(s=n.nodeValue.trim()).match(/^\d*$/)&&(s=Number(s)),r[o]?(t.isArray(r[o])||(r[o]=[r[o]]),r[o].push(s)):r[o]=s;else if(1==n.nodeType)for(i=0;i<n.childNodes.length;i++)e(n.childNodes[i],r,n.nodeName)}(n,r={}),r}catch(e){throw e instanceof Error?e:new Error(t.getString("Errors.IIIF"))}throw new Error(t.getString("Errors.IIIF"))}(e);return s["@context"]="http://iiif.io/api/image/1.0/context.json",s["@id"]=n.replace("/info.xml",""),s.version=1,s},getTileWidth:function(e){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileWidth.call(this,e);var n=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].width:this._tileWidth},getTileHeight:function(e){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileHeight.call(this,e);var n=Math.pow(2,this.maxLevel-e);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[n]?this.tileSizePerScaleFactor[n].height:this._tileHeight},getLevelScale:function(e){if(this.emulateLegacyImagePyramid){var n=NaN;return 0<this.levels.length&&e>=this.minLevel&&e<=this.maxLevel&&(n=this.levels[e].width/this.levels[this.maxLevel].width),n}return t.TileSource.prototype.getLevelScale.call(this,e)},getNumTiles:function(e){return this.emulateLegacyImagePyramid?this.getLevelScale(e)?new t.Point(1,1):new t.Point(0,0):t.TileSource.prototype.getNumTiles.call(this,e)},getTileAtPoint:function(e,n){return this.emulateLegacyImagePyramid?new t.Point(0,0):t.TileSource.prototype.getTileAtPoint.call(this,e,n)},getTileUrl:function(t,e,n){if(this.emulateLegacyImagePyramid){var r=null;return 0<this.levels.length&&t>=this.minLevel&&t<=this.maxLevel&&(r=this.levels[t].url),r}var o,i,s,a,u,l,c,p,f,h,d,g,y,m=Math.pow(.5,this.maxLevel-t),v=Math.ceil(this.width*m),b=Math.ceil(this.height*m);return o=this.getTileWidth(t),i=this.getTileHeight(t),s=Math.ceil(o/m),a=Math.ceil(i/m),y=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,v<o&&b<i?(h=2===this.version&&v===this.width||3===this.version&&v===this.width&&b===this.height?"max":3===this.version?v+","+b:v+",",u="full"):(l=e*s,c=n*a,p=Math.min(s,this.width-l),f=Math.min(a,this.height-c),u=0===e&&0===n&&p===this.width&&f===this.height?"full":[l,c,p,f].join(","),d=Math.ceil(p*m),g=Math.ceil(f*m),h=2===this.version&&d===this.width||3===this.version&&d===this.width&&g===this.height?"max":3===this.version?d+","+g:d+","),[this["@id"],u,h,"0",y].join("/")},__testonly__:{canBeTiled:e,constructLevels:n}})}(OpenSeadragon),function(t){t.OsmTileSource=function(e,n,r,o,i){var s;(s=t.isPlainObject(e)?e:{width:e,height:n,tileSize:r,tileOverlap:o,tilesUrl:i}).width&&s.height||(s.width=65572864,s.height=65572864),s.tileSize||(s.tileSize=256,s.tileOverlap=0),s.tilesUrl||(s.tilesUrl="http://tile.openstreetmap.org/"),s.minLevel=8,t.TileSource.apply(this,[s])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"openstreetmaps"==t.type},configure:function(t,e){return t},getTileUrl:function(t,e,n){return this.tilesUrl+(t-8)+"/"+e+"/"+n+".png"}})}(OpenSeadragon),h=OpenSeadragon,h.TmsTileSource=function(t,e,n,r,o){var i;i=h.isPlainObject(t)?t:{width:t,height:e,tileSize:n,tileOverlap:r,tilesUrl:o};var s,a=256*Math.ceil(i.width/256),u=256*Math.ceil(i.height/256);s=u<a?a/256:u/256,i.maxLevel=Math.ceil(Math.log(s)/Math.log(2))-1,i.tileSize=256,i.width=a,i.height=u,h.TileSource.apply(this,[i])},h.extend(h.TmsTileSource.prototype,h.TileSource.prototype,{supports:function(t,e){return t.type&&"tiledmapservice"==t.type},configure:function(t,e){return t},getTileUrl:function(t,e,n){var r=this.getNumTiles(t).y-1;return this.tilesUrl+t+"/"+e+"/"+(r-n)+".png"}}),function(t){t.ZoomifyTileSource=function(t){t.tileSize=256;var e={x:t.width,y:t.height};for(t.imageSizes=[{x:t.width,y:t.height}],t.gridSize=[this._getGridSize(t.width,t.height,t.tileSize)];parseInt(e.x,10)>t.tileSize||parseInt(e.y,10)>t.tileSize;)e.x=Math.floor(e.x/2),e.y=Math.floor(e.y/2),t.imageSizes.push({x:e.x,y:e.y}),t.gridSize.push(this._getGridSize(e.x,e.y,t.tileSize));t.imageSizes.reverse(),t.gridSize.reverse(),t.minLevel=0,t.maxLevel=t.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[t])},t.extend(t.ZoomifyTileSource.prototype,t.TileSource.prototype,{_getGridSize:function(t,e,n){return{x:Math.ceil(t/n),y:Math.ceil(e/n)}},_calculateAbsoluteTileNumber:function(t,e,n){for(var r=0,o={},i=0;i<t;i++)r+=(o=this.gridSize[i]).x*o.y;return r+((o=this.gridSize[t]).x*n+e)},supports:function(t,e){return t.type&&"zoomifytileservice"==t.type},configure:function(t,e){return t},getTileUrl:function(t,e,n){var r,o=this._calculateAbsoluteTileNumber(t,e,n);return r=Math.floor(o/256),this.tilesUrl+"TileGroup"+r+"/"+t+"-"+e+"-"+n+".jpg"}})}(OpenSeadragon),function(t){function e(t,e){return e.levels}t.LegacyTileSource=function(e){var n,r,o;t.isArray(e)&&(n={type:"legacy-image-pyramid",levels:e}),n.levels=function(e){var n,r,o=[];for(r=0;r<e.length;r++)(n=e[r]).height&&n.width&&n.url?o.push({url:n.url,width:Number(n.width),height:Number(n.height)}):t.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return o.sort((function(t,e){return t.height-e.height}))}(n.levels),0<n.levels.length?(r=n.levels[n.levels.length-1].width,o=n.levels[n.levels.length-1].height):(o=r=0,t.console.error("No supported image formats found")),t.extend(!0,n,{width:r,height:o,tileSize:Math.max(o,r),tileOverlap:0,minLevel:0,maxLevel:0<n.levels.length?n.levels.length-1:0}),t.TileSource.apply(this,[n]),this.levels=n.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"legacy-image-pyramid"==t.type||t.documentElement&&"legacy-image-pyramid"==t.documentElement.getAttribute("type")},configure:function(n,r){return(t.isPlainObject(n)?e:function(n,r){if(!r||!r.documentElement)throw new Error(t.getString("Errors.Xml"));var o,i,s=r.documentElement,a=s.tagName,u=null,l=[];if("image"==a)try{for(u={type:s.getAttribute("type"),levels:[]},l=s.getElementsByTagName("level"),i=0;i<l.length;i++)o=l[i],u.levels.push({url:o.getAttribute("url"),width:parseInt(o.getAttribute("width"),10),height:parseInt(o.getAttribute("height"),10)});return e(n,u)}catch(n){throw n instanceof Error?n:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw new Error("Error: "+r)}throw new Error("Unknown element "+a)})(this,n)},getLevelScale:function(t){var e=NaN;return 0<this.levels.length&&t>=this.minLevel&&t<=this.maxLevel&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){return this.getLevelScale(e)?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(t,e,n){var r=null;return 0<this.levels.length&&t>=this.minLevel&&t<=this.maxLevel&&(r=this.levels[t].url),r}})}(OpenSeadragon),function(t){t.ImageTileSource=function(e){e=t.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},e),t.TileSource.apply(this,[e])},t.extend(t.ImageTileSource.prototype,t.TileSource.prototype,{supports:function(t,e){return t.type&&"image"===t.type},configure:function(t,e){return t},getImageInfo:function(e){var n=this._image=new Image,r=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),t.addEvent(n,"load",(function(){r.width=Object.prototype.hasOwnProperty.call(n,"naturalWidth")?n.naturalWidth:n.width,r.height=Object.prototype.hasOwnProperty.call(n,"naturalHeight")?n.naturalHeight:n.height,r.aspectRatio=r.width/r.height,r.dimensions=new t.Point(r.width,r.height),r._tileWidth=r.width,r._tileHeight=r.height,r.tileOverlap=0,r.minLevel=0,r.levels=r._buildLevels(),r.maxLevel=r.levels.length-1,r.ready=!0,r.raiseEvent("ready",{tileSource:r})})),t.addEvent(n,"error",(function(){r.raiseEvent("open-failed",{message:"Error loading image at "+e,source:e})})),n.src=e},getLevelScale:function(t){var e=NaN;return t>=this.minLevel&&t<=this.maxLevel&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){return this.getLevelScale(e)?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(t,e,n){var r=null;return t>=this.minLevel&&t<=this.maxLevel&&(r=this.levels[t].url),r},getContext2D:function(t,e,n){var r=null;return t>=this.minLevel&&t<=this.maxLevel&&(r=this.levels[t].context2D),r},_buildLevels:function(){var e=[{url:this._image.src,width:Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,height:Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height}];if(!this.buildPyramid||!t.supportsCanvas||!this.useCanvas)return delete this._image,e;var n=Object.prototype.hasOwnProperty.call(this._image,"naturalWidth")?this._image.naturalWidth:this._image.width,r=Object.prototype.hasOwnProperty.call(this._image,"naturalHeight")?this._image.naturalHeight:this._image.height,o=document.createElement("canvas"),i=o.getContext("2d");if(o.width=n,o.height=r,i.drawImage(this._image,0,0,n,r),e[0].context2D=i,delete this._image,t.isCanvasTainted(o))return e;for(;2<=n&&2<=r;){n=Math.floor(n/2),r=Math.floor(r/2);var s=document.createElement("canvas"),a=s.getContext("2d");s.width=n,s.height=r,a.drawImage(o,0,0,n,r),e.splice(0,0,{context2D:a,width:n,height:r}),o=s,i=a}return e}})}(OpenSeadragon),function(t){t.TileSourceCollection=function(e,n,r,o){t.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(t){function e(n){t.requestAnimationFrame((function(){!function(n){var r;n.shouldFade&&(r=1-(t.now()-n.fadeBeginTime)/n.fadeLength,r=Math.min(1,r),r=Math.max(0,r),n.imgGroup&&t.setElementOpacity(n.imgGroup,r,!0),0<r&&e(n))}(n)}))}function n(e,n){e.element.disabled||(n>=t.ButtonState.GROUP&&e.currentState==t.ButtonState.REST&&(!function(e){e.shouldFade=!1,e.imgGroup&&t.setElementOpacity(e.imgGroup,1,!0)}(e),e.currentState=t.ButtonState.GROUP),n>=t.ButtonState.HOVER&&e.currentState==t.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=t.ButtonState.HOVER),n>=t.ButtonState.DOWN&&e.currentState==t.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=t.ButtonState.DOWN))}function r(n,r){n.element.disabled||(r<=t.ButtonState.HOVER&&n.currentState==t.ButtonState.DOWN&&(n.imgDown&&(n.imgDown.style.visibility="hidden"),n.currentState=t.ButtonState.HOVER),r<=t.ButtonState.GROUP&&n.currentState==t.ButtonState.HOVER&&(n.imgHover&&(n.imgHover.style.visibility="hidden"),n.currentState=t.ButtonState.GROUP),r<=t.ButtonState.REST&&n.currentState==t.ButtonState.GROUP&&(!function(n){n.shouldFade=!0,n.fadeBeginTime=t.now()+n.fadeDelay,window.setTimeout((function(){e(n)}),n.fadeDelay)}(n),n.currentState=t.ButtonState.REST))}t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(e){var o=this;t.EventSource.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||t.makeNeutralElement("div"),e.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",t.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor==t.BROWSERS.FIREFOX&&t.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){e.insideElementPressed?(n(o,t.ButtonState.DOWN),o.raiseEvent("enter",{originalEvent:e.originalEvent})):e.buttonDownAny||n(o,t.ButtonState.HOVER)},focusHandler:function(t){this.enterHandler(t),o.raiseEvent("focus",{originalEvent:t.originalEvent})},exitHandler:function(e){r(o,t.ButtonState.GROUP),e.insideElementPressed&&o.raiseEvent("exit",{originalEvent:e.originalEvent})},blurHandler:function(t){this.exitHandler(t),o.raiseEvent("blur",{originalEvent:t.originalEvent})},pressHandler:function(e){n(o,t.ButtonState.DOWN),o.raiseEvent("press",{originalEvent:e.originalEvent})},releaseHandler:function(e){e.insideElementPressed&&e.insideElementReleased?(r(o,t.ButtonState.HOVER),o.raiseEvent("release",{originalEvent:e.originalEvent})):e.insideElementPressed?r(o,t.ButtonState.GROUP):n(o,t.ButtonState.HOVER)},clickHandler:function(t){t.quick&&o.raiseEvent("click",{originalEvent:t.originalEvent})},keyHandler:function(t){return 13!==t.keyCode||(o.raiseEvent("click",{originalEvent:t.originalEvent}),o.raiseEvent("release",{originalEvent:t.originalEvent}),!1)}}),r(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventSource.prototype,{notifyGroupEnter:function(){n(this,t.ButtonState.GROUP)},notifyGroupExit:function(){r(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(t){t.ButtonGroup=function(e){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var n,r=this.buttons.concat([]),o=this;if(this.element=e.element||t.makeNeutralElement("div"),!e.group)for(this.element.style.display="inline-block",n=0;n<r.length;n++)this.element.appendChild(r[n].element);t.setElementTouchActionNone(this.element),this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(t){var e;for(e=0;e<o.buttons.length;e++)o.buttons[e].notifyGroupEnter()},exitHandler:function(t){var e;if(!t.insideElementPressed)for(e=0;e<o.buttons.length;e++)o.buttons[e].notifyGroupExit()}})},t.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),R=OpenSeadragon,R.Rect=function(t,e,n,r,o){var i,s;this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.width="number"==typeof n?n:0,this.height="number"==typeof r?r:0,this.degrees="number"==typeof o?o:0,this.degrees=R.positiveModulo(this.degrees,360),270<=this.degrees?(i=this.getTopRight(),this.x=i.x,this.y=i.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=270):180<=this.degrees?(i=this.getBottomRight(),this.x=i.x,this.y=i.y,this.degrees-=180):90<=this.degrees&&(i=this.getBottomLeft(),this.x=i.x,this.y=i.y,s=this.height,this.height=this.width,this.width=s,this.degrees-=90)},R.Rect.fromSummits=function(t,e,n){var r=t.distanceTo(e),o=t.distanceTo(n),i=e.minus(t),s=Math.atan(i.y/i.x);return i.x<0?s+=Math.PI:i.y<0&&(s+=2*Math.PI),new R.Rect(t.x,t.y,r,o,s/Math.PI*180)},R.Rect.prototype={clone:function(){return new R.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new R.Point(this.x,this.y)},getBottomRight:function(){return new R.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new R.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new R.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new R.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new R.Point(this.width,this.height)},equals:function(t){return t instanceof R.Rect&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height&&this.degrees===t.degrees},times:function(t){return new R.Rect(this.x*t,this.y*t,this.width*t,this.height*t,this.degrees)},translate:function(t){return new R.Rect(this.x+t.x,this.y+t.y,this.width,this.height,this.degrees)},union:function(t){var e=this.getBoundingBox(),n=t.getBoundingBox(),r=Math.min(e.x,n.x),o=Math.min(e.y,n.y),i=Math.max(e.x+e.width,n.x+n.width),s=Math.max(e.y+e.height,n.y+n.height);return new R.Rect(r,o,i-r,s-o)},intersection:function(t){var e=1e-10,n=[],r=this.getTopLeft();t.containsPoint(r,e)&&n.push(r);var o=this.getTopRight();t.containsPoint(o,e)&&n.push(o);var i=this.getBottomLeft();t.containsPoint(i,e)&&n.push(i);var s=this.getBottomRight();t.containsPoint(s,e)&&n.push(s);var a=t.getTopLeft();this.containsPoint(a,e)&&n.push(a);var u=t.getTopRight();this.containsPoint(u,e)&&n.push(u);var l=t.getBottomLeft();this.containsPoint(l,e)&&n.push(l);var c=t.getBottomRight();this.containsPoint(c,e)&&n.push(c);for(var p=this._getSegments(),f=t._getSegments(),h=0;h<p.length;h++)for(var d=p[h],g=0;g<f.length;g++){var y=f[g],m=v(d[0],d[1],y[0],y[1]);m&&n.push(m)}function v(t,n,r,o){var i=n.minus(t),s=o.minus(r),a=-s.x*i.y+i.x*s.y;if(0==a)return null;var u=(i.x*(t.y-r.y)-i.y*(t.x-r.x))/a,l=(s.x*(t.y-r.y)-s.y*(t.x-r.x))/a;return-e<=u&&u<=1-e&&-e<=l&&l<=1-e?new R.Point(t.x+l*i.x,t.y+l*i.y):null}if(0===n.length)return null;for(var b=n[0].x,_=n[0].x,w=n[0].y,x=n[0].y,S=1;S<n.length;S++){var E=n[S];E.x<b&&(b=E.x),E.x>_&&(_=E.x),E.y<w&&(w=E.y),E.y>x&&(x=E.y)}return new R.Rect(b,w,_-b,x-w)},_getSegments:function(){var t=this.getTopLeft(),e=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight();return[[t,e],[e,r],[r,n],[n,t]]},rotate:function(t,e){if(0===(t=R.positiveModulo(t,360)))return this.clone();e=e||this.getCenter();var n=this.getTopLeft().rotate(t,e),r=this.getTopRight().rotate(t,e).minus(n);r=r.apply((function(t){return Math.abs(t)<1e-15?0:t}));var o=Math.atan(r.y/r.x);return r.x<0?o+=Math.PI:r.y<0&&(o+=2*Math.PI),new R.Rect(n.x,n.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var t=this.getTopLeft(),e=this.getTopRight(),n=this.getBottomLeft(),r=this.getBottomRight(),o=Math.min(t.x,e.x,n.x,r.x),i=Math.max(t.x,e.x,n.x,r.x),s=Math.min(t.y,e.y,n.y,r.y),a=Math.max(t.y,e.y,n.y,r.y);return new R.Rect(o,s,i-o,a-s)},getIntegerBoundingBox:function(){var t=this.getBoundingBox(),e=Math.floor(t.x),n=Math.floor(t.y),r=Math.ceil(t.width+t.x-e),o=Math.ceil(t.height+t.y-n);return new R.Rect(e,n,r,o)},containsPoint:function(t,e){e=e||0;var n=this.getTopLeft(),r=this.getTopRight(),o=this.getBottomLeft(),i=r.minus(n),s=o.minus(n);return(t.x-n.x)*i.x+(t.y-n.y)*i.y>=-e&&(t.x-r.x)*i.x+(t.y-r.y)*i.y<=e&&(t.x-n.x)*s.x+(t.y-n.y)*s.y>=-e&&(t.x-o.x)*s.x+(t.y-o.y)*s.y<=e},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}},function(t){var e={};function n(e){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),i=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=t.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?0<-e.delta.x?n>-(i-a.x)&&(this.element.style.marginLeft=n+2*e.delta.x+"px",o(this,a.x,n+2*e.delta.x)):-e.delta.x<0&&n<0&&(this.element.style.marginLeft=n+2*e.delta.x+"px",o(this,a.x,n+2*e.delta.x)):0<-e.delta.y?r>-(s-a.y)&&(this.element.style.marginTop=r+2*e.delta.y+"px",o(this,a.y,r+2*e.delta.y)):-e.delta.y<0&&r<0&&(this.element.style.marginTop=r+2*e.delta.y+"px",o(this,a.y,r+2*e.delta.y))),!1}function r(e){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),i=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=t.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?0<e.scroll?n>-(i-a.x)&&(this.element.style.marginLeft=n-60*e.scroll+"px",o(this,a.x,n-60*e.scroll)):e.scroll<0&&n<0&&(this.element.style.marginLeft=n-60*e.scroll+"px",o(this,a.x,n-60*e.scroll)):e.scroll<0?r>a.y-s&&(this.element.style.marginTop=r+60*e.scroll+"px",o(this,a.y,r+60*e.scroll)):0<e.scroll&&r<0&&(this.element.style.marginTop=r+60*e.scroll+"px",o(this,a.y,r+60*e.scroll))),!1}function o(e,n,r){var o,i,s,a,u,l,c;for(o="horizontal"==e.scroll?e.panelWidth:e.panelHeight,i=Math.ceil(n/o)+5,l=i=(i=(s=Math.ceil((Math.abs(r)+n)/o)+1)-i)<0?0:i;l<s&&l<e.panels.length;l++)if(!(c=e.panels[l]).activePanel){var p,f=e.viewer.tileSources[l];p=f.referenceStripThumbnailUrl?{type:"image",url:f.referenceStripThumbnailUrl}:f,(a=new t.Viewer({id:c.id,tileSources:[p],element:c,navigatorSizeRatio:e.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:e.viewer.loadTilesWithAjax,ajaxHeaders:e.viewer.ajaxHeaders,useCanvas:e.useCanvas})).displayRegion=t.makeNeutralElement("div"),a.displayRegion.id=c.id+"-displayregion",a.displayRegion.className="displayregion",(u=a.displayRegion.style).position="relative",u.top="0px",u.left="0px",u.fontSize="0px",u.overflow="hidden",u.float="left",u.cssFloat="left",u.styleFloat="left",u.zIndex=999999999,u.cursor="default",u.width=e.panelWidth-4+"px",u.height=e.panelHeight-4+"px",a.displayRegion.innerTracker=new t.MouseTracker({element:a.displayRegion,startDisabled:!0}),c.getElementsByTagName("div")[0].appendChild(a.displayRegion),e.miniViewers[c.id]=a,c.activePanel=!0}}function i(t){var e=t.eventSource.element;return"horizontal"==this.scroll?e.style.marginBottom="0px":e.style.marginLeft="0px",!1}function s(e){var n=e.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+t.getElementSize(n).y/2+"px":n.style.marginLeft="-"+t.getElementSize(n).x/2+"px",!1}function a(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 38:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 40:case 37:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 39:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}function u(t){if(t.preventDefaultAction||t.ctrl||t.alt||t.meta)return!0;switch(t.keyCode){case 61:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 97:return r.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:return r.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}t.ReferenceStrip=function(l){var c,p,f,h=l.viewer,d=t.getElementSize(h.element);for(l.id||(l.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=l.id,this.element.className="referencestrip"),l=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},l,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),t.extend(this,l),e[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,(p=this.element.style).marginTop="0px",p.marginRight="0px",p.marginBottom="0px",p.marginLeft="0px",p.left="0px",p.bottom="0px",p.border="0px",p.background="#000",p.position="relative",t.setElementTouchActionNone(this.element),t.setElementOpacity(this.element,.8),this.viewer=h,this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,n),scrollHandler:t.delegate(this,r),enterHandler:t.delegate(this,i),exitHandler:t.delegate(this,s),keyDownHandler:t.delegate(this,a),keyHandler:t.delegate(this,u)}),l.width&&l.height?(this.element.style.width=l.width+"px",this.element.style.height=l.height+"px",h.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):"horizontal"==l.scroll?(this.element.style.width=d.x*l.sizeRatio*h.tileSources.length+12*h.tileSources.length+"px",this.element.style.height=d.y*l.sizeRatio+"px",h.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=d.y*l.sizeRatio*h.tileSources.length+12*h.tileSources.length+"px",this.element.style.width=d.x*l.sizeRatio+"px",h.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=d.x*this.sizeRatio+8,this.panelHeight=d.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},f=0;f<h.tileSources.length;f++)(c=t.makeNeutralElement("div")).id=this.element.id+"-"+f,c.style.width=this.panelWidth+"px",c.style.height=this.panelHeight+"px",c.style.display="inline",c.style.float="left",c.style.cssFloat="left",c.style.styleFloat="left",c.style.padding="2px",t.setElementTouchActionNone(c),c.innerTracker=new t.MouseTracker({element:c,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(e){e.eventSource.dragging=t.now()},releaseHandler:function(e){var n=e.eventSource,r=n.element.id,o=Number(r.split("-")[2]),i=t.now();e.insideElementPressed&&e.insideElementReleased&&n.dragging&&i-n.dragging<n.clickTimeThreshold&&(n.dragging=null,h.goToPage(o))}}),this.element.appendChild(c),c.activePanel=!1,this.panels.push(c);o(this,"vertical"==this.scroll?d.y:d.x,0),this.setFocus(0)},t.extend(t.ReferenceStrip.prototype,t.EventSource.prototype,t.Viewer.prototype,{setFocus:function(e){var n,r=this.element.querySelector("#"+this.element.id+"-"+e),s=t.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),u=Number(this.element.style.height.replace("px","")),l=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==r&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=r,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(e)*(this.panelWidth+3))>l+s.x-this.panelWidth?(n=Math.min(n,a-s.x),this.element.style.marginLeft=-n+"px",o(this,s.x,-n)):n<l&&(n=Math.max(0,n-s.x/2),this.element.style.marginLeft=-n+"px",o(this,s.x,-n)):(n=Number(e)*(this.panelHeight+3))>c+s.y-this.panelHeight?(n=Math.min(n,u-s.y),this.element.style.marginTop=-n+"px",o(this,s.y,-n)):n<c&&(n=Math.max(0,n-s.y/2),this.element.style.marginTop=-n+"px",o(this,s.y,-n)),this.currentPage=e,i.call(this,{eventSource:this.innerTracker}))},update:function(){return!!e[this.id].animating&&(t.console.log("image reference strip update"),!0)},destroy:function(){if(this.miniViewers)for(var t in this.miniViewers)this.miniViewers[t].destroy();this.element&&this.element.parentNode.removeChild(this.element)}})}(OpenSeadragon),function(t){t.DisplayRect=function(e,n,r,o,i,s){t.Rect.apply(this,[e,n,r,o]),this.minLevel=i,this.maxLevel=s},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(OpenSeadragon),function(t){t.Spring=function(e){var n=arguments;"object"!=_typeof(e)&&(e={initial:n.length&&"number"==typeof n[0]?n[0]:void 0,springStiffness:1<n.length?n[1].springStiffness:5,animationTime:1<n.length?n[1].animationTime:1.5}),t.console.assert("number"==typeof e.springStiffness&&0!==e.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),t.console.assert("number"==typeof e.animationTime&&0<=e.animationTime,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),e.exponential&&(this._exponential=!0,delete e.exponential),t.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:t.now()},t.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},t.Spring.prototype={resetTo:function(e){t.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=e,this.start.time=this.target.time=this.current.time=t.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(e){t.console.assert(!this._exponential||0!==e,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=e,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(e){this.start.value+=e,this.target.value+=e,this._exponential&&(t.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(e){this._exponential=e,this._exponential&&(t.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var e,n;this.current.time=t.now(),this._exponential?(e=this.start._logValue,n=this.target._logValue):(e=this.start.value,n=this.target.value);var r,o,i=this.current.time>=this.target.time?n:e+(n-e)*(r=this.springStiffness,o=(this.current.time-this.start.time)/(this.target.time-this.start.time),(1-Math.exp(r*-o))/(1-Math.exp(-r))),s=this.current.value;return this._exponential?this.current.value=Math.exp(i):this.current.value=i,s!=this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(t){function e(e){t.extend(!0,this,{timeout:t.DEFAULT_SETTINGS.timeout,jobId:null},e),this.image=null}e.prototype={errorMsg:null,start:function(){var e=this,n=this.abort;this.image=new Image,this.image.onload=function(){e.finish(!0)},this.image.onabort=this.image.onerror=function(){e.errorMsg="Image load aborted",e.finish(!1)},this.jobId=window.setTimeout((function(){e.errorMsg="Image load exceeded timeout ("+e.timeout+" ms)",e.finish(!1)}),this.timeout),this.loadWithAjax?(this.request=t.makeAjaxRequest({url:this.src,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,responseType:"arraybuffer",success:function(t){var n;try{n=new window.Blob([t.response])}catch(i){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===i.name&&r){var o=new r;o.append(t.response),n=o.getBlob()}}0===n.size&&(e.errorMsg="Empty image response.",e.finish(!1));var i=(window.URL||window.webkitURL).createObjectURL(n);e.image.src=i},error:function(t){e.errorMsg="Image load aborted - XHR error",e.finish(!1)}}),this.abort=function(){e.request.abort(),"function"==typeof n&&n()}):(!1!==this.crossOriginPolicy&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.src=this.src)},finish:function(t){this.image.onload=this.image.onerror=this.image.onabort=null,t||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},t.ImageLoader=function(e){t.extend(!0,this,{jobLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,timeout:t.DEFAULT_SETTINGS.timeout,jobQueue:[],jobsInProgress:0},e)},t.ImageLoader.prototype={addJob:function(t){var n=this,r=new e({src:t.src,loadWithAjax:t.loadWithAjax,ajaxHeaders:t.loadWithAjax?t.ajaxHeaders:null,crossOriginPolicy:t.crossOriginPolicy,ajaxWithCredentials:t.ajaxWithCredentials,callback:function(e){!function(t,e,n){t.jobsInProgress--,(!t.jobLimit||t.jobsInProgress<t.jobLimit)&&0<t.jobQueue.length&&(t.jobQueue.shift().start(),t.jobsInProgress++),n(e.image,e.errorMsg,e.request)}(n,e,t.callback)},abort:t.abort,timeout:this.timeout});!this.jobLimit||this.jobsInProgress<this.jobLimit?(r.start(),this.jobsInProgress++):this.jobQueue.push(r)},clear:function(){for(var t=0;t<this.jobQueue.length;t++){var e=this.jobQueue[t];"function"==typeof e.abort&&e.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(t){t.Tile=function(t,e,n,r,o,i,s,a,u,l){this.level=t,this.x=e,this.y=n,this.bounds=r,this.sourceBounds=l,this.exists=o,this.url=i,this.context2D=s,this.loadWithAjax=a,this.ajaxHeaders=u,this.ajaxHeaders?this.cacheKey=this.url+"+"+JSON.stringify(this.ajaxHeaders):this.cacheKey=this.url,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return!!this.context2D||this.url.match(".png")},drawHTML:function(e){this.cacheImageRecord?this.loaded?(this.element||(this.element=t.makeNeutralElement("div"),this.imgElement=this.cacheImageRecord.getImage().cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",t.setElementOpacity(this.element,this.opacity)):t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString()):t.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},drawCanvas:function(e,n,r,o){var i,s,a,u=this.position.times(t.pixelDensityRatio),l=this.size.times(t.pixelDensityRatio);this.context2D||this.cacheImageRecord?(i=this.context2D||this.cacheImageRecord.getRenderedContext(),this.loaded&&i?(e.save(),e.globalAlpha=this.opacity,"number"==typeof r&&1!==r&&(u=u.times(r),l=l.times(r)),o instanceof t.Point&&(u=u.plus(o)),1===e.globalAlpha&&this._hasTransparencyChannel()&&e.clearRect(u.x,u.y,l.x,l.y),n({context:e,tile:this,rendered:i}),this.sourceBounds?(s=Math.min(this.sourceBounds.width,i.canvas.width),a=Math.min(this.sourceBounds.height,i.canvas.height)):(s=i.canvas.width,a=i.canvas.height),e.drawImage(i.canvas,0,0,s,a,u.x,u.y,l.x,l.y),e.restore()):t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):t.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var e;if(this.cacheImageRecord)e=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return t.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;e=this.context2D}return e.canvas.width/(this.size.x*t.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(e,n,r){var o=Math.max(1,Math.ceil((r.x-n.x)/2)),i=Math.max(1,Math.ceil((r.y-n.y)/2));return new t.Point(o,i).minus(this.position.times(t.pixelDensityRatio).times(e||1).apply((function(t){return t%1})))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),c=OpenSeadragon,c.OverlayPlacement=c.Placement,c.OverlayRotationMode=c.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),c.Overlay=function(t,e,n){var r;r=c.isPlainObject(t)?t:{element:t,location:e,placement:n},this.element=r.element,this.style=r.element.style,this._init(r)},c.Overlay.prototype={_init:function(t){this.location=t.location,this.placement=void 0===t.placement?c.Placement.TOP_LEFT:t.placement,this.onDraw=t.onDraw,this.checkResize=void 0===t.checkResize||t.checkResize,this.width=void 0===t.width?null:t.width,this.height=void 0===t.height?null:t.height,this.rotationMode=t.rotationMode||c.OverlayRotationMode.EXACT,this.location instanceof c.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=c.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new c.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(t,e){var n=c.Placement.properties[this.placement];n&&(n.isHorizontallyCentered?t.x-=e.x/2:n.isRight&&(t.x-=e.x),n.isVerticallyCentered?t.y-=e.y/2:n.isBottom&&(t.y-=e.y))},destroy:function(){var t=this.element,e=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(e.display="none",document.body.appendChild(t))),this.onDraw=null,e.top="",e.left="",e.position="",null!==this.width&&(e.width=""),null!==this.height&&(e.height="");var n=c.getCssPropertyWithVendorPrefix("transformOrigin"),r=c.getCssPropertyWithVendorPrefix("transform");n&&r&&(e[n]="",e[r]="")},drawHTML:function(t,e){var n=this.element;n.parentNode!==t&&(n.prevElementParent=n.parentNode,n.prevNextSibling=n.nextSibling,t.appendChild(n),this.style.position="absolute",this.size=c.getElementSize(n));var r=this._getOverlayPositionAndSize(e),o=r.position,i=this.size=r.size,s=r.rotate;if(this.onDraw)this.onDraw(o,i,this.element);else{var a=this.style;a.left=o.x+"px",a.top=o.y+"px",null!==this.width&&(a.width=i.x+"px"),null!==this.height&&(a.height=i.y+"px");var u=c.getCssPropertyWithVendorPrefix("transformOrigin"),l=c.getCssPropertyWithVendorPrefix("transform");u&&l&&(s?(a[u]=this._getTransformOrigin(),a[l]="rotate("+s+"deg)"):(a[u]="",a[l]="")),"none"!==a.display&&(a.display="block")}},_getOverlayPositionAndSize:function(t){var e=t.pixelFromPoint(this.location,!0),n=this._getSizeInPixels(t);this.adjust(e,n);var r=0;if(t.degrees&&this.rotationMode!==c.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===c.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var o=new c.Rect(e.x,e.y,n.x,n.y),i=this._getBoundingBox(o,t.degrees);e=i.getTopLeft(),n=i.getSize()}else r=t.degrees;return{position:e,size:n,rotate:r}},_getSizeInPixels:function(t){var e=this.size.x,n=this.size.y;if(null!==this.width||null!==this.height){var r=t.deltaPixelsFromPointsNoRotate(new c.Point(this.width||0,this.height||0),!0);null!==this.width&&(e=r.x),null!==this.height&&(n=r.y)}if(this.checkResize&&(null===this.width||null===this.height)){var o=this.size=c.getElementSize(this.element);null===this.width&&(e=o.x),null===this.height&&(n=o.y)}return new c.Point(e,n)},_getBoundingBox:function(t,e){var n=this._getPlacementPoint(t);return t.rotate(e,n).getBoundingBox()},_getPlacementPoint:function(t){var e=new c.Point(t.x,t.y),n=c.Placement.properties[this.placement];return n&&(n.isHorizontallyCentered?e.x+=t.width/2:n.isRight&&(e.x+=t.width),n.isVerticallyCentered?e.y+=t.height/2:n.isBottom&&(e.y+=t.height)),e},_getTransformOrigin:function(){var t="",e=c.Placement.properties[this.placement];return e?(e.isLeft?t="left":e.isRight&&(t="right"),e.isTop?t+=" top":e.isBottom&&(t+=" bottom"),t):t},update:function(t,e){var n=c.isPlainObject(t)?t:{location:t,placement:e};this._init({location:n.location||this.location,placement:void 0!==n.placement?n.placement:this.placement,onDraw:n.onDraw||this.onDraw,checkResize:n.checkResize||this.checkResize,width:void 0!==n.width?n.width:this.width,height:void 0!==n.height?n.height:this.height,rotationMode:n.rotationMode||this.rotationMode})},getBounds:function(t){c.console.assert(t,"A viewport must now be passed to Overlay.getBounds.");var e=this.width,n=this.height;if(null===e||null===n){var r=t.deltaPointsFromPixelsNoRotate(this.size,!0);null===e&&(e=r.x),null===n&&(n=r.y)}var o=this.location.clone();return this.adjust(o,new c.Point(e,n)),this._adjustBoundsForRotation(t,new c.Rect(o.x,o.y,e,n))},_adjustBoundsForRotation:function(t,e){if(!t||0===t.degrees||this.rotationMode===c.OverlayRotationMode.EXACT)return e;if(this.rotationMode!==c.OverlayRotationMode.BOUNDING_BOX)return e.rotate(-t.degrees,this._getPlacementPoint(e));if(null===this.width||null===this.height)return e;var n=this._getOverlayPositionAndSize(t);return t.viewerElementToViewportRectangle(new c.Rect(n.position.x,n.position.y,n.size.x,n.size.y))}},u=OpenSeadragon,u.Drawer=function(t){u.console.assert(t.viewer,"[Drawer] options.viewer is required");var e=arguments;if(u.isPlainObject(t)||(t={source:e[0],viewport:e[1],element:e[2]}),u.console.assert(t.viewport,"[Drawer] options.viewport is required"),u.console.assert(t.element,"[Drawer] options.element is required"),t.source&&u.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=t.viewer,this.viewport=t.viewport,this.debugGridColor="string"==typeof t.debugGridColor?[t.debugGridColor]:t.debugGridColor||u.DEFAULT_SETTINGS.debugGridColor,t.opacity&&u.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=u.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=u.getElement(t.element),this.canvas=u.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var n=this._calculateCanvasSize();this.canvas.width=n.x,this.canvas.height=n.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",u.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},u.Drawer.prototype={addOverlay:function(t,e,n,r){return u.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(t,e,n,r),this},updateOverlay:function(t,e,n){return u.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(t,e,n),this},removeOverlay:function(t){return u.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(t),this},clearOverlays:function(){return u.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(t){var e=this.viewport.pixelFromPointNoRotate(t,!0);return new u.Point(e.x*u.pixelDensityRatio,e.y*u.pixelDensityRatio)},clipWithPolygons:function(t,e){if(this.useCanvas){var n=this._getContext(e);n.beginPath(),t.forEach((function(t){t.forEach((function(t,e){n[0===e?"moveTo":"lineTo"](t.x,t.y)}))})),n.clip()}},setOpacity:function(t){u.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var e=this.viewer.world,n=0;n<e.getItemCount();n++)e.getItemAt(n).setOpacity(t);return this},getOpacity:function(){u.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var t=this.viewer.world,e=0,n=0;n<t.getItemCount();n++){var r=t.getItemAt(n).getOpacity();e<r&&(e=r)}return e},needsUpdate:function(){return u.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return u.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return u.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return u.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var t=this._calculateCanvasSize();if((this.canvas.width!=t.x||this.canvas.height!=t.y)&&(this.canvas.width=t.x,this.canvas.height=t.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var e=this._calculateSketchCanvasSize();this.sketchCanvas.width=e.x,this.sketchCanvas.height=e.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(t,e){if(this.useCanvas){var n=this._getContext(t);if(e)n.clearRect(e.x,e.y,e.width,e.height);else{var r=n.canvas;n.clearRect(0,0,r.width,r.height)}}},viewportToDrawerRectangle:function(t){var e=this.viewport.pixelFromPointNoRotate(t.getTopLeft(),!0),n=this.viewport.deltaPixelsFromPointsNoRotate(t.getSize(),!0);return new u.Rect(e.x*u.pixelDensityRatio,e.y*u.pixelDensityRatio,n.x*u.pixelDensityRatio,n.y*u.pixelDensityRatio)},drawTile:function(t,e,n,r,o){if(u.console.assert(t,"[Drawer.drawTile] tile is required"),u.console.assert(e,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var i=this._getContext(n);r=r||1,t.drawCanvas(i,e,r,o)}else t.drawHTML(this.canvas)},_getContext:function(t){var e=this.context;if(t){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var n=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var r=this;this.viewer.addHandler("rotate",(function t(){if(0!==r.viewport.getRotation()){r.viewer.removeHandler("rotate",t);var e=r._calculateSketchCanvasSize();r.sketchCanvas.width=e.x,r.sketchCanvas.height=e.y}}))}this._updateImageSmoothingEnabled(this.sketchContext)}e=this.sketchContext}return e},saveContext:function(t){this.useCanvas&&this._getContext(t).save()},restoreContext:function(t){this.useCanvas&&this._getContext(t).restore()},setClip:function(t,e){if(this.useCanvas){var n=this._getContext(e);n.beginPath(),n.rect(t.x,t.y,t.width,t.height),n.clip()}},drawRectangle:function(t,e,n){if(this.useCanvas){var r=this._getContext(n);r.save(),r.fillStyle=e,r.fillRect(t.x,t.y,t.width,t.height),r.restore()}},blendSketch:function(t,e,n,r){var o=t;if(u.isPlainObject(o)||(o={opacity:t,scale:e,translate:n,compositeOperation:r}),this.useCanvas&&this.sketchCanvas){t=o.opacity,r=o.compositeOperation;var i=o.bounds;if(this.context.save(),this.context.globalAlpha=t,r&&(this.context.globalCompositeOperation=r),i)i.x<0&&(i.width+=i.x,i.x=0),i.x+i.width>this.canvas.width&&(i.width=this.canvas.width-i.x),i.y<0&&(i.height+=i.y,i.y=0),i.y+i.height>this.canvas.height&&(i.height=this.canvas.height-i.y),this.context.drawImage(this.sketchCanvas,i.x,i.y,i.width,i.height,i.x,i.y,i.width,i.height);else{e=o.scale||1;var s=(n=o.translate)instanceof u.Point?n:new u.Point(0,0),a=0,l=0;if(n){var c=this.sketchCanvas.width-this.canvas.width,p=this.sketchCanvas.height-this.canvas.height;a=Math.round(c/2),l=Math.round(p/2)}this.context.drawImage(this.sketchCanvas,s.x-a*e,s.y-l*e,(this.canvas.width+2*a)*e,(this.canvas.height+2*l)*e,-a,-l,this.canvas.width+2*a,this.canvas.height+2*l)}this.context.restore()}},drawDebugInfo:function(t,e,n,r){if(this.useCanvas){var o=this.viewer.world.getIndexOfItem(r)%this.debugGridColor.length,i=this.context;i.save(),i.lineWidth=2*u.pixelDensityRatio,i.font="small-caps bold "+13*u.pixelDensityRatio+"px arial",i.strokeStyle=this.debugGridColor[o],i.fillStyle=this.debugGridColor[o],0!==this.viewport.degrees&&this._offsetForRotation({degrees:this.viewport.degrees}),r.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:r.getRotation(!0),point:r.viewport.pixelFromPointNoRotate(r._getRotationPoint(!0),!0)}),0===r.viewport.degrees&&r.getRotation(!0)%360==0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),i.strokeRect(t.position.x*u.pixelDensityRatio,t.position.y*u.pixelDensityRatio,t.size.x*u.pixelDensityRatio,t.size.y*u.pixelDensityRatio);var s=(t.position.x+t.size.x/2)*u.pixelDensityRatio,a=(t.position.y+t.size.y/2)*u.pixelDensityRatio;i.translate(s,a),i.rotate(Math.PI/180*-this.viewport.degrees),i.translate(-s,-a),0===t.x&&0===t.y&&(i.fillText("Zoom: "+this.viewport.getZoom(),t.position.x*u.pixelDensityRatio,(t.position.y-30)*u.pixelDensityRatio),i.fillText("Pan: "+this.viewport.getBounds().toString(),t.position.x*u.pixelDensityRatio,(t.position.y-20)*u.pixelDensityRatio)),i.fillText("Level: "+t.level,(t.position.x+10)*u.pixelDensityRatio,(t.position.y+20)*u.pixelDensityRatio),i.fillText("Column: "+t.x,(t.position.x+10)*u.pixelDensityRatio,(t.position.y+30)*u.pixelDensityRatio),i.fillText("Row: "+t.y,(t.position.x+10)*u.pixelDensityRatio,(t.position.y+40)*u.pixelDensityRatio),i.fillText("Order: "+n+" of "+e,(t.position.x+10)*u.pixelDensityRatio,(t.position.y+50)*u.pixelDensityRatio),i.fillText("Size: "+t.size.toString(),(t.position.x+10)*u.pixelDensityRatio,(t.position.y+60)*u.pixelDensityRatio),i.fillText("Position: "+t.position.toString(),(t.position.x+10)*u.pixelDensityRatio,(t.position.y+70)*u.pixelDensityRatio),0!==this.viewport.degrees&&this._restoreRotationChanges(),r.getRotation(!0)%360!=0&&this._restoreRotationChanges(),0===r.viewport.degrees&&r.getRotation(!0)%360==0&&r._drawer.viewer.viewport.getFlip()&&r._drawer._flip(),i.restore()}},debugRect:function(t){if(this.useCanvas){var e=this.context;e.save(),e.lineWidth=2*u.pixelDensityRatio,e.strokeStyle=this.debugGridColor[0],e.fillStyle=this.debugGridColor[0],e.strokeRect(t.x*u.pixelDensityRatio,t.y*u.pixelDensityRatio,t.width*u.pixelDensityRatio,t.height*u.pixelDensityRatio),e.restore()}},setImageSmoothingEnabled:function(t){this.useCanvas&&(this._imageSmoothingEnabled=t,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(t){t.msImageSmoothingEnabled=this._imageSmoothingEnabled,t.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(t){var e=this._getContext(t).canvas;return new u.Point(e.width,e.height)},getCanvasCenter:function(){return new u.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(t){var e=t.point?t.point.times(u.pixelDensityRatio):this.getCanvasCenter(),n=this._getContext(t.useSketch);n.save(),n.translate(e.x,e.y),this.viewer.viewport.flipped?(n.rotate(Math.PI/180*-t.degrees),n.scale(-1,1)):n.rotate(Math.PI/180*t.degrees),n.translate(-e.x,-e.y)},_flip:function(t){var e=(t=t||{}).point?t.point.times(u.pixelDensityRatio):this.getCanvasCenter(),n=this._getContext(t.useSketch);n.translate(e.x,0),n.scale(-1,1),n.translate(-e.x,0)},_restoreRotationChanges:function(t){this._getContext(t).restore()},_calculateCanvasSize:function(){var t=u.pixelDensityRatio,e=this.viewport.getContainerSize();return{x:Math.round(e.x*t),y:Math.round(e.y*t)}},_calculateSketchCanvasSize:function(){var t=this._calculateCanvasSize();if(0===this.viewport.getRotation())return t;var e=Math.ceil(Math.sqrt(t.x*t.x+t.y*t.y));return{x:e,y:e}}},p=OpenSeadragon,p.Viewport=function(t){var e=arguments;e.length&&e[0]instanceof p.Point&&(t={containerSize:e[0],contentSize:e[1],config:e[2]}),t.config&&(p.extend(!0,t,t.config),delete t.config),this._margins=p.extend({left:0,top:0,right:0,bottom:0},t.margins||{}),delete t.margins,p.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:p.DEFAULT_SETTINGS.springStiffness,animationTime:p.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:p.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:p.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:p.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:p.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:p.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:p.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:p.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:p.DEFAULT_SETTINGS.maxZoomLevel,degrees:p.DEFAULT_SETTINGS.degrees,flipped:p.DEFAULT_SETTINGS.flipped,homeFillsViewer:p.DEFAULT_SETTINGS.homeFillsViewer},t),this._updateContainerInnerSize(),this.centerSpringX=new p.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new p.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new p.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._setContentBounds(new p.Rect(0,0,1,1),1),this.goHome(!0),this.update()},p.Viewport.prototype={resetContentSize:function(t){return p.console.assert(t,"[Viewport.resetContentSize] contentSize is required"),p.console.assert(t instanceof p.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),p.console.assert(0<t.x,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),p.console.assert(0<t.y,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new p.Rect(0,0,1,t.y/t.x),t.x),this},setHomeBounds:function(t,e){p.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(t,e)},_setContentBounds:function(t,e){p.console.assert(t,"[Viewport._setContentBounds] bounds is required"),p.console.assert(t instanceof p.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),p.console.assert(0<t.width,"[Viewport._setContentBounds] bounds.width must be greater than 0"),p.console.assert(0<t.height,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=t.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(e),this._contentBounds=t.rotate(this.degrees).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(e),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:e,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var t=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?1<=t?t:1:1<=t?1:t)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var t=this._contentBounds.getCenter(),e=1/this.getHomeZoom(),n=e/this.getAspectRatio();return new p.Rect(t.x-e/2,t.y-n/2,e,n)},goHome:function(t){return this.viewer&&this.viewer.raiseEvent("home",{immediately:t}),this.fitBounds(this.getHomeBounds(),t)},getMinZoom:function(){var t=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*t},getMaxZoom:function(){var t=this.maxZoomLevel;return t||(t=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,t/=this._contentBounds.width),Math.max(t,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new p.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return p.extend({},this._margins)},setMargins:function(t){p.console.assert("object"===p.type(t),"[Viewport.setMargins] margins must be an object"),this._margins=p.extend({left:0,top:0,right:0,bottom:0},t),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(t){return this.getBoundsNoRotate(t).rotate(-this.getRotation())},getBoundsNoRotate:function(t){var e=this.getCenter(t),n=1/this.getZoom(t),r=n/this.getAspectRatio();return new p.Rect(e.x-n/2,e.y-r/2,n,r)},getBoundsWithMargins:function(t){return this.getBoundsNoRotateWithMargins(t).rotate(-this.getRotation(),this.getCenter(t))},getBoundsNoRotateWithMargins:function(t){var e=this.getBoundsNoRotate(t),n=this._containerInnerSize.x*this.getZoom(t);return e.x-=this._margins.left/n,e.y-=this._margins.top/n,e.width+=(this._margins.left+this._margins.right)/n,e.height+=(this._margins.top+this._margins.bottom)/n,e},getCenter:function(t){var e,n,r,o,i,s,a=new p.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),u=new p.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return t?a:this.zoomPoint?(e=this.pixelFromPoint(this.zoomPoint,!0),o=(r=1/(n=this.getZoom()))/this.getAspectRatio(),i=new p.Rect(a.x-r/2,a.y-o/2,r,o),s=this._pixelFromPoint(this.zoomPoint,i).minus(e).divide(this._containerInnerSize.x*n),u.plus(s)):u},getZoom:function(t){return t?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(t){return Math.max(Math.min(t,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(t){var e=new p.Rect(t.x,t.y,t.width,t.height);if(!this.wrapHorizontal){var n=this.visibilityRatio*e.width,r=e.x+e.width,o=this._contentBoundsNoRotate.x+this._contentBoundsNoRotate.width,i=this._contentBoundsNoRotate.x-r+n,s=o-e.x-n;n>this._contentBoundsNoRotate.width?e.x+=(i+s)/2:s<0?e.x+=s:0<i&&(e.x+=i)}if(!this.wrapVertical){var a=this.visibilityRatio*e.height,u=e.y+e.height,l=this._contentBoundsNoRotate.y+this._contentBoundsNoRotate.height,c=this._contentBoundsNoRotate.y-u+a,f=l-e.y-a;a>this._contentBoundsNoRotate.height?e.y+=(c+f)/2:f<0?e.y+=f:0<c&&(e.y+=c)}return e},_raiseConstraintsEvent:function(t){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:t})},applyConstraints:function(t){var e=this.getZoom(),n=this._applyZoomConstraints(e);e!==n&&this.zoomTo(n,this.zoomPoint,t);var r=this.getBoundsNoRotate(),o=this._applyBoundaryConstraints(r);return this._raiseConstraintsEvent(t),r.x===o.x&&r.y===o.y&&!t||this.fitBounds(o.rotate(-this.getRotation()),t),this},ensureVisible:function(t){return this.applyConstraints(t)},_fitBounds:function(t,e){var n=(e=e||{}).immediately||!1,r=e.constraints||!1,o=this.getAspectRatio(),i=t.getCenter(),s=new p.Rect(t.x,t.y,t.width,t.height,t.degrees+this.getRotation()).getBoundingBox();s.getAspectRatio()>=o?s.height=s.width/o:s.width=s.height*o,s.x=i.x-s.width/2,s.y=i.y-s.height/2;var a=1/s.width;if(r){var u=s.getAspectRatio(),l=this._applyZoomConstraints(a);a!==l&&(a=l,s.width=1/a,s.x=i.x-s.width/2,s.height=s.width/u,s.y=i.y-s.height/2),i=(s=this._applyBoundaryConstraints(s)).getCenter(),this._raiseConstraintsEvent(n)}if(n)return this.panTo(i,!0),this.zoomTo(a,null,!0);this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0);var c=this.getBounds(),f=this.getZoom();if(0===f||Math.abs(a/f-1)<1e-8)return this.zoomTo(a,!0),this.panTo(i,n);var h=(s=s.rotate(-this.getRotation())).getTopLeft().times(a).minus(c.getTopLeft().times(f)).divide(a-f);return this.zoomTo(a,h,n)},fitBounds:function(t,e){return this._fitBounds(t,{immediately:e,constraints:!1})},fitBoundsWithConstraints:function(t,e){return this._fitBounds(t,{immediately:e,constraints:!0})},fitVertically:function(t){var e=new p.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(e,t)},fitHorizontally:function(t){var e=new p.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(e,t)},getConstrainedBounds:function(t){var e;return e=this.getBounds(t),this._applyBoundaryConstraints(e)},panBy:function(t,e){var n=new p.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(n.plus(t),e)},panTo:function(t,e){return e?(this.centerSpringX.resetTo(t.x),this.centerSpringY.resetTo(t.y)):(this.centerSpringX.springTo(t.x),this.centerSpringY.springTo(t.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:t,immediately:e}),this},zoomBy:function(t,e,n){return this.zoomTo(this.zoomSpring.target.value*t,e,n)},zoomTo:function(t,e,n){var r=this;return this.zoomPoint=e instanceof p.Point&&!isNaN(e.x)&&!isNaN(e.y)?e:null,n?this._adjustCenterSpringsForZoomPoint((function(){r.zoomSpring.resetTo(t)})):this.zoomSpring.springTo(t),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:t,refPoint:e,immediately:n}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(this.degrees=p.positiveModulo(t,360),this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(t,e){var n,r=this.getBoundsNoRotate(),o=r;return this.containerSize.x=t.x,this.containerSize.y=t.y,this._updateContainerInnerSize(),e&&(n=t.x/this.containerSize.x,o.width=r.width*n,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:t,maintain:e}),this.fitBounds(o,!0)},_updateContainerInnerSize:function(){this._containerInnerSize=new p.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var t=this;this._adjustCenterSpringsForZoomPoint((function(){t.zoomSpring.update()})),this.centerSpringX.update(),this.centerSpringY.update();var e=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,e},_adjustCenterSpringsForZoomPoint:function(t){if(this.zoomPoint){var e=this.pixelFromPoint(this.zoomPoint,!0);t();var n=this.pixelFromPoint(this.zoomPoint,!0).minus(e),r=this.deltaPointsFromPixels(n,!0);this.centerSpringX.shiftBy(r.x),this.centerSpringY.shiftBy(r.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else t()},deltaPixelsFromPointsNoRotate:function(t,e){return t.times(this._containerInnerSize.x*this.getZoom(e))},deltaPixelsFromPoints:function(t,e){return this.deltaPixelsFromPointsNoRotate(t.rotate(this.getRotation()),e)},deltaPointsFromPixelsNoRotate:function(t,e){return t.divide(this._containerInnerSize.x*this.getZoom(e))},deltaPointsFromPixels:function(t,e){return this.deltaPointsFromPixelsNoRotate(t,e).rotate(-this.getRotation())},pixelFromPointNoRotate:function(t,e){return this._pixelFromPointNoRotate(t,this.getBoundsNoRotate(e))},pixelFromPoint:function(t,e){return this._pixelFromPoint(t,this.getBoundsNoRotate(e))},_pixelFromPointNoRotate:function(t,e){return t.minus(e.getTopLeft()).times(this._containerInnerSize.x/e.width).plus(new p.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(t,e){return this._pixelFromPointNoRotate(t.rotate(this.getRotation(),this.getCenter(!0)),e)},pointFromPixelNoRotate:function(t,e){var n=this.getBoundsNoRotate(e);return t.minus(new p.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/n.width).plus(n.getTopLeft())},pointFromPixel:function(t,e){return this.pointFromPixelNoRotate(t,e).rotate(-this.getRotation(),this.getCenter(!0))},_viewportToImageDelta:function(t,e){var n=this._contentBoundsNoRotate.width;return new p.Point(t*this._contentSizeNoRotate.x/n,e*this._contentSizeNoRotate.x/n)},viewportToImageCoordinates:function(t,e){if(t instanceof p.Point)return this.viewportToImageCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(1<n)p.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===n)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(t,e,!0)}return this._viewportToImageDelta(t-this._contentBoundsNoRotate.x,e-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(t,e){var n=this._contentBoundsNoRotate.width;return new p.Point(t/this._contentSizeNoRotate.x*n,e/this._contentSizeNoRotate.x*n)},imageToViewportCoordinates:function(t,e){if(t instanceof p.Point)return this.imageToViewportCoordinates(t.x,t.y);if(this.viewer){var n=this.viewer.world.getItemCount();if(1<n)p.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===n)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(t,e,!0)}var r=this._imageToViewportDelta(t,e);return r.x+=this._contentBoundsNoRotate.x,r.y+=this._contentBoundsNoRotate.y,r},imageToViewportRectangle:function(t,e,n,r){var o=t;if(o instanceof p.Rect||(o=new p.Rect(t,e,n,r)),this.viewer){var i=this.viewer.world.getItemCount();if(1<i)p.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===i)return this.viewer.world.getItemAt(0).imageToViewportRectangle(t,e,n,r,!0)}var s=this.imageToViewportCoordinates(o.x,o.y),a=this._imageToViewportDelta(o.width,o.height);return new p.Rect(s.x,s.y,a.x,a.y,o.degrees)},viewportToImageRectangle:function(t,e,n,r){var o=t;if(o instanceof p.Rect||(o=new p.Rect(t,e,n,r)),this.viewer){var i=this.viewer.world.getItemCount();if(1<i)p.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===i)return this.viewer.world.getItemAt(0).viewportToImageRectangle(t,e,n,r,!0)}var s=this.viewportToImageCoordinates(o.x,o.y),a=this._viewportToImageDelta(o.width,o.height);return new p.Rect(s.x,s.y,a.x,a.y,o.degrees)},viewerElementToImageCoordinates:function(t){var e=this.pointFromPixel(t,!0);return this.viewportToImageCoordinates(e)},imageToViewerElementCoordinates:function(t){var e=this.imageToViewportCoordinates(t);return this.pixelFromPoint(e,!0)},windowToImageCoordinates:function(t){p.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var e=t.minus(p.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(e)},imageToWindowCoordinates:function(t){return p.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(t).plus(p.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(t){return this.pointFromPixel(t,!0)},viewportToViewerElementCoordinates:function(t){return this.pixelFromPoint(t,!0)},viewerElementToViewportRectangle:function(t){return p.Rect.fromSummits(this.pointFromPixel(t.getTopLeft(),!0),this.pointFromPixel(t.getTopRight(),!0),this.pointFromPixel(t.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(t){return p.Rect.fromSummits(this.pixelFromPoint(t.getTopLeft(),!0),this.pixelFromPoint(t.getTopRight(),!0),this.pixelFromPoint(t.getBottomLeft(),!0))},windowToViewportCoordinates:function(t){p.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var e=t.minus(p.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(e)},viewportToWindowCoordinates:function(t){return p.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(t).plus(p.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){if(this.viewer){var e=this.viewer.world.getItemCount();if(1<e)p.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===e)return this.viewer.world.getItemAt(0).viewportToImageZoom(t)}var n=this._contentSizeNoRotate.x;return t*(this._containerInnerSize.x/n*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(t){if(this.viewer){var e=this.viewer.world.getItemCount();if(1<e)p.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===e)return this.viewer.world.getItemAt(0).imageToViewportZoom(t)}return t*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(t){return this.flipped===t||(this.flipped=t,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:t})),this}},function(t){function e(t,e,r,o,i,s,u,l,c){var p=u.getBoundingBox().getTopLeft(),f=u.getBoundingBox().getBottomRight();t.viewer&&t.viewer.raiseEvent("update-level",{tiledImage:t,havedrawn:e,level:o,opacity:i,visibility:s,drawArea:u,topleft:p,bottomright:f,currenttime:l,best:c}),a(t.coverage,o),a(t.loadingCoverage,o);for(var h=t._getCornerTiles(o,p,f),d=h.topLeft,g=h.bottomRight,y=t.source.getNumTiles(o),m=t.viewport.pixelFromPoint(t.viewport.getCenter()),v=d.x;v<=g.x;v++)for(var b=d.y;b<=g.y;b++){if(!t.wrapHorizontal&&!t.wrapVertical){var _=t.source.getTileBounds(o,v,b);if(null===u.intersection(_))continue}c=n(t,r,e,v,b,o,i,s,m,y,l,c)}return c}function n(e,n,o,a,u,l,c,p,f,h,d,g){var y=function(e,n,r,o,i,s,a,u,l,c){var p,f,h,d,g,y,m,v,b;return s[r]||(s[r]={}),s[r][e]||(s[r][e]={}),s[r][e][n]||(p=(u.x+e%u.x)%u.x,f=(u.y+n%u.y)%u.y,h=i.getTileBounds(r,p,f),d=i.getTileBounds(r,p,f,!0),g=i.tileExists(r,p,f),y=i.getTileUrl(r,p,f),o.loadTilesWithAjax?(m=i.getTileAjaxHeaders(r,p,f),t.isPlainObject(o.ajaxHeaders)&&(m=t.extend({},o.ajaxHeaders,m))):m=null,v=i.getContext2D?i.getContext2D(r,p,f):void 0,h.x+=(e-p)/u.x,h.y+=c/l*((n-f)/u.y),b=new t.Tile(r,e,n,h,g,y,v,o.loadTilesWithAjax,m,d),p==u.x-1&&(b.isRightMost=!0),f==u.y-1&&(b.isBottomMost=!0),s[r][e][n]=b),(b=s[r][e][n]).lastTouchTime=a,b}(a,u,l,e,e.source,e.tilesMatrix,d,h,e._worldWidthCurrent,e._worldHeightCurrent),m=o;e.viewer&&e.viewer.raiseEvent("update-tile",{tiledImage:e,tile:y}),s(e.coverage,l,a,u,!1);var v=y.loaded||y.loading||i(e.loadingCoverage,l,a,u);if(s(e.loadingCoverage,l,a,u,v),!y.exists)return g;if(n&&!m&&(i(e.coverage,l,a,u)?s(e.coverage,l,a,u,!0):m=!0),!m)return g;if(function(e,n,r,o,i,s){var a=e.bounds.getTopLeft();a.x*=s._scaleSpring.current.value,a.y*=s._scaleSpring.current.value,a.x+=s._xSpring.current.value,a.y+=s._ySpring.current.value;var u=e.bounds.getSize();u.x*=s._scaleSpring.current.value,u.y*=s._scaleSpring.current.value;var l=r.pixelFromPointNoRotate(a,!0),c=r.pixelFromPointNoRotate(a,!1),p=r.deltaPixelsFromPointsNoRotate(u,!0),f=r.deltaPixelsFromPointsNoRotate(u,!1),h=c.plus(f.divide(2)),d=o.squaredDistanceTo(h);n||(p=p.plus(new t.Point(1,1))),e.isRightMost&&s.wrapHorizontal&&(p.x+=.75),e.isBottomMost&&s.wrapVertical&&(p.y+=.75),e.position=l,e.size=p,e.squaredDistance=d,e.visibility=i}(y,e.source.tileOverlap,e.viewport,f,p,e),!y.loaded)if(y.context2D)r(e,y);else{var b=e._tileCache.getImageRecord(y.cacheKey);b&&r(e,y,b.getImage())}return y.loaded?function(t,e,n,r,o,i,a){var u,l,c=1e3*t.blendTime;if(e.blendStart||(e.blendStart=a),u=a-e.blendStart,l=c?Math.min(1,u/c):1,t.alwaysBlend&&(l*=i),e.opacity=l,t.lastDrawn.push(e),1===l)s(t.coverage,o,n,r,!0),t._hasOpaqueTile=!0;else if(u<c)return!0;return!1}(e,y,a,u,l,c,d)&&(e._needsDraw=!0):y.loading?e._tilesLoading++:v||(g=function(t,e){return t?e.visibility>t.visibility||e.visibility==t.visibility&&e.squaredDistance<t.squaredDistance?e:t:e}(g,y)),g}function r(t,e,n,r,o){var i=0;function s(){return i++,a}function a(){0==--i&&(e.loading=!1,e.loaded=!0,e.context2D||t._tileCache.cacheTile({image:n,tile:e,cutoff:r,tiledImage:t}),t._needsDraw=!0)}t.viewer.raiseEvent("tile-loaded",{tile:e,tiledImage:t,tileRequest:o,image:n,getCompletionCallback:s}),s()()}function o(t,e,n,r){var o,i,s,a;if(!t[e])return!1;if(void 0!==n&&void 0!==r)return void 0===t[e][n]||void 0===t[e][n][r]||!0===t[e][n][r];for(s in o=t[e])if(Object.prototype.hasOwnProperty.call(o,s))for(a in i=o[s])if(Object.prototype.hasOwnProperty.call(i,a)&&!i[a])return!1;return!0}function i(t,e,n,r){return void 0===n||void 0===r?o(t,e+1):o(t,e+1,2*n,2*r)&&o(t,e+1,2*n,2*r+1)&&o(t,e+1,2*n+1,2*r)&&o(t,e+1,2*n+1,2*r+1)}function s(e,n,r,o,i){e[n]?(e[n][r]||(e[n][r]={}),e[n][r][o]=i):t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function a(t,e){t[e]={}}t.TiledImage=function(e){var n=this;t.console.assert(e.tileCache,"[TiledImage] options.tileCache is required"),t.console.assert(e.drawer,"[TiledImage] options.drawer is required"),t.console.assert(e.viewer,"[TiledImage] options.viewer is required"),t.console.assert(e.imageLoader,"[TiledImage] options.imageLoader is required"),t.console.assert(e.source,"[TiledImage] options.source is required"),t.console.assert(!e.clip||e.clip instanceof t.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),t.EventSource.call(this),this._tileCache=e.tileCache,delete e.tileCache,this._drawer=e.drawer,delete e.drawer,this._imageLoader=e.imageLoader,delete e.imageLoader,e.clip instanceof t.Rect&&(this._clip=e.clip.clone()),delete e.clip;var r=e.x||0;delete e.x;var o=e.y||0;delete e.y,this.normHeight=e.source.dimensions.y/e.source.dimensions.x,this.contentAspectX=e.source.dimensions.x/e.source.dimensions.y;var i=1;e.width?(i=e.width,delete e.width,e.height&&(t.console.error("specifying both width and height to a tiledImage is not supported"),delete e.height)):e.height&&(i=e.height/this.normHeight,delete e.height);var s=e.fitBounds;delete e.fitBounds;var a=e.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete e.fitBoundsPlacement;var u=e.degrees||0;delete e.degrees,t.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:t.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:t.DEFAULT_SETTINGS.iOSDevice,debugMode:t.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:t.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:t.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:t.DEFAULT_SETTINGS.placeholderFillStyle,opacity:t.DEFAULT_SETTINGS.opacity,preload:t.DEFAULT_SETTINGS.preload,compositeOperation:t.DEFAULT_SETTINGS.compositeOperation},e),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new t.Spring({initial:r,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new t.Spring({initial:o,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new t.Spring({initial:i,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new t.Spring({initial:u,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),s&&this.fitBounds(s,a,!0),this._drawingHandler=function(e){n.viewer.raiseEvent("tile-drawing",t.extend({tiledImage:n},e))}},t.extend(t.TiledImage.prototype,t.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(t){t!==this._fullyLoaded&&(this._fullyLoaded=t,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=t.now(),this._needsDraw=!0},update:function(){var t=this._xSpring.update(),e=this._ySpring.update(),n=this._scaleSpring.update(),r=this._degreesSpring.update();return!!(t||e||n||r)&&(this._updateForScale(),this._needsDraw=!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset()},getBounds:function(t){return this.getBoundsNoRotate(t).rotate(this.getRotation(t),this._getRotationPoint(t))},getBoundsNoRotate:function(e){return e?new t.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new t.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return t.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(e){var n=this.getBoundsNoRotate(e);if(this._clip){var r=(e?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x,o=this._clip.times(r);n=new t.Rect(n.x+o.x,n.y+o.y,o.width,o.height)}return n.rotate(this.getRotation(e),this._getRotationPoint(e))},getContentSize:function(){return new t.Point(this.source.dimensions.x,this.source.dimensions.y)},_viewportToImageDelta:function(e,n,r){var o=r?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(e*(this.source.dimensions.x/o),n*(this.source.dimensions.y*this.contentAspectX/o))},viewportToImageCoordinates:function(e,n,r){var o;return e instanceof t.Point?(r=n,o=e):o=new t.Point(e,n),o=o.rotate(-this.getRotation(r),this._getRotationPoint(r)),r?this._viewportToImageDelta(o.x-this._xSpring.current.value,o.y-this._ySpring.current.value):this._viewportToImageDelta(o.x-this._xSpring.target.value,o.y-this._ySpring.target.value)},_imageToViewportDelta:function(e,n,r){var o=r?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(e/this.source.dimensions.x*o,n/this.source.dimensions.y/this.contentAspectX*o)},imageToViewportCoordinates:function(e,n,r){e instanceof t.Point&&(r=n,n=e.y,e=e.x);var o=this._imageToViewportDelta(e,n);return r?(o.x+=this._xSpring.current.value,o.y+=this._ySpring.current.value):(o.x+=this._xSpring.target.value,o.y+=this._ySpring.target.value),o.rotate(this.getRotation(r),this._getRotationPoint(r))},imageToViewportRectangle:function(e,n,r,o,i){var s=e;s instanceof t.Rect?i=n:s=new t.Rect(e,n,r,o);var a=this.imageToViewportCoordinates(s.getTopLeft(),i),u=this._imageToViewportDelta(s.width,s.height,i);return new t.Rect(a.x,a.y,u.x,u.y,s.degrees+this.getRotation(i))},viewportToImageRectangle:function(e,n,r,o,i){var s=e;e instanceof t.Rect?i=n:s=new t.Rect(e,n,r,o);var a=this.viewportToImageCoordinates(s.getTopLeft(),i),u=this._viewportToImageDelta(s.width,s.height,i);return new t.Rect(a.x,a.y,u.x,u.y,s.degrees-this.getRotation(i))},viewerElementToImageCoordinates:function(t){var e=this.viewport.pointFromPixel(t,!0);return this.viewportToImageCoordinates(e)},imageToViewerElementCoordinates:function(t){var e=this.imageToViewportCoordinates(t);return this.viewport.pixelFromPoint(e,!0)},windowToImageCoordinates:function(t){var e=t.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(e)},imageToWindowCoordinates:function(t){return this.imageToViewerElementCoordinates(t).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(e){var n=this._scaleSpring.current.value;return e=e.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new t.Rect((e.x-this._xSpring.current.value)/n,(e.y-this._ySpring.current.value)/n,e.width/n,e.height/n,e.degrees)},viewportToImageZoom:function(t){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*t},imageToViewportZoom:function(t){return t/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(t,e){var n=this._xSpring.target.value===t.x&&this._ySpring.target.value===t.y;if(e){if(n&&this._xSpring.current.value===t.x&&this._ySpring.current.value===t.y)return;this._xSpring.resetTo(t.x),this._ySpring.resetTo(t.y),this._needsDraw=!0}else{if(n)return;this._xSpring.springTo(t.x),this._ySpring.springTo(t.y),this._needsDraw=!0}n||this._raiseBoundsChange()},setWidth:function(t,e){this._setScale(t,e)},setHeight:function(t,e){this._setScale(t/this.normHeight,e)},setCroppingPolygons:function(e){try{if(!t.isArray(e))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=e.map((function(e){return function(e){return e.map((function(e){try{if((n=e)instanceof t.Point||"number"==typeof n.x&&"number"==typeof n.y)return{x:e.x,y:e.y};throw new Error}catch(e){throw new Error("A Provided cropping polygon point is not supported")}var n}))}(e)}))}catch(e){t.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),t.console.error(e),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(e,n,r){n=n||t.Placement.CENTER;var o=t.Placement.properties[n],i=this.contentAspectX,s=0,a=0,u=1,l=1;if(this._clip&&(i=this._clip.getAspectRatio(),u=this._clip.width/this.source.dimensions.x,l=this._clip.height/this.source.dimensions.y,e.getAspectRatio()>i?(s=this._clip.x/this._clip.height*e.height,a=this._clip.y/this._clip.height*e.height):(s=this._clip.x/this._clip.width*e.width,a=this._clip.y/this._clip.width*e.width)),e.getAspectRatio()>i){var c=e.height/l,p=0;o.isHorizontallyCentered?p=(e.width-e.height*i)/2:o.isRight&&(p=e.width-e.height*i),this.setPosition(new t.Point(e.x-s+p,e.y-a),r),this.setHeight(c,r)}else{var f=e.width/u,h=0;o.isVerticallyCentered?h=(e.height-e.width/i)/2:o.isBottom&&(h=e.height-e.width/i),this.setPosition(new t.Point(e.x-s,e.y-a+h),r),this.setWidth(f,r)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(e){t.console.assert(!e||e instanceof t.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),e instanceof t.Rect?this._clip=e.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getOpacity:function(){return this.opacity},setOpacity:function(t){t!==this.opacity&&(this.opacity=t,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(t){this._preload=!!t,this._needsDraw=!0},getRotation:function(t){return t?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(t,e){this._degreesSpring.target.value===t&&this._degreesSpring.isAtTargetValue()||(e?this._degreesSpring.resetTo(t):this._degreesSpring.springTo(t),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(t){return this.getBoundsNoRotate(t).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(t){t!==this.compositeOperation&&(this.compositeOperation=t,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},_setScale:function(t,e){var n=this._scaleSpring.target.value===t;if(e){if(n&&this._scaleSpring.current.value===t)return;this._scaleSpring.resetTo(t),this._updateForScale(),this._needsDraw=!0}else{if(n)return;this._scaleSpring.springTo(t),this._updateForScale(),this._needsDraw=!0}n||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var t=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),e=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,n=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(e/this.minPixelRatio)/Math.log(2))));return n=Math.max(n,this.source.minLevel||0),{lowestLevel:t=Math.min(t,n),highestLevel:n}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};0<this.lastDrawn.length;)this.lastDrawn.pop().beingDrawn=!1;var n=this.viewport,i=this._viewportToTiledImageRectangle(n.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var s=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(i=i.intersection(s)))return}for(var a=this._getLevelsInterval(),u=a.lowestLevel,l=a.highestLevel,c=null,p=!1,f=t.now(),h=l;u<=h;h--){var d=!1,g=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(h),!0).x*this._scaleSpring.current.value;if(h===u||!p&&g>=this.minPixelRatio)p=d=!0;else if(!p)continue;var y=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(h),!1).x*this._scaleSpring.current.value,m=n.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,v=this.immediateRender?1:m;if(c=e(this,p,d,h,Math.min(1,(g-.5)/.5),v/Math.abs(v-y),i,f,c),o(this.coverage,h))break}!function(e,n){if(0!==e.opacity&&(0!==n.length||e.placeholderFillStyle)){var r,o,i,s=n[0];s&&(r=e.opacity<1||e.compositeOperation&&"source-over"!==e.compositeOperation||!e._isBottomItem()&&s._hasTransparencyChannel());var a,u=e.viewport.getZoom(!0),l=e.viewportToImageZoom(u);1<n.length&&l>e.smoothTileEdgesMinZoom&&!e.iOSDevice&&e.getRotation(!0)%360==0&&t.supportsCanvas&&(r=!0,o=s.getScaleForEdgeSmoothing(),i=s.getTranslationForEdgeSmoothing(o,e._drawer.getCanvasSize(!1),e._drawer.getCanvasSize(!0))),r&&(o||(a=e.viewport.viewportToViewerElementRectangle(e.getClippedBounds(!0)).getIntegerBoundingBox(),e._drawer.viewer.viewport.getFlip()&&(0===e.viewport.degrees&&e.getRotation(!0)%360==0||(a.x=e._drawer.viewer.container.clientWidth-(a.x+a.width))),a=a.times(t.pixelDensityRatio)),e._drawer._clear(!0,a)),o||(0!==e.viewport.degrees&&e._drawer._offsetForRotation({degrees:e.viewport.degrees,useSketch:r}),e.getRotation(!0)%360!=0&&e._drawer._offsetForRotation({degrees:e.getRotation(!0),point:e.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:r}),0===e.viewport.degrees&&e.getRotation(!0)%360==0&&e._drawer.viewer.viewport.getFlip()&&e._drawer._flip());var c=!1;if(e._clip){e._drawer.saveContext(r);var p=e.imageToViewportRectangle(e._clip,!0);p=p.rotate(-e.getRotation(!0),e._getRotationPoint(!0));var f=e._drawer.viewportToDrawerRectangle(p);o&&(f=f.times(o)),i&&(f=f.translate(i)),e._drawer.setClip(f,r),c=!0}if(e._croppingPolygons){e._drawer.saveContext(r);try{var h=e._croppingPolygons.map((function(t){return t.map((function(t){var n=e.imageToViewportCoordinates(t.x,t.y,!0).rotate(-e.getRotation(!0),e._getRotationPoint(!0)),r=e._drawer.viewportCoordToDrawerCoord(n);return o&&(r=r.times(o)),r}))}));e._drawer.clipWithPolygons(h,r)}catch(n){t.console.error(n)}c=!0}if(e.placeholderFillStyle&&!1===e._hasOpaqueTile){var d=e._drawer.viewportToDrawerRectangle(e.getBounds(!0));o&&(d=d.times(o)),i&&(d=d.translate(i));var g;g="function"==typeof e.placeholderFillStyle?e.placeholderFillStyle(e,e._drawer.context):e.placeholderFillStyle,e._drawer.drawRectangle(d,g,r)}for(var y=n.length-1;0<=y;y--)s=n[y],e._drawer.drawTile(s,e._drawingHandler,r,o,i),s.beingDrawn=!0,e.viewer&&e.viewer.raiseEvent("tile-drawn",{tiledImage:e,tile:s});c&&e._drawer.restoreContext(r),o||(e.getRotation(!0)%360!=0&&e._drawer._restoreRotationChanges(r),0!==e.viewport.degrees&&e._drawer._restoreRotationChanges(r)),r&&(o&&(0!==e.viewport.degrees&&e._drawer._offsetForRotation({degrees:e.viewport.degrees,useSketch:!1}),e.getRotation(!0)%360!=0&&e._drawer._offsetForRotation({degrees:e.getRotation(!0),point:e.viewport.pixelFromPointNoRotate(e._getRotationPoint(!0),!0),useSketch:!1})),e._drawer.blendSketch({opacity:e.opacity,scale:o,translate:i,compositeOperation:e.compositeOperation,bounds:a}),o&&(e.getRotation(!0)%360!=0&&e._drawer._restoreRotationChanges(!1),0!==e.viewport.degrees&&e._drawer._restoreRotationChanges(!1))),o||0===e.viewport.degrees&&e.getRotation(!0)%360==0&&e._drawer.viewer.viewport.getFlip()&&e._drawer._flip(),function(e,n){if(e.debugMode)for(var r=n.length-1;0<=r;r--){var o=n[r];try{e._drawer.drawDebugInfo(o,n.length,r,e)}catch(e){t.console.error(e)}}}(e,n)}}(this,this.lastDrawn),c&&!c.context2D?(!function(e,n,o){n.loading=!0,e._imageLoader.addJob({src:n.url,loadWithAjax:n.loadWithAjax,ajaxHeaders:n.ajaxHeaders,crossOriginPolicy:e.crossOriginPolicy,ajaxWithCredentials:e.ajaxWithCredentials,callback:function(i,s,a){!function(e,n,o,i,s,a){if(!i)return t.console.log("Tile %s failed to load: %s - error: %s",n,n.url,s),e.viewer.raiseEvent("tile-load-failed",{tile:n,tiledImage:e,time:o,message:s,tileRequest:a}),n.loading=!1,void(n.exists=!1);if(o<e.lastResetTime)return t.console.log("Ignoring tile %s loaded before reset: %s",n,n.url),void(n.loading=!1);function u(){var t=e.source.getClosestLevel();r(e,n,i,t,a)}e._midDraw?window.setTimeout(u,1):u()}(e,n,o,i,s,a)},abort:function(){n.loading=!1}})}(this,c,f),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(e,n,r){var o,i,s,a;this.wrapHorizontal?(o=t.positiveModulo(n.x,1),i=t.positiveModulo(r.x,1)):(o=Math.max(0,n.x),i=Math.min(1,r.x));var u=1/this.source.aspectRatio;this.wrapVertical?(s=t.positiveModulo(n.y,u),a=t.positiveModulo(r.y,u)):(s=Math.max(0,n.y),a=Math.min(u,r.y));var l=this.source.getTileAtPoint(e,new t.Point(o,s)),c=this.source.getTileAtPoint(e,new t.Point(i,a)),p=this.source.getNumTiles(e);return this.wrapHorizontal&&(l.x+=p.x*Math.floor(n.x),c.x+=p.x*Math.floor(r.x)),this.wrapVertical&&(l.y+=p.y*Math.floor(n.y/u),c.y+=p.y*Math.floor(r.y/u)),{topLeft:l,bottomRight:c}}})}(OpenSeadragon),function(t){function e(e){t.console.assert(e,"[TileCache.cacheTile] options is required"),t.console.assert(e.tile,"[TileCache.cacheTile] options.tile is required"),t.console.assert(e.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=e.tile,this.tiledImage=e.tiledImage}function n(e){t.console.assert(e,"[ImageRecord] options is required"),t.console.assert(e.image,"[ImageRecord] options.image is required"),this._image=e.image,this._tiles=[]}n.prototype={destroy:function(){this._image=null,this._renderedContext=null,this._tiles=null},getImage:function(){return this._image},getRenderedContext:function(){if(!this._renderedContext){var t=document.createElement("canvas");t.width=this._image.width,t.height=this._image.height,this._renderedContext=t.getContext("2d"),this._renderedContext.drawImage(this._image,0,0),this._image=null}return this._renderedContext},setRenderedContext:function(e){t.console.error("ImageRecord.setRenderedContext is deprecated. The rendered context should be created by the ImageRecord itself when calling ImageRecord.getRenderedContext."),this._renderedContext=e},addTile:function(e){t.console.assert(e,"[ImageRecord.addTile] tile is required"),this._tiles.push(e)},removeTile:function(e){for(var n=0;n<this._tiles.length;n++)if(this._tiles[n]===e)return void this._tiles.splice(n,1);t.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",e)},getTileCount:function(){return this._tiles.length}},t.TileCache=function(e){e=e||{},this._maxImageCacheCount=e.maxImageCacheCount||t.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},t.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(r){t.console.assert(r,"[TileCache.cacheTile] options is required"),t.console.assert(r.tile,"[TileCache.cacheTile] options.tile is required"),t.console.assert(r.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),t.console.assert(r.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var o=r.cutoff||0,i=this._tilesLoaded.length,s=this._imagesLoaded[r.tile.cacheKey];if(s||(t.console.assert(r.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord"),s=this._imagesLoaded[r.tile.cacheKey]=new n({image:r.image}),this._imagesLoadedCount++),s.addTile(r.tile),r.tile.cacheImageRecord=s,this._imagesLoadedCount>this._maxImageCacheCount){for(var a,u,l,c,p,f,h=null,d=-1,g=null,y=this._tilesLoaded.length-1;0<=y;y--)(a=(f=this._tilesLoaded[y]).tile).level<=o||a.beingDrawn||(h?(c=a.lastTouchTime,u=h.lastTouchTime,p=a.level,l=h.level,(c<u||c==u&&l<p)&&(h=a,d=y,g=f)):(h=a,d=y,g=f));h&&0<=d&&(this._unloadTile(g),i=d)}this._tilesLoaded[i]=new e({tile:r.tile,tiledImage:r.tiledImage})},clearTilesFor:function(e){var n;t.console.assert(e,"[TileCache.clearTilesFor] tiledImage is required");for(var r=0;r<this._tilesLoaded.length;++r)(n=this._tilesLoaded[r]).tiledImage===e&&(this._unloadTile(n),this._tilesLoaded.splice(r,1),r--)},getImageRecord:function(e){return t.console.assert(e,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[e]},_unloadTile:function(e){t.console.assert(e,"[TileCache._unloadTile] tileRecord is required");var n=e.tile,r=e.tiledImage;n.unload(),n.cacheImageRecord=null;var o=this._imagesLoaded[n.cacheKey];o.removeTile(n),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[n.cacheKey],this._imagesLoadedCount--),r.viewer.raiseEvent("tile-unloaded",{tile:n,tiledImage:r})}}}(OpenSeadragon),v=OpenSeadragon,v.World=function(t){var e=this;v.console.assert(t.viewer,"[World] options.viewer is required"),v.EventSource.call(this),this.viewer=t.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(t){e._autoRefigureSizes?e._figureSizes():e._needsSizesFigured=!0},this._figureSizes()},v.extend(v.World.prototype,v.EventSource.prototype,{addItem:function(t,e){if(v.console.assert(t,"[World.addItem] item is required"),v.console.assert(t instanceof v.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(e=e||{}).index){var n=Math.max(0,Math.min(this._items.length,e.index));this._items.splice(n,0,t)}else this._items.push(t);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,t.addHandler("bounds-change",this._delegatedFigureSizes),t.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:t})},getItemAt:function(t){return v.console.assert(void 0!==t,"[World.getItemAt] index is required"),this._items[t]},getIndexOfItem:function(t){return v.console.assert(t,"[World.getIndexOfItem] item is required"),v.indexOf(this._items,t)},getItemCount:function(){return this._items.length},setItemIndex:function(t,e){v.console.assert(t,"[World.setItemIndex] item is required"),v.console.assert(void 0!==e,"[World.setItemIndex] index is required");var n=this.getIndexOfItem(t);if(e>=this._items.length)throw new Error("Index bigger than number of layers.");e!==n&&-1!==n&&(this._items.splice(n,1),this._items.splice(e,0,t),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:t,previousIndex:n,newIndex:e}))},removeItem:function(t){v.console.assert(t,"[World.removeItem] item is required");var e=v.indexOf(this._items,t);-1!==e&&(t.removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy(),this._items.splice(e,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(t))},removeAll:function(){var t,e;for(this.viewer._cancelPendingImages(),e=0;e<this._items.length;e++)(t=this._items[e]).removeHandler("bounds-change",this._delegatedFigureSizes),t.removeHandler("clip-change",this._delegatedFigureSizes),t.destroy();var n=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,e=0;e<n.length;e++)t=n[e],this._raiseRemoveItem(t)},resetItems:function(){for(var t=0;t<this._items.length;t++)this._items[t].reset()},update:function(){for(var t=!1,e=0;e<this._items.length;e++)t=this._items[e].update()||t;return t},draw:function(){for(var t=0;t<this._items.length;t++)this._items[t].draw();this._needsDraw=!1},needsDraw:function(){for(var t=0;t<this._items.length;t++)if(this._items[t].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(t){(this._autoRefigureSizes=t)&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(t){var e,n=(t=t||{}).immediately||!1,r=t.layout||v.DEFAULT_SETTINGS.collectionLayout,o=t.rows||v.DEFAULT_SETTINGS.collectionRows,i=t.columns||v.DEFAULT_SETTINGS.collectionColumns,s=t.tileSize||v.DEFAULT_SETTINGS.collectionTileSize,a=s+(t.tileMargin||v.DEFAULT_SETTINGS.collectionTileMargin);e=!t.rows&&i?i:Math.ceil(this._items.length/o);var u,l,c,p,f,h=0,d=0;this.setAutoRefigureSizes(!1);for(var g=0;g<this._items.length;g++)g&&g%e==0&&("horizontal"===r?(d+=a,h=0):(h+=a,d=0)),p=(c=(l=(u=this._items[g]).getBounds()).width>l.height?s:s*(l.width/l.height))*(l.height/l.width),f=new v.Point(h+(s-c)/2,d+(s-p)/2),u.setPosition(f,n),u.setWidth(c,n),"horizontal"===r?h+=a:d+=a;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var t=this._homeBounds?this._homeBounds.clone():null,e=this._contentSize?this._contentSize.clone():null,n=this._contentFactor||0;if(this._items.length){var r=this._items[0],o=r.getBounds();this._contentFactor=r.getContentSize().x/o.width;for(var i=r.getClippedBounds().getBoundingBox(),s=i.x,a=i.y,u=i.x+i.width,l=i.y+i.height,c=1;c<this._items.length;c++)o=(r=this._items[c]).getBounds(),this._contentFactor=Math.max(this._contentFactor,r.getContentSize().x/o.width),i=r.getClippedBounds().getBoundingBox(),s=Math.min(s,i.x),a=Math.min(a,i.y),u=Math.max(u,i.x+i.width),l=Math.max(l,i.y+i.height);this._homeBounds=new v.Rect(s,a,u-s,l-a),this._contentSize=new v.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new v.Rect(0,0,1,1),this._contentSize=new v.Point(1,1),this._contentFactor=1;this._contentFactor===n&&this._homeBounds.equals(t)&&this._contentSize.equals(e)||this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(t){this.raiseEvent("remove-item",{item:t})}})},function(t,e,n){var r=n(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(29),o=n(10)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(8),o=n(23),i=n(10)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[i])?e:o(n)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o,i=SyntaxError,s=Function,a=TypeError,u=function(t){try{return s('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var c=function(){throw new a},p=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(t){return c}}}():c,f=n(220)(),h=Object.getPrototypeOf||function(t){return t.__proto__},d={},g="undefined"==typeof Uint8Array?o:h(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?o:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayIteratorPrototype%":f?h([][Symbol.iterator]()):o,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%BigInt%":"undefined"==typeof BigInt?o:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?o:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?o:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?h(h([][Symbol.iterator]())):o,"%JSON%":"object"===("undefined"==typeof JSON?"undefined":r(JSON))?JSON:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?h((new Map)[Symbol.iterator]()):o,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?h((new Set)[Symbol.iterator]()):o,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?h(""[Symbol.iterator]()):o,"%Symbol%":f?Symbol:o,"%SyntaxError%":i,"%ThrowTypeError%":p,"%TypedArray%":g,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?o:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet},m=function t(e){var n;if("%AsyncFunction%"===e)n=u("async function () {}");else if("%GeneratorFunction%"===e)n=u("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=u("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(n=h(o.prototype))}return y[e]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(83),_=n(123),w=b.call(Function.call,Array.prototype.concat),x=b.call(Function.apply,Array.prototype.splice),S=b.call(Function.call,String.prototype.replace),E=b.call(Function.call,String.prototype.slice),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,C=function(t){var e=E(t,0,1),n=E(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return S(t,O,(function(t,e,n,o){r[r.length]=n?S(o,P,"$1"):e||t})),r},I=function(t,e){var n,r=t;if(_(v,r)&&(r="%"+(n=v[r])[0]+"%"),_(y,r)){var o=y[r];if(o===d&&(o=m(r)),void 0===o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new a('"allowMissing" argument must be a boolean');var n=C(t),r=n.length>0?n[0]:"",o=I("%"+r+"%",e),s=o.name,u=o.value,c=!1,p=o.alias;p&&(r=p[0],x(n,w([0,1],p)));for(var f=1,h=!0;f<n.length;f+=1){var d=n[f],g=E(d,0,1),m=E(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&h||(c=!0),_(y,s="%"+(r+="."+d)+"%"))u=y[s];else if(null!=u){if(!(d in u)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&f+1>=n.length){var v=l(u,d);u=(h=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[d]}else h=_(u,d),u=u[d];h&&!c&&(y[s]=u)}}return u}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(269),o=n(270),i=n(271),s=n(272),a=n(273);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(131);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(85),o=n(281),i=n(282),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(44)(Object,"create");t.exports=r},function(t,e,n){var r=n(294);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==n(t)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o,i=SyntaxError,s=Function,a=TypeError,u=function(t){try{return s('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var c=function(){throw new a},p=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(t){return c}}}():c,f=n(339)(),h=Object.getPrototypeOf||function(t){return t.__proto__},d={},g="undefined"==typeof Uint8Array?o:h(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?o:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayIteratorPrototype%":f?h([][Symbol.iterator]()):o,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%BigInt%":"undefined"==typeof BigInt?o:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?o:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?o:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?h(h([][Symbol.iterator]())):o,"%JSON%":"object"===("undefined"==typeof JSON?"undefined":r(JSON))?JSON:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?h((new Map)[Symbol.iterator]()):o,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?h((new Set)[Symbol.iterator]()):o,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?h(""[Symbol.iterator]()):o,"%Symbol%":f?Symbol:o,"%SyntaxError%":i,"%ThrowTypeError%":p,"%TypedArray%":g,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?o:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet},m=function t(e){var n;if("%AsyncFunction%"===e)n=u("async function () {}");else if("%GeneratorFunction%"===e)n=u("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=u("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&(n=h(o.prototype))}return y[e]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(87),_=n(141),w=b.call(Function.call,Array.prototype.concat),x=b.call(Function.apply,Array.prototype.splice),S=b.call(Function.call,String.prototype.replace),E=b.call(Function.call,String.prototype.slice),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,C=function(t){var e=E(t,0,1),n=E(t,-1);if("%"===e&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return S(t,O,(function(t,e,n,o){r[r.length]=n?S(o,P,"$1"):e||t})),r},I=function(t,e){var n,r=t;if(_(v,r)&&(r="%"+(n=v[r])[0]+"%"),_(y,r)){var o=y[r];if(o===d&&(o=m(r)),void 0===o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new a('"allowMissing" argument must be a boolean');var n=C(t),r=n.length>0?n[0]:"",o=I("%"+r+"%",e),s=o.name,u=o.value,c=!1,p=o.alias;p&&(r=p[0],x(n,w([0,1],p)));for(var f=1,h=!0;f<n.length;f+=1){var d=n[f],g=E(d,0,1),m=E(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new i("property names with quotes must have matching quotes");if("constructor"!==d&&h||(c=!0),_(y,s="%"+(r+="."+d)+"%"))u=y[s];else if(null!=u){if(!(d in u)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&f+1>=n.length){var v=l(u,d);u=(h=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[d]}else h=_(u,d),u=u[d];h&&!c&&(y[s]=u)}}return u}},function(t,e,n){var r=n(12),o=n(6),i="__core-js_shared__",s=o[i]||(o[i]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(36)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(20),o=n(11),i=n(38);t.exports=function(t){return function(e,n,s){var a,u=r(e),l=o(u.length),c=i(s,l);if(t&&n!=n){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(29);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(10)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],s=i[r]();s.next=function(){return{done:n=!0}},i[r]=function(){return s},t(i)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(8);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(56),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var s=n.call(t,e);if("object"!==r(s))throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==o(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";n(169);var r=n(16),o=n(19),i=n(7),s=n(30),a=n(10),u=n(109),l=a("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),p=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=a(t),h=!i((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),d=h?!i((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[l]=function(){return n}),n[f](""),!e})):void 0;if(!h||!d||"replace"===t&&!c||"split"===t&&!p){var g=/./[f],y=n(s,f,""[t],(function(t,e,n,r,o){return e.exec===u?h&&!o?{done:!0,value:g.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),m=y[0],v=y[1];r(String.prototype,t,m),o(RegExp.prototype,f,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)})}}},function(t,e,n){var r=n(22),o=n(164),i=n(104),s=n(8),a=n(11),u=n(106),l={},c={};(e=t.exports=function(t,e,n,p,f){var h,d,g,y,m=f?function(){return t}:u(t),v=r(n,p,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(i(m)){for(h=a(t.length);h>b;b++)if((y=e?v(s(d=t[b])[0],d[1]):v(t[b]))===l||y===c)return y}else for(g=m.call(t);!(d=g.next()).done;)if((y=o(g,v,d.value,e))===l||y===c)return y}).BREAK=l,e.RETURN=c},function(t,e,n){var r=n(6).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(6),o=n(1),i=n(16),s=n(50),a=n(33),u=n(75),l=n(49),c=n(9),p=n(7),f=n(71),h=n(45),d=n(95);t.exports=function(t,e,n,g,y,m){var v=r[t],b=v,_=y?"set":"add",w=b&&b.prototype,x={},S=function(t){var e=w[t];i(w,t,"delete"==t||"has"==t?function(t){return!(m&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(m||w.forEach&&!p((function(){(new b).entries().next()})))){var E=new b,O=E[_](m?{}:-0,1)!=E,P=p((function(){E.has(1)})),C=f((function(t){new b(t)})),I=!m&&p((function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)}));C||((b=e((function(e,n){l(e,b,t);var r=d(new v,e,b);return null!=n&&u(n,y,r[_],r),r}))).prototype=w,w.constructor=b),(P||I)&&(S("delete"),S("has"),y&&S("get")),(I||O)&&S(_),m&&w.clear&&delete w.clear}else b=g.getConstructor(e,t,y,_),s(b.prototype,n),a.NEED=!0;return h(b,t),x[t]=b,o(o.G+o.W+o.F*(b!=v),x),m||g.setStrong(b,t,y),b}},function(t,e,n){for(var r,o=n(6),i=n(19),s=n(35),a=s("typed_array"),u=s("view"),l=!(!o.ArrayBuffer||!o.DataView),c=l,p=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");p<9;)(r=o[f[p++]])?(i(r.prototype,a,!0),i(r.prototype,u,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:a,VIEW:u}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,s=r.length;i<s;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=n,t.exports.TinyEmitter=n},function(t,e,n){(function(t){var r,o,i,s;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==a(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){t.exports=n(4)()},function(e,n){e.exports=t},function(t,e,n){var r;r=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t){return t&&t.__esModule?t:{default:t}}var s=n(8),u=i(s),l=i(n(6)),c=i(n(2)),p=n(1),f=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){for(var r=!0;r;){var o=t,i=e,s=n;r=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,i);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return;t=l,e=i,n=s,r=!0,a=l=void 0}}(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.state={showLoader:!1,lastScrollTop:0,actionTriggered:!1,pullToRefreshThresholdBreached:!1},this.startY=0,this.currentY=0,this.dragging=!1,this.maxPullDownDistance=0,this.onScrollListener=this.onScrollListener.bind(this),this.throttledOnScrollListener=(0,c.default)(this.onScrollListener,150).bind(this),this.onStart=this.onStart.bind(this),this.onMove=this.onMove.bind(this),this.onEnd=this.onEnd.bind(this),this.getScrollableTarget=this.getScrollableTarget.bind(this)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Component),o(e,[{key:"componentDidMount",value:function(){if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"==typeof this.props.initialScrollY&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown.firstChild.getBoundingClientRect().height,this.forceUpdate(),"function"!=typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')}},{key:"componentWillUnmount",value:function(){this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd))}},{key:"componentWillReceiveProps",value:function(t){this.props.key===t.key&&this.props.dataLength===t.dataLength||this.setState({showLoader:!1,actionTriggered:!1,pullToRefreshThresholdBreached:!1})}},{key:"getScrollableTarget",value:function(){return this.props.scrollableTarget instanceof HTMLElement?this.props.scrollableTarget:"string"==typeof this.props.scrollableTarget?document.getElementById(this.props.scrollableTarget):(null===this.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)}},{key:"onStart",value:function(t){this.state.lastScrollTop||(this.dragging=!0,this.startY=t.pageY||t.touches[0].pageY,this.currentY=this.startY,this._infScroll.style.willChange="transform",this._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)")}},{key:"onMove",value:function(t){this.dragging&&(this.currentY=t.pageY||t.touches[0].pageY,this.currentY<this.startY||(this.currentY-this.startY>=this.props.pullDownToRefreshThreshold&&this.setState({pullToRefreshThresholdBreached:!0}),this.currentY-this.startY>1.5*this.maxPullDownDistance||(this._infScroll.style.overflow="visible",this._infScroll.style.transform="translate3d(0px, "+(this.currentY-this.startY)+"px, 0px)")))}},{key:"onEnd",value:function(t){var e=this;this.startY=0,this.currentY=0,this.dragging=!1,this.state.pullToRefreshThresholdBreached&&this.props.refreshFunction&&this.props.refreshFunction(),requestAnimationFrame((function(){e._infScroll&&(e._infScroll.style.overflow="auto",e._infScroll.style.transform="none",e._infScroll.style.willChange="none")}))}},{key:"isElementAtBottom",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?.8:arguments[1],n=t===document.body||t===document.documentElement?window.screen.availHeight:t.clientHeight,r=(0,p.parseThreshold)(e);return r.unit===p.ThresholdUnits.Pixel?t.scrollTop+n>=t.scrollHeight-r.value:t.scrollTop+n>=r.value/100*t.scrollHeight}},{key:"onScrollListener",value:function(t){var e=this;"function"==typeof this.props.onScroll&&setTimeout((function(){return e.props.onScroll(t)}),0);var n=this.props.height||this._scrollableNode?t.target:document.documentElement.scrollTop?document.documentElement:document.body;this.state.actionTriggered||(this.isElementAtBottom(n,this.props.scrollThreshold)&&this.props.hasMore&&(this.setState({actionTriggered:!0,showLoader:!0}),this.props.next()),this.setState({lastScrollTop:n.scrollTop}))}},{key:"render",value:function(){var t=this,e=r({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),n=this.props.hasChildren||!(!this.props.children||!this.props.children.length),o=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return u.default.createElement("div",{style:o},u.default.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(e){return t._infScroll=e},style:e},this.props.pullDownToRefresh&&u.default.createElement("div",{style:{position:"relative"},ref:function(e){return t._pullDown=e}},u.default.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},!this.state.pullToRefreshThresholdBreached&&this.props.pullDownToRefreshContent,this.state.pullToRefreshThresholdBreached&&this.props.releaseToRefreshContent)),this.props.children,!this.state.showLoader&&!n&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))}}]),e}();e.default=f,f.defaultProps={pullDownToRefreshContent:u.default.createElement("h3",null,"Pull down to refresh"),releaseToRefreshContent:u.default.createElement("h3",null,"Release to refresh"),pullDownToRefreshThreshold:100,disableBrowserPullToRefresh:!0},f.propTypes={next:l.default.func,hasMore:l.default.bool,children:l.default.node,loader:l.default.node.isRequired,scrollThreshold:l.default.oneOfType([l.default.number,l.default.string]),endMessage:l.default.node,style:l.default.object,height:l.default.number,scrollableTarget:l.default.node,hasChildren:l.default.bool,pullDownToRefresh:l.default.bool,pullDownToRefreshContent:l.default.node,releaseToRefreshContent:l.default.node,pullDownToRefreshThreshold:l.default.number,refreshFunction:l.default.func,onScroll:l.default.func,dataLength:l.default.number.isRequired,key:l.default.string},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseThreshold=function(t){return"number"==typeof t?{unit:n.Percent,value:100*t}:"string"==typeof t?t.match(/^(\d*(\.\d+)?)px$/)?{unit:n.Pixel,value:parseFloat(t)}:t.match(/^(\d*(\.\d+)?)%$/)?{unit:n.Percent,value:parseFloat(t)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),r):(console.warn("scrollThreshold should be string or number"),r)};var n={Pixel:"Pixel",Percent:"Percent"};e.ThresholdUnits=n;var r={unit:n.Percent,value:.8}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r,o;return e||(e=250),function(){var i=n||this,s=+new Date,a=arguments;r&&s<r+e?(clearTimeout(o),o=setTimeout((function(){r=s,t.apply(i,a)}),e)):(r=s,t.apply(i,a))}},t.exports=e.default},function(t,e){"use strict";function n(t){return function(){return t}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){"use strict";t.exports=function(t,e,n,r,o,i,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,i,s,a],c=0;(u=new Error(e.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){"use strict";var r=n(3),o=n(4),i=n(7);t.exports=function(){function t(t,e,n,r,s,a){a!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){t.exports=n(5)()},function(t,e){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,n){e.exports=t}])},t.exports=r(n(1))},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.filter(e);return 0!==n.length&&n.length!==t.length}},function(t,e,n){"use strict";var r=n(5);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r,o,i=n(0),s=n.n(i),u=n(1),l=n.n(u),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).reduce((function(e,n){var r;return e["data-"+(r=n,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())]=t[n],e}),{})},p=function(t){return!t||Array.isArray(t)&&!t.length},f=(r=1,o=new WeakMap,{get:function(t){return o.has(t)||o.set(t,r++),"rdts"+o.get(t)},reset:function(){o=new WeakMap,r=1}}),h=function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(e,n);if(!t)throw new TypeError("findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("findIndex predicate must be a function");for(var r=0;r<t.length;r++){var o=t[r];if(e.call(n,o,r,t))return r}return-1};function d(t,e){var n=function(t){return t?"#"===t[0]?{"aria-labelledby":t.substring(1).replace(/ #/g," ")}:{"aria-label":t}:{}}(t);return e&&(n["aria-labelledby"]=((n["aria-labelledby"]||"")+" "+e).trim()),n}var g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleInputChange=function(t){t.persist(),n.delayedCallback(t)},n.delayedCallback=function(t,e){var n=void 0;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=!n;clearTimeout(n),n=setTimeout((function(){n=null,t.apply(void 0,o)}),e),s&&t.apply(void 0,o)}}((function(t){return n.props.onInputChange(t.target.value)}),300),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),y(e,[{key:"render",value:function(){var t=this.props,e=t.inputRef,n=t.texts,r=void 0===n?{}:n,o=t.onFocus,i=t.onBlur,s=t.disabled,a=t.readOnly,u=t.onKeyDown,c=t.activeDescendant,p=t.inlineSearchInput;return l.a.createElement("input",g({type:"text",disabled:s,ref:e,className:"search",placeholder:p?r.inlineSearchPlaceholder||"Search...":r.placeholder||"Choose...",onKeyDown:u,onChange:this.handleInputChange,onFocus:o,onBlur:i,readOnly:a,"aria-activedescendant":c,"aria-autocomplete":u?"list":void 0},d(r.label)))}}]),e}();m.propTypes={tags:s.a.array,texts:s.a.object,onInputChange:s.a.func,onFocus:s.a.func,onBlur:s.a.func,onTagRemove:s.a.func,onKeyDown:s.a.func,inputRef:s.a.func,disabled:s.a.bool,readOnly:s.a.bool,activeDescendant:s.a.string,inlineSearchInput:s.a.bool};var v=m,b=(n(6),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}());function _(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}var w=function(t){return t+"_tag"},x=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=_(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),r.handleClick=function(t){var e=r.props,n=e.id,o=e.onDelete;t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),o(n,void 0!==(t.key||t.keyCode))},r.onKeyDown=function(t){"Backspace"===t.key&&(r.handleClick(t),t.preventDefault())},r.onKeyUp=function(t){(32===t.keyCode||["Delete","Enter"].indexOf(t.key)>-1)&&(r.handleClick(t),t.preventDefault())},_(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),b(e,[{key:"render",value:function(){var t=this.props,e=t.id,n=t.label,r=t.labelRemove,o=void 0===r?"Remove":r,i=t.readOnly,s=t.disabled,a=w(e),u=e+"_button",c=["tag-remove",i&&"readOnly",s&&"disabled"].filter(Boolean).join(" "),p=i||s;return l.a.createElement("span",{className:"tag",id:a,"aria-label":n},n,l.a.createElement("button",{id:u,onClick:p?void 0:this.handleClick,onKeyDown:p?void 0:this.onKeyDown,onKeyUp:p?void 0:this.onKeyUp,className:c,type:"button","aria-label":o,"aria-labelledby":u+" "+a,"aria-disabled":p},"x"))}}]),e}();x.propTypes={id:s.a.string.isRequired,label:s.a.string.isRequired,onDelete:s.a.func,readOnly:s.a.bool,disabled:s.a.bool,labelRemove:s.a.string};var S=x,E=(n(7),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),E(e,[{key:"render",value:function(){var t=this.props,e=t.tags,n=t.onTagRemove,r=t.texts,o=void 0===r?{}:r,i=t.disabled,s=t.readOnly,a=t.children||l.a.createElement("span",{className:"placeholder"},o.placeholder||"Choose...");return l.a.createElement("ul",{className:"tag-list"},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2],r=arguments[3],o=arguments[4];return t.map((function(t){var i=t._id,s=t.label,a=t.tagClassName,u=t.dataset,p=t.tagLabel;return l.a.createElement("li",O({className:["tag-item",a].filter(Boolean).join(" "),key:"tag-item-"+i},c(u)),l.a.createElement(S,{label:p||s,id:i,onDelete:e,readOnly:n,disabled:r||t.disabled,labelRemove:o}))}))}(e,n,s,i,o.labelRemove),l.a.createElement("li",{className:"tag-item"},a))}}]),e}();P.propTypes={tags:s.a.array,onTagRemove:s.a.func,readOnly:s.a.bool,disabled:s.a.bool,texts:s.a.object,children:s.a.node};var C=P,I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function R(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}var M=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=R(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),r.getAriaAttributes=function(){var t=r.props,e=t.mode,n=t.texts,o=void 0===n?{}:n,i=t.showDropdown,s=t.clientId,a=t.tags,u=s+"_trigger",l=[],c=d(o.label);return a&&a.length&&(c["aria-label"]&&l.push(u),a.forEach((function(t){l.push(w(t._id))})),c=d(o.label,l.join(" "))),I({id:u,role:"button",tabIndex:0,"aria-haspopup":"simpleSelect"===e?"listbox":"tree","aria-expanded":i?"true":"false"},c)},r.handleTrigger=function(t){t.key&&13!==t.keyCode&&32!==t.keyCode&&40!==t.keyCode||t.key&&r.triggerNode&&r.triggerNode!==document.activeElement||(r.props.showDropdown||32!==t.keyCode||t.preventDefault(),r.props.onTrigger(t))},R(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),T(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.disabled,r=e.readOnly,o=e.showDropdown,i=["dropdown-trigger","arrow",n&&"disabled",r&&"readOnly",o&&"top",!o&&"bottom"].filter(Boolean).join(" ");return l.a.createElement("a",I({ref:function(e){t.triggerNode=e},className:i,onClick:n?void 0:this.handleTrigger,onKeyDown:n?void 0:this.handleTrigger},this.getAriaAttributes()),this.props.children)}}]),e}();M.propTypes={onTrigger:s.a.func,disabled:s.a.bool,readOnly:s.a.bool,showDropdown:s.a.bool,mode:s.a.oneOf(["multiSelect","simpleSelect","radioSelect","hierarchical"]),texts:s.a.object,clientId:s.a.string,tags:s.a.array};var A=M,N=n(2),k=n.n(N),L=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function D(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}var j=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=D(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),r.handleClick=function(){var t=r.props,e=t.onAction,n=t.actionData;e&&e(n.nodeId,n.action)},D(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),L(e,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.className,r=t.text,o=t.readOnly;return l.a.createElement("i",{title:e,className:n,onClick:o?void 0:this.handleClick},r)}}]),e}();j.propTypes={title:s.a.string,text:s.a.string,className:s.a.string,actionData:s.a.object,onAction:s.a.func,readOnly:s.a.bool},j.defaultProps={onAction:function(){}};var F=j,B=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),V=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),z(e,[{key:"render",value:function(){var t=this.props,e=t.actions,n=t.id,r=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["actions","id"]);return p(e)?null:e.map((function(t,e){var o=t.id||"action-"+e;return l.a.createElement(F,B({key:o},r,t,{actionData:{action:B({},t,{id:o}),nodeId:n}}))}))}}]),e}();V.propTypes={id:s.a.string.isRequired,actions:s.a.array};var U=V,H=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),q=function(t){var e=t.checked,n=t.indeterminate;return function(t){t&&(t.checked=e,t.indeterminate=n)}},W=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),G(e,[{key:"render",value:function(){var t=this.props,e=t.checked,n=t.indeterminate,r=void 0!==n&&n,o=t.onChange,i=t.disabled,s=t.readOnly,a=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["checked","indeterminate","onChange","disabled","readOnly"]),u=i||s;return l.a.createElement("input",H({type:"checkbox",ref:q({checked:e,indeterminate:r}),onChange:o,disabled:u},a))}}]),e}();W.propTypes={checked:s.a.bool,indeterminate:s.a.bool,onChange:s.a.func,disabled:s.a.bool,readOnly:s.a.bool};var Y=W,X=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),K=function(t){var e=t.checked;return function(t){t&&(t.checked=e)}},Z=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),$(e,[{key:"render",value:function(){var t=this.props,e=t.name,n=t.checked,r=t.onChange,o=t.disabled,i=t.readOnly,s=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["name","checked","onChange","disabled","readOnly"]),a=o||i;return l.a.createElement("input",X({type:"radio",name:e,ref:K({checked:n}),onChange:r,disabled:a},s))}}]),e}();Z.propTypes={name:s.a.string.isRequired,checked:s.a.bool,onChange:s.a.func,disabled:s.a.bool,readOnly:s.a.bool};var J=Z,Q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function et(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}var nt=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=et(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),r.handleCheckboxChange=function(t){var e=r.props,n=e.mode,o=e.id,i=e.onCheckboxChange;i(o,"simpleSelect"===n||"radioSelect"===n||t.target.checked),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation()},et(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),tt(e,[{key:"render",value:function(){var t=this.props,e=t.mode,n=t.title,r=t.label,o=t.id,i=t.partial,s=t.checked,a=this.props,u=a.value,c=a.disabled,p=a.showPartiallySelected,f=a.readOnly,h=a.clientId,d={className:"node-label"};"simpleSelect"===e&&!f&&!c&&(d.onClick=this.handleCheckboxChange);var g={id:o,value:u,checked:s,disabled:c,readOnly:f,tabIndex:-1},y=["checkbox-item","simpleSelect"===e&&"simple-select"].filter(Boolean).join(" ");return l.a.createElement("label",{title:n||r,htmlFor:o},"radioSelect"===e?l.a.createElement(J,Q({name:h,className:"radio-item",onChange:this.handleCheckboxChange},g)):l.a.createElement(Y,Q({name:o,className:y,indeterminate:p&&i,onChange:this.handleCheckboxChange},g)),l.a.createElement("span",d,r))}}]),e}();nt.propTypes={id:s.a.string.isRequired,actions:s.a.array,title:s.a.string,label:s.a.string.isRequired,value:s.a.string.isRequired,checked:s.a.bool,partial:s.a.bool,disabled:s.a.bool,dataset:s.a.object,mode:s.a.oneOf(["multiSelect","simpleSelect","radioSelect","hierarchical"]),showPartiallySelected:s.a.bool,onCheckboxChange:s.a.func,readOnly:s.a.bool,clientId:s.a.string};var rt=nt,ot=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function it(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}var st=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=it(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),r.onToggle=function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),r.props.onNodeToggle(r.props.id)},r.onKeyDown=function(t){"Enter"!==t.key&&32!==t.keyCode||(r.props.onNodeToggle(r.props.id),t.preventDefault())},it(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),ot(e,[{key:"render",value:function(){var t=this.props,e=t.expanded,n=t.isLeaf,r=["toggle",e&&"expanded",!e&&"collapsed"].filter(Boolean).join(" ");return n?l.a.createElement("i",{role:"button",tabIndex:-1,className:r,style:{visibility:"hidden"},"aria-hidden":!0}):l.a.createElement("i",{role:"button",tabIndex:-1,className:r,onClick:this.onToggle,onKeyDown:this.onKeyDown,"aria-hidden":!0})}}]),e}();st.propTypes={expanded:s.a.bool,isLeaf:s.a.bool,onNodeToggle:s.a.func,id:s.a.string};var at=st,ut=(n(8),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),lt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function ct(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}var pt=function(t){return p(t)},ft=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=ct(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(i))),r.getAriaAttributes=function(){var t=r.props,e=t._children,n=t._depth,o=t.checked,i=t.disabled,s=t.expanded,a=t.readOnly,u=t.mode,l=t.partial,c={};return c.role="simpleSelect"===u?"option":"treeitem",c["aria-disabled"]=i||a,c["aria-selected"]=o,"simpleSelect"!==u&&(c["aria-checked"]=l?"mixed":o,c["aria-level"]=(n||0)+1,c["aria-expanded"]=e&&(s?"true":"false")),c},ct(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.PureComponent),lt(e,[{key:"render",value:function(){var t=this.props,e=t.mode,n=t.keepTreeOnSearch,r=t._id,o=t._children,i=t.dataset,s=t._depth,a=t.expanded,u=t.title,p=t.label,f=t.partial,h=t.checked,d=t.value,g=t.disabled,y=t.actions,m=t.onAction,v=t.searchModeOn,b=t.onNodeToggle,_=t.onCheckboxChange,w=t.showPartiallySelected,x=t.readOnly,S=t.clientId,E=function(t){var e=t.keepTreeOnSearch,n=t.keepChildrenOnSearch,r=t._children,o=t.matchInChildren,i=t.matchInParent,s=t.disabled,a=t.partial,u=t.hide,l=t.className,c=t.showPartiallySelected,p=t.readOnly,f=t.checked,h=t._focused;return["node",pt(r)&&"leaf",!pt(r)&&"tree",s&&"disabled",u&&"hide",e&&o&&"match-in-children",e&&n&&i&&"match-in-parent",c&&a&&"partial",p&&"readOnly",f&&"checked",h&&"focused",l].filter(Boolean).join(" ")}(this.props),O=n||!v?{paddingLeft:20*(s||0)+"px"}:{},P=r+"_li";return l.a.createElement("li",ut({className:E,style:O,id:P},c(i),this.getAriaAttributes()),l.a.createElement(at,{isLeaf:pt(o),expanded:a,id:r,onNodeToggle:b}),l.a.createElement(rt,{title:u,label:p,id:r,partial:f,checked:h,value:d,disabled:g,mode:e,onCheckboxChange:_,showPartiallySelected:w,readOnly:x,clientId:S}),l.a.createElement(U,{actions:y,onAction:m,id:r,readOnly:x}))}}]),e}();ft.propTypes={_id:s.a.string.isRequired,_depth:s.a.number,_children:s.a.array,actions:s.a.array,className:s.a.string,title:s.a.string,label:s.a.string.isRequired,value:s.a.string.isRequired,checked:s.a.bool,expanded:s.a.bool,disabled:s.a.bool,partial:s.a.bool,dataset:s.a.object,keepTreeOnSearch:s.a.bool,keepChildrenOnSearch:s.a.bool,searchModeOn:s.a.bool,onNodeToggle:s.a.func,onAction:s.a.func,onCheckboxChange:s.a.func,mode:s.a.oneOf(["multiSelect","simpleSelect","radioSelect","hierarchical"]),showPartiallySelected:s.a.bool,readOnly:s.a.bool,clientId:s.a.string};var ht=ft,dt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),yt=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return mt.call(n),n.currentPage=1,n.computeInstanceProps(t,!0),n.state={items:n.allVisibleNodes.slice(0,n.props.pageSize)},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.Component),gt(e,[{key:"render",value:function(){var t=this.props.searchModeOn;return l.a.createElement("ul",dt({className:"root "+(t?"searchModeOn":""),ref:this.setNodeRef},this.getAriaAttributes()),this.state.scrollableTarget&&l.a.createElement(k.a,{dataLength:this.state.items.length,next:this.loadMore,hasMore:this.hasMore(),loader:l.a.createElement("span",{className:"searchLoader"},"Loading..."),scrollableTarget:this.state.scrollableTarget},this.state.items))}}]),e}();yt.propTypes={data:s.a.object,keepTreeOnSearch:s.a.bool,keepChildrenOnSearch:s.a.bool,searchModeOn:s.a.bool,onChange:s.a.func,onNodeToggle:s.a.func,onAction:s.a.func,onCheckboxChange:s.a.func,mode:s.a.oneOf(["multiSelect","simpleSelect","radioSelect","hierarchical"]),showPartiallySelected:s.a.bool,pageSize:s.a.number,readOnly:s.a.bool,clientId:s.a.string,activeDescendant:s.a.string},yt.defaultProps={pageSize:100};var mt=function(){var t=this;this.componentWillReceiveProps=function(e){var n=e.activeDescendant===t.props.activeDescendant;t.computeInstanceProps(e,!n),t.setState({items:t.allVisibleNodes.slice(0,t.currentPage*t.props.pageSize)})},this.componentDidMount=function(){t.setState({scrollableTarget:t.node.parentNode})},this.computeInstanceProps=function(e,n){if(t.allVisibleNodes=t.getNodes(e),t.totalPages=Math.ceil(t.allVisibleNodes.length/t.props.pageSize),n&&e.activeDescendant){var r=e.activeDescendant.replace(/_li$/,""),o=h(t.allVisibleNodes,(function(t){return t.key===r}))+1;t.currentPage=o>0?Math.ceil(o/t.props.pageSize):1}},this.getNodes=function(t){var e=t.data,n=t.keepTreeOnSearch,r=t.keepChildrenOnSearch,o=t.searchModeOn,i=t.mode,s=t.showPartiallySelected,a=t.readOnly,u=t.onAction,c=t.onChange,p=t.onCheckboxChange,f=t.onNodeToggle,h=t.activeDescendant,d=t.clientId,g=[];return e.forEach((function(t){(function(t,e,n){if(e||t.expanded)return!0;var r=t._parent&&n.get(t._parent);return!r||r.expanded})(t,o,e)&&g.push(l.a.createElement(ht,dt({keepTreeOnSearch:n,keepChildrenOnSearch:r,key:t._id},t,{searchModeOn:o,onChange:c,onCheckboxChange:p,onNodeToggle:f,onAction:u,mode:i,showPartiallySelected:s,readOnly:a,clientId:d,activeDescendant:h})))})),g},this.hasMore=function(){return t.currentPage<t.totalPages},this.loadMore=function(){t.currentPage=t.currentPage+1;var e=t.allVisibleNodes.slice(0,t.currentPage*t.props.pageSize);t.setState({items:e})},this.setNodeRef=function(e){t.node=e},this.getAriaAttributes=function(){var e=t.props.mode;return{role:"simpleSelect"===e?"listbox":"tree","aria-multiselectable":/multiSelect|hierarchical/.test(e)}}},vt=yt,bt=n(3),_t=n.n(bt),wt=function(t){return t},xt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt;return _t()(t[e],(function(t){return n(t).checked}))||t[e].some((function(t){return n(t).partial}))},St=function t(e,n,r){n[e._id]=!0,p(e._children)||e._children.forEach((function(e){return t(r(e),n,r)}))},Et=function(t,e){var n=[],r={};return t.forEach((function(t,o){r[o]||(e(t,o,r)&&n.push(t),r[o]=!0)})),n},Ot=Et,Pt=function(t,e,n){return Et(t,(function(t,r,o){return n&&t._children&&t._children.length&&!0!==t.expanded&&St(t,o,e),!t.hide}))},Ct=St,It=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Tt="ArrowUp",Rt="ArrowDown",Mt="ArrowLeft",At="ArrowRight",Nt="Enter",kt="Home",Lt="PageUp",Dt="PageDown",jt={None:"None",FocusPrevious:"FocusPrevious",FocusNext:"FocusNext",FocusParent:"FocusParent",FocusFirst:"FocusFirst",FocusLast:"FocusLast",ToggleExpanded:"ToggleExpanded",ToggleChecked:"ToggleChecked"},Ft=new Set([jt.FocusPrevious,jt.FocusNext,jt.FocusParent,jt.FocusFirst,jt.FocusLast]),Bt=[Tt,Rt,kt,Lt,"End",Dt],zt=Bt.concat([Mt,At,Nt]),Vt=function(t,e,n,r){return e.indexOf(t)>-1||!n&&t===r},Ut={isValidKey:function(t,e){return(e?zt:Bt).indexOf(t)>-1},getAction:function(t,e){return e===Mt?function(t,e){return t&&e===Mt?!0===t.expanded?jt.ToggleExpanded:t._parent?jt.FocusParent:jt.None:jt.None}(t,e):e===At?function(t,e){return t&&t._children&&e===At?!0!==t.expanded?jt.ToggleExpanded:jt.FocusNext:jt.None}(t,e):function(t,e){return Vt(t,[kt,Lt],e,Rt)}(e,t)?jt.FocusFirst:function(t,e){return Vt(t,["End",Dt],e,Tt)}(e,t)?jt.FocusLast:function(t,e){if(!t)return jt.None;switch(e){case Tt:return jt.FocusPrevious;case Rt:return jt.FocusNext;case Nt:return jt.ToggleChecked;default:return jt.None}}(t,e)},getNextFocus:function(t,e,n,r,o){if(n===jt.FocusParent)return function(t,e){return t&&t._parent?e(t._parent):t}(e,r);if(!Ft.has(n))return e;var i=Pt(t,r,o);return function(t){return Vt(t,[jt.FocusPrevious,jt.FocusLast],!0)}(n)&&(i=i.reverse()),function(t,e,n){if(!t||0===t.length)return e;var r=e;return function(t){return Vt(t,[jt.FocusFirst,jt.FocusLast],!0)}(n)?r=It(t,1)[0]:[jt.FocusPrevious,jt.FocusNext].indexOf(n)>-1&&(r=function(t,e){var n=t.indexOf(e)+1;return n%t.length==0?t[0]:t[n]}(t,e)),r}(i,e,n)},getNextFocusAfterTagDelete:function(t,e,n,r){var o=e?h(e,(function(e){return e._id===t})):-1;if(o<0||!n.length)return r;var i=n[o=n.length>o?o:n.length-1]._id,s=document.getElementById(w(i));return s&&s.firstElementChild||r},handleFocusNavigationkey:function(t,e,n,r,o){var i=Ut.getNextFocus(t,n,e,r,o);return Ut.adjustFocusedProps(n,i),i?i._id:n&&n._id},handleToggleNavigationkey:function(t,e,n,r,o){return t!==jt.ToggleChecked||n||e.readOnly||e.disabled?t===jt.ToggleExpanded&&o(e._id):r(e._id,!0!==e.checked),e&&e._id},adjustFocusedProps:function(t,e){t&&e&&t._id!==e._id&&(t._focused=!1),e&&(e._focused=!0)}},Ht=Ut,Gt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),qt=function(){function t(e){var n=e.data,r=e.mode,o=e.showPartiallySelected,i=e.rootPrefixId,s=e.searchPredicate;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._src=n,this.simpleSelect="simpleSelect"===r,this.radioSelect="radioSelect"===r,this.hierarchical="hierarchical"===r,this.searchPredicate=s;var a=function(t){var e=t.tree,n=t.simple,r=t.radio,o=t.showPartialState,i=t.hierarchical,s=t.rootPrefixId;return function t(e){var n=e.nodes,r=e.parent,o=e.depth,i=void 0===o?0:o,s=e.simple,a=e.radio,u=e.showPartialState,l=e.hierarchical,c=e.rootPrefixId,f=e._rv,h=void 0===f?{list:new Map,defaultValues:[],singleSelectedNode:null}:f,d=s||a;return n.forEach((function(e,n){e._depth=i,r?(e._id=e.id||r._id+"-"+n,e._parent=r._id,r._children.push(e._id)):e._id=e.id||""+(c?c+"-"+n:n),d&&e.checked&&(h.singleSelectedNode?e.checked=!1:h.singleSelectedNode=e),d&&e.isDefaultValue&&h.singleSelectedNode&&!h.singleSelectedNode.isDefaultValue&&(h.singleSelectedNode.checked=!1,h.singleSelectedNode=null),!e.isDefaultValue||d&&0!==h.defaultValues.length||(h.defaultValues.push(e._id),e.checked=!0,d&&(h.singleSelectedNode=e)),l&&!a||function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?["disabled"]:["checked","disabled"],r=0;r<n.length;r++){var o=n[r];void 0===t[o]&&void 0!==e[o]&&(t[o]=e[o])}}(e,r,!a),h.list.set(e._id,e),!s&&e.children&&(e._children=[],t({nodes:e.children,parent:e,depth:i+1,radio:a,showPartialState:u,hierarchical:l,_rv:h}),u&&!e.checked&&(e.partial=xt(e),d||p(e.children)||!e.children.every((function(t){return t.checked}))||(e.checked=!0)),e.children=void 0)})),h}({nodes:Array.isArray(e)?e:[e],simple:n,radio:r,showPartialState:o,hierarchical:i,rootPrefixId:s})}({tree:JSON.parse(JSON.stringify(n)),simple:this.simpleSelect,radio:this.radioSelect,showPartialState:o,hierarchical:this.hierarchical,rootPrefixId:i}),u=a.list,l=a.defaultValues,c=a.singleSelectedNode;this.tree=u,this.defaultValues=l,this.showPartialState=!this.hierarchical&&o,this.searchMaps=new Map,(this.simpleSelect||this.radioSelect)&&c&&(this.currentChecked=c._id)}return Gt(t,[{key:"getNodeById",value:function(t){return this.tree.get(t)}},{key:"getMatches",value:function(t){var e=this;if(this.searchMaps.has(t))return this.searchMaps.get(t);var n=-1,r=t;this.searchMaps.forEach((function(e,o){t.startsWith(o)&&o.length>n&&(n=o.length,r=o)}));var o=[],i=this._getAddOnMatch(o,t);return r!==t?this.searchMaps.get(r).forEach((function(t){return i(e.getNodeById(t))})):this.tree.forEach(i),this.searchMaps.set(t,o),o}},{key:"addParentsToTree",value:function(t,e){if(void 0!==t){var n=this.getNodeById(t);this.addParentsToTree(n._parent,e),n.hide=!n._isMatch||n.hide,n.matchInChildren=!0,e.set(t,n)}}},{key:"addChildrenToTree",value:function(t,e,n){var r=this;void 0!==t&&t.forEach((function(t){if(!n||!n.includes(t)){var o=r.getNodeById(t);o.matchInParent=!0,e.set(t,o),r.addChildrenToTree(o._children,e)}}))}},{key:"filterTree",value:function(t,e,n){var r=this,o=this.getMatches(t.toLowerCase()),i=new Map;o.forEach((function(t){var s=r.getNodeById(t);s.hide=!1,s._isMatch=!0,e&&r.addParentsToTree(s._parent,i),i.set(t,s),e&&n&&r.addChildrenToTree(s._children,i,o)}));var s=0===o.length;return this.matchTree=i,{allNodesHidden:s,tree:i}}},{key:"restoreNodes",value:function(){return this.tree.forEach((function(t){t.hide=!1})),this.tree}},{key:"restoreDefaultValues",value:function(){var t=this;return this.defaultValues.forEach((function(e){t.setNodeCheckedState(e,!0)})),this.tree}},{key:"togglePreviousChecked",value:function(t,e){var n=this.currentChecked;if(n&&n!==t){var r=this.getNodeById(n);r.checked=!1,this.radioSelect&&this.showPartialState&&this.partialCheckParents(r)}this.currentChecked=e?t:null}},{key:"setNodeCheckedState",value:function(t,e){this.radioSelect&&this.togglePreviousChecked(t,e);var n=this.getNodeById(t);n.checked=e,this.showPartialState&&(n.partial=!1),this.simpleSelect?this.togglePreviousChecked(t,e):this.radioSelect?(this.showPartialState&&this.partialCheckParents(n),e||this.unCheckParents(n)):(this.hierarchical||this.toggleChildren(t,e),this.showPartialState&&this.partialCheckParents(n),this.hierarchical||e||this.unCheckParents(n))}},{key:"unCheckParents",value:function(t){for(var e=t._parent;e;){var n=this.getNodeById(e);n.checked=!1,n.partial=xt(n,"_children",this.getNodeById.bind(this)),e=n._parent}}},{key:"partialCheckParents",value:function(t){for(var e=this,n=t._parent;n;){var r=this.getNodeById(n);r.checked=r._children.every((function(t){return e.getNodeById(t).checked})),r.partial=xt(r,"_children",this.getNodeById.bind(this)),n=r._parent}}},{key:"toggleChildren",value:function(t,e){var n=this,r=this.getNodeById(t);r.checked=e,this.showPartialState&&(r.partial=!1),p(r._children)||r._children.forEach((function(t){return n.toggleChildren(t,e)}))}},{key:"toggleNodeExpandState",value:function(t){var e=this.getNodeById(t);return e.expanded=!e.expanded,e.expanded||this.collapseChildren(e),this.tree}},{key:"collapseChildren",value:function(t){var e=this;t.expanded=!1,p(t._children)||t._children.forEach((function(t){return e.collapseChildren(e.getNodeById(t))}))}},{key:"getTreeAndTags",value:function(){return{tree:this.tree,tags:this.tags}}},{key:"handleNavigationKey",value:function(t,e,n,r,o,i,s){var a=this,u=t&&this.getNodeById(t),l=Ht.getAction(u,n);return Ft.has(l)?Ht.handleFocusNavigationkey(e,l,u,(function(t){return a.getNodeById(t)}),o):u&&e.has(u._id)?Ht.handleToggleNavigationkey(l,u,r,i,s):t}},{key:"_getAddOnMatch",value:function(t,e){var n=function(t,e){return t.label.toLowerCase().indexOf(e)>=0};return"function"==typeof this.searchPredicate&&(n=this.searchPredicate),function(r){n(r,e)&&t.push(r._id)}}},{key:"tags",get:function(){var t=this;return this.radioSelect||this.simpleSelect?this.currentChecked?[this.getNodeById(this.currentChecked)]:[]:Ot(this.tree,(function(e,n,r){return e.checked&&!t.hierarchical&&Ct(e,r,(function(e){return t.getNodeById(e)})),e.checked}))}}]),t}(),Wt=(n(9),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),Yt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Xt=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=a(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.initNewProps=function(t){var e=t.data,r=t.mode,o=t.showDropdown,i=t.showPartiallySelected,s=t.searchPredicate;n.treeManager=new qt({data:e,mode:r,showPartiallySelected:i,rootPrefixId:n.clientId,searchPredicate:s}),n.setState((function(t){var e=t.currentFocus&&n.treeManager.getNodeById(t.currentFocus);return e&&(e._focused=!0),Wt({showDropdown:/initial|always/.test(o)||!0===t.showDropdown},n.treeManager.getTreeAndTags())}))},n.resetSearchState=function(){return n.searchInput&&(n.searchInput.value=""),{tree:n.treeManager.restoreNodes(),searchModeOn:!1,allNodesHidden:!1}},n.handleClick=function(t,e){n.setState((function(t){var e="always"===n.props.showDropdown||n.keepDropdownActive||!t.showDropdown;return e!==t.showDropdown&&(e?document.addEventListener("click",n.handleOutsideClick,!1):document.removeEventListener("click",n.handleOutsideClick,!1)),e?n.props.onFocus():n.props.onBlur(),e?{showDropdown:e}:Wt({showDropdown:e},n.resetSearchState())}),e)},n.handleOutsideClick=function(t){"always"!==n.props.showDropdown&&function(t,e){return t instanceof Event&&!function(t){if(t.path)return t.path;for(var e=t.target,n=[e];e.parentElement;)e=e.parentElement,n.unshift(e);return n}(t).some((function(t){return t===e}))}(t,n.node)&&n.handleClick()},n.onInputChange=function(t){var e=n.treeManager.filterTree(t,n.props.keepTreeOnSearch,n.props.keepChildrenOnSearch),r=e.allNodesHidden,o=e.tree,i=t.length>0;n.setState({tree:o,searchModeOn:i,allNodesHidden:r})},n.onTagRemove=function(t,e){var r=n.state.tags;n.onCheckboxChange(t,!1,(function(o){e&&Ht.getNextFocusAfterTagDelete(t,r,o,n.searchInput).focus()}))},n.onNodeToggle=function(t){n.treeManager.toggleNodeExpandState(t);var e=n.state.searchModeOn?n.treeManager.matchTree:n.treeManager.tree;n.setState({tree:e}),"function"==typeof n.props.onNodeToggle&&n.props.onNodeToggle(n.treeManager.getNodeById(t))},n.onCheckboxChange=function(t,e,r){var o=n.props,i=o.mode,s=o.keepOpenOnSelect,a=o.clearSearchOnChange,u=n.state,l=u.currentFocus,c=u.searchModeOn;n.treeManager.setNodeCheckedState(t,e);var p=n.treeManager.tags,f=["simpleSelect","radioSelect"].indexOf(i)>-1,h=!(f&&!s)&&n.state.showDropdown,d=l&&n.treeManager.getNodeById(l),g=n.treeManager.getNodeById(t);p.length||(n.treeManager.restoreDefaultValues(),p=n.treeManager.tags);var y={tree:c?n.treeManager.matchTree:n.treeManager.tree,tags:p,showDropdown:h,currentFocus:t};(f&&!h||a)&&Object.assign(y,n.resetSearchState()),f&&!h&&document.removeEventListener("click",n.handleOutsideClick,!1),Ht.adjustFocusedProps(d,g),n.setState(y,(function(){r&&r(p)})),n.props.onChange(g,p)},n.onAction=function(t,e){n.props.onAction(n.treeManager.getNodeById(t),e)},n.onInputFocus=function(){n.keepDropdownActive=!0},n.onInputBlur=function(){n.keepDropdownActive=!1},n.onTrigger=function(t){n.handleClick(t,(function(){n.state.showDropdown&&n.searchInput.focus()}))},n.onKeyboardKeyDown=function(t){var e=n.props,r=e.readOnly,o=e.mode,i=n.state,s=i.showDropdown,a=i.tags,u=i.searchModeOn,l=i.currentFocus,c=n.treeManager,p=u?c.matchTree:c.tree;if(s||!Ht.isValidKey(t.key,!1)&&!/^\w$/i.test(t.key))if(s&&Ht.isValidKey(t.key,!0)){var f=c.handleNavigationKey(l,p,t.key,r,!u,n.onCheckboxChange,n.onNodeToggle);f!==l&&n.setState({currentFocus:f},(function(){var t=document&&document.getElementById(f+"_li");t&&t.scrollIntoView()}))}else{if(s&&["Escape","Tab"].indexOf(t.key)>-1)return void("simpleSelect"===o&&p.has(l)?n.onCheckboxChange(l,!0):(n.keepDropdownActive=!1,n.handleClick()));if("Backspace"!==t.key||!a.length||0!==n.searchInput.value.length)return;var h=a.pop();n.onCheckboxChange(h._id,!1)}else if(t.persist(),n.handleClick(null,(function(){return n.onKeyboardKeyDown(t)})),/\w/i.test(t.key))return;t.preventDefault()},n.getAriaAttributes=function(){var t=n.props,e=t.mode,r=t.texts;return"radioSelect"!==e?{}:Wt({role:"radiogroup"},d(r.label))},n.state={searchModeOn:!1,currentFocus:void 0},n.clientId=t.id||f.get(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+a(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.Component),Yt(e,[{key:"componentWillMount",value:function(){this.initNewProps(this.props)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleOutsideClick,!1)}},{key:"componentWillReceiveProps",value:function(t){this.initNewProps(t)}},{key:"render",value:function(){var t=this,e=this.props,n=e.disabled,r=e.readOnly,o=e.mode,i=e.texts,s=e.inlineSearchInput,a=this.state,u=a.showDropdown,c=a.currentFocus,p=a.tags,f={disabled:n,readOnly:r,activeDescendant:c?c+"_li":void 0,texts:i,mode:o,clientId:this.clientId},h=l.a.createElement(v,Wt({inputRef:function(e){t.searchInput=e},onInputChange:this.onInputChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur,onKeyDown:this.onKeyboardKeyDown},f,{inlineSearchInput:s}));return l.a.createElement("div",{id:this.clientId,className:[this.props.className&&this.props.className,"react-dropdown-tree-select"].filter(Boolean).join(" "),ref:function(e){t.node=e}},l.a.createElement("div",{className:["dropdown","simpleSelect"===o&&"simple-select","radioSelect"===o&&"radio-select"].filter(Boolean).join(" ")},l.a.createElement(A,Wt({onTrigger:this.onTrigger,showDropdown:u},f,{tags:p}),l.a.createElement(C,Wt({tags:p,onTagRemove:this.onTagRemove},f),!s&&h)),u&&l.a.createElement("div",Wt({className:"dropdown-content"},this.getAriaAttributes()),s&&h,this.state.allNodesHidden?l.a.createElement("span",{className:"no-matches"},i.noMatches||"No matches found"):l.a.createElement(vt,Wt({data:this.state.tree,keepTreeOnSearch:this.props.keepTreeOnSearch,keepChildrenOnSearch:this.props.keepChildrenOnSearch,searchModeOn:this.state.searchModeOn,onAction:this.onAction,onCheckboxChange:this.onCheckboxChange,onNodeToggle:this.onNodeToggle,mode:o,showPartiallySelected:this.props.showPartiallySelected},f)))))}}]),e}();Xt.propTypes={data:s.a.oneOfType([s.a.object,s.a.array]).isRequired,clearSearchOnChange:s.a.bool,keepTreeOnSearch:s.a.bool,keepChildrenOnSearch:s.a.bool,keepOpenOnSelect:s.a.bool,texts:s.a.shape({placeholder:s.a.string,inlineSearchPlaceholder:s.a.string,noMatches:s.a.string,label:s.a.string,labelRemove:s.a.string}),showDropdown:s.a.oneOf(["default","initial","always"]),className:s.a.string,onChange:s.a.func,onAction:s.a.func,onNodeToggle:s.a.func,onFocus:s.a.func,onBlur:s.a.func,mode:s.a.oneOf(["multiSelect","simpleSelect","radioSelect","hierarchical"]),showPartiallySelected:s.a.bool,disabled:s.a.bool,readOnly:s.a.bool,id:s.a.string,searchPredicate:s.a.func,inlineSearchInput:s.a.bool},Xt.defaultProps={onAction:function(){},onFocus:function(){},onBlur:function(){},onChange:function(){},texts:{},showDropdown:"default",inlineSearchInput:!1},e.default=Xt}])},"object"==a(e)&&"object"==a(t)?t.exports=s(n(0)):(o=[n(0)],void 0===(i="function"==typeof(r=s)?r.apply(e,o):r)||(t.exports=i))}).call(this,n(59)(t))},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==r(e)&&"object"==r(n)){if(e.constructor!==n.constructor)return!1;var o,i,s;if(Array.isArray(e)){if((o=e.length)!=n.length)return!1;for(i=o;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((o=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=o;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=o;0!=i--;){var a=s[i];if(!t(e[a],n[a]))return!1}return!0}return e!=e&&n!=n}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==r(e)&&"object"==r(n)){if(e.constructor!==n.constructor)return!1;var o,i,s;if(Array.isArray(e)){if((o=e.length)!=n.length)return!1;for(i=o;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((o=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=o;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=o;0!=i--;){var a=s[i];if(!t(e[a],n[a]))return!1}return!0}return e!=e&&n!=n}},function(t,e,n){"use strict";var r=n(218);t.exports=Function.prototype.bind||r},function(t,e,n){var r=n(44)(n(28),"Map");t.exports=r},function(t,e,n){var r=n(28).Symbol;t.exports=r},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";var r=n(337);t.exports=Function.prototype.bind||r},function(t,e,n){var r=n(9),o=n(6).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){e.f=n(10)},function(t,e,n){var r=n(67)("keys"),o=n(35);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(6).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(9),o=n(8),i=function(t,e){if(o(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(22)(Function.call,n(25).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var r=n(9),o=n(93).set;t.exports=function(t,e,n){var i,s=e.constructor;return s!==n&&"function"==typeof s&&(i=s.prototype)!==n.prototype&&r(i)&&o&&o(t,i),t}},function(t,e,n){"use strict";var r=n(24),o=n(30);t.exports=function(t){var e=String(o(this)),n="",i=r(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(24),o=n(30);t.exports=function(t){return function(e,n){var i,s,a=String(o(e)),u=r(n),l=a.length;return u<0||u>=l?t?"":void 0:(i=a.charCodeAt(u))<55296||i>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):i:t?a.slice(u,u+2):s-56320+(i-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(36),o=n(1),i=n(16),s=n(19),a=n(47),u=n(163),l=n(45),c=n(41),p=n(10)("iterator"),f=!([].keys&&"next"in[].keys()),h="keys",d="values",g=function(){return this};t.exports=function(t,e,n,y,m,v,b){u(n,e,y);var _,w,x,S=function(t){if(!f&&t in C)return C[t];switch(t){case h:case d:return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",O=m==d,P=!1,C=t.prototype,I=C[p]||C["@@iterator"]||m&&C[m],T=I||S(m),R=m?O?S("entries"):T:void 0,M="Array"==e&&C.entries||I;if(M&&(x=c(M.call(new t)))!==Object.prototype&&x.next&&(l(x,E,!0),r||"function"==typeof x[p]||s(x,p,g)),O&&I&&I.name!==d&&(P=!0,T=function(){return I.call(this)}),r&&!b||!f&&!P&&C[p]||s(C,p,T),a[e]=T,a[E]=g,m)if(_={values:O?T:S(d),keys:v?T:S(h),entries:R},b)for(w in _)w in C||i(C,w,_[w]);else o(o.P+o.F*(f||P),e,_);return _}},function(t,e,n){var r=n(102),o=n(30);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(t))}},function(t,e,n){var r=n(9),o=n(29),i=n(10)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==o(t))}},function(t,e,n){var r=n(10)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(47),o=n(10)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){"use strict";var r=n(14),o=n(34);t.exports=function(t,e,n){e in t?r.f(t,e,o(0,n)):t[e]=n}},function(t,e,n){var r=n(56),o=n(10)("iterator"),i=n(47);t.exports=n(12).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){"use strict";var r=n(15),o=n(38),i=n(11);t.exports=function(t){for(var e=r(this),n=i(e.length),s=arguments.length,a=o(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,l=void 0===u?n:o(u,n);l>a;)e[a++]=t;return e}},function(t,e,n){"use strict";var r=n(42),o=n(168),i=n(47),s=n(20);t.exports=n(100)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r,o,i=n(72),s=RegExp.prototype.exec,a=String.prototype.replace,u=s,l=(r=/a/,o=/b*/g,s.call(r,"a"),s.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),c=void 0!==/()??/.exec("")[1];(l||c)&&(u=function(t){var e,n,r,o,u=this;return c&&(n=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),l&&(e=u.lastIndex),r=s.call(u,t),l&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),c&&r&&r.length>1&&a.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),t.exports=u},function(t,e,n){"use strict";var r=n(99)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r,o,i,s=n(22),a=n(157),u=n(92),l=n(88),c=n(6),p=c.process,f=c.setImmediate,h=c.clearImmediate,d=c.MessageChannel,g=c.Dispatch,y=0,m={},v="onreadystatechange",b=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){b.call(t.data)};f&&h||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++y]=function(){a("function"==typeof t?t:Function(t),e)},r(y),y},h=function(t){delete m[t]},"process"==n(29)(p)?r=function(t){p.nextTick(s(b,t,1))}:g&&g.now?r=function(t){g.now(s(b,t,1))}:d?(i=(o=new d).port2,o.port1.onmessage=_,r=s(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",_,!1)):r=v in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(s(b,t,1),0)}),t.exports={set:f,clear:h}},function(t,e,n){"use strict";var r=n(6),o=n(13),i=n(36),s=n(78),a=n(19),u=n(50),l=n(7),c=n(49),p=n(24),f=n(11),h=n(176),d=n(40).f,g=n(14).f,y=n(107),m=n(45),v="ArrayBuffer",b="DataView",_="Wrong index!",w=r.ArrayBuffer,x=r.DataView,S=r.Math,E=r.RangeError,O=r.Infinity,P=w,C=S.abs,I=S.pow,T=S.floor,R=S.log,M=S.LN2,A="buffer",N="byteLength",k="byteOffset",L=o?"_b":A,D=o?"_l":N,j=o?"_o":k;function F(t,e,n){var r,o,i,s=new Array(n),a=8*n-e-1,u=(1<<a)-1,l=u>>1,c=23===e?I(2,-24)-I(2,-77):0,p=0,f=t<0||0===t&&1/t<0?1:0;for((t=C(t))!=t||t===O?(o=t!=t?1:0,r=u):(r=T(R(t)/M),t*(i=I(2,-r))<1&&(r--,i*=2),(t+=r+l>=1?c/i:c*I(2,1-l))*i>=2&&(r++,i/=2),r+l>=u?(o=0,r=u):r+l>=1?(o=(t*i-1)*I(2,e),r+=l):(o=t*I(2,l-1)*I(2,e),r=0));e>=8;s[p++]=255&o,o/=256,e-=8);for(r=r<<e|o,a+=e;a>0;s[p++]=255&r,r/=256,a-=8);return s[--p]|=128*f,s}function B(t,e,n){var r,o=8*n-e-1,i=(1<<o)-1,s=i>>1,a=o-7,u=n-1,l=t[u--],c=127&l;for(l>>=7;a>0;c=256*c+t[u],u--,a-=8);for(r=c&(1<<-a)-1,c>>=-a,a+=e;a>0;r=256*r+t[u],u--,a-=8);if(0===c)c=1-s;else{if(c===i)return r?NaN:l?-O:O;r+=I(2,e),c-=s}return(l?-1:1)*r*I(2,c-e)}function z(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function V(t){return[255&t]}function U(t){return[255&t,t>>8&255]}function H(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function G(t){return F(t,52,8)}function q(t){return F(t,23,4)}function W(t,e,n){g(t.prototype,e,{get:function(){return this[n]}})}function Y(t,e,n,r){var o=h(+n);if(o+e>t[D])throw E(_);var i=t[L]._b,s=o+t[j],a=i.slice(s,s+e);return r?a:a.reverse()}function X(t,e,n,r,o,i){var s=h(+n);if(s+e>t[D])throw E(_);for(var a=t[L]._b,u=s+t[j],l=r(+o),c=0;c<e;c++)a[u+c]=l[i?c:e-c-1]}if(s.ABV){if(!l((function(){w(1)}))||!l((function(){new w(-1)}))||l((function(){return new w,new w(1.5),new w(NaN),w.name!=v}))){for(var $,K=(w=function(t){return c(this,w),new P(h(t))}).prototype=P.prototype,Z=d(P),J=0;Z.length>J;)($=Z[J++])in w||a(w,$,P[$]);i||(K.constructor=w)}var Q=new x(new w(2)),tt=x.prototype.setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||u(x.prototype,{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else w=function(t){c(this,w,v);var e=h(t);this._b=y.call(new Array(e),0),this[D]=e},x=function(t,e,n){c(this,x,b),c(t,w,b);var r=t[D],o=p(e);if(o<0||o>r)throw E("Wrong offset!");if(o+(n=void 0===n?r-o:f(n))>r)throw E("Wrong length!");this[L]=t,this[j]=o,this[D]=n},o&&(W(w,N,"_l"),W(x,A,"_b"),W(x,N,"_l"),W(x,k,"_o")),u(x.prototype,{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var e=Y(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Y(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return z(Y(this,4,t,arguments[1]))},getUint32:function(t){return z(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return B(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return B(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){X(this,1,t,V,e)},setUint8:function(t,e){X(this,1,t,V,e)},setInt16:function(t,e){X(this,2,t,U,e,arguments[2])},setUint16:function(t,e){X(this,2,t,U,e,arguments[2])},setInt32:function(t,e){X(this,4,t,H,e,arguments[2])},setUint32:function(t,e){X(this,4,t,H,e,arguments[2])},setFloat32:function(t,e){X(this,4,t,q,e,arguments[2])},setFloat64:function(t,e){X(this,8,t,G,e,arguments[2])}});m(w,v),m(x,b),a(x.prototype,s.VIEW,!0),e.ArrayBuffer=w,e.DataView=x},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===n(t)?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(181)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),a=l(s),u=l(n(2));function l(t){return t&&t.__esModule?t:{default:t}}var c={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},p=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],f=function(t,e){e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.letterSpacing=t.letterSpacing,e.style.textTransform=t.textTransform},h=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),d=function(){return h?"_"+Math.random().toString(36).substr(2,12):void 0},g=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==r(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.inputRef=function(t){n.input=t,"function"==typeof n.props.inputRef&&n.props.inputRef(t)},n.placeHolderSizerRef=function(t){n.placeHolderSizer=t},n.sizerRef=function(t){n.sizer=t},n.state={inputWidth:t.minWidth,inputId:t.id||d(),prevId:t.id},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+r(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,null,[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.id;return n!==e.prevId?{inputId:n||d(),prevId:n}:null}}]),i(e,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(t,e){e.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var t=this.input&&window.getComputedStyle(this.input);t&&(f(t,this.sizer),this.placeHolderSizer&&f(t,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var t=void 0;t=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(t+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(t=this.props.minWidth),t!==this.state.inputWidth&&this.setState({inputWidth:t})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var t=this.props.injectStyles;return h&&t?a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var t=[this.props.defaultValue,this.props.value,""].reduce((function(t,e){return null!=t?t:e})),e=o({},this.props.style);e.display||(e.display="inline-block");var n=o({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),r=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(this.props,[]);return function(t){p.forEach((function(e){return delete t[e]}))}(r),r.className=this.props.inputClassName,r.id=this.state.inputId,r.style=n,a.default.createElement("div",{className:this.props.className,style:e},this.renderStyles(),a.default.createElement("input",o({},r,{ref:this.inputRef})),a.default.createElement("div",{ref:this.sizerRef,style:c},t),this.props.placeholder?a.default.createElement("div",{ref:this.placeHolderSizerRef,style:c},this.props.placeholder):null)}}]),e}(s.Component);g.propTypes={className:u.default.string,defaultValue:u.default.any,extraWidth:u.default.oneOfType([u.default.number,u.default.string]),id:u.default.string,injectStyles:u.default.bool,inputClassName:u.default.string,inputRef:u.default.func,inputStyle:u.default.object,minWidth:u.default.oneOfType([u.default.number,u.default.string]),onAutosize:u.default.func,onChange:u.default.func,placeholder:u.default.string,placeholderIsMinWidth:u.default.bool,style:u.default.object,value:u.default.any},g.defaultProps={minWidth:1,injectStyles:!0},e.default=g},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),a=l(s),u=l(n(3));function l(t){return t&&t.__esModule?t:{default:t}}var c={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},p=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],f=function(t,e){e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.fontWeight=t.fontWeight,e.style.fontStyle=t.fontStyle,e.style.letterSpacing=t.letterSpacing,e.style.textTransform=t.textTransform},h=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),d=function(){return h?"_"+Math.random().toString(36).substr(2,12):void 0},g=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==r(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.inputRef=function(t){n.input=t,"function"==typeof n.props.inputRef&&n.props.inputRef(t)},n.placeHolderSizerRef=function(t){n.placeHolderSizer=t},n.sizerRef=function(t){n.sizer=t},n.state={inputWidth:t.minWidth,inputId:t.id||d(),prevId:t.id},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+r(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,null,[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.id;return n!==e.prevId?{inputId:n||d(),prevId:n}:null}}]),i(e,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(t,e){e.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var t=this.input&&window.getComputedStyle(this.input);t&&(f(t,this.sizer),this.placeHolderSizer&&f(t,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var t=void 0;t=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(t+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(t=this.props.minWidth),t!==this.state.inputWidth&&this.setState({inputWidth:t})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var t=this.props.injectStyles;return h&&t?a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var t=[this.props.defaultValue,this.props.value,""].reduce((function(t,e){return null!=t?t:e})),e=o({},this.props.style);e.display||(e.display="inline-block");var n=o({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),r=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(this.props,[]);return function(t){p.forEach((function(e){return delete t[e]}))}(r),r.className=this.props.inputClassName,r.id=this.state.inputId,r.style=n,a.default.createElement("div",{className:this.props.className,style:e},this.renderStyles(),a.default.createElement("input",o({},r,{ref:this.inputRef})),a.default.createElement("div",{ref:this.sizerRef,style:c},t),this.props.placeholder?a.default.createElement("div",{ref:this.placeHolderSizerRef,style:c},this.props.placeholder):null)}}]),e}(s.Component);g.propTypes={className:u.default.string,defaultValue:u.default.any,extraWidth:u.default.oneOfType([u.default.number,u.default.string]),id:u.default.string,injectStyles:u.default.bool,inputClassName:u.default.string,inputRef:u.default.func,inputStyle:u.default.object,minWidth:u.default.oneOfType([u.default.number,u.default.string]),onAutosize:u.default.func,onChange:u.default.func,placeholder:u.default.string,placeholderIsMinWidth:u.default.bool,style:u.default.object,value:u.default.any},g.defaultProps={minWidth:1,injectStyles:!0},e.default=g},function(t,e,n){"use strict";t.exports=n(265)},function(t,e,n){"use strict";t.exports=n(384)},function(t,e,n){(function(n){var r,o,i,s;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s=function(t){"use strict";var e=6371008.8,r={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*e,kilometers:6371.0088,kilometres:6371.0088,meters:e,metres:e,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:e/1852,radians:1,yards:6967335.223679999},o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e,yards:1.0936133},i={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function u(t,e,n){switch(t){case"Point":return l(e).geometry;case"LineString":return h(e).geometry;case"Polygon":return p(e).geometry;case"MultiPoint":return m(e).geometry;case"MultiLineString":return y(e).geometry;case"MultiPolygon":return v(e).geometry;default:throw new Error(t+" is invalid")}}function l(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(t[0])||!T(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),g(t.map((function(t){return l(t,e)})),n)}function p(t,e,n){void 0===n&&(n={});for(var r=0,o=t;r<o.length;r++){var i=o[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,n)}function f(t,e,n){return void 0===n&&(n={}),g(t.map((function(t){return p(t,e)})),n)}function h(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,n)}function d(t,e,n){return void 0===n&&(n={}),g(t.map((function(t){return h(t,e)})),n)}function g(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function y(t,e,n){return void 0===n&&(n={}),s({type:"MultiLineString",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),s({type:"MultiPoint",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),s({type:"MultiPolygon",coordinates:t},e,n)}function b(t,e,n){return void 0===n&&(n={}),s({type:"GeometryCollection",geometries:t},e,n)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function w(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t*n}function x(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t/n}function S(t,e){return O(x(t,e))}function E(t){var e=t%360;return e<0&&(e+=360),e}function O(t){return t%(2*Math.PI)*180/Math.PI}function P(t){return t%360*Math.PI/180}function C(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return w(x(t,e),n)}function I(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=i[e];if(!r)throw new Error("invalid original units");var o=i[n];if(!o)throw new Error("invalid final units");return t/r*o}function T(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function R(t){return!!t&&t.constructor===Object}function M(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!T(t))throw new Error("bbox must only contain numbers")}))}function A(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(a(t)))throw new Error("id must be a number or a string")}var N=Object.freeze({__proto__:null,earthRadius:e,factors:r,unitsFactors:o,areaFactors:i,feature:s,geometry:u,point:l,points:c,polygon:p,polygons:f,lineString:h,lineStrings:d,featureCollection:g,multiLineString:y,multiPoint:m,multiPolygon:v,geometryCollection:b,round:_,radiansToLength:w,lengthToRadians:x,lengthToDegrees:S,bearingToAzimuth:E,radiansToDegrees:O,degreesToRadians:P,convertLength:C,convertArea:I,isNumber:T,isObject:R,validateBBox:M,validateId:A});function k(t,e,n){if(null!==t)for(var r,o,i,s,a,u,l,c,p=0,f=0,h=t.type,d="FeatureCollection"===h,g="Feature"===h,y=d?t.features.length:1,m=0;m<y;m++){a=(c=!!(l=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<a;v++){var b=0,_=0;if(null!==(s=c?l.geometries[v]:l)){u=s.coordinates;var w=s.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,f,m,b,_))return!1;f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,m,b,_))return!1;f++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-p;o++){if(!1===e(u[r][o],f,m,b,_))return!1;f++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(_=0,o=0;o<u[r].length;o++){for(i=0;i<u[r][o].length-p;i++){if(!1===e(u[r][o][i],f,m,b,_))return!1;f++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===k(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function L(t,e,n,r){var o=n;return k(t,(function(t,r,i,s,a){o=0===r&&void 0===n?t:e(o,t,r,i,s,a)}),r),o}function D(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function j(t,e,n){var r=n;return D(t,(function(t,o){r=0===o&&void 0===n?t:e(r,t,o)})),r}function F(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function B(t,e,n){var r=n;return F(t,(function(t,o){r=0===o&&void 0===n?t:e(r,t,o)})),r}function z(t){var e=[];return k(t,(function(t){e.push(t)})),e}function V(t,e){var n,r,o,i,s,a,u,l,c,p,f=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(a=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,p=h?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,o=0;o<s;o++)if(null!==(i=u?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,f,l,c,p))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===e(i.geometries[r],f,l,c,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,p))return!1;f++}}function U(t,e,n){var r=n;return V(t,(function(t,o,i,s,a){r=0===o&&void 0===n?t:e(r,t,o,i,s,a)})),r}function H(t,e){V(t,(function(t,n,r,o,i){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s(t,r,{bbox:o,id:i}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(s({type:a,coordinates:c},r),n,l))return!1}}))}function G(t,e,n){var r=n;return H(t,(function(t,o,i){r=0===o&&0===i&&void 0===n?t:e(r,t,o,i)})),r}function q(t,e){H(t,(function(t,n,r){var o=0;if(t.geometry){var i=t.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var s,a=0,u=0,l=0;return!1!==k(t,(function(i,c,p,f,d){if(void 0===s||n>a||f>u||d>l)return s=i,a=n,u=f,l=d,void(o=0);var g=h([s,i],t.properties);if(!1===e(g,n,r,d,o))return!1;o++,s=i}))&&void 0}}}))}function W(t,e,n){var r=n,o=!1;return q(t,(function(t,i,s,a,u){r=!1===o&&void 0===n?t:e(r,t,i,s,a,u),o=!0})),r}function Y(t,e){if(!t)throw new Error("geojson is required");H(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,i=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<i.length;s++)if(!1===e(h(i[s],t.properties),n,r,s))return!1}}}))}function X(t,e,n){var r=n;return Y(t,(function(t,o,i,s){r=0===o&&void 0===n?t:e(r,t,o,i,s)})),r}function $(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),h([u[s],u[s+1]],a,e);case"Polygon":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),h([u[i][s],u[i][s+1]],a,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),h([u[o][s],u[o][s+1]],a,e);case"MultiPolygon":return o<0&&(o=u.length+o),i<0&&(i=u[o].length+i),s<0&&(s=u[o][i].length-s-1),h([u[o][i][s],u[o][i][s+1]],a,e)}throw new Error("geojson is invalid")}function K(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return l(u,a,e);case"MultiPoint":return o<0&&(o=u.length+o),l(u[o],a,e);case"LineString":return s<0&&(s=u.length+s),l(u[s],a,e);case"Polygon":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),l(u[i][s],a,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),l(u[o][s],a,e);case"MultiPolygon":return o<0&&(o=u.length+o),i<0&&(i=u[o].length+i),s<0&&(s=u[o][i].length-s),l(u[o][i][s],a,e)}throw new Error("geojson is invalid")}var Z=Object.freeze({__proto__:null,coordAll:z,coordEach:k,coordReduce:L,featureEach:F,featureReduce:B,findPoint:K,findSegment:$,flattenEach:H,flattenReduce:G,geomEach:V,geomReduce:U,lineEach:Y,lineReduce:X,propEach:D,propReduce:j,segmentEach:q,segmentReduce:W});function J(t){var e=[1/0,1/0,-1/0,-1/0];return k(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Q(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function tt(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function et(t){if(t.length>1&&T(t[0])&&T(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return et(t[0]);throw new Error("coordinates must only contain numbers")}function nt(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function rt(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function ot(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,o=t.features;r<o.length;r++){var i=o[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function it(t){return"Feature"===t.type?t.geometry:t}function st(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}J.default=J;var at=Object.freeze({__proto__:null,getCoord:Q,getCoords:tt,containsNumber:et,geojsonType:nt,featureOf:rt,collectionOf:ot,getGeom:it,getType:st}),ut=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;function pt(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ft=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,o=pt(t),i=1;i<arguments.length;i++){for(var s in n=Object(arguments[i]))lt.call(n,s)&&(o[s]=n[s]);if(ut){r=ut(n);for(var a=0;a<r.length;a++)ct.call(n,r[a])&&(o[r[a]]=n[r[a]])}}return o},ht={successCallback:null,verbose:!1},dt={};function gt(t,e,n){n=n||{};for(var r=Object.keys(ht),o=0;o<r.length;o++){var i=r[o],s=n[i];s=null!=s?s:ht[i],dt[i]=s}dt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;return t.cells.forEach((function(r,o){r.forEach((function(r,i){if(void 0!==r&&5!==(f=r).cval&&10!==f.cval&&!mt(r)){var s=function(t,e,n){var r,o,i=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][n],p=c.cval,f=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][p],h=bt(c,f);s.push([n+h[0],e+h[1]]),h=bt(c,f=l[p]),s.push([n+h[0],e+h[1]]),vt(c);for(var d=n+a[p],g=e+u[p],y=p;d>=0&&g>=0&&g<i&&(d!=n||g!=e)&&void 0!==(c=t[g][d]);){if(0===(p=c.cval)||15===p)return{path:s,info:"mergeable"};f=l[p],r=a[p],o=u[p],5!==p&&10!==p||(5===p?c.flipped?-1===u[y]?(f="left",r=-1,o=0):(f="right",r=1,o=0):-1===a[y]&&(f="bottom",r=0,o=-1):10===p&&(c.flipped?-1===a[y]?(f="top",r=0,o=1):(f="bottom",r=0,o=-1):1===u[y]&&(f="left",r=-1,o=0))),h=bt(c,f),s.push([d+h[0],g+h[1]]),vt(c),d+=r,g+=o,y=p}return{path:s,info:"closed"}}(t.cells,o,i),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],l=s.path[s.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-u)<=1e-7&&Math.abs(e[c][0][1]-l)<=1e-7){for(var p=s.path.length-2;p>=0;--p)e[c].unshift(s.path[p]);a=!0;break}a||(e[n++]=s.path)}var f}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,o={rows:n,cols:r,cells:[]},i=0;i<n;++i){o.cells[i]=[];for(var s=0;s<r;++s){var a=0,u=t[i+1][s],l=t[i+1][s+1],c=t[i][s+1],p=t[i][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(p))){a|=u>=e?8:0,a|=l>=e?4:0,a|=c>=e?2:0;var f,h,d,g,y=!1;if(5==(a|=p>=e?1:0)||10===a){var m=(u+l+c+p)/4;5===a&&m<e?(a=10,y=!0):10===a&&m<e&&(a=5,y=!0)}0!==a&&15!==a&&(f=h=d=g=.5,1===a?(d=1-yt(e,u,p),h=1-yt(e,c,p)):2===a?(h=yt(e,p,c),g=1-yt(e,l,c)):3===a?(d=1-yt(e,u,p),g=1-yt(e,l,c)):4===a?(f=yt(e,u,l),g=yt(e,c,l)):5===a?(f=yt(e,u,l),g=yt(e,c,l),h=1-yt(e,c,p),d=1-yt(e,u,p)):6===a?(h=yt(e,p,c),f=yt(e,u,l)):7===a?(d=1-yt(e,u,p),f=yt(e,u,l)):8===a?(d=yt(e,p,u),f=1-yt(e,l,u)):9===a?(h=1-yt(e,c,p),f=1-yt(e,l,u)):10===a?(f=1-yt(e,l,u),g=1-yt(e,l,c),h=yt(e,p,c),d=yt(e,p,u)):11===a?(f=1-yt(e,l,u),g=1-yt(e,l,c)):12===a?(d=yt(e,p,u),g=yt(e,c,l)):13===a?(h=1-yt(e,c,p),g=yt(e,c,l)):14===a?(d=yt(e,p,u),h=yt(e,p,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),o.cells[i][s]={cval:a,flipped:y,top:f,right:g,bottom:h,left:d})}}}return o}(t,e));return"function"==typeof dt.successCallback&&dt.successCallback(a),a}function yt(t,e,n){return(t-e)/(n-e)}function mt(t){return 0===t.cval||15===t.cval}function vt(t){mt(t)||5===t.cval||10===t.cval||(t.cval=15)}function bt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var _t=xt,wt=xt;function xt(t,e,n,r,o){St(t,e,n||0,r||t.length-1,o||Ot)}function St(t,e,n,r,o){for(;r>n;){if(r-n>600){var i=r-n+1,s=e-n+1,a=Math.log(i),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(i-u)/i)*(s-i/2<0?-1:1);St(t,e,Math.max(n,Math.floor(e-s*u/i+l)),Math.min(r,Math.floor(e+(i-s)*u/i+l)),o)}var c=t[e],p=n,f=r;for(Et(t,n,e),o(t[r],c)>0&&Et(t,n,r);p<f;){for(Et(t,p,f),p++,f--;o(t[p],c)<0;)p++;for(;o(t[f],c)>0;)f--}0===o(t[n],c)?Et(t,n,f):Et(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function Et(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Ot(t,e){return t<e?-1:t>e?1:0}_t.default=wt;var Pt=It,Ct=It;function It(t,e){if(!(this instanceof It))return new It(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Tt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Rt(t,e){Mt(t,0,t.children.length,e,t)}function Mt(t,e,n,r,o){o||(o=Bt(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,s=e;s<n;s++)i=t.children[s],At(o,t.leaf?r(i):i);return o}function At(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Nt(t,e){return t.minX-e.minX}function kt(t,e){return t.minY-e.minY}function Lt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Dt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function jt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Bt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zt(t,e,n,r,o){for(var i,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(i=e+Math.ceil((n-e)/r/2)*r,_t(t,i,e,n,o),s.push(e,i,i,n))}function Vt(t){var e={exports:{}};return t(e,e.exports),e.exports}It.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Ft(t,e))return n;for(var o,i,s,a,u=[];e;){for(o=0,i=e.children.length;o<i;o++)s=e.children[o],Ft(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):jt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ft(t,e))return!1;for(var r,o,i,s,a=[];e;){for(r=0,o=e.children.length;r<o;r++)if(i=e.children[r],Ft(t,s=e.leaf?n(i):i)){if(e.leaf||jt(t,s))return!0;a.push(i)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var o=this.data;this.data=r,r=o}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Bt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,o,i,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),i=!0),s.leaf&&-1!==(o=Tt(t,s.children,e)))return s.children.splice(o,1),u.push(s),this._condense(u),this;i||s.leaf||!jt(s,a)?r?(n++,s=r.children[n],i=!1):s=null:(u.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Nt,compareMinY:kt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var o,i=n-e+1,s=this._maxEntries;if(i<=s)return Rt(o=Bt(t.slice(e,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,r-1))),(o=Bt([])).leaf=!1,o.height=r;var a,u,l,c,p=Math.ceil(i/s),f=p*Math.ceil(Math.sqrt(s));for(zt(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(zt(t,a,l=Math.min(a+f-1,n),p,this.compareMinY),u=a;u<=l;u+=p)c=Math.min(u+p-1,l),o.children.push(this._build(t,u,c,r-1));return Rt(o,this.toBBox),o},_chooseSubtree:function(t,e,n,r){for(var o,i,s,a,u,l,c,p,f,h;r.push(e),!e.leaf&&r.length-1!==n;){for(c=p=1/0,o=0,i=e.children.length;o<i;o++)u=Lt(s=e.children[o]),f=t,h=s,(l=(Math.max(h.maxX,f.maxX)-Math.min(h.minX,f.minX))*(Math.max(h.maxY,f.maxY)-Math.min(h.minY,f.minY))-u)<p?(p=l,c=u<c?u:c,a=s):l===p&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,o=n?t:r(t),i=[],s=this._chooseSubtree(o,this.data,e,i);for(s.children.push(t),At(s,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},_split:function(t,e){var n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var i=this._chooseSplitIndex(n,o,r),s=Bt(n.children.splice(i,n.children.length-i));s.height=n.height,s.leaf=n.leaf,Rt(n,this.toBBox),Rt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Bt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Rt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,o,i,s,a,u,l,c,p,f,h,d,g,y;for(u=l=1/0,r=e;r<=n-e;r++)p=o=Mt(t,0,r,this.toBBox),f=i=Mt(t,r,n,this.toBBox),h=Math.max(p.minX,f.minX),d=Math.max(p.minY,f.minY),g=Math.min(p.maxX,f.maxX),y=Math.min(p.maxY,f.maxY),s=Math.max(0,g-h)*Math.max(0,y-d),a=Lt(o)+Lt(i),s<u?(u=s,c=r,l=a<l?a:l):s===u&&a<l&&(l=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Nt,o=t.leaf?this.compareMinY:kt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,o)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var o,i,s=this.toBBox,a=Mt(t,0,e,s),u=Mt(t,n-e,n,s),l=Dt(a)+Dt(u);for(o=e;o<n-e;o++)i=t.children[o],At(a,t.leaf?s(i):i),l+=Dt(a);for(o=n-e-1;o>=e;o--)i=t.children[o],At(u,t.leaf?s(i):i),l+=Dt(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)At(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Rt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Pt.default=Ct;var Ut=function(t,e,n){var r=t*e,o=Ht*t,i=o-(o-t),s=t-i,a=Ht*e,u=a-(a-e),l=e-u,c=s*l-(r-i*u-s*u-i*l);return n?(n[0]=c,n[1]=r,n):[c,r]},Ht=+(Math.pow(2,27)+1),Gt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,o=t-(n-r)+(e-r);return o?[o,n]:[n]}(t[0],e[0]);var o,i,s=new Array(n+r),a=0,u=0,l=0,c=Math.abs,p=t[u],f=c(p),h=e[l],d=c(h);f<d?(i=p,(u+=1)<n&&(f=c(p=t[u]))):(i=h,(l+=1)<r&&(d=c(h=e[l]))),u<n&&f<d||l>=r?(o=p,(u+=1)<n&&(f=c(p=t[u]))):(o=h,(l+=1)<r&&(d=c(h=e[l])));for(var g,y,m=o+i,v=m-o,b=i-v,_=b,w=m;u<n&&l<r;)f<d?(o=p,(u+=1)<n&&(f=c(p=t[u]))):(o=h,(l+=1)<r&&(d=c(h=e[l]))),(b=(i=_)-(v=(m=o+i)-o))&&(s[a++]=b),_=w-((g=w+m)-(y=g-w))+(m-y),w=g;for(;u<n;)(b=(i=_)-(v=(m=(o=p)+i)-o))&&(s[a++]=b),_=w-((g=w+m)-(y=g-w))+(m-y),w=g,(u+=1)<n&&(p=t[u]);for(;l<r;)(b=(i=_)-(v=(m=(o=h)+i)-o))&&(s[a++]=b),_=w-((g=w+m)-(y=g-w))+(m-y),w=g,(l+=1)<r&&(h=e[l]);return _&&(s[a++]=_),w&&(s[a++]=w),a||(s[a++]=0),s.length=a,s},qt=function(t,e,n){var r=t+e,o=r-t,i=e-o,s=t-(r-o);return n?(n[0]=s+i,n[1]=r,n):[s+i,r]},Wt=function(t,e){var n=t.length;if(1===n){var r=Ut(t[0],e);return r[0]?r:[r[1]]}var o=new Array(2*n),i=[.1,.1],s=[.1,.1],a=0;Ut(t[0],e,i),i[0]&&(o[a++]=i[0]);for(var u=1;u<n;++u){Ut(t[u],e,s);var l=i[1];qt(l,s[0],i),i[0]&&(o[a++]=i[0]);var c=s[1],p=i[1],f=c+p,h=p-(f-c);i[1]=f,h&&(o[a++]=h)}return i[1]&&(o[a++]=i[1]),0===a&&(o[a++]=0),o.length=a,o},Yt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,o=t-(n-r)+(e-r);return o?[o,n]:[n]}(t[0],-e[0]);var o,i,s=new Array(n+r),a=0,u=0,l=0,c=Math.abs,p=t[u],f=c(p),h=-e[l],d=c(h);f<d?(i=p,(u+=1)<n&&(f=c(p=t[u]))):(i=h,(l+=1)<r&&(d=c(h=-e[l]))),u<n&&f<d||l>=r?(o=p,(u+=1)<n&&(f=c(p=t[u]))):(o=h,(l+=1)<r&&(d=c(h=-e[l])));for(var g,y,m=o+i,v=m-o,b=i-v,_=b,w=m;u<n&&l<r;)f<d?(o=p,(u+=1)<n&&(f=c(p=t[u]))):(o=h,(l+=1)<r&&(d=c(h=-e[l]))),(b=(i=_)-(v=(m=o+i)-o))&&(s[a++]=b),_=w-((g=w+m)-(y=g-w))+(m-y),w=g;for(;u<n;)(b=(i=_)-(v=(m=(o=p)+i)-o))&&(s[a++]=b),_=w-((g=w+m)-(y=g-w))+(m-y),w=g,(u+=1)<n&&(p=t[u]);for(;l<r;)(b=(i=_)-(v=(m=(o=h)+i)-o))&&(s[a++]=b),_=w-((g=w+m)-(y=g-w))+(m-y),w=g,(l+=1)<r&&(h=-e[l]);return _&&(s[a++]=_),w&&(s[a++]=w),a||(s[a++]=0),s.length=a,s},Xt=Vt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var o=n[r-1]=new Array(t.length-1),i=0,s=0;i<t.length;++i)i!==e&&(o[s++]=t[r][i]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],i=0;i<t.length;++i)o.push(["scale(",n(r(e(t,i))),",",(s=i,1&s?"-":""),t[0][i],")"].join(""));return o;var s}function o(t){for(var o=[],i=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?o.push.apply(o,r(e(s,u))):i.push.apply(i,r(e(s,u))),a.push("m"+u);var l=n(o),c=n(i),p="orientation"+t+"Exact",f=["function ",p,"(",a.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",p].join("");return new Function("sum","prod","scale","sub",f)(Gt,Ut,Wt,Yt)}var i=o(3),s=o(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,o=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=o-s;if(o>0){if(s<=0)return a;r=o+s}else{if(!(o<0))return a;if(s>=0)return a;r=-(o+s)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:i(t,e,n)},function(t,e,n,r){var o=t[0]-r[0],i=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],l=e[1]-r[1],c=n[1]-r[1],p=t[2]-r[2],f=e[2]-r[2],h=n[2]-r[2],d=i*c,g=a*l,y=a*u,m=o*c,v=o*l,b=i*u,_=p*(d-g)+f*(y-m)+h*(v-b),w=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(p)+(Math.abs(y)+Math.abs(m))*Math.abs(f)+(Math.abs(v)+Math.abs(b))*Math.abs(h));return _>w||-_>w?_:s(t,e,n,r)}];function u(t){var e=a[t.length];return e||(e=a[t.length]=o(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(o(a.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[u].concat(a)),r=0;r<=5;++r)t.exports[r]=a[r]}()})),$t=Xt[3],Kt=Jt,Zt=Jt;function Jt(t,e){if(!(this instanceof Jt))return new Jt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Qt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Qt(t,e){return t<e?-1:t>e?1:0}Jt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var o=t-1>>1,i=e[o];if(n(r,i)>=0)break;e[t]=i,t=o}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,o=e[t];t<r;){var i=1+(t<<1),s=i+1,a=e[i];if(s<this.length&&n(e[s],a)<0&&(i=s,a=e[s]),n(a,o)>=0)break;e[t]=a,t=i}e[t]=o}},Kt.default=Zt;var te=function(t,e){for(var n=t[0],r=t[1],o=!1,i=0,s=e.length-1;i<e.length;s=i++){var a=e[i][0],u=e[i][1],l=e[s][0],c=e[s][1];u>r!=c>r&&n<(l-a)*(r-u)/(c-u)+a&&(o=!o)}return o},ee=Xt[3],ne=oe,re=oe;function oe(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,o=function(t){for(var e=t[0],n=t[0],r=t[0],o=t[0],i=0;i<t.length;i++){var s=t[i];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>o[1]&&(o=s)}var a=[e,n,r,o],u=a.slice();for(i=0;i<t.length;i++)te(t[i],a)||u.push(t[i]);var l=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var o=new Array(e);for(r=0;r<e;++r)o[r]=r;o.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var i=[o[0],o[1]],s=[o[0],o[1]];for(r=2;r<e;++r){for(var a=o[r],u=t[a],l=i.length;l>1&&$t(t[i[l-2]],t[i[l-1]],u)<=0;)l-=1,i.pop();for(i.push(a),l=s.length;l>1&&$t(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}n=new Array(s.length+i.length-2);for(var c=0,p=(r=0,i.length);r<p;++r)n[c++]=i[r];for(var f=s.length-2;f>0;--f)n[c++]=s[f];return n}(u),c=[];for(i=0;i<l.length;i++)c.push(u[l[i]]);return c}(t),i=Pt(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<o.length;a++){var u=o[a];i.remove(u),r=pe(u,r),s.push(r)}var l=Pt(16);for(a=0;a<s.length;a++)l.insert(ce(s[a]));for(var c=e*e,p=n*n;s.length;){var f=s.shift(),h=f.p,d=f.next.p,g=fe(h,d);if(!(g<p)){var y=g/c;(u=ie(i,f.prev.p,h,d,f.next.next.p,y,l))&&Math.min(fe(u,h),fe(u,d))<=y&&(s.push(f),s.push(pe(u,f)),i.remove(u),l.remove(f),l.insert(ce(f)),l.insert(ce(f.next)))}}f=r;var m=[];do{m.push(f.p),f=f.next}while(f!==r);return m.push(f.p),m}function ie(t,e,n,r,o,i,s){for(var a=new Kt(null,se),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],p=u.leaf?he(c,n,r):ae(n,r,c);p>i||a.push({node:c,dist:p})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),h=f.node,d=he(h,e,n),g=he(h,r,o);if(f.dist<d&&f.dist<g&&le(n,h,s)&&le(r,h,s))return h}(u=a.pop())&&(u=u.node)}return null}function se(t,e){return t.dist-e.dist}function ae(t,e,n){if(ue(t,n)||ue(e,n))return 0;var r=de(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var o=de(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===o)return 0;var i=de(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===i)return 0;var s=de(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,o,i,s)}function ue(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function le(t,e,n){for(var r,o,i,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),p=n.search({minX:a,minY:u,maxX:l,maxY:c}),f=0;f<p.length;f++)if(r=p[f].p,o=p[f].next.p,i=t,r!==(s=e)&&o!==i&&ee(r,o,i)>0!=ee(r,o,s)>0&&ee(i,s,r)>0!=ee(i,s,o)>0)return!1;return!0}function ce(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function pe(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function fe(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function he(t,e,n){var r=e[0],o=e[1],i=n[0]-r,s=n[1]-o;if(0!==i||0!==s){var a=((t[0]-r)*i+(t[1]-o)*s)/(i*i+s*s);a>1?(r=n[0],o=n[1]):a>0&&(r+=i*a,o+=s*a)}return(i=t[0]-r)*i+(s=t[1]-o)*s}function de(t,e,n,r,o,i,s,a){var u,l,c,p,f=n-t,h=r-e,d=s-o,g=a-i,y=t-o,m=e-i,v=f*f+h*h,b=f*d+h*g,_=d*d+g*g,w=f*y+h*m,x=d*y+g*m,S=v*_-b*b,E=S,O=S;0===S?(l=0,E=1,p=x,O=_):(p=v*x-b*w,(l=b*x-_*w)<0?(l=0,p=x,O=_):l>E&&(l=E,p=x+b,O=_)),p<0?(p=0,-w<0?l=0:-w>v?l=E:(l=-w,E=v)):p>O&&(p=O,-w+b<0?l=0:-w+b>v?l=E:(l=-w+b,E=v));var P=(1-(c=0===p?0:p/O))*o+c*s-((1-(u=0===l?0:l/E))*t+u*n),C=(1-c)*i+c*a-((1-u)*e+u*r);return P*P+C*C}function ge(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(k(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=ne(n,e.concavity);return r.length>3?p([r]):null}function ye(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=Q(t),o=it(e),i=o.type,s=e.bbox,a=o.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===i&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(me(r,a[l][0],n.ignoreBoundary)){for(var c=!1,p=1;p<a[l].length&&!c;)me(r,a[l][p],!n.ignoreBoundary)&&(c=!0),p++;c||(u=!0)}return u}function me(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,i=e.length-1;o<e.length;i=o++){var s=e[o][0],a=e[o][1],u=e[i][0],l=e[i][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(r=!r)}return r}function ve(t,e){var n=[];return F(t,(function(t){var r=!1;if("Point"===t.geometry.type)V(e,(function(e){ye(t,e)&&(r=!0)})),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var o=[];V(e,(function(e){k(t,(function(t){ye(t,e)&&(r=!0,o.push(t))}))})),r&&n.push(m(o))}})),g(n)}function be(t,e,n){void 0===n&&(n={});var r=Q(t),o=Q(e),i=P(o[1]-r[1]),s=P(o[0]-r[0]),a=P(r[1]),u=P(o[1]),l=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return w(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function _e(t,e){var n=!1;return g(function(t){if(t.length<3)return[];t.sort(xe);for(var e,n,r,o,i,s,a=t.length-1,u=t[a].x,l=t[0].x,c=t[a].y,p=c;a--;)t[a].y<c&&(c=t[a].y),t[a].y>p&&(p=t[a].y);var f,h=l-u,d=p-c,g=h>d?h:d,y=.5*(l+u),m=.5*(p+c),v=[new we({__sentinel:!0,x:y-20*g,y:m-g},{__sentinel:!0,x:y,y:m+20*g},{__sentinel:!0,x:y+20*g,y:m-g})],b=[],_=[];for(a=t.length;a--;){for(_.length=0,f=v.length;f--;)(h=t[a].x-v[f].x)>0&&h*h>v[f].r?(b.push(v[f]),v.splice(f,1)):h*h+(d=t[a].y-v[f].y)*d>v[f].r||(_.push(v[f].a,v[f].b,v[f].b,v[f].c,v[f].c,v[f].a),v.splice(f,1));for(Se(_),f=_.length;f;)n=_[--f],e=_[--f],r=t[a],o=n.x-e.x,i=n.y-e.y,s=2*(o*(r.y-n.y)-i*(r.x-n.x)),Math.abs(s)>1e-12&&v.push(new we(e,n,r))}for(Array.prototype.push.apply(b,v),a=b.length;a--;)(b[a].a.__sentinel||b[a].b.__sentinel||b[a].c.__sentinel)&&b.splice(a,1);return b}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],o=[t.c.x,t.c.y],i={};return n?(e.push(t.a.z),r.push(t.b.z),o.push(t.c.z)):i={a:t.a.z,b:t.b.z,c:t.c.z},p([[e,r,o,e]],i)})))}ne.default=re;var we=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,o,i=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,l=i*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+u*(t.y+n.y),p=2*(i*(n.y-e.y)-s*(n.x-e.x));this.x=(u*l-s*c)/p,this.y=(i*c-a*l)/p,r=this.x-t.x,o=this.y-t.y,this.r=r*r+o*o};function xe(t,e){return e.x-t.x}function Se(t){var e,n,r,o,i,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(i=t[--r],e===(o=t[--r])&&n===i||e===i&&n===o){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function Ee(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Oe(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Oe(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ce(t);default:throw new Error("unknown GeoJSON type")}}function Oe(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Pe(t.properties),e.geometry=Ce(t.geometry),e}function Pe(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==a(r)?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=Pe(r):e[n]=r})),e):e}function Ce(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ce(t)})),e):(e.coordinates=Ie(t.coordinates),e)}function Ie(t){var e=t;return"object"!=a(e[0])?e.slice():e.map((function(t){return Ie(t)}))}function Te(t){return t[0].toString()+","+t[1].toString()}function Re(t){return t}function Me(t,e){var n=function(t){if(null==t)return Re;var e,n,r=t.scale[0],o=t.scale[1],i=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+i,c[1]=(n+=t[1])*o+s;u<l;)c[u]=t[u],++u;return c}}(t.transform),r=t.arcs;function o(t,e){e.length&&e.pop();for(var o=r[t<0?~t:t],i=0,s=o.length;i<s;++i)e.push(n(o[i],i));t<0&&function(t,e){for(var n,r=t.length,o=r-e;o<--r;)n=t[o],t[o++]=t[r],t[r]=n}(e,s)}function i(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)o(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=i(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(i);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function Ae(t,e){var n={},r=[],o=[];function i(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,o=t[r-1],i=0;++n<r;)e=o,o=t[n],i+=e[0]*o[1]-e[1]*o[0];return Math.abs(i)}(Me(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,o.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:o.map((function(e){var r,o=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&o.push(t)}))}))})),(r=(o=function(t,e){var n={},r={},o={},i=[],s=-1;function a(t,e){for(var r in t){var o=t[r];delete e[o.start],delete o.start,delete o.end,o.forEach((function(t){n[t<0?~t:t]=1})),i.push(o)}}return e.forEach((function(n,r){var o,i=t.arcs[n<0?~n:n];i.length<3&&!i[1][0]&&!i[1][1]&&(o=e[++s],e[s]=n,e[r]=o)})),e.forEach((function(e){var n,i,s=function(e){var n,r=t.arcs[e<0?~e:e],o=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,o]:[o,n]}(e),a=s[0],u=s[1];if(n=o[a])if(delete o[n.end],n.push(e),n.end=u,i=r[u]){delete r[i.start];var l=i===n?n:n.concat(i);r[l.start=n.start]=o[l.end=i.end]=l}else r[n.start]=o[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,i=o[a]){delete o[i.end];var c=i===n?n:i.concat(n);r[c.start=i.start]=o[c.end=n.end]=c}else r[n.start]=o[n.end]=n;else r[(n=[e]).start=a]=o[n.end=u]=n})),a(o,r),a(r,o),e.forEach((function(t){n[t<0?~t:t]||i.push([t])})),i}(t,o)).length)>1)for(var i,a,u=1,l=s(o[0]);u<r;++u)(i=s(o[u]))>l&&(a=o[0],o[0]=o[u],o[u]=a,l=i);return o})).filter((function(t){return t.length>0}))}}var Ne=Object.prototype.hasOwnProperty;function ke(t,e,n,r,o,i){3===arguments.length&&(r=i=Array,o=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new i(t),u=t-1,l=0;l<t;++l)s[l]=o;function c(r,i){for(var l=e(r)&u,c=s[l],p=0;c!=o;){if(n(c,r))return a[l]=i;if(++p>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=r,a[l]=i,i}function p(r,i){for(var l=e(r)&u,c=s[l],p=0;c!=o;){if(n(c,r))return a[l];if(++p>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=r,a[l]=i,i}function f(r,i){for(var l=e(r)&u,c=s[l],p=0;c!=o;){if(n(c,r))return a[l];if(++p>=t)break;c=s[l=l+1&u]}return i}function h(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=o&&t.push(r)}return t}return{set:c,maybeSet:p,get:f,keys:h}}function Le(t,e){return t[0]===e[0]&&t[1]===e[1]}var De=new ArrayBuffer(16),je=new Float64Array(De),Fe=new Uint32Array(De);function Be(t){je[0]=t[0],je[1]=t[1];var e=Fe[0]^Fe[1];return 2147483647&(e<<5^e>>7^Fe[2]^Fe[3])}function ze(t,e,n,r){Ve(t,e,n),Ve(t,e,e+r),Ve(t,e+r,n)}function Ve(t,e,n){for(var r,o=e+(n---e>>1);e<o;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Ue(t){var e={type:"GeometryCollection",geometries:t.features.map(He)};return null!=t.bbox&&(e.bbox=t.bbox),e}function He(t){var e,n=Ge(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Ge(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ge)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function qe(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,o=-1/0;function i(t){null!=t&&Ne.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(i)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var i=t[0],s=t[1];i<e&&(e=i),i>r&&(r=i),s<n&&(n=s),s>o&&(o=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var c in t)i(t[c]);return r>=e&&o>=n?[e,n,r,o]:void 0}(t=function(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Ue:"Feature"===n.type?He:Ge)(n);return r}(t)),r=e>0&&n&&function(t,e,n){var r=e[0],o=e[1],i=e[2],s=e[3],a=i-r?(n-1)/(i-r):1,u=s-o?(n-1)/(s-o):1;function l(t){return[Math.round((t[0]-r)*a),Math.round((t[1]-o)*u)]}function c(t,e){for(var n,i,s,l,c,p=-1,f=0,h=t.length,d=new Array(h);++p<h;)n=t[p],l=Math.round((n[0]-r)*a),c=Math.round((n[1]-o)*u),l===i&&c===s||(d[f++]=[i=l,s=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function p(t){return c(t,2)}function f(t){return c(t,4)}function h(t){return t.map(f)}function d(t){null!=t&&Ne.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=p(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(p)},Polygon:function(t){t.arcs=h(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}};for(var y in t)d(t[y]);return{scale:[1/a,1/u],translate:[r,o]}}(t,n,e),o=function(t){var e,n,r,o,i=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,r=0,o=s.length;r<o;++r)for(e=s[r];e=e.next;)++u;for(r=0,o=a.length;r<o;++r)for(n=a[r];n=n.next;)++u;var l=ke(2*u*1.4,Be,Le),c=t.arcs=[];for(r=0,o=s.length;r<o;++r){e=s[r];do{p(e)}while(e=e.next)}for(r=0,o=a.length;r<o;++r)if((n=a[r]).next)do{p(n)}while(n=n.next);else f(n);function p(t){var e,n,r,o,s,a,u,p;if(r=l.get(e=i[t[0]]))for(u=0,p=r.length;u<p;++u)if(h(o=r[u],t))return t[0]=o[0],void(t[1]=o[1]);if(s=l.get(n=i[t[1]]))for(u=0,p=s.length;u<p;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):l.set(e,[t]),s?s.push(t):l.set(n,[t]),c.push(t)}function f(t){var e,n,r,o,s;if(n=l.get(i[t[0]]))for(o=0,s=n.length;o<s;++o){if(g(r=n[o],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=i[t[0]+m(t)]))for(o=0,s=n.length;o<s;++o){if(g(r=n[o],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),c.push(t)}function h(t,e){var n=t[0],r=e[0],o=t[1];if(n-o!=r-e[1])return!1;for(;n<=o;++n,++r)if(!Le(i[n],i[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],o=t[1],s=e[1];if(n-o!=r-s)return!1;for(;n<=o;++n,--s)if(!Le(i[n],i[s]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],o=t[1]-n;if(o!==e[1]-r)return!1;for(var s=m(t),a=m(e),u=0;u<o;++u)if(!Le(i[n+(u+s)%o],i[r+(u+a)%o]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],o=t[1],s=e[1],a=o-n;if(a!==s-r)return!1;for(var u=m(t),l=a-m(e),c=0;c<a;++c)if(!Le(i[n+(c+u)%a],i[s-(c+l)%a]))return!1;return!0}function m(t){for(var e=t[0],n=t[1],r=e,o=r,s=i[r];++r<n;){var a=i[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(o=r,s=a)}return o-e}return t}(function(t){var e,n,r,o=function(t){var e,n,r,o,i=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=ke(1.4*i.length,w,x,Int32Array,-1,Int32Array),e=new Int32Array(i.length),n=0,r=i.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(i.length),c=new Int32Array(i.length),p=new Int32Array(i.length),f=new Int8Array(i.length),h=0;for(e=0,n=i.length;e<n;++e)l[e]=c[e]=p[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],g=d[0],y=d[1];for(r=u[g],o=u[++g],++h,f[r]=1;++g<=y;)_(e,r,r=o,o=u[g]);++h,f[o]=1}for(e=0,n=i.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var m=a[e],v=m[0]+1,b=m[1];for(_(e,u[b-1],r=u[v-1],o=u[v]);++v<=b;)_(e,r,r=o,o=u[v])}function _(t,e,n,r){if(l[n]!==t){l[n]=t;var o=c[n];if(o>=0){var i=p[n];o===e&&i===r||o===r&&i===e||(++h,f[n]=1)}else c[n]=e,p[n]=r}}function w(t){return Be(i[t])}function x(t,e){return Le(i[t],i[e])}l=c=p=null;var S,E=function(t,e,n,r,o){3===arguments.length&&(r=Array,o=null);for(var i=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)i[a]=o;function u(r){for(var a=e(r)&s,u=i[a],l=0;u!=o;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=i[a=a+1&s]}return i[a]=r,!0}function l(r){for(var a=e(r)&s,u=i[a],l=0;u!=o;){if(n(u,r))return!0;if(++l>=t)break;u=i[a=a+1&s]}return!1}function c(){for(var t=[],e=0,n=i.length;e<n;++e){var r=i[e];r!=o&&t.push(r)}return t}return{add:u,has:l,values:c}}(1.4*h,Be,Le);for(e=0,n=i.length;e<n;++e)f[S=u[e]]&&E.add(i[S]);return E}(t),i=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],c=u[1];++l<c;)o.has(i[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var p=a[n],f=p[0],h=f,d=p[1],g=o.has(i[f]);++h<d;)o.has(i[h])&&(g?(e={0:h,1:p[1]},p[1]=h,p=p.next=e):(ze(i,f,d,d-h),i[d]=i[f],g=!0,h=f));return t}(function(t){var e=-1,n=[],r=[],o=[];function i(t){t&&Ne.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(i)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var r=0,i=t.length;r<i;++r)o[++e]=t[r];var s={0:e-i+1,1:e};return n.push(s),s}function u(t){for(var n=0,i=t.length;n<i;++n)o[++e]=t[n];var s={0:e-i+1,1:e};return r.push(s),s}function l(t){return t.map(u)}for(var c in t)i(t[c]);return{type:"Topology",coordinates:o,lines:n,rings:r,objects:t}}(t))),i=o.coordinates,s=ke(1.4*o.arcs.length,We,Ye);function a(t){t&&Ne.call(u,t.type)&&u[t.type](t)}t=o.objects,o.bbox=n,o.arcs=o.arcs.map((function(t,e){return s.set(t,e),i.slice(t[0],t[1]+1)})),delete o.coordinates,i=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(l)}for(var p in t)a(t[p]);return r&&(o.transform=r,o.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,o,i=t[e],s=0,a=1,u=i.length,l=i[0],c=l[0],p=l[1];++s<u;)r=(l=i[s])[0],o=l[1],r===c&&o===p||(i[a++]=[r-c,o-p],c=r,p=o);1===a&&(i[a++]=[0,0]),i.length=a}return t}(o.arcs)),o}function We(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Ye(t,e){var n,r=t[0],o=t[1],i=e[0],s=e[1];return o<r&&(n=r,r=o,o=n),s<i&&(n=i,i=s,s=n),r===i&&o===s}function Xe(t,e){if(void 0===e&&(e={}),!R(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==st(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ee(t));var r=function(t){var e={};H(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var o=t;switch(r){case"LineString":return function(t,e){if(void 0===e&&(e={}),!R(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==st(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ee(t));var r=[],o=X(t,(function(t,e){return function(t,e){var n,r=t.geometry.coordinates,o=e.geometry.coordinates,i=Te(r[0]),s=Te(r[r.length-1]),a=Te(o[0]),u=Te(o[o.length-1]);if(i===u)n=o.concat(r.slice(1));else if(a===s)n=r.concat(o.slice(1));else if(i===a)n=r.slice(1).reverse().concat(o);else{if(s!==u)return null;n=r.concat(o.reverse().slice(1))}return h(n)}(t,e)||(r.push(t),e)}));return o&&r.push(o),r.length?1===r.length?r[0]:y(r.map((function(t){return t.coordinates}))):null}(o,e);case"Polygon":return function(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==st(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Ee(t));var n=[];H(t,(function(t){n.push(t.geometry)}));var r=qe({geoms:b(n).geometry});return function(t){return Me(t,Ae.apply(this,arguments))}(r,r.objects.geoms.geometries)}(o,e);default:throw new Error(r+" is not supported")}}function $e(t,e){void 0===e&&(e={});var n="object"==a(e)?e.mutate:e;if(!t)throw new Error("geojson is required");var r=st(t),o=[];switch(r){case"LineString":o=Ke(t);break;case"MultiLineString":case"Polygon":tt(t).forEach((function(t){o.push(Ke(t))}));break;case"MultiPolygon":tt(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Ke(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var i={};tt(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(i,e)||(o.push(t),i[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=o,t):{type:r,coordinates:o}:!0===n?(t.geometry.coordinates=o,t):s({type:r,coordinates:o},t.properties,{bbox:t.bbox,id:t.id})}function Ke(t){var e=tt(t);if(2===e.length&&!Ze(e[0],e[1]))return e;var n=[],r=e.length-1,o=n.length;n.push(e[0]);for(var i=1;i<r;i++){var s=n[n.length-1];e[i][0]===s[0]&&e[i][1]===s[1]||(n.push(e[i]),(o=n.length)>2&&Je(n[o-3],n[o-1],n[o-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),o=n.length,Ze(e[0],e[e.length-1])&&o<4)throw new Error("invalid polygon");return Je(n[o-3],n[o-1],n[o-2])&&n.splice(n.length-2,1),n}function Ze(t,e){return t[0]===e[0]&&t[1]===e[1]}function Je(t,e,n){var r=n[0],o=n[1],i=t[0],s=t[1],a=e[0],u=e[1],l=a-i,c=u-s;return 0==(r-i)*c-(o-s)*l&&(Math.abs(l)>=Math.abs(c)?l>0?i<=r&&r<=a:a<=r&&r<=i:c>0?s<=o&&o<=u:u<=o&&o<=s)}function Qe(t,e,n){var r=e.x,o=e.y,i=n.x-r,s=n.y-o;if(0!==i||0!==s){var a=((t.x-r)*i+(t.y-o)*s)/(i*i+s*s);a>1?(r=n.x,o=n.y):a>0&&(r+=i*a,o+=s*a)}return(i=t.x-r)*i+(s=t.y-o)*s}function tn(t,e,n,r,o){for(var i,s=r,a=e+1;a<n;a++){var u=Qe(t[a],t[e],t[n]);u>s&&(i=a,s=u)}s>r&&(i-e>1&&tn(t,e,i,r,o),o.push(t[i]),n-i>1&&tn(t,i,n,r,o))}function en(t,e){var n=t.length-1,r=[t[0]];return tn(t,0,n,e,r),r.push(t[n]),r}function nn(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return en(t=n?t:function(t,e){for(var n,r,o,i,s,a=t[0],u=[a],l=1,c=t.length;l<c;l++)o=a,(i=(r=n=t[l]).x-o.x)*i+(s=r.y-o.y)*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),r)}function rn(t,e,n){return nn(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function on(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var o=nn(r,e,n).map((function(t){return[t.x,t.y]}));!sn(o);)o=nn(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return o[o.length-1][0]===o[0][0]&&o[o.length-1][1]===o[0][1]||o.push(o[0]),o}))}function sn(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var an=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var o=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,i=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+o),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+i),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+o),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+i),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var o=this.pos(r);Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y)+(o.z-n.z)*(o.z-n.z))>t&&(e.push(r),n=o)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,o){var i=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:o.x*i[0]+r.x*i[1]+n.x*i[2]+e.x*i[3],y:o.y*i[0]+r.y*i[1]+n.y*i[2]+e.y*i[3],z:o.z*i[0]+r.z*i[1]+n.z*i[2]+e.z*i[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function un(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,o=[],i=it(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),s=new an({duration:n,points:i,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&o.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),h(o,e.properties)}function ln(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return p([[s,[o,r],[o,i],[n,i],s]],e.properties,{bbox:t,id:e.id})}function cn(t){return ln(J(t))}function pn(t){var e=t[0],n=t[1],r=t[2],o=t[3];if(be(t.slice(0,2),[r,n])>=be(t.slice(0,2),[e,o])){var i=(n+o)/2;return[e,i-(r-e)/2,r,i+(r-e)/2]}var s=(e+r)/2;return[s-(o-n)/2,n,s+(o-n)/2,o]}function fn(t,e,n,r){void 0===r&&(r={});var o=Q(t),i=P(o[0]),s=P(o[1]),a=P(n),u=x(e,r.units),c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a));return l([O(i+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c))),O(c)],r.properties)}function hn(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,o=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},i=[],s=0;s<r;s++)i.push(fn(t,e,-360*s/r,n).geometry.coordinates);return i.push(i[0]),p([i],o)}function dn(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=dn(e,t);return(n+180)%360}(t,e);var r=Q(t),o=Q(e),i=P(r[0]),s=P(o[0]),a=P(r[1]),u=P(o[1]),l=Math.sin(s-i)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-i);return O(Math.atan2(l,c))}function gn(t,e){void 0===e&&(e={});var n=J(t);return l([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function yn(t,e){void 0===e&&(e={});var n=0,r=0,o=0;return k(t,(function(t){n+=t[0],r+=t[1],o++}),!0),l([n/o,r/o],e.properties)}function mn(t){var e=[];return"FeatureCollection"===t.type?F(t,(function(t){k(t,(function(n){e.push(l(n,t.properties))}))})):k(t,(function(n){e.push(l(n,t.properties))})),g(e)}var vn=_n,bn=_n;function _n(t,e,n){n=n||2;var r,o,i,s,a,u,l,c=e&&e.length,p=c?e[0]*n:t.length,f=wn(t,0,p,n,!0),h=[];if(!f)return h;if(c&&(f=function(t,e,n,r){var o,i,s,a=[];for(o=0,i=e.length;o<i;o++)(s=wn(t,e[o]*r,o<i-1?e[o+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(Mn(s));for(a.sort(In),o=0;o<a.length;o++)Tn(a[o],n),n=xn(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=i=t[0],o=s=t[1];for(var d=n;d<p;d+=n)(a=t[d])<r&&(r=a),(u=t[d+1])<o&&(o=u),a>i&&(i=a),u>s&&(s=u);l=0!==(l=Math.max(i-r,s-o))?1/l:0}return Sn(f,h,n,r,o,l),h}function wn(t,e,n,r,o){var i,s;if(o===Un(t,e,n,r)>0)for(i=e;i<n;i+=r)s=Bn(i,t[i],t[i+1],s);else for(i=n-r;i>=e;i-=r)s=Bn(i,t[i],t[i+1],s);return s&&Ln(s,s.next)&&(zn(s),s=s.next),s}function xn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Ln(r,r.next)&&0!==kn(r.prev,r,r.next))r=r.next;else{if(zn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Sn(t,e,n,r,o,i,s){if(t){!s&&i&&function(t,e,n,r){var o=t;do{null===o.z&&(o.z=Rn(o.x,o.y,e,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,n,r,o,i,s,a,u,l=1;do{for(n=t,t=null,i=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,a--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;n=r}i.nextZ=null,l*=2}while(s>1)}(o)}(t,r,o,i);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,i?On(t,r,o,i):En(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),zn(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?Sn(t=Pn(t,e,n),e,n,r,o,i,2):2===s&&Cn(t,e,n,r,o,i):Sn(xn(t),e,n,r,o,i,1);break}}}function En(t){var e=t.prev,n=t,r=t.next;if(kn(e,n,r)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(An(e.x,e.y,n.x,n.y,r.x,r.y,o.x,o.y)&&kn(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function On(t,e,n,r){var o=t.prev,i=t,s=t.next;if(kn(o,i,s)>=0)return!1;for(var a=o.x<i.x?o.x<s.x?o.x:s.x:i.x<s.x?i.x:s.x,u=o.y<i.y?o.y<s.y?o.y:s.y:i.y<s.y?i.y:s.y,l=o.x>i.x?o.x>s.x?o.x:s.x:i.x>s.x?i.x:s.x,c=o.y>i.y?o.y>s.y?o.y:s.y:i.y>s.y?i.y:s.y,p=Rn(a,u,e,n,r),f=Rn(l,c,e,n,r),h=t.prevZ,d=t.nextZ;h&&h.z>=p&&d&&d.z<=f;){if(h!==t.prev&&h!==t.next&&An(o.x,o.y,i.x,i.y,s.x,s.y,h.x,h.y)&&kn(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&An(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&&kn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=p;){if(h!==t.prev&&h!==t.next&&An(o.x,o.y,i.x,i.y,s.x,s.y,h.x,h.y)&&kn(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&An(o.x,o.y,i.x,i.y,s.x,s.y,d.x,d.y)&&kn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Pn(t,e,n){var r=t;do{var o=r.prev,i=r.next.next;!Ln(o,i)&&Dn(o,r,r.next,i)&&jn(o,i)&&jn(i,o)&&(e.push(o.i/n),e.push(r.i/n),e.push(i.i/n),zn(r),zn(r.next),r=t=i),r=r.next}while(r!==t);return r}function Cn(t,e,n,r,o,i){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Nn(s,a)){var u=Fn(s,a);return s=xn(s,s.next),u=xn(u,u.next),Sn(s,e,n,r,o,i),void Sn(u,e,n,r,o,i)}a=a.next}s=s.next}while(s!==t)}function In(t,e){return t.x-e.x}function Tn(t,e){if(e=function(t,e){var n,r=e,o=t.x,i=t.y,s=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=o&&a>s){if(s=a,a===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(o===s)return n.prev;var u,l=n,c=n.x,p=n.y,f=1/0;for(r=n.next;r!==l;)o>=r.x&&r.x>=c&&o!==r.x&&An(i<p?o:s,i,c,p,i<p?s:o,i,r.x,r.y)&&((u=Math.abs(i-r.y)/(o-r.x))<f||u===f&&r.x>n.x)&&jn(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=Fn(e,t);xn(n,n.next)}}function Rn(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Mn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function An(t,e,n,r,o,i,s,a){return(o-s)*(e-a)-(t-s)*(i-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(i-a)-(o-s)*(r-a)>=0}function Nn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Dn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&jn(t,e)&&jn(e,t)&&function(t,e){var n=t,r=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function kn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ln(t,e){return t.x===e.x&&t.y===e.y}function Dn(t,e,n,r){return!!(Ln(t,e)&&Ln(n,r)||Ln(t,r)&&Ln(n,e))||kn(t,e,n)>0!=kn(t,e,r)>0&&kn(n,r,t)>0!=kn(n,r,e)>0}function jn(t,e){return kn(t.prev,t,t.next)<0?kn(t,e,t.next)>=0&&kn(t,t.prev,e)>=0:kn(t,e,t.prev)<0||kn(t,t.next,e)<0}function Fn(t,e){var n=new Vn(t.i,t.x,t.y),r=new Vn(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function Bn(t,e,n,r){var o=new Vn(t,e,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function zn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Vn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Un(t,e,n,r){for(var o=0,i=e,s=n-r;i<n;i+=r)o+=(t[s]-t[i])*(t[i+1]+t[s+1]),s=i;return o}function Hn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var s=0;s<e;s++)n.vertices.push(t[o][i][s]);o>0&&(r+=t[o-1].length,n.holes.push(r))}return n}(t),n=vn(e.vertices,e.holes,2),r=[],o=[];n.forEach((function(t,r){var i=n[r];o.push([e.vertices[2*i],e.vertices[2*i+1]])}));for(var i=0;i<o.length;i+=3){var s=o.slice(i,i+3);s.push(o[i]),r.push(p([s]))}return r}function Gn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,o=0;return F(e,(function(e,n){var i=be(t,e);i<r&&(o=n,r=i)})),(n=Ee(e.features[o])).properties.featureIndex=o,n.properties.distanceToPoint=r,n}function qn(t){if(!t)throw new Error("geojson is required");var e=[];return H(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=tt(r);break;case"LineString":n=[tt(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var o=h([t,r],e);return o.bbox=function(t,e){var n=t[0],r=t[1],o=e[0],i=e[1];return[n<o?n:o,r<i?r:i,n>o?n:o,r>i?r:i]}(t,r),n.push(o),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),g(e)}_n.deviation=function(t,e,n,r){var o=e&&e.length,i=o?e[0]*n:t.length,s=Math.abs(Un(t,0,i,n));if(o)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Un(t,l,c,n))}var p=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,h=r[a+1]*n,d=r[a+2]*n;p+=Math.abs((t[f]-t[d])*(t[h+1]-t[f+1])-(t[f]-t[h])*(t[d+1]-t[f+1]))}return 0===s&&0===p?0:Math.abs((p-s)/s)},_n.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var s=0;s<e;s++)n.vertices.push(t[o][i][s]);o>0&&(r+=t[o-1].length,n.holes.push(r))}return n},vn.default=bn;var Wn=Vt((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function o(t,e,r){void 0===r&&(r={});for(var o=0,i=t;o<i.length;o++){var s=i[o];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function i(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function p(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function h(t){return t%(2*Math.PI)*180/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return i(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.lineString=i,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.featureCollection=s,e.multiLineString=u,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=p,e.lengthToRadians=f,e.lengthToDegrees=function(t,e){return h(f(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=h,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return p(f(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var o=e.areaFactors[n];if(!o)throw new Error("invalid original units");var i=e.areaFactors[r];if(!i)throw new Error("invalid final units");return t/o*i},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!d(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(a(t)))throw new Error("id must be a number or a string")}}));function Yn(t,e,n){if(null!==t)for(var r,o,i,s,a,u,l,c,p=0,f=0,h=t.type,d="FeatureCollection"===h,g="Feature"===h,y=d?t.features.length:1,m=0;m<y;m++){a=(c=!!(l=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<a;v++){var b=0,_=0;if(null!==(s=c?l.geometries[v]:l)){u=s.coordinates;var w=s.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,f,m,b,_))return!1;f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,m,b,_))return!1;f++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-p;o++){if(!1===e(u[r][o],f,m,b,_))return!1;f++}"MultiLineString"===w&&b++,"Polygon"===w&&_++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(_=0,o=0;o<u[r].length;o++){for(i=0;i<u[r][o].length-p;i++){if(!1===e(u[r][o][i],f,m,b,_))return!1;f++}_++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Yn(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Xn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function $n(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Kn(t,e){var n,r,o,i,s,a,u,l,c,p,f=0,h="FeatureCollection"===t.type,d="Feature"===t.type,g=h?t.features.length:1;for(n=0;n<g;n++){for(a=h?t.features[n].geometry:d?t.geometry:t,l=h?t.features[n].properties:d?t.properties:{},c=h?t.features[n].bbox:d?t.bbox:void 0,p=h?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,o=0;o<s;o++)if(null!==(i=u?a.geometries[o]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,f,l,c,p))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===e(i.geometries[r],f,l,c,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,p))return!1;f++}}function Zn(t,e){Kn(t,(function(t,n,r,o,i){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Wn.feature(t,r,{bbox:o,id:i}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Wn.feature(l,r),n,u))return!1}}))}function Jn(t,e){Zn(t,(function(t,n,r){var o=0;if(t.geometry){var i=t.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var s,a=0,u=0,l=0;return!1!==Yn(t,(function(i,c,p,f,h){if(void 0===s||n>a||f>u||h>l)return s=i,a=n,u=f,l=h,void(o=0);var d=Wn.lineString([s,i],t.properties);if(!1===e(d,n,r,h,o))return!1;o++,s=i}))&&void 0}}}))}function Qn(t,e){if(!t)throw new Error("geojson is required");Zn(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,i=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<i.length;s++)if(!1===e(Wn.lineString(i[s],t.properties),n,r,s))return!1}}}))}var tr=Yn,er=$n,nr=Zn,rr=Kn,or=Qn,ir=Xn,sr=Jn,ar=Object.defineProperty({coordAll:function(t){var e=[];return Yn(t,(function(t){e.push(t)})),e},coordEach:tr,coordReduce:function(t,e,n,r){var o=n;return Yn(t,(function(t,r,i,s,a){o=0===r&&void 0===n?t:e(o,t,r,i,s,a)}),r),o},featureEach:er,featureReduce:function(t,e,n){var r=n;return $n(t,(function(t,o){r=0===o&&void 0===n?t:e(r,t,o)})),r},findPoint:function(t,e){if(e=e||{},!Wn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Wn.point(u,a,e);case"MultiPoint":return o<0&&(o=u.length+o),Wn.point(u[o],a,e);case"LineString":return s<0&&(s=u.length+s),Wn.point(u[s],a,e);case"Polygon":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Wn.point(u[i][s],a,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Wn.point(u[o][s],a,e);case"MultiPolygon":return o<0&&(o=u.length+o),i<0&&(i=u[o].length+i),s<0&&(s=u[o][i].length-s),Wn.point(u[o][i][s],a,e)}throw new Error("geojson is invalid")},findSegment:function(t,e){if(e=e||{},!Wn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Wn.lineString([u[s],u[s+1]],a,e);case"Polygon":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Wn.lineString([u[i][s],u[i][s+1]],a,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Wn.lineString([u[o][s],u[o][s+1]],a,e);case"MultiPolygon":return o<0&&(o=u.length+o),i<0&&(i=u[o].length+i),s<0&&(s=u[o][i].length-s-1),Wn.lineString([u[o][i][s],u[o][i][s+1]],a,e)}throw new Error("geojson is invalid")},flattenEach:nr,flattenReduce:function(t,e,n){var r=n;return Zn(t,(function(t,o,i){r=0===o&&0===i&&void 0===n?t:e(r,t,o,i)})),r},geomEach:rr,geomReduce:function(t,e,n){var r=n;return Kn(t,(function(t,o,i,s,a){r=0===o&&void 0===n?t:e(r,t,o,i,s,a)})),r},lineEach:or,lineReduce:function(t,e,n){var r=n;return Qn(t,(function(t,o,i,s){r=0===o&&void 0===n?t:e(r,t,o,i,s)})),r},propEach:ir,propReduce:function(t,e,n){var r=n;return Xn(t,(function(t,o){r=0===o&&void 0===n?t:e(r,t,o)})),r},segmentEach:sr,segmentReduce:function(t,e,n){var r=n,o=!1;return Jn(t,(function(t,i,s,a,u){r=!1===o&&void 0===n?t:e(r,t,i,s,a,u),o=!0})),r}},"__esModule",{value:!0});function ur(t){var e=[1/0,1/0,-1/0,-1/0];return ar.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}ur.default=ur;var lr=ur,cr=Object.defineProperty({default:lr},"__esModule",{value:!0}).default,pr=ar.featureEach,fr=(ar.coordEach,Wn.polygon,Wn.featureCollection);function hr(t){var e=Pt(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:cr(t),Pt.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:cr(t),e.push(t)})):pr(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:cr(t),e.push(t)})),Pt.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:cr(t),Pt.prototype.remove.call(this,t,e)},e.clear=function(){return Pt.prototype.clear.call(this)},e.search=function(t){var e=Pt.prototype.search.call(this,this.toBBox(t));return fr(e)},e.collides=function(t){return Pt.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Pt.prototype.all.call(this);return fr(t)},e.toJSON=function(){return Pt.prototype.toJSON.call(this)},e.fromJSON=function(t){return Pt.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=cr(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=cr(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var dr=hr,gr=hr;function yr(t,e){var n={},r=[];if("LineString"===t.type&&(t=s(t)),"LineString"===e.type&&(e=s(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=mr(t,e);return o&&r.push(o),g(r)}var i=dr();return i.load(qn(e)),F(qn(t),(function(t){F(i.search(t),(function(e){var o=mr(t,e);if(o){var i=tt(o).join(",");n[i]||(n[i]=!0,r.push(o))}}))})),g(r)}function mr(t,e){var n=tt(t),r=tt(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],i=n[0][1],s=n[1][0],a=n[1][1],u=r[0][0],c=r[0][1],p=r[1][0],f=r[1][1],h=(f-c)*(s-o)-(p-u)*(a-i);if(0===h)return null;var d=((p-u)*(i-c)-(f-c)*(o-u))/h,g=((s-o)*(i-c)-(a-i)*(o-u))/h;return d>=0&&d<=1&&g>=0&&g<=1?l([o+d*(s-o),i+d*(a-i)]):null}function vr(t,e,n){void 0===n&&(n={});var r=l([1/0,1/0],{dist:1/0}),o=0;return H(t,(function(t){for(var i=tt(t),s=0;s<i.length-1;s++){var a=l(i[s]);a.properties.dist=be(e,a,n);var u=l(i[s+1]);u.properties.dist=be(e,u,n);var c=be(a,u,n),p=Math.max(a.properties.dist,u.properties.dist),f=dn(a,u),d=fn(e,p,f+90,n),g=fn(e,p,f-90,n),y=yr(h([d.geometry.coordinates,g.geometry.coordinates]),h([a.geometry.coordinates,u.geometry.coordinates])),m=null;y.features.length>0&&((m=y.features[0]).properties.dist=be(e,m,n),m.properties.location=o+be(a,m,n)),a.properties.dist<r.properties.dist&&((r=a).properties.index=s,r.properties.location=o),u.properties.dist<r.properties.dist&&((r=u).properties.index=s+1,r.properties.location=o+c),m&&m.properties.dist<r.properties.dist&&((r=m).properties.index=s),o+=c}})),r}function br(t,n,r){void 0===r&&(r={});var o=Q(t),i=Q(n);return i[0]+=i[0]-o[0]>180?-360:o[0]-i[0]>180?360:0,C(function(t,n,r){var o=r=void 0===r?e:Number(r),i=t[1]*Math.PI/180,s=n[1]*Math.PI/180,a=s-i,u=Math.abs(n[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(l)>1e-11?a/l:Math.cos(i);return Math.sqrt(a*a+c*c*u*u)*o}(o,i),"meters",r.units)}function _r(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=l(t):"Point"===t.type?t=s(t):rt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=h(e):"LineString"===e.type?e=s(e):rt(e,"LineString","line");var r=1/0,o=t.geometry.coordinates;return q(e,(function(t){var e=t.geometry.coordinates[0],i=t.geometry.coordinates[1],s=function(t,e,n,r){var o=[n[0]-e[0],n[1]-e[1]],i=wr([t[0]-e[0],t[1]-e[1]],o);if(i<=0)return xr(t,e,{method:r.method,units:"degrees"});var s=wr(o,o);if(s<=i)return xr(t,n,{method:r.method,units:"degrees"});var a=i/s;return xr(t,[e[0]+a*o[0],e[1]+a*o[1]],{method:r.method,units:"degrees"})}(o,e,i,n);s<r&&(r=s)})),C(r,"degrees",n.units)}function wr(t,e){return t[0]*e[0]+t[1]*e[1]}function xr(t,e,n){return"planar"===n.method?br(t,e,n):be(t,e,n)}function Sr(t,e,n,r,o,i,s,a){var u,l,c,p,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-i)*(n-t)-(s-o)*(r-e))?null!==f.x&&null!==f.y&&f:(p=(n-t)*(l=e-i)-(r-e)*(c=t-o),l=((s-o)*l-(a-i)*c)/u,c=p/u,f.x=t+l*(n-t),f.y=e+l*(r-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function Er(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?g([s(t)]):g([t]):t}(t),n=gn(e),r=!1,o=0;!r&&o<e.features.length;){var i,a=e.features[o].geometry,u=!1;if("Point"===a.type)n.geometry.coordinates[0]===a.coordinates[0]&&n.geometry.coordinates[1]===a.coordinates[1]&&(r=!0);else if("MultiPoint"===a.type){var c=!1;for(i=0;!c&&i<a.coordinates.length;)n.geometry.coordinates[0]===a.coordinates[i][0]&&n.geometry.coordinates[1]===a.coordinates[i][1]&&(r=!0,c=!0),i++}else if("LineString"===a.type)for(i=0;!u&&i<a.coordinates.length-1;)Or(n.geometry.coordinates[0],n.geometry.coordinates[1],a.coordinates[i][0],a.coordinates[i][1],a.coordinates[i+1][0],a.coordinates[i+1][1])&&(u=!0,r=!0),i++;else if("MultiLineString"===a.type)for(var p=0;p<a.coordinates.length;){u=!1,i=0;for(var f=a.coordinates[p];!u&&i<f.length-1;)Or(n.geometry.coordinates[0],n.geometry.coordinates[1],f[i][0],f[i][1],f[i+1][0],f[i+1][1])&&(u=!0,r=!0),i++;p++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||ye(n,a)&&(r=!0);o++}if(r)return n;var h=g([]);for(o=0;o<e.features.length;o++)h.features=h.features.concat(mn(e.features[o]).features);return l(Gn(n,h).geometry.coordinates)}function Or(t,e,n,r,o,i){return Math.sqrt((o-n)*(o-n)+(i-r)*(i-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((o-t)*(o-t)+(i-e)*(i-e))}dr.default=gr;var Pr=6378137;function Cr(t){return U(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Ir(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Ir(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Ir(t){var e=0;if(t&&t.length>0){e+=Math.abs(Tr(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Tr(t[n]))}return e}function Tr(t){var e,n,r,o,i,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,o=u-1,i=0):s===u-1?(r=u-1,o=0,i=1):(r=s,o=s+1,i=s+2),e=t[r],n=t[o],a+=(Rr(t[i][0])-Rr(e[0]))*Math.sin(Rr(n[1]));a=a*Pr*Pr/2}return a}function Rr(t){return t*Math.PI/180}function Mr(t,e){return void 0===e&&(e={}),W(t,(function(t,n){var r=n.geometry.coordinates;return t+be(r[0],r[1],e)}),0)}function Ar(t,e,n,r){if(!R(r=r||{}))throw new Error("options is invalid");var o,i=[];if("Feature"===t.type)o=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");o=t.coordinates}for(var s,a,u,l=o.length,c=0,p=0;p<o.length&&!(e>=c&&p===o.length-1);p++){if(c>e&&0===i.length){if(!(s=e-c))return i.push(o[p]),h(i);a=dn(o[p],o[p-1])-180,u=fn(o[p],s,a,r),i.push(u.geometry.coordinates)}if(c>=n)return(s=n-c)?(a=dn(o[p],o[p-1])-180,u=fn(o[p],s,a,r),i.push(u.geometry.coordinates),h(i)):(i.push(o[p]),h(i));if(c>=e&&i.push(o[p]),p===o.length-1)return h(i);c+=be(o[p],o[p+1],r)}if(c<e&&o.length===l)throw new Error("Start position is beyond line");var f=o[o.length-1];return h([f,f])}function Nr(t,e,n){void 0===n&&(n={});for(var r=Q(t),o=tt(e),i=0;i<o.length-1;i++){var s=!1;if(n.ignoreEndVertices&&(0===i&&(s="start"),i===o.length-2&&(s="end"),0===i&&i+1===o.length-1&&(s="both")),kr(o[i],o[i+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function kr(t,e,n,r,o){var i=n[0],s=n[1],a=t[0],u=t[1],l=e[0],c=e[1],p=l-a,f=c-u,h=(n[0]-a)*f-(n[1]-u)*p;if(null!==o){if(Math.abs(h)>o)return!1}else if(0!==h)return!1;return r?"start"===r?Math.abs(p)>=Math.abs(f)?p>0?a<i&&i<=l:l<=i&&i<a:f>0?u<s&&s<=c:c<=s&&s<u:"end"===r?Math.abs(p)>=Math.abs(f)?p>0?a<=i&&i<l:l<i&&i<=a:f>0?u<=s&&s<c:c<s&&s<=u:"both"===r&&(Math.abs(p)>=Math.abs(f)?p>0?a<i&&i<l:l<i&&i<a:f>0?u<s&&s<c:c<s&&s<u):Math.abs(p)>=Math.abs(f)?p>0?a<=i&&i<=l:l<=i&&i<=a:f>0?u<=s&&s<=c:c<=s&&s<=u}function Lr(t,e){var n=it(t),r=it(e),o=n.type,i=r.type;switch(o){case"Point":switch(i){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(jr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Nr(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ye(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,o=0;o<e.coordinates.length;o++)jr(t.coordinates[n],e.coordinates[o])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Nr(t.coordinates[r],e))return!1;n||(n=Nr(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,o=0;o<t.coordinates.length;o++){if(!(r=ye(t.coordinates[1],e))){n=!1;break}r=ye(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Nr(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){if(!Dr(J(e),J(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!ye(t.coordinates[r],e))return!1;n||(n=ye(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=ye(Fr(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Polygon":case"MultiPolygon":return function(t,e){var n=J(t);if(!Dr(J(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!ye(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}}function Dr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function jr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Fr(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Br(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],o=t[0],i=t[1],s=t[2],a=t[3],u=e/be([o,i],[s,i],n)*(s-o),c=e/be([o,i],[o,a],n)*(a-i),p=s-o,f=a-i,h=Math.floor(p/u),d=(f-Math.floor(f/c)*c)/2,y=o+(p-h*u)/2;y<=s;){for(var m=i+d;m<=a;){var v=l([y,m],n.properties);n.mask?Lr(v,n.mask)&&r.push(v):r.push(v),m+=c}y+=u}return g(r)}function zr(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,o=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==o&&void 0!==o||(t=JSON.parse(JSON.stringify(t)));var i=Math.pow(10,n);return k(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,i,r)})),t}function Vr(t){if(!t)throw new Error("geojson is required");var e=[];return H(t,(function(t){e.push(t)})),g(e)}function Ur(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Ur(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Hr(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var o=t.geometry.coordinates[r];Xr(o[0],o[o.length-1])||o.push(o[0]),n.push.apply(n,o.slice(0,o.length-1))}if(!function(t){for(var e={},n=1,r=0,o=t.length;r<o;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var i=n.length,s=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,o=[],i={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(g(a,u));var l=Pt();l.load(s)}for(var c=0;c<r.length;c++)for(var p=0;p<r[c].length-1;p++)if(n)l.search(g(c,p)).forEach((function(t){var e=t.ring,n=t.edge;d(c,p,e,n)}));else for(var f=0;f<r.length;f++)for(var h=0;h<r[f].length-1;h++)d(c,p,f,h);return e||(o={type:"Feature",geometry:{type:"MultiPoint",coordinates:o}}),o;function d(t,n,s,a){var u,l,c=r[t][n],p=r[t][n+1],f=r[s][a],h=r[s][a+1],d=function(t,e,n,r){if(Ur(t,n)||Ur(t,r)||Ur(e,n)||Ur(r,n))return null;var o=t[0],i=t[1],s=e[0],a=e[1],u=n[0],l=n[1],c=r[0],p=r[1],f=(o-s)*(l-p)-(i-a)*(u-c);return 0===f?null:[((o*a-i*s)*(u-c)-(o-s)*(u*p-l*c))/f,((o*a-i*s)*(l-p)-(i-a)*(u*p-l*c))/f]}(c,p,f,h);if(null!==d&&(u=p[0]!==c[0]?(d[0]-c[0])/(p[0]-c[0]):(d[1]-c[1])/(p[1]-c[1]),l=h[0]!==f[0]?(d[0]-f[0])/(h[0]-f[0]):(d[1]-f[1])/(h[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var g=d,y=!i[g];y&&(i[g]=!0),e?o.push(e(d,t,n,c,p,u,s,a,f,h,l,y)):o.push(d)}}function g(t,e){var n,o,i,s,a=r[t][e],u=r[t][e+1];return a[0]<u[0]?(n=a[0],o=u[0]):(n=u[0],o=a[0]),a[1]<u[1]?(i=a[1],s=u[1]):(i=u[1],s=a[1]),{minX:n,minY:i,maxX:o,maxY:s,ring:t,edge:e}}}(t,(function(t,e,n,r,o,i,s,a,u,l,c,p){return[t,e,n,r,o,i,s,a,u,l,c,p]})),a=s.length;if(0==a){var u=[];for(r=0;r<e;r++)u.push(p([t.geometry.coordinates[r]],{parent:-1,winding:Yr(t.geometry.coordinates[r])}));var l=g(u);return F(),B(),l}var c=[],f=[];for(r=0;r<e;r++){c.push([]);for(var h=0;h<t.geometry.coordinates[r].length-1;h++)c[r].push([new Gr(t.geometry.coordinates[r][$r(h+1,t.geometry.coordinates[r].length-1)],1,[r,h],[r,$r(h+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new qr(t.geometry.coordinates[r][h],[r,$r(h-1,t.geometry.coordinates[r].length-1)],[r,h],void 0,void 0,!1,!0))}for(r=0;r<a;r++)c[s[r][1]][s[r][2]].push(new Gr(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&f.push(new qr(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var d=f.length;for(r=0;r<c.length;r++)for(h=0;h<c[r].length;h++)c[r][h].sort((function(t,e){return t.param<e.param?-1:1}));var y=[];for(r=0;r<d;r++)y.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var m=Pt();for(m.load(y),r=0;r<c.length;r++)for(h=0;h<c[r].length;h++)for(var v=0;v<c[r][h].length;v++){_=v==c[r][h].length-1?c[r][$r(h+1,t.geometry.coordinates[r].length-1)][0].coord:c[r][h][v+1].coord;var b=m.search({minX:_[0],minY:_[1],maxX:_[0],maxY:_[1]})[0];c[r][h][v].nxtIsectAlongEdgeIn=b.index}for(r=0;r<c.length;r++)for(h=0;h<c[r].length;h++)for(v=0;v<c[r][h].length;v++){var _=c[r][h][v].coord,w=(b=m.search({minX:_[0],minY:_[1],maxX:_[0],maxY:_[1]})[0]).index;w<i?f[w].nxtIsectAlongRingAndEdge2=c[r][h][v].nxtIsectAlongEdgeIn:Xr(f[w].ringAndEdge1,c[r][h][v].ringAndEdgeIn)?f[w].nxtIsectAlongRingAndEdge1=c[r][h][v].nxtIsectAlongEdgeIn:f[w].nxtIsectAlongRingAndEdge2=c[r][h][v].nxtIsectAlongEdgeIn}var x=[];for(r=0,h=0;h<e;h++){var S=r;for(v=0;v<t.geometry.coordinates[h].length-1;v++)f[r].coord[0]<f[S].coord[0]&&(S=r),r++;var E=f[S].nxtIsectAlongRingAndEdge2;for(v=0;v<f.length;v++)if(f[v].nxtIsectAlongRingAndEdge1==S||f[v].nxtIsectAlongRingAndEdge2==S){var O=v;break}var P=Wr([f[O].coord,f[S].coord,f[E].coord],!0)?1:-1;x.push({isect:S,parent:-1,winding:P})}for(x.sort((function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1})),u=[];x.length>0;){var C=x.pop(),I=C.isect,T=C.parent,R=C.winding,M=u.length,A=[f[I].coord],N=I;if(f[I].ringAndEdge1Walkable)var k=f[I].ringAndEdge1,L=f[I].nxtIsectAlongRingAndEdge1;else k=f[I].ringAndEdge2,L=f[I].nxtIsectAlongRingAndEdge2;for(;!Xr(f[I].coord,f[L].coord);){A.push(f[L].coord);var D=void 0;for(r=0;r<x.length;r++)if(x[r].isect==L){D=r;break}if(null!=D&&x.splice(D,1),Xr(k,f[L].ringAndEdge1)){if(k=f[L].ringAndEdge2,f[L].ringAndEdge2Walkable=!1,f[L].ringAndEdge1Walkable){var j={isect:L};Wr([f[N].coord,f[L].coord,f[f[L].nxtIsectAlongRingAndEdge2].coord],1==R)?(j.parent=T,j.winding=-R):(j.parent=M,j.winding=R),x.push(j)}N=L,L=f[L].nxtIsectAlongRingAndEdge2}else k=f[L].ringAndEdge1,f[L].ringAndEdge1Walkable=!1,f[L].ringAndEdge2Walkable&&(j={isect:L},Wr([f[N].coord,f[L].coord,f[f[L].nxtIsectAlongRingAndEdge1].coord],1==R)?(j.parent=T,j.winding=-R):(j.parent=M,j.winding=R),x.push(j)),N=L,L=f[L].nxtIsectAlongRingAndEdge1}A.push(f[L].coord),u.push(p([A],{index:M,parent:T,winding:R,netWinding:void 0}))}function F(){for(var t=[],e=0;e<l.features.length;e++)-1==l.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<l.features.length;r++)t[e]!=r&&ye(l.features[t[e]].geometry.coordinates[0][0],l.features[r],{ignoreBoundary:!0})&&Cr(l.features[r])<1/0&&(n=r);l.features[t[e]].properties.parent=n}}function B(){for(var t=0;t<l.features.length;t++)if(-1==l.features[t].properties.parent){var e=l.features[t].properties.winding;l.features[t].properties.netWinding=e,z(t,e)}}function z(t,e){for(var n=0;n<l.features.length;n++)if(l.features[n].properties.parent==t){var r=e+l.features[n].properties.winding;l.features[n].properties.netWinding=r,z(n,r)}}return l=g(u),F(),B(),l}var Gr=function(t,e,n,r,o){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=o},qr=function(t,e,n,r,o,i,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=o,this.ringAndEdge1Walkable=i,this.ringAndEdge2Walkable=s};function Wr(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Yr(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Wr([t[$r(e-1,t.length-1)],t[e],t[$r(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function Xr(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Xr(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function $r(t,e){return(t%e+e)%e}var Kr=Math.PI/180,Zr=180/Math.PI,Jr=function(t,e){this.lon=t,this.lat=e,this.x=Kr*t,this.y=Kr*e};Jr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Jr.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Jr(e,t)};var Qr=function(){this.coords=[],this.length=0};Qr.prototype.move_to=function(t){this.length++,this.coords.push(t)};var to=function(t){this.properties=t||{},this.geometries=[]};to.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},to.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var eo=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Jr(t.x,t.y),this.end=new Jr(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,o=this.start.y-this.end.y,i=Math.pow(Math.sin(o/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(i)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function no(t,e){var n=[],r=dr();return H(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var o=r.search(e);if(o.features.length){var i=oo(e,o);n=n.filter((function(t){return t.id!==i.id})),r.remove(i),F(ro(i,e),(function(t){n.push(t),r.insert(t)}))}}else(n=ro(t,e).features).forEach((function(t){t.bbox||(t.bbox=pn(J(t)))})),r.load(g(n))})),g(n)}function ro(t,e){var n=[],r=tt(t)[0],o=tt(t)[t.geometry.coordinates.length-1];if(io(r,Q(e))||io(o,Q(e)))return g([t]);var i=dr(),s=qn(t);i.load(s);var a=i.search(e);if(!a.features.length)return g([t]);var u=oo(e,a),l=B(s,(function(t,r,o){var i=tt(r)[1],s=Q(e);return o===u.id?(t.push(s),n.push(h(t)),io(s,i)?[s]:[s,i]):(t.push(i),t)}),[r]);return l.length>1&&n.push(h(l)),g(n)}function oo(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return F(e,(function(e){var o=vr(e,t).properties.dist;o<r&&(n=e,r=o)})),n}function io(t,e){return t[0]===e[0]&&t[1]===e[1]}function so(t,e,n,r,o){void 0===o&&(o={});var i=o.steps||64,s=ao(n),a=ao(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return h(hn(t,e,o).geometry.coordinates[0],u);for(var l=s,c=s<a?a:a+360,p=l,f=[],d=0;p<c;)f.push(fn(t,e,p,o).geometry.coordinates),p=l+360*++d/i;return p>c&&f.push(fn(t,e,c,o).geometry.coordinates),h(f,u)}function ao(t){var e=t%360;return e<0&&(e+=360),e}function uo(t,e){void 0===e&&(e={});var n=it(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return lo(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=it(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},o=[];return n.forEach((function(t){o.push(co(t,r))})),g(o)}(n,e);default:throw new Error("invalid poly")}}function lo(t,e){return void 0===e&&(e={}),co(it(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function co(t,e){return t.length>1?y(t,e):h(t[0],e)}function po(t,e){var n,r,o;void 0===e&&(e={});var i=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(r=e.orderCoords)||void 0===r||r;switch(null!==(o=e.mutate)&&void 0!==o&&o||(t=Ee(t)),t.type){case"FeatureCollection":var u=[];return t.features.forEach((function(t){u.push(tt(fo(t,{},s,a)))})),v(u,i);default:return fo(t,i,s,a)}}function fo(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var o=it(t),i=o.coordinates,s=o.type;if(!i.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(i=ho(i)),p([i],e);case"MultiLineString":var a=[],u=0;return i.forEach((function(t){if(n&&(t=ho(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.abs(e-r)*Math.abs(n-o)}(J(h(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)})),p(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function ho(t){var e=t[0],n=e[0],r=e[1],o=t[t.length-1],i=o[0],s=o[1];return n===i&&r===s||t.push(e),t}function go(t,e){var n,r,o,i,s,a,u;for(r=1;r<=8;r*=2){for(n=[],i=!(mo(o=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(mo(a=t[s],e)&r))!==i&&n.push(yo(o,a,r,e)),u&&n.push(a),o=a,i=u;if(!(t=n).length)break}return n}function yo(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function mo(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function vo(t,e){for(var n=[],r=0,o=t;r<o.length;r++){var i=go(o[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}eo.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),o=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),i=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Zr*Math.atan2(i,Math.sqrt(Math.pow(r,2)+Math.pow(o,2)));return[Zr*Math.atan2(o,r),s]},eo.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),o=0;o<t;++o){var i=r*o,s=this.interpolate(i);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,p=-180+l,f=360-l,h=1;h<n.length;++h){var d=n[h-1][0],g=n[h][0],y=Math.abs(g-d);y>f&&(g>c&&d<p||d>c&&g<p)?a=!0:y>u&&(u=y)}var m=[];if(a&&u<l){var v=[];m.push(v);for(var b=0;b<n.length;++b){var _=parseFloat(n[b][0]);if(b>0&&Math.abs(_-n[b-1][0])>f){var w=parseFloat(n[b-1][0]),x=parseFloat(n[b-1][1]),S=parseFloat(n[b][0]),E=parseFloat(n[b][1]);if(w>-180&&w<p&&180===S&&b+1<n.length&&n[b-1][0]>-180&&n[b-1][0]<p){v.push([-180,n[b][1]]),b++,v.push([n[b][0],n[b][1]]);continue}if(w>c&&w<180&&-180===S&&b+1<n.length&&n[b-1][0]>c&&n[b-1][0]<180){v.push([180,n[b][1]]),b++,v.push([n[b][0],n[b][1]]);continue}if(w<p&&S>c){var O=w;w=S,S=O;var P=x;x=E,E=P}if(w>c&&S<p&&(S+=360),w<=180&&S>=180&&w<S){var C=(180-w)/(S-w),I=C*E+(1-C)*x;v.push([n[b-1][0]>c?180:-180,I]),(v=[]).push([n[b-1][0]>c?-180:180,I]),m.push(v)}else v=[],m.push(v);v.push([_,n[b][1]])}else v.push([n[b][0],n[b][1]])}}else{var T=[];m.push(T);for(var R=0;R<n.length;++R)T.push([n[R][0],n[R][1]])}for(var M=new to(this.properties),A=0;A<m.length;++A){var N=new Qr;M.geometries.push(N);for(var k=m[A],L=0;L<k.length;++L)N.move_to(k[L])}return M};var bo=Vt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),_o=Vt((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function o(t){return t&&"object"==a(t)&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:o).supported=r,e.unsupported=o})),wo=Vt((function(t){var e=Array.prototype.slice,n=t.exports=function(t,i,s){return s||(s={}),t===i||(t instanceof Date&&i instanceof Date?t.getTime()===i.getTime():!t||!i||"object"!=a(t)&&"object"!=a(i)?s.strict?t===i:t==i:function(t,i,s){var u,l;if(r(t)||r(i))return!1;if(t.prototype!==i.prototype)return!1;if(_o(t))return!!_o(i)&&(t=e.call(t),i=e.call(i),n(t,i,s));if(o(t)){if(!o(i))return!1;if(t.length!==i.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==i[u])return!1;return!0}try{var c=bo(t),p=bo(i)}catch(t){return!1}if(c.length!=p.length)return!1;for(c.sort(),p.sort(),u=c.length-1;u>=0;u--)if(c[u]!=p[u])return!1;for(u=c.length-1;u>=0;u--)if(l=c[u],!n(t[l],i[l],s))return!1;return a(t)==a(i)}(t,i,s))};function r(t){return null==t}function o(t){return!(!t||"object"!=a(t)||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}}));function xo(t,e,n){if(void 0===n&&(n={}),!R(n=n||{}))throw new Error("options is invalid");var r,o=n.tolerance||0,i=[],s=dr(),a=qn(t);return s.load(a),q(e,(function(t){var e=!1;t&&(F(s.search(t),(function(n){if(!1===e){var i=tt(t).sort(),s=tt(n).sort();wo(i,s)||(0===o?Nr(i[0],n)&&Nr(i[1],n):vr(n,i[0]).properties.dist<=o&&vr(n,i[1]).properties.dist<=o)?(e=!0,r=r?So(r,t):t):(0===o?Nr(s[0],t)&&Nr(s[1],t):vr(t,s[0]).properties.dist<=o&&vr(t,s[1]).properties.dist<=o)&&(r=r?So(r,n):n)}})),!1===e&&r&&(i.push(r),r=void 0))})),r&&i.push(r),g(i)}function So(t,e){var n=tt(e),r=tt(t),o=r[0],i=r[r.length-1],s=t.geometry.coordinates;return wo(n[0],o)?s.unshift(n[1]):wo(n[0],i)?s.push(n[1]):wo(n[1],o)?s.unshift(n[0]):wo(n[1],i)&&s.push(n[0]),t}function Eo(t){var e=t%360;return e<0&&(e+=360),e}function Oo(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?Po(Q(e),Q(t)):Po(Q(t),Q(e)))>180?-(360-r):r}function Po(t,e){var n=P(t[1]),r=P(e[1]),o=P(e[0]-t[0]);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);var i=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(O(Math.atan2(o,i))+360)%360}function Co(t,n,r,o){void 0===o&&(o={});var i=n<0,s=C(Math.abs(n),o.units,"meters");i&&(s=-Math.abs(s));var a=Q(t),u=function(t,n,r,o){var i=n/(o=void 0===o?e:Number(o)),s=t[0]*Math.PI/180,a=P(t[1]),u=P(r),l=i*Math.cos(u),c=a+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var p=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(p)>1e-11?l/p:Math.cos(a);return[(180*(s+i*Math.sin(u)/f)/Math.PI+540)%360-180,180*c/Math.PI]}(a,s,r);return u[0]+=u[0]-a[0]>180?-360:a[0]-u[0]>180?360:0,l(u,o.properties)}function Io(t,e,n,r,o,i){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Ro(a,u,e),n<=0&&r>0?Ro(e,a,o)<0||(o=a):n>0&&r<=0&&(To(e,a,i)||(i=a)),n=r}return[o,i]}function To(t,e,n){return Ro(t,e,n)>0}function Ro(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Mo(t){for(var e,n,r=tt(t),o=0,i=1;i<r.length;)e=n||r[0],o+=((n=r[i])[0]-e[0])*(n[1]+e[1]),i++;return o>0}function Ao(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return V(t,(function(t){Ao(t,e)})),t;case"LineString":return No(tt(t),e),t;case"Polygon":return ko(tt(t),e),t;case"MultiLineString":return tt(t).forEach((function(t){No(t,e)})),t;case"MultiPolygon":return tt(t).forEach((function(t){ko(t,e)})),t;case"Point":case"MultiPoint":return t}}function No(t,e){Mo(t)===e&&t.reverse()}function ko(t,e){Mo(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Mo(t[n])===e&&t[n].reverse()}var Lo={successCallback:null,verbose:!1,polygons:!1},Do={};function jo(t,e,n,r){r=r||{};for(var o=Object.keys(Lo),i=0;i<o.length;i++){var s=o[i],u=r[s];u=null!=u?u:Lo[s],Do[s]=u}Do.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,c=function(t,e,n){for(var r=t.length-1,o=t[0].length-1,i={rows:r,cols:o,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){i.cells[a]=[];for(var u=0;u<o;++u){var l=0,c=t[a+1][u],p=t[a+1][u+1],f=t[a][u+1],h=t[a][u];if(!(isNaN(c)||isNaN(p)||isNaN(f)||isNaN(h))){l|=c<e?0:c>s?128:64,l|=p<e?0:p>s?32:16,l|=f<e?0:f>s?8:4;var d=+(l|=h<e?0:h>s?2:1),g=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var y=(c+p+f+h)/4;g=y>s?2:y<e?0:1,34===l?1===g?l=35:0===g&&(l=136):136===l?1===g?(l=35,g=4):0===g&&(l=34):17===l?1===g?(l=155,g=4):0===g&&(l=153):68===l?1===g?(l=103,g=4):0===g&&(l=102):153===l?1===g&&(l=155):102===l?1===g&&(l=103):152===l?g<2&&(l=156,g=1):137===l?g<2&&(l=139,g=1):98===l?g<2&&(l=99,g=1):38===l?g<2&&(l=39,g=1):18===l?g>0?(l=156,g=4):l=152:33===l?g>0?(l=139,g=4):l=137:72===l?g>0?(l=99,g=4):l=98:132===l&&(g>0?(l=39,g=4):l=38)}if(0!=l&&170!=l){var m,v,b,_,w,x,S,E;m=v=b=_=w=x=S=E=.5;var O=[];1===l?(b=1-Ci(e,f,h),E=1-Ci(e,c,h),O.push(wi[l])):169===l?(b=Ci(s,h,f),E=Ci(s,h,c),O.push(wi[l])):4===l?(x=1-Ci(e,p,f),_=Ci(e,h,f),O.push(bi[l])):166===l?(x=Ci(s,f,p),_=1-Ci(s,f,h),O.push(bi[l])):16===l?(w=Ci(e,f,p),v=Ci(e,c,p),O.push(vi[l])):154===l?(w=1-Ci(s,p,f),v=1-Ci(s,p,c),O.push(vi[l])):64===l?(S=Ci(e,h,c),m=1-Ci(e,p,c),O.push(Si[l])):106===l?(S=1-Ci(s,c,h),m=Ci(s,c,p),O.push(Si[l])):168===l?(_=Ci(s,h,f),b=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),O.push(_i[l]),O.push(wi[l])):2===l?(_=1-Ci(e,f,h),b=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),O.push(_i[l]),O.push(wi[l])):162===l?(w=Ci(s,f,p),x=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),O.push(_i[l]),O.push(wi[l])):8===l?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),O.push(vi[l]),O.push(bi[l])):138===l?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),m=1-Ci(s,p,c),v=1-Ci(e,p,c),O.push(vi[l]),O.push(bi[l])):32===l?(w=Ci(s,f,p),x=Ci(e,f,p),m=Ci(e,c,p),v=Ci(s,c,p),O.push(vi[l]),O.push(bi[l])):42===l?(E=1-Ci(s,c,h),S=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p),O.push(xi[l]),O.push(Si[l])):128===l&&(E=Ci(e,h,c),S=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c),O.push(xi[l]),O.push(Si[l])),5===l?(x=1-Ci(e,p,f),E=1-Ci(e,c,h),O.push(bi[l])):165===l?(x=Ci(s,f,p),E=Ci(s,h,c),O.push(bi[l])):20===l?(_=Ci(e,h,f),v=Ci(e,c,p),O.push(_i[l])):150===l?(_=1-Ci(s,f,h),v=1-Ci(s,p,c),O.push(_i[l])):80===l?(w=Ci(e,f,p),S=Ci(e,h,c),O.push(vi[l])):90===l?(w=1-Ci(s,p,f),S=1-Ci(s,c,h),O.push(vi[l])):65===l?(b=1-Ci(e,f,h),m=1-Ci(e,p,c),O.push(wi[l])):105===l?(b=Ci(s,h,f),m=Ci(s,c,p),O.push(wi[l])):160===l?(w=Ci(s,f,p),x=Ci(e,f,p),E=Ci(e,h,c),S=Ci(s,h,c),O.push(vi[l]),O.push(bi[l])):10===l?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),E=1-Ci(s,c,h),S=1-Ci(e,c,h),O.push(vi[l]),O.push(bi[l])):130===l?(_=1-Ci(e,f,h),b=1-Ci(s,f,h),m=1-Ci(s,p,c),v=1-Ci(e,p,c),O.push(_i[l]),O.push(wi[l])):40===l?(_=Ci(s,h,f),b=Ci(e,h,f),m=Ci(e,c,p),v=Ci(s,c,p),O.push(_i[l]),O.push(wi[l])):101===l?(x=Ci(s,f,p),m=Ci(s,c,p),O.push(bi[l])):69===l?(x=1-Ci(e,p,f),m=1-Ci(e,p,c),O.push(bi[l])):149===l?(E=Ci(s,h,c),v=1-Ci(s,p,c),O.push(xi[l])):21===l?(E=1-Ci(e,c,h),v=Ci(e,c,p),O.push(xi[l])):86===l?(_=1-Ci(s,f,h),S=1-Ci(s,c,h),O.push(_i[l])):84===l?(_=Ci(e,h,f),S=Ci(e,h,c),O.push(_i[l])):89===l?(w=1-Ci(s,p,f),b=Ci(s,h,f),O.push(wi[l])):81===l?(w=Ci(e,f,p),b=1-Ci(e,f,h),O.push(wi[l])):96===l?(w=Ci(s,f,p),x=Ci(e,f,p),S=Ci(e,h,c),m=Ci(s,c,p),O.push(vi[l]),O.push(bi[l])):74===l?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),S=1-Ci(s,c,h),m=1-Ci(e,p,c),O.push(vi[l]),O.push(bi[l])):24===l?(w=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),v=Ci(e,c,p),O.push(vi[l]),O.push(wi[l])):146===l?(w=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),v=1-Ci(s,p,c),O.push(vi[l]),O.push(wi[l])):6===l?(x=1-Ci(e,p,f),_=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),O.push(bi[l]),O.push(_i[l])):164===l?(x=Ci(s,f,p),_=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),O.push(bi[l]),O.push(_i[l])):129===l?(b=1-Ci(e,f,h),E=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c),O.push(wi[l]),O.push(xi[l])):41===l?(b=Ci(s,h,f),E=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p),O.push(wi[l]),O.push(xi[l])):66===l?(_=1-Ci(e,f,h),b=1-Ci(s,f,h),S=1-Ci(s,c,h),m=1-Ci(e,p,c),O.push(_i[l]),O.push(wi[l])):104===l?(_=Ci(s,h,f),b=Ci(e,h,f),S=Ci(e,h,c),m=Ci(s,c,p),O.push(wi[l]),O.push(Ei[l])):144===l?(w=Ci(e,f,p),E=Ci(e,h,c),S=Ci(s,h,c),v=1-Ci(s,p,c),O.push(vi[l]),O.push(Si[l])):26===l?(w=1-Ci(s,p,f),E=1-Ci(s,c,h),S=1-Ci(e,c,h),v=Ci(e,c,p),O.push(vi[l]),O.push(Si[l])):36===l?(x=Ci(s,f,p),_=Ci(e,h,f),m=Ci(e,c,p),v=Ci(s,c,p),O.push(bi[l]),O.push(_i[l])):134===l?(x=1-Ci(e,p,f),_=1-Ci(s,f,h),m=1-Ci(s,p,c),v=1-Ci(e,p,c),O.push(bi[l]),O.push(_i[l])):9===l?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),b=Ci(s,h,f),E=1-Ci(e,c,h),O.push(vi[l]),O.push(bi[l])):161===l?(w=Ci(s,f,p),x=Ci(e,f,p),b=1-Ci(e,f,h),E=Ci(s,h,c),O.push(vi[l]),O.push(bi[l])):37===l?(x=Ci(s,f,p),E=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p),O.push(bi[l]),O.push(xi[l])):133===l?(x=1-Ci(e,p,f),E=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c),O.push(bi[l]),O.push(xi[l])):148===l?(_=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),v=1-Ci(s,p,c),O.push(_i[l]),O.push(Si[l])):22===l?(_=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),v=Ci(e,c,p),O.push(_i[l]),O.push(Si[l])):82===l?(w=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),S=1-Ci(s,c,h),O.push(vi[l]),O.push(wi[l])):88===l?(w=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),S=Ci(e,h,c),O.push(vi[l]),O.push(wi[l])):73===l?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),b=Ci(s,h,f),m=1-Ci(e,p,c),O.push(vi[l]),O.push(bi[l])):97===l?(w=Ci(s,f,p),x=Ci(e,f,p),b=1-Ci(e,f,h),m=Ci(s,c,p),O.push(vi[l]),O.push(bi[l])):145===l?(w=Ci(e,f,p),b=1-Ci(e,f,h),E=Ci(s,h,c),v=1-Ci(s,p,c),O.push(vi[l]),O.push(xi[l])):25===l?(w=1-Ci(s,p,f),b=Ci(s,h,f),E=1-Ci(e,c,h),v=Ci(e,c,p),O.push(vi[l]),O.push(xi[l])):70===l?(x=1-Ci(e,p,f),_=1-Ci(s,f,h),S=1-Ci(s,c,h),m=1-Ci(e,p,c),O.push(bi[l]),O.push(_i[l])):100===l?(x=Ci(s,f,p),_=Ci(e,h,f),S=Ci(e,h,c),m=Ci(s,c,p),O.push(bi[l]),O.push(_i[l])):34===l?(0===g?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c)):(w=Ci(s,f,p),x=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p)),O.push(vi[l]),O.push(bi[l]),O.push(xi[l]),O.push(Si[l])):35===l?(4===g?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c)):(w=Ci(s,f,p),x=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p)),O.push(vi[l]),O.push(bi[l]),O.push(wi[l]),O.push(Si[l])):136===l?(0===g?(w=Ci(s,f,p),x=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p)):(w=1-Ci(e,p,f),x=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c)),O.push(vi[l]),O.push(bi[l]),O.push(xi[l]),O.push(Si[l])):153===l?(0===g?(w=Ci(e,f,p),b=1-Ci(e,f,h),E=1-Ci(e,c,h),v=Ci(e,c,p)):(w=1-Ci(s,p,f),b=Ci(s,h,f),E=Ci(s,h,c),v=1-Ci(s,p,c)),O.push(vi[l]),O.push(wi[l])):102===l?(0===g?(x=1-Ci(e,p,f),_=Ci(e,h,f),S=Ci(e,h,c),m=1-Ci(e,p,c)):(x=Ci(s,f,p),_=1-Ci(s,f,h),S=1-Ci(s,c,h),m=Ci(s,c,p)),O.push(bi[l]),O.push(Si[l])):155===l?(4===g?(w=Ci(e,f,p),b=1-Ci(e,f,h),E=1-Ci(e,c,h),v=Ci(e,c,p)):(w=1-Ci(s,p,f),b=Ci(s,h,f),E=Ci(s,h,c),v=1-Ci(s,p,c)),O.push(vi[l]),O.push(xi[l])):103===l?(4===g?(x=1-Ci(e,p,f),_=Ci(e,h,f),S=Ci(e,h,c),m=1-Ci(e,p,c)):(x=Ci(s,f,p),_=1-Ci(s,f,h),S=1-Ci(s,c,h),m=Ci(s,c,p)),O.push(bi[l]),O.push(_i[l])):152===l?(0===g?(w=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),v=Ci(e,c,p)):(w=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),v=1-Ci(s,p,c)),O.push(vi[l]),O.push(_i[l]),O.push(wi[l])):156===l?(4===g?(w=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),v=Ci(e,c,p)):(w=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),v=1-Ci(s,p,c)),O.push(vi[l]),O.push(wi[l]),O.push(Si[l])):137===l?(0===g?(w=Ci(s,f,p),x=Ci(e,f,p),b=1-Ci(e,f,h),E=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p)):(w=1-Ci(e,p,f),x=1-Ci(s,p,f),b=Ci(s,h,f),E=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c)),O.push(vi[l]),O.push(bi[l]),O.push(wi[l])):139===l?(4===g?(w=Ci(s,f,p),x=Ci(e,f,p),b=1-Ci(e,f,h),E=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p)):(w=1-Ci(e,p,f),x=1-Ci(s,p,f),b=Ci(s,h,f),E=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c)),O.push(vi[l]),O.push(bi[l]),O.push(xi[l])):98===l?(0===g?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),S=Ci(e,h,c),m=1-Ci(e,p,c)):(w=Ci(s,f,p),x=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),S=1-Ci(s,c,h),m=Ci(s,c,p)),O.push(vi[l]),O.push(bi[l]),O.push(Si[l])):99===l?(4===g?(w=1-Ci(e,p,f),x=1-Ci(s,p,f),_=Ci(s,h,f),b=Ci(e,h,f),S=Ci(e,h,c),m=1-Ci(e,p,c)):(w=Ci(s,f,p),x=Ci(e,f,p),_=1-Ci(e,f,h),b=1-Ci(s,f,h),S=1-Ci(s,c,h),m=Ci(s,c,p)),O.push(vi[l]),O.push(bi[l]),O.push(wi[l])):38===l?(0===g?(x=1-Ci(e,p,f),_=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c)):(x=Ci(s,f,p),_=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p)),O.push(bi[l]),O.push(xi[l]),O.push(Si[l])):39===l?(4===g?(x=1-Ci(e,p,f),_=Ci(e,h,f),E=Ci(e,h,c),S=Ci(s,h,c),m=1-Ci(s,p,c),v=1-Ci(e,p,c)):(x=Ci(s,f,p),_=1-Ci(s,f,h),E=1-Ci(s,c,h),S=1-Ci(e,c,h),m=Ci(e,c,p),v=Ci(s,c,p)),O.push(bi[l]),O.push(_i[l]),O.push(Si[l])):85===l&&(w=1,x=0,_=1,b=0,E=0,S=1,m=0,v=1),(m<0||m>1||v<0||v>1||w<0||w>1||_<0||_>1||E<0||E>1||S<0||S>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+p+","+f+","+h+" "+g+" "+m+" "+v+" "+w+" "+x+" "+_+" "+b+" "+E+" "+S),i.cells[a][u]={cval:l,cval_real:d,flipped:g,topleft:m,topright:v,righttop:w,rightbottom:x,bottomright:_,bottomleft:b,leftbottom:E,lefttop:S,edges:O}}}}}return i}(t,e,n);return Do.polygons?(Do.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,o){if(void 0!==t){var i=Pi[t.cval](t);"object"==a(i)&&Ii(i)?"object"==a(i[0])&&Ii(i[0])?"object"==a(i[0][0])&&Ii(i[0][0])?i.forEach((function(t){t.forEach((function(t){t[0]+=o,t[1]+=r})),e[n++]=t})):(i.forEach((function(t){t[0]+=o,t[1]+=r})),e[n++]=i):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(c)):(Do.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,r=t.cols,o=[],i=0;i<n;i++)for(var s=0;s<r;s++)if(void 0!==t.cells[i][s]&&t.cells[i][s].edges.length>0){var a=Ri(t.cells[i][s]),u=null,l=s,c=i;null!==a&&o.push([a.p[0]+l,a.p[1]+c]);do{if(null===(u=Mi(t.cells[c][l],a.x,a.y,a.o)))break;if(o.push([u.p[0]+l,u.p[1]+c]),l+=u.x,a=u,(c+=u.y)<0||c>=n||l<0||l>=r||void 0===t.cells[c][l]){var p=Ti(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===p)break;p.path.forEach((function(t){o.push(t)})),l=p.i,c=p.j,a=p}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(o),o=[],t.cells[i][s].edges.length>0&&s--}return e}(c)),"function"==typeof Do.successCallback&&Do.successCallback(l),l}var Fo=64,Bo=16,zo=[],Vo=[],Uo=[],Ho=[],Go=[],qo=[],Wo=[],Yo=[],Xo=[],$o=[],Ko=[],Zo=[],Jo=[],Qo=[],ti=[],ei=[],ni=[],ri=[],oi=[],ii=[],si=[],ai=[],ui=[],li=[];Wo[85]=$o[85]=-1,Yo[85]=Ko[85]=0,Xo[85]=Zo[85]=1,oi[85]=ai[85]=1,ii[85]=ui[85]=0,si[85]=li[85]=1,zo[85]=Ho[85]=0,Vo[85]=Go[85]=-1,Uo[85]=ti[85]=0,ei[85]=Jo[85]=0,ni[85]=Qo[85]=1,qo[85]=ri[85]=1,ai[1]=ai[169]=0,ui[1]=ui[169]=-1,li[1]=li[169]=0,Jo[1]=Jo[169]=-1,Qo[1]=Qo[169]=0,ti[1]=ti[169]=0,$o[4]=$o[166]=0,Ko[4]=Ko[166]=-1,Zo[4]=Zo[166]=1,ei[4]=ei[166]=1,ni[4]=ni[166]=0,ri[4]=ri[166]=0,Wo[16]=Wo[154]=0,Yo[16]=Yo[154]=1,Xo[16]=Xo[154]=1,Ho[16]=Ho[154]=1,Go[16]=Go[154]=0,qo[16]=qo[154]=1,oi[64]=oi[106]=0,ii[64]=ii[106]=1,si[64]=si[106]=0,zo[64]=zo[106]=-1,Vo[64]=Vo[106]=0,Uo[64]=Uo[106]=1,oi[2]=oi[168]=0,ii[2]=ii[168]=-1,si[2]=si[168]=1,ai[2]=ai[168]=0,ui[2]=ui[168]=-1,li[2]=li[168]=0,Jo[2]=Jo[168]=-1,Qo[2]=Qo[168]=0,ti[2]=ti[168]=0,ei[2]=ei[168]=-1,ni[2]=ni[168]=0,ri[2]=ri[168]=1,Wo[8]=Wo[162]=0,Yo[8]=Yo[162]=-1,Xo[8]=Xo[162]=0,$o[8]=$o[162]=0,Ko[8]=Ko[162]=-1,Zo[8]=Zo[162]=1,Jo[8]=Jo[162]=1,Qo[8]=Qo[162]=0,ti[8]=ti[162]=1,ei[8]=ei[162]=1,ni[8]=ni[162]=0,ri[8]=ri[162]=0,Wo[32]=Wo[138]=0,Yo[32]=Yo[138]=1,Xo[32]=Xo[138]=1,$o[32]=$o[138]=0,Ko[32]=Ko[138]=1,Zo[32]=Zo[138]=0,zo[32]=zo[138]=1,Vo[32]=Vo[138]=0,Uo[32]=Uo[138]=0,Ho[32]=Ho[138]=1,Go[32]=Go[138]=0,qo[32]=qo[138]=1,ai[128]=ai[42]=0,ui[128]=ui[42]=1,li[128]=li[42]=1,oi[128]=oi[42]=0,ii[128]=ii[42]=1,si[128]=si[42]=0,zo[128]=zo[42]=-1,Vo[128]=Vo[42]=0,Uo[128]=Uo[42]=1,Ho[128]=Ho[42]=-1,Go[128]=Go[42]=0,qo[128]=qo[42]=0,$o[5]=$o[165]=-1,Ko[5]=Ko[165]=0,Zo[5]=Zo[165]=0,ai[5]=ai[165]=1,ui[5]=ui[165]=0,li[5]=li[165]=0,ei[20]=ei[150]=0,ni[20]=ni[150]=1,ri[20]=ri[150]=1,Ho[20]=Ho[150]=0,Go[20]=Go[150]=-1,qo[20]=qo[150]=1,Wo[80]=Wo[90]=-1,Yo[80]=Yo[90]=0,Xo[80]=Xo[90]=1,oi[80]=oi[90]=1,ii[80]=ii[90]=0,si[80]=si[90]=1,Jo[65]=Jo[105]=0,Qo[65]=Qo[105]=1,ti[65]=ti[105]=0,zo[65]=zo[105]=0,Vo[65]=Vo[105]=-1,Uo[65]=Uo[105]=0,Wo[160]=Wo[10]=-1,Yo[160]=Yo[10]=0,Xo[160]=Xo[10]=1,$o[160]=$o[10]=-1,Ko[160]=Ko[10]=0,Zo[160]=Zo[10]=0,ai[160]=ai[10]=1,ui[160]=ui[10]=0,li[160]=li[10]=0,oi[160]=oi[10]=1,ii[160]=ii[10]=0,si[160]=si[10]=1,ei[130]=ei[40]=0,ni[130]=ni[40]=1,ri[130]=ri[40]=1,Jo[130]=Jo[40]=0,Qo[130]=Qo[40]=1,ti[130]=ti[40]=0,zo[130]=zo[40]=0,Vo[130]=Vo[40]=-1,Uo[130]=Uo[40]=0,Ho[130]=Ho[40]=0,Go[130]=Go[40]=-1,qo[130]=qo[40]=1,$o[37]=$o[133]=0,Ko[37]=Ko[133]=1,Zo[37]=Zo[133]=1,ai[37]=ai[133]=0,ui[37]=ui[133]=1,li[37]=li[133]=0,zo[37]=zo[133]=-1,Vo[37]=Vo[133]=0,Uo[37]=Uo[133]=0,Ho[37]=Ho[133]=1,Go[37]=Go[133]=0,qo[37]=qo[133]=0,ei[148]=ei[22]=-1,ni[148]=ni[22]=0,ri[148]=ri[22]=0,ai[148]=ai[22]=0,ui[148]=ui[22]=-1,li[148]=li[22]=1,oi[148]=oi[22]=0,ii[148]=ii[22]=1,si[148]=si[22]=1,Ho[148]=Ho[22]=-1,Go[148]=Go[22]=0,qo[148]=qo[22]=1,Wo[82]=Wo[88]=0,Yo[82]=Yo[88]=-1,Xo[82]=Xo[88]=1,ei[82]=ei[88]=1,ni[82]=ni[88]=0,ri[82]=ri[88]=1,Jo[82]=Jo[88]=-1,Qo[82]=Qo[88]=0,ti[82]=ti[88]=1,oi[82]=oi[88]=0,ii[82]=ii[88]=-1,si[82]=si[88]=0,Wo[73]=Wo[97]=0,Yo[73]=Yo[97]=1,Xo[73]=Xo[97]=0,$o[73]=$o[97]=0,Ko[73]=Ko[97]=-1,Zo[73]=Zo[97]=0,Jo[73]=Jo[97]=1,Qo[73]=Qo[97]=0,ti[73]=ti[97]=0,zo[73]=zo[97]=1,Vo[73]=Vo[97]=0,Uo[73]=Uo[97]=1,Wo[145]=Wo[25]=0,Yo[145]=Yo[25]=-1,Xo[145]=Xo[25]=0,Jo[145]=Jo[25]=1,Qo[145]=Qo[25]=0,ti[145]=ti[25]=1,ai[145]=ai[25]=0,ui[145]=ui[25]=1,li[145]=li[25]=1,Ho[145]=Ho[25]=-1,Go[145]=Go[25]=0,qo[145]=qo[25]=0,$o[70]=$o[100]=0,Ko[70]=Ko[100]=1,Zo[70]=Zo[100]=0,ei[70]=ei[100]=-1,ni[70]=ni[100]=0,ri[70]=ri[100]=1,oi[70]=oi[100]=0,ii[70]=ii[100]=-1,si[70]=si[100]=1,zo[70]=zo[100]=1,Vo[70]=Vo[100]=0,Uo[70]=Uo[100]=0,$o[101]=$o[69]=0,Ko[101]=Ko[69]=1,Zo[101]=Zo[69]=0,zo[101]=zo[69]=1,Vo[101]=Vo[69]=0,Uo[101]=Uo[69]=0,ai[149]=ai[21]=0,ui[149]=ui[21]=1,li[149]=li[21]=1,Ho[149]=Ho[21]=-1,Go[149]=Go[21]=0,qo[149]=qo[21]=0,ei[86]=ei[84]=-1,ni[86]=ni[84]=0,ri[86]=ri[84]=1,oi[86]=oi[84]=0,ii[86]=ii[84]=-1,si[86]=si[84]=1,Wo[89]=Wo[81]=0,Yo[89]=Yo[81]=-1,Xo[89]=Xo[81]=0,Jo[89]=Jo[81]=1,Qo[89]=Qo[81]=0,ti[89]=ti[81]=1,Wo[96]=Wo[74]=0,Yo[96]=Yo[74]=1,Xo[96]=Xo[74]=0,$o[96]=$o[74]=-1,Ko[96]=Ko[74]=0,Zo[96]=Zo[74]=1,oi[96]=oi[74]=1,ii[96]=ii[74]=0,si[96]=si[74]=0,zo[96]=zo[74]=1,Vo[96]=Vo[74]=0,Uo[96]=Uo[74]=1,Wo[24]=Wo[146]=0,Yo[24]=Yo[146]=-1,Xo[24]=Xo[146]=1,ei[24]=ei[146]=1,ni[24]=ni[146]=0,ri[24]=ri[146]=1,Jo[24]=Jo[146]=0,Qo[24]=Qo[146]=1,ti[24]=ti[146]=1,Ho[24]=Ho[146]=0,Go[24]=Go[146]=-1,qo[24]=qo[146]=0,$o[6]=$o[164]=-1,Ko[6]=Ko[164]=0,Zo[6]=Zo[164]=1,ei[6]=ei[164]=-1,ni[6]=ni[164]=0,ri[6]=ri[164]=0,ai[6]=ai[164]=0,ui[6]=ui[164]=-1,li[6]=li[164]=1,oi[6]=oi[164]=1,ii[6]=ii[164]=0,si[6]=si[164]=0,Jo[129]=Jo[41]=0,Qo[129]=Qo[41]=1,ti[129]=ti[41]=1,ai[129]=ai[41]=0,ui[129]=ui[41]=1,li[129]=li[41]=0,zo[129]=zo[41]=-1,Vo[129]=Vo[41]=0,Uo[129]=Uo[41]=0,Ho[129]=Ho[41]=0,Go[129]=Go[41]=-1,qo[129]=qo[41]=0,ei[66]=ei[104]=0,ni[66]=ni[104]=1,ri[66]=ri[104]=0,Jo[66]=Jo[104]=-1,Qo[66]=Qo[104]=0,ti[66]=ti[104]=1,oi[66]=oi[104]=0,ii[66]=ii[104]=-1,si[66]=si[104]=0,zo[66]=zo[104]=0,Vo[66]=Vo[104]=-1,Uo[66]=Uo[104]=1,Wo[144]=Wo[26]=-1,Yo[144]=Yo[26]=0,Xo[144]=Xo[26]=0,ai[144]=ai[26]=1,ui[144]=ui[26]=0,li[144]=li[26]=1,oi[144]=oi[26]=0,ii[144]=ii[26]=1,si[144]=si[26]=1,Ho[144]=Ho[26]=-1,Go[144]=Go[26]=0,qo[144]=qo[26]=1,$o[36]=$o[134]=0,Ko[36]=Ko[134]=1,Zo[36]=Zo[134]=1,ei[36]=ei[134]=0,ni[36]=ni[134]=1,ri[36]=ri[134]=0,zo[36]=zo[134]=0,Vo[36]=Vo[134]=-1,Uo[36]=Uo[134]=1,Ho[36]=Ho[134]=1,Go[36]=Go[134]=0,qo[36]=qo[134]=0,Wo[9]=Wo[161]=-1,Yo[9]=Yo[161]=0,Xo[9]=Xo[161]=0,$o[9]=$o[161]=0,Ko[9]=Ko[161]=-1,Zo[9]=Zo[161]=0,Jo[9]=Jo[161]=1,Qo[9]=Qo[161]=0,ti[9]=ti[161]=0,ai[9]=ai[161]=1,ui[9]=ui[161]=0,li[9]=li[161]=1,Wo[136]=0,Yo[136]=1,Xo[136]=1,$o[136]=0,Ko[136]=1,Zo[136]=0,ei[136]=-1,ni[136]=0,ri[136]=1,Jo[136]=-1,Qo[136]=0,ti[136]=0,ai[136]=0,ui[136]=-1,li[136]=0,oi[136]=0,ii[136]=-1,si[136]=1,zo[136]=1,Vo[136]=0,Uo[136]=0,Ho[136]=1,Go[136]=0,qo[136]=1,Wo[34]=0,Yo[34]=-1,Xo[34]=0,$o[34]=0,Ko[34]=-1,Zo[34]=1,ei[34]=1,ni[34]=0,ri[34]=0,Jo[34]=1,Qo[34]=0,ti[34]=1,ai[34]=0,ui[34]=1,li[34]=1,oi[34]=0,ii[34]=1,si[34]=0,zo[34]=-1,Vo[34]=0,Uo[34]=1,Ho[34]=-1,Go[34]=0,qo[34]=0,Wo[35]=0,Yo[35]=1,Xo[35]=1,$o[35]=0,Ko[35]=-1,Zo[35]=1,ei[35]=1,ni[35]=0,ri[35]=0,Jo[35]=-1,Qo[35]=0,ti[35]=0,ai[35]=0,ui[35]=-1,li[35]=0,oi[35]=0,ii[35]=1,si[35]=0,zo[35]=-1,Vo[35]=0,Uo[35]=1,Ho[35]=1,Go[35]=0,qo[35]=1,Wo[153]=0,Yo[153]=1,Xo[153]=1,Jo[153]=-1,Qo[153]=0,ti[153]=0,ai[153]=0,ui[153]=-1,li[153]=0,Ho[153]=1,Go[153]=0,qo[153]=1,$o[102]=0,Ko[102]=-1,Zo[102]=1,ei[102]=1,ni[102]=0,ri[102]=0,oi[102]=0,ii[102]=1,si[102]=0,zo[102]=-1,Vo[102]=0,Uo[102]=1,Wo[155]=0,Yo[155]=-1,Xo[155]=0,Jo[155]=1,Qo[155]=0,ti[155]=1,ai[155]=0,ui[155]=1,li[155]=1,Ho[155]=-1,Go[155]=0,qo[155]=0,$o[103]=0,Ko[103]=1,Zo[103]=0,ei[103]=-1,ni[103]=0,ri[103]=1,oi[103]=0,ii[103]=-1,si[103]=1,zo[103]=1,Vo[103]=0,Uo[103]=0,Wo[152]=0,Yo[152]=1,Xo[152]=1,ei[152]=-1,ni[152]=0,ri[152]=1,Jo[152]=-1,Qo[152]=0,ti[152]=0,ai[152]=0,ui[152]=-1,li[152]=0,oi[152]=0,ii[152]=-1,si[152]=1,Ho[152]=1,Go[152]=0,qo[152]=1,Wo[156]=0,Yo[156]=-1,Xo[156]=1,ei[156]=1,ni[156]=0,ri[156]=1,Jo[156]=-1,Qo[156]=0,ti[156]=0,ai[156]=0,ui[156]=-1,li[156]=0,oi[156]=0,ii[156]=1,si[156]=1,Ho[156]=-1,Go[156]=0,qo[156]=1,Wo[137]=0,Yo[137]=1,Xo[137]=1,$o[137]=0,Ko[137]=1,Zo[137]=0,Jo[137]=-1,Qo[137]=0,ti[137]=0,ai[137]=0,ui[137]=-1,li[137]=0,zo[137]=1,Vo[137]=0,Uo[137]=0,Ho[137]=1,Go[137]=0,qo[137]=1,Wo[139]=0,Yo[139]=1,Xo[139]=1,$o[139]=0,Ko[139]=-1,Zo[139]=0,Jo[139]=1,Qo[139]=0,ti[139]=0,ai[139]=0,ui[139]=1,li[139]=0,zo[139]=-1,Vo[139]=0,Uo[139]=0,Ho[139]=1,Go[139]=0,qo[139]=1,Wo[98]=0,Yo[98]=-1,Xo[98]=0,$o[98]=0,Ko[98]=-1,Zo[98]=1,ei[98]=1,ni[98]=0,ri[98]=0,Jo[98]=1,Qo[98]=0,ti[98]=1,oi[98]=0,ii[98]=1,si[98]=0,zo[98]=-1,Vo[98]=0,Uo[98]=1,Wo[99]=0,Yo[99]=1,Xo[99]=0,$o[99]=0,Ko[99]=-1,Zo[99]=1,ei[99]=1,ni[99]=0,ri[99]=0,Jo[99]=-1,Qo[99]=0,ti[99]=1,oi[99]=0,ii[99]=-1,si[99]=0,zo[99]=1,Vo[99]=0,Uo[99]=1,$o[38]=0,Ko[38]=-1,Zo[38]=1,ei[38]=1,ni[38]=0,ri[38]=0,ai[38]=0,ui[38]=1,li[38]=1,oi[38]=0,ii[38]=1,si[38]=0,zo[38]=-1,Vo[38]=0,Uo[38]=1,Ho[38]=-1,Go[38]=0,qo[38]=0,$o[39]=0,Ko[39]=1,Zo[39]=1,ei[39]=-1,ni[39]=0,ri[39]=0,ai[39]=0,ui[39]=-1,li[39]=1,oi[39]=0,ii[39]=1,si[39]=0,zo[39]=-1,Vo[39]=0,Uo[39]=1,Ho[39]=1,Go[39]=0,qo[39]=0;var ci=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},pi=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},fi=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},hi=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},di=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},gi=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},yi=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},mi=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},vi=[],bi=[],_i=[],wi=[],xi=[],Si=[],Ei=[],Oi=[];wi[1]=xi[1]=18,wi[169]=xi[169]=18,_i[4]=bi[4]=12,_i[166]=bi[166]=12,vi[16]=Oi[16]=4,vi[154]=Oi[154]=4,Si[64]=Ei[64]=22,Si[106]=Ei[106]=22,_i[2]=Si[2]=17,wi[2]=xi[2]=18,_i[168]=Si[168]=17,wi[168]=xi[168]=18,vi[8]=wi[8]=9,bi[8]=_i[8]=12,vi[162]=wi[162]=9,bi[162]=_i[162]=12,vi[32]=Oi[32]=4,bi[32]=Ei[32]=1,vi[138]=Oi[138]=4,bi[138]=Ei[138]=1,xi[128]=Oi[128]=21,Si[128]=Ei[128]=22,xi[42]=Oi[42]=21,Si[42]=Ei[42]=22,bi[5]=xi[5]=14,bi[165]=xi[165]=14,_i[20]=Oi[20]=6,_i[150]=Oi[150]=6,vi[80]=Si[80]=11,vi[90]=Si[90]=11,wi[65]=Ei[65]=3,wi[105]=Ei[105]=3,vi[160]=Si[160]=11,bi[160]=xi[160]=14,vi[10]=Si[10]=11,bi[10]=xi[10]=14,_i[130]=Oi[130]=6,wi[130]=Ei[130]=3,_i[40]=Oi[40]=6,wi[40]=Ei[40]=3,bi[101]=Ei[101]=1,bi[69]=Ei[69]=1,xi[149]=Oi[149]=21,xi[21]=Oi[21]=21,_i[86]=Si[86]=17,_i[84]=Si[84]=17,vi[89]=wi[89]=9,vi[81]=wi[81]=9,vi[96]=Ei[96]=0,bi[96]=Si[96]=15,vi[74]=Ei[74]=0,bi[74]=Si[74]=15,vi[24]=_i[24]=8,wi[24]=Oi[24]=7,vi[146]=_i[146]=8,wi[146]=Oi[146]=7,bi[6]=Si[6]=15,_i[6]=xi[6]=16,bi[164]=Si[164]=15,_i[164]=xi[164]=16,wi[129]=Oi[129]=7,xi[129]=Ei[129]=20,wi[41]=Oi[41]=7,xi[41]=Ei[41]=20,_i[66]=Ei[66]=2,wi[66]=Si[66]=19,_i[104]=Ei[104]=2,wi[104]=Si[104]=19,vi[144]=xi[144]=10,Si[144]=Oi[144]=23,vi[26]=xi[26]=10,Si[26]=Oi[26]=23,bi[36]=Oi[36]=5,_i[36]=Ei[36]=2,bi[134]=Oi[134]=5,_i[134]=Ei[134]=2,vi[9]=xi[9]=10,bi[9]=wi[9]=13,vi[161]=xi[161]=10,bi[161]=wi[161]=13,bi[37]=Oi[37]=5,xi[37]=Ei[37]=20,bi[133]=Oi[133]=5,xi[133]=Ei[133]=20,_i[148]=xi[148]=16,Si[148]=Oi[148]=23,_i[22]=xi[22]=16,Si[22]=Oi[22]=23,vi[82]=_i[82]=8,wi[82]=Si[82]=19,vi[88]=_i[88]=8,wi[88]=Si[88]=19,vi[73]=Ei[73]=0,bi[73]=wi[73]=13,vi[97]=Ei[97]=0,bi[97]=wi[97]=13,vi[145]=wi[145]=9,xi[145]=Oi[145]=21,vi[25]=wi[25]=9,xi[25]=Oi[25]=21,bi[70]=Ei[70]=1,_i[70]=Si[70]=17,bi[100]=Ei[100]=1,_i[100]=Si[100]=17,vi[34]=wi[34]=9,bi[34]=_i[34]=12,xi[34]=Oi[34]=21,Si[34]=Ei[34]=22,vi[136]=Oi[136]=4,bi[136]=Ei[136]=1,_i[136]=Si[136]=17,wi[136]=xi[136]=18,vi[35]=Oi[35]=4,bi[35]=_i[35]=12,wi[35]=xi[35]=18,Si[35]=Ei[35]=22,vi[153]=Oi[153]=4,wi[153]=xi[153]=18,bi[102]=_i[102]=12,Si[102]=Ei[102]=22,vi[155]=wi[155]=9,xi[155]=Oi[155]=23,bi[103]=Ei[103]=1,_i[103]=Si[103]=17,vi[152]=Oi[152]=4,_i[152]=Si[152]=17,wi[152]=xi[152]=18,vi[156]=_i[156]=8,wi[156]=xi[156]=18,Si[156]=Oi[156]=23,vi[137]=Oi[137]=4,bi[137]=Ei[137]=1,wi[137]=xi[137]=18,vi[139]=Oi[139]=4,bi[139]=wi[139]=13,xi[139]=Ei[139]=20,vi[98]=wi[98]=9,bi[98]=_i[98]=12,Si[98]=Ei[98]=22,vi[99]=Ei[99]=0,bi[99]=_i[99]=12,wi[99]=Si[99]=19,bi[38]=_i[38]=12,xi[38]=Oi[38]=21,Si[38]=Ei[38]=22,bi[39]=Oi[39]=5,_i[39]=xi[39]=16,Si[39]=Ei[39]=22;var Pi=[];function Ci(t,e,n){return(t-e)/(n-e)}function Ii(t){return t.constructor.toString().indexOf("Array")>-1}function Ti(t,e,n,r,o,i){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,l=n+o,c=[],p=!1;!p;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=o,u-=r,a=(s=t.cells[l][u]).cval_real,-1===o)if(0===i)if(1&a)c.push([u,l]),r=-1,o=0,i=0;else{if(!(4&a)){c.push([u+s.bottomright,l]),r=0,o=1,i=1,p=!0;break}c.push([u+1,l]),r=1,o=0,i=0}else{if(!(1&a)){if(4&a){c.push([u+s.bottomright,l]),r=0,o=1,i=1,p=!0;break}c.push([u+s.bottomleft,l]),r=0,o=1,i=0,p=!0;break}c.push([u,l]),r=-1,o=0,i=0}else if(1===o)if(0===i){if(!(a&Bo)){if(a&Fo){c.push([u+s.topleft,l+1]),r=0,o=-1,i=0,p=!0;break}c.push([u+s.topright,l+1]),r=0,o=-1,i=1,p=!0;break}c.push([u+1,l+1]),r=1,o=0,i=1}else c.push([u+1,l+1]),r=1,o=0,i=1;else if(-1===r)if(0===i){if(!(a&Fo)){if(1&a){c.push([u,l+s.leftbottom]),r=1,o=0,i=0,p=!0;break}c.push([u,l+s.lefttop]),r=1,o=0,i=1,p=!0;break}c.push([u,l+1]),r=0,o=1,i=0}else{if(!(a&Fo)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),r=0,o=1,i=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===i){if(!(4&a)){c.push([u+1,l+s.rightbottom]),r=-1,o=0,i=0,p=!0;break}c.push([u+1,l]),r=0,o=-1,i=1}else{if(!(4&a)){if(a&Bo){c.push([u+1,l+s.righttop]),r=-1,o=0,i=1;break}c.push([u+1,l+s.rightbottom]),r=-1,o=0,i=0,p=!0;break}c.push([u+1,l]),r=0,o=-1,i=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===r)if(0===i)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,o=-1,i=1;else{if(!(1&a)){c.push([u+s.bottomright,l]),r=0,o=1,i=1,p=!0;break}c.push([u,l])}else{if(!(a&Fo)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===i){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,o=1,i=0;else{if(!(a&Bo)){c.push([u+s.topleft,l+1]),r=0,o=-1,i=0,p=!0;break}c.push([u+1,l+1]),r=1,o=0,i=1}}else if(-1===o){if(1!==i){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,o=0,i=1;else{if(!(4&a)){c.push([u+1,l+s.righttop]),r=-1,o=0,i=1,p=!0;break}c.push([u+1,l]),r=0,o=-1,i=1}}else{if(1!==o){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==i){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,o=0,i=0;else{if(!(a&Fo)){c.push([u,l+s.leftbottom]),r=1,o=0,i=0,p=!0;break}c.push([u,l+1]),r=0,o=1,i=0}}if(l+=o,(u+=r)===e&&l===n)break}return{path:c,i:u,j:l,x:r,y:o,o:i}}function Ri(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&Bo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&Bo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Fo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Fo?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Fo?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Fo?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Fo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&Bo?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Fo?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&Bo?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Mi(t,e,n,r){var o,i,s,a,u,l=t.cval;switch(e){case-1:switch(r){case 0:o=bi[l],s=$o[l],a=Ko[l],u=Zo[l];break;default:o=vi[l],s=Wo[l],a=Yo[l],u=Xo[l]}break;case 1:switch(r){case 0:o=xi[l],s=ai[l],a=ui[l],u=li[l];break;default:o=Si[l],s=oi[l],a=ii[l],u=si[l]}break;default:switch(n){case-1:switch(r){case 0:o=Ei[l],s=zo[l],a=Vo[l],u=Uo[l];break;default:o=Oi[l],s=Ho[l],a=Go[l],u=qo[l]}break;case 1:switch(r){case 0:o=wi[l],s=Jo[l],a=Qo[l],u=ti[l];break;default:o=_i[l],s=ei[l],a=ni[l],u=ri[l]}}}if(i=t.edges.indexOf(o),void 0===t.edges[i])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,i),l=t.cval_real,o){case 0:l&Bo?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&l?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&l?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&l?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&Bo?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&l?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&l?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&l?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&l?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&l?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&l?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&Fo?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&l?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&l?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&l?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&Fo?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&l?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&Fo?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&l?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&Fo?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&Fo?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&Bo?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&Fo?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&Bo?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function Ai(t){var e=[],n=[];t.forEach((function(t){var r=Cr(p([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}function Ni(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!Li(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var o=[];o.push(e[r].lrCoordinates),e[r].grouped=!0;for(var i=p([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||ki(p([e[s].lrCoordinates]),i)&&(o.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(o)}return n}function ki(t,e){for(var n=mn(t),r=0;r<n.features.length;r++)if(!ye(n.features[r],e))return!1;return!0}function Li(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Di(t,e,n){if(!R(n=n||{}))throw new Error("options is invalid");var r=n.pivot,o=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=yn(t)),!1!==o&&void 0!==o||(t=Ee(t)),k(t,(function(t){var n=Oo(r,t)+e,o=br(r,t),i=tt(Co(r,o,n));t[0]=i[0],t[1]=i[1]}))),t}function ji(t,e,n){if(!R(n=n||{}))throw new Error("options is invalid");var r=n.origin,o=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var i=Array.isArray(r)||"object"==a(r);return!0!==o&&(t=Ee(t)),"FeatureCollection"!==t.type||i?Fi(t,e,r):(F(t,(function(n,o){t.features[o]=Fi(n,e,r)})),t)}function Fi(t,e,n){var r="Point"===st(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==a(e))return Q(e);var n=t.bbox?t.bbox:J(t),r=n[0],o=n[1],i=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return l([r,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return l([i,o]);case"nw":case"northwest":case"westnorth":case"topleft":return l([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return l([i,s]);case"center":return gn(t);case void 0:case null:case"centroid":return yn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||k(t,(function(t){var r=br(n,t),o=Oo(n,t),i=tt(Co(n,r*e,o));t[0]=i[0],t[1]=i[1],3===t.length&&(t[2]*=e)})),t}function Bi(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function zi(t,e){return t[0]*e[1]-e[0]*t[1]}function Vi(t,e,n){var r=[],o=S(e,n),i=tt(t),s=[];return i.forEach((function(t,e){if(e!==i.length-1){var n=(l=t,c=i[e+1],p=o,f=Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1])),h=l[0]+p*(c[1]-l[1])/f,d=c[0]+p*(c[1]-l[1])/f,[[h,l[1]+p*(l[0]-c[0])/f],[d,c[1]+p*(l[0]-c[0])/f]]);if(r.push(n),e>0){var a=r[e-1],u=function(t,e){return!function(t,e){return 0===zi(Bi(t),Bi(e))}(t,e)&&function(t,e){var n,r,o=t[0],i=Bi(t),s=e[0],a=Bi(e),u=zi(i,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(o,function(t,e){return[t*e[0],t*e[1]]}(zi((r=o,[(n=s)[0]-r[0],n[1]-r[1]]),a)/u,i))}(t,e)}(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===i.length-2&&(s.push(n[0]),s.push(n[1]))}2===i.length&&(s.push(n[0]),s.push(n[1]))}var l,c,p,f,h,d})),h(s,t.properties)}function Ui(t,e,n){var r=e[0]-t[0],o=e[1]-t[1],i=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-i*o)}function Hi(t,e){return e.geometry.coordinates[0].every((function(e){return ye(l(e),t)}))}Pi[1]=Pi[169]=ci,Pi[4]=Pi[166]=pi,Pi[16]=Pi[154]=fi,Pi[64]=Pi[106]=hi,Pi[168]=Pi[2]=di,Pi[162]=Pi[8]=gi,Pi[138]=Pi[32]=yi,Pi[42]=Pi[128]=mi,Pi[5]=Pi[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Pi[20]=Pi[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Pi[80]=Pi[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Pi[65]=Pi[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Pi[160]=Pi[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Pi[130]=Pi[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Pi[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Pi[101]=Pi[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Pi[149]=Pi[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Pi[86]=Pi[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Pi[89]=Pi[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Pi[96]=Pi[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Pi[24]=Pi[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Pi[6]=Pi[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Pi[129]=Pi[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Pi[66]=Pi[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Pi[144]=Pi[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Pi[36]=Pi[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Pi[9]=Pi[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Pi[37]=Pi[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Pi[148]=Pi[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Pi[82]=Pi[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Pi[73]=Pi[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Pi[145]=Pi[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Pi[70]=Pi[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Pi[34]=function(t){return[mi(t),gi(t)]},Pi[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Pi[136]=function(t){return[yi(t),di(t)]},Pi[153]=function(t){return[fi(t),ci(t)]},Pi[102]=function(t){return[pi(t),hi(t)]},Pi[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Pi[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Pi[152]=function(t){return[fi(t),di(t)]},Pi[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Pi[137]=function(t){return[yi(t),ci(t)]},Pi[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Pi[98]=function(t){return[gi(t),hi(t)]},Pi[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Pi[38]=function(t){return[pi(t),mi(t)]},Pi[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Gi=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,o=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&o.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-o.coordinates[1]:o.coordinates[1]-r.coordinates[1];var i=Ui(t.coordinates,r.coordinates,o.coordinates);return i<0?1:i>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),qi=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return h([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return Ui(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),Wi=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,o=Ui(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===o?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:o>0},t.prototype.toMultiPoint=function(){return m(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=p([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=cn(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,o=t.getEnvelope();return e.forEach((function(e){var i,s,a,u,c,p,f=e.getEnvelope();if(r&&(n=r.getEnvelope()),s=o,a=(i=f).geometry.coordinates[0].map((function(t){return t[0]})),u=i.geometry.coordinates[0].map((function(t){return t[1]})),c=s.geometry.coordinates[0].map((function(t){return t[0]})),p=s.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,a)!==Math.max.apply(null,c)||Math.max.apply(null,u)!==Math.max.apply(null,p)||Math.min.apply(null,a)!==Math.min.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,p))&&Hi(f,o)){for(var h=t.map((function(t){return t.from.coordinates})),d=void 0,g=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(d=t)},y=0,m=h;y<m.length;y++)g(m[y]);d&&e.inside(l(d))&&(r&&!Hi(n,f)||(r=e))}})),r},t.prototype.inside=function(t){return ye(t,this.toPolygon())},t}(),Yi=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return H(e,(function(t){rt(t,"LineString","Graph::fromGeoJson"),L(t,(function(t,e){if(t){var r=n.getNode(t),o=n.getNode(e);n.addEdge(r,o)}return e}))})),n},t.prototype.getNode=function(t){var e=Gi.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Gi(t)),n},t.prototype.addEdge=function(t,e){var n=new qi(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,o=t.getOuterEdges(),i=o.length-1;i>=0;--i){var s=o[i],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new Wi;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function Xi(t,e){var n=!0;return H(t,(function(t){H(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!$i(e,t);case"Polygon":return!ye(t,e)}break;case"LineString":switch(e.type){case"Point":return!$i(t,e);case"LineString":return!function(t,e){return yr(t,e).features.length>0}(t,e);case"Polygon":return!Ki(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ye(e,t);case"LineString":return!Ki(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(ye(r[n],e))return!0;for(var o=0,i=e.coordinates[0];o<i.length;o++)if(ye(i[o],t))return!0;return yr(uo(t),uo(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n}function $i(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(Zi(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Ki(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(ye(r[n],t))return!0;return yr(e,uo(t)).features.length>0}function Zi(t,e,n){var r=n[0]-t[0],o=n[1]-t[1],i=e[0]-t[0],s=e[1]-t[1];return 0==r*s-o*i&&(Math.abs(i)>=Math.abs(s)?i>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function Ji(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Qi(t,e){return t[0]===e[0]&&t[1]===e[1]}function ts(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function es(t,e){for(var n=!1,r=!1,o=t.coordinates.length,i=0;i<o&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),os(e.coordinates[s],e.coordinates[s+1],t.coordinates[i],a)?n=!0:r=!0}i++}return n&&r}function ns(t,e){return yr(t,lo(e)).features.length>0}function rs(t,e){for(var n=!1,r=!1,o=t.coordinates.length,i=0;i<o&&(!n||!r);i++)ye(l(t.coordinates[i]),e)?n=!0:r=!0;return r&&n}function os(t,e,n,r){var o=n[0]-t[0],i=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==o*a-i*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var is=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:us};function ss(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function as(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function us(t,e){return wo(t,e,{strict:!0})}is.prototype.compare=function(t,e){if(t.type!==e.type||!as(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=ss(t),o=ss(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),o)}}return!1},is.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},is.prototype.compareLine=function(t,e,n,r){if(!as(t,e))return!1;var o=this.pseudoNode?t:this.removePseudo(t),i=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(o[0],i[0])||(i=this.fixStartIndex(i,o))){var s=this.compareCoord(o[n],i[n]);return this.direction||s?this.comparePath(o,i):!!this.compareCoord(o[n],i[i.length-(1+n)])&&this.comparePath(o.slice().reverse(),i)}},is.prototype.fixStartIndex=function(t,e){for(var n,r=-1,o=0;o<t.length;o++)if(this.compareCoord(t[o],e[0])){r=o;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},is.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},is.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),o=this;return n.every((function(t){return this.some((function(e){return o.compareLine(t,e,1,!0)}))}),r)}return!1},is.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},is.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},is.prototype.removePseudo=function(t){return t};var ls=is;function cs(t,e){var n=!1;return H(t,(function(t){H(e,(function(e){if(!0===n)return!0;n=!Xi(t.geometry,e.geometry)}))})),n}var ps=Vt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var o=0;o<this._datasetLength;o++)if(1!==this._visited[o]){this._visited[o]=1;var i=this._regionQuery(o);if(i.length<this.minPts)this.noise.push(o);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(o,s),this._expandCluster(s,i)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+a(t)+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);o.length>=this.minPts&&(e=this._mergeArrays(e,o))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var o=e[r];t.indexOf(o)<0&&t.push(o)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),fs=Vt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var i=0;i<this.k;i++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(i===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[i]=s}else this.centroids[i]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,o=Number.MAX_VALUE,i=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<o&&(o=r,i=a);return i},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var o=t[r]-e[r];n+=o*o}return Math.sqrt(n)},t.exports&&(t.exports=e)})),hs=Vt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var o=this._priorities[r];"desc"===this._sorting?e>o&&(n=r):e<o&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),ds=Vt((function(t){if(t.exports)var e=hs;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,o){this._init(t,n,r,o);for(var i=0,s=this.dataset.length;i<s;i++)if(1!==this._processed[i]){this._processed[i]=1,this.clusters.push([i]);var a=this.clusters.length-1;this._orderedList.push(i);var u=new e(null,null,"asc"),l=this._regionQuery(i);void 0!==this._distanceToCore(i)&&(this._updateQueue(i,l,u),this._expandCluster(a,u))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],o=this._reachability[r];t.push([r,o])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+a(t)+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var o=r.distance(r.dataset[t],r.dataset[e]),i=Math.max(r._coreDistance,o);void 0===r._reachability[e]?(r._reachability[e]=i,n.insert(e,i)):i<r._reachability[e]&&(r._reachability[e]=i,n.remove(e),n.insert(e,i))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,o=n.length;r<o;r++){var i=n[r];if(void 0===this._processed[i]){var s=this._regionQuery(i);this._processed[i]=1,this.clusters[t].push(i),this._orderedList.push(i),void 0!==this._distanceToCore(i)&&(this._updateQueue(i,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,o=this.dataset.length;r<o;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),gs=Vt((function(t){t.exports&&(t.exports={DBSCAN:ps,KMEANS:fs,OPTICS:ds,PriorityQueue:hs})})),ys=function(t,e,n){for(var r=t.length,o=0,i=0;i<r;i++){var s=(t[i]||0)-(e[i]||0);o+=s*s}return n?Math.sqrt(o):o},ms=ys,vs=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},bs=ys;function _s(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var ws=function(t,e,n,r){var o=[],i=[],s=[],a=[],u=!1,l=r||1e4,c=t.length,p=t[0].length,f=p>0,h=[];if(n)o="kmrand"==n?function(t,e){for(var n={},r=[],o=e<<2,i=t.length,s=t[0].length>0;r.length<e&&o-- >0;){var a=t[Math.floor(Math.random()*i)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?ms:vs,r=[],o=t.length,i=t[0].length>0,s=t[Math.floor(Math.random()*o)];for(i&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,l=0,c=[],p=0;p<o;p++){for(var f=1/0,h=0;h<u;h++){var d=n(t[p],r[h]);d<=f&&(f=d)}a[p]=f}for(var g=0;g<o;g++)l+=a[g];for(var y=0;y<o;y++)c[y]={i:y,v:t[y],pr:a[y]/l,cs:0};c.sort((function(t,e){return t.pr-e.pr})),c[0].cs=c[0].pr;for(var m=1;m<o;m++)c[m].cs=c[m-1].cs+c[m].pr;for(var v=Math.random(),b=0;b<o-1&&c[b++].cs<v;);r.push(c[b-1].v)}return r}(t,e):n;else for(var d={};o.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,o.push(t[g]))}do{_s(e,0,h);for(var y=0;y<c;y++){for(var m=1/0,v=0,b=0;b<e;b++)(a=f?bs(t[y],o[b]):Math.abs(t[y]-o[b]))<=m&&(m=a,v=b);s[y]=v,h[v]++}for(var _=[],w=(i=[],0);w<e;w++)_[w]=f?_s(p,0,_[w]):0,i[w]=o[w];if(f){for(var x=0;x<e;x++)o[x]=[];for(var S=0;S<c;S++)for(var E=_[s[S]],O=t[S],P=0;P<p;P++)E[P]+=O[P];u=!0;for(var C=0;C<e;C++){for(var I=o[C],T=_[C],R=i[C],M=h[C],A=0;A<p;A++)I[A]=T[A]/M||0;if(u)for(var N=0;N<p;N++)if(R[N]!=I[N]){u=!1;break}}}else{for(var k=0;k<c;k++)_[s[k]]+=t[k];for(var L=0;L<e;L++)o[L]=_[L]/h[L]||0;u=!0;for(var D=0;D<e;D++)if(i[D]!=o[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:o}};function xs(t,e){return E(Oo(t[0],t[1]))===E(Oo(e[0],e[1]))}function Ss(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Es(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Os={search:function(t,e,n,r){t.cleanDirty();var o=(r=r||{}).heuristic||Os.heuristics.manhattan,i=r.closest||!1,s=new Is((function(t){return t.f})),a=e;for(e.h=o(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return Es(u);u.closed=!0;for(var l=t.neighbors(u),c=0,p=l.length;c<p;++c){var f=l[c];if(!f.closed&&!f.isWall()){var h=u.g+f.getCost(u),d=f.visited;(!d||h<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||o(f,n),f.g=h,f.f=f.g+f.h,t.markDirty(f),i&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return i?Es(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);return 1*(r+o)+(n-2)*Math.min(r,o)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Ps(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,o=t[n];r<o.length;r++){var i=new Cs(n,r,o[r]);this.grid[n][r]=i,this.nodes.push(i)}}this.init()}function Cs(t,e,n){this.x=t,this.y=e,this.weight=n}function Is(t){this.content=[],this.scoreFunction=t}function Ts(t,e){for(var n=0;n<e.features.length;n++)if(ye(t,e.features[n]))return!0;return!1}function Rs(t){return function(){return t}}function Ms(t){return t[0]}function As(t){return t[1]}function Ns(){this._=null}function ks(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ls(t,e){var n=e,r=e.R,o=n.U;o?o.L===n?o.L=r:o.R=r:t._=r,r.U=o,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ds(t,e){var n=e,r=e.L,o=n.U;o?o.L===n?o.L=r:o.R=r:t._=r,r.U=o,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function js(t){for(;t.L;)t=t.L;return t}function Fs(t,e,n,r){var o=[null,null],i=ua.push(o)-1;return o.left=t,o.right=e,n&&zs(o,t,e,n),r&&zs(o,e,t,r),sa[t.index].halfedges.push(i),sa[e.index].halfedges.push(i),o}function Bs(t,e,n){var r=[e,n];return r.left=t,r}function zs(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Vs(t,e,n,r,o){var i,s=t[0],a=t[1],u=s[0],l=s[1],c=0,p=1,f=a[0]-u,h=a[1]-l;if(i=e-u,f||!(i>0)){if(i/=f,f<0){if(i<c)return;i<p&&(p=i)}else if(f>0){if(i>p)return;i>c&&(c=i)}if(i=r-u,f||!(i<0)){if(i/=f,f<0){if(i>p)return;i>c&&(c=i)}else if(f>0){if(i<c)return;i<p&&(p=i)}if(i=n-l,h||!(i>0)){if(i/=h,h<0){if(i<c)return;i<p&&(p=i)}else if(h>0){if(i>p)return;i>c&&(c=i)}if(i=o-l,h||!(i<0)){if(i/=h,h<0){if(i>p)return;i>c&&(c=i)}else if(h>0){if(i<c)return;i<p&&(p=i)}return!(c>0||p<1)||(c>0&&(t[0]=[u+c*f,l+c*h]),p<1&&(t[1]=[u+p*f,l+p*h]),!0)}}}}}function Us(t,e,n,r,o){var i=t[1];if(i)return!0;var s,a,u=t[0],l=t.left,c=t.right,p=l[0],f=l[1],h=c[0],d=c[1],g=(p+h)/2,y=(f+d)/2;if(d===f){if(g<e||g>=r)return;if(p>h){if(u){if(u[1]>=o)return}else u=[g,n];i=[g,o]}else{if(u){if(u[1]<n)return}else u=[g,o];i=[g,n]}}else if(a=y-(s=(p-h)/(d-f))*g,s<-1||s>1)if(p>h){if(u){if(u[1]>=o)return}else u=[(n-a)/s,n];i=[(o-a)/s,o]}else{if(u){if(u[1]<n)return}else u=[(o-a)/s,o];i=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];i=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];i=[e,s*e+a]}return t[0]=u,t[1]=i,!0}function Hs(t,e){var n=t.site,r=e.left,o=e.right;return n===o&&(o=r,r=n),o?Math.atan2(o[1]-r[1],o[0]-r[0]):(n===r?(r=e[1],o=e[0]):(r=e[0],o=e[1]),Math.atan2(r[0]-o[0],o[1]-r[1]))}function Gs(t,e){return e[+(e.left!==t.site)]}function qs(t,e){return e[+(e.left===t.site)]}Ps.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Os.cleanNode(this.nodes[t])},Ps.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Os.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ps.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ps.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,o=this.grid;return o[n-1]&&o[n-1][r]&&e.push(o[n-1][r]),o[n+1]&&o[n+1][r]&&e.push(o[n+1][r]),o[n]&&o[n][r-1]&&e.push(o[n][r-1]),o[n]&&o[n][r+1]&&e.push(o[n][r+1]),this.diagonal&&(o[n-1]&&o[n-1][r-1]&&e.push(o[n-1][r-1]),o[n+1]&&o[n+1][r-1]&&e.push(o[n+1][r-1]),o[n-1]&&o[n-1][r+1]&&e.push(o[n-1][r+1]),o[n+1]&&o[n+1][r+1]&&e.push(o[n+1][r+1])),e},Ps.prototype.toString=function(){for(var t,e,n,r,o=[],i=this.grid,s=0,a=i.length;s<a;s++){for(t=[],n=0,r=(e=i[s]).length;n<r;n++)t.push(e[n].weight);o.push(t.join(" "))}return o.join("\n")},Cs.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Cs.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Cs.prototype.isWall=function(){return 0===this.weight},Is.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var o,i=t+1<<1,s=i-1,a=null;if(s<e){var u=this.content[s];(o=this.scoreFunction(u))<r&&(a=s)}if(i<e){var l=this.content[i];this.scoreFunction(l)<(null===a?r:o)&&(a=i)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},Ns.prototype={constructor:Ns,insert:function(t,e){var n,r,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=js(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(o=r.R)&&o.C?(n.C=o.C=!1,r.C=!0,t=r):(t===n.R&&(Ls(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ds(this,r)):(o=r.L)&&o.C?(n.C=o.C=!1,r.C=!0,t=r):(t===n.L&&(Ds(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ls(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,o=t.U,i=t.L,s=t.R;if(n=i?s?js(s):i:s,o?o.L===t?o.L=n:o.R=n:this._=n,i&&s?(r=n.C,n.C=t.C,n.L=i,i.U=n,n!==s?(o=n.U,n.U=t.U,t=n.R,o.L=t,n.R=s,s.U=n):(n.U=o,o=n,t=n.R)):(r=t.C,t=n),t&&(t.U=o),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===o.L){if((e=o.R).C&&(e.C=!1,o.C=!0,Ls(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ds(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,Ls(this,o),t=this._;break}}else if((e=o.L).C&&(e.C=!1,o.C=!0,Ds(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ls(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,Ds(this,o),t=this._;break}e.C=!0,t=o,o=o.U}while(!t.C);t&&(t.C=!1)}}};var Ws,Ys=[];function Xs(){ks(this),this.x=this.y=this.arc=this.site=this.cy=null}function $s(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,o=t.site,i=n.site;if(r!==i){var s=o[0],a=o[1],u=r[0]-s,l=r[1]-a,c=i[0]-s,p=i[1]-a,f=2*(u*p-l*c);if(!(f>=-ca)){var h=u*u+l*l,d=c*c+p*p,g=(p*h-l*d)/f,y=(u*d-c*h)/f,m=Ys.pop()||new Xs;m.arc=t,m.site=o,m.x=g+s,m.y=(m.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=m;for(var v=null,b=aa._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){v=b.P;break}b=b.L}else{if(!b.R){v=b;break}b=b.R}aa.insert(v,m),v||(Ws=m)}}}}function Ks(t){var e=t.circle;e&&(e.P||(Ws=e.N),aa.remove(e),Ys.push(e),ks(e),t.circle=null)}var Zs=[];function Js(){ks(this),this.edge=this.site=this.circle=null}function Qs(t){var e=Zs.pop()||new Js;return e.site=t,e}function ta(t){Ks(t),ia.remove(t),Zs.push(t),ks(t)}function ea(t){var e=t.circle,n=e.x,r=e.cy,o=[n,r],i=t.P,s=t.N,a=[t];ta(t);for(var u=i;u.circle&&Math.abs(n-u.circle.x)<la&&Math.abs(r-u.circle.cy)<la;)i=u.P,a.unshift(u),ta(u),u=i;a.unshift(u),Ks(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<la&&Math.abs(r-l.circle.cy)<la;)s=l.N,a.push(l),ta(l),l=s;a.push(l),Ks(l);var c,p=a.length;for(c=1;c<p;++c)l=a[c],u=a[c-1],zs(l.edge,u.site,l.site,o);u=a[0],(l=a[p-1]).edge=Fs(u.site,l.site,null,o),$s(u),$s(l)}function na(t){for(var e,n,r,o,i=t[0],s=t[1],a=ia._;a;)if((r=ra(a,s)-i)>la)a=a.L;else{if(!((o=i-oa(a,s))>la)){r>-la?(e=a.P,n=a):o>-la?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){sa[t.index]={site:t,halfedges:[]}}(t);var u=Qs(t);if(ia.insert(e,u),e||n){if(e===n)return Ks(e),n=Qs(e.site),ia.insert(u,n),u.edge=n.edge=Fs(e.site,u.site),$s(e),void $s(n);if(n){Ks(e),Ks(n);var l=e.site,c=l[0],p=l[1],f=t[0]-c,h=t[1]-p,d=n.site,g=d[0]-c,y=d[1]-p,m=2*(f*y-h*g),v=f*f+h*h,b=g*g+y*y,_=[(y*v-h*b)/m+c,(f*b-g*v)/m+p];zs(n.edge,l,d,_),u.edge=Fs(l,t,null,_),n.edge=Fs(t,d,null,_),$s(e),$s(n)}else u.edge=Fs(e.site,u.site)}}function ra(t,e){var n=t.site,r=n[0],o=n[1],i=o-e;if(!i)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var c=a-r,p=1/i-1/l,f=c/l;return p?(-f+Math.sqrt(f*f-2*p*(c*c/(-2*l)-u+l/2+o-i/2)))/p+r:(r+a)/2}function oa(t,e){var n=t.N;if(n)return ra(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var ia,sa,aa,ua,la=1e-6,ca=1e-12;function pa(t,e){return e[1]-t[1]||e[0]-t[0]}function fa(t,e){var n,r,o,i=t.sort(pa).pop();for(ua=[],sa=new Array(t.length),ia=new Ns,aa=new Ns;;)if(o=Ws,i&&(!o||i[1]<o.y||i[1]===o.y&&i[0]<o.x))i[0]===n&&i[1]===r||(na(i),n=i[0],r=i[1]),i=t.pop();else{if(!o)break;ea(o.arc)}if(function(){for(var t,e,n,r,o=0,i=sa.length;o<i;++o)if((t=sa[o])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=Hs(t,ua[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var o,i=ua.length;i--;)Us(o=ua[i],t,e,n,r)&&Vs(o,t,e,n,r)&&(Math.abs(o[0][0]-o[1][0])>la||Math.abs(o[0][1]-o[1][1])>la)||delete ua[i]}(s,a,u,l),function(t,e,n,r){var o,i,s,a,u,l,c,p,f,h,d,g,y=sa.length,m=!0;for(o=0;o<y;++o)if(i=sa[o]){for(s=i.site,a=(u=i.halfedges).length;a--;)ua[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(h=qs(i,ua[u[a]]))[0],g=h[1],p=(c=Gs(i,ua[u[++a%l]]))[0],f=c[1],(Math.abs(d-p)>la||Math.abs(g-f)>la)&&(u.splice(a,0,ua.push(Bs(s,h,Math.abs(d-t)<la&&r-g>la?[t,Math.abs(p-t)<la?f:r]:Math.abs(g-r)<la&&n-d>la?[Math.abs(f-r)<la?p:n,r]:Math.abs(d-n)<la&&g-e>la?[n,Math.abs(p-n)<la?f:e]:Math.abs(g-e)<la&&d-t>la?[Math.abs(f-e)<la?p:t,e]:null))-1),++l);l&&(m=!1)}if(m){var v,b,_,w=1/0;for(o=0,m=null;o<y;++o)(i=sa[o])&&(_=(v=(s=i.site)[0]-t)*v+(b=s[1]-e)*b)<w&&(w=_,m=i);if(m){var x=[t,e],S=[t,r],E=[n,r],O=[n,e];m.halfedges.push(ua.push(Bs(s=m.site,x,S))-1,ua.push(Bs(s,S,E))-1,ua.push(Bs(s,E,O))-1,ua.push(Bs(s,O,x))-1)}}for(o=0;o<y;++o)(i=sa[o])&&(i.halfedges.length||delete sa[o])}(s,a,u,l)}this.edges=ua,this.cells=sa,ia=aa=ua=sa=null}function ha(t){return(t=t.slice()).push(t[0]),p([t])}function da(t,e,n,r){var o=(r=r||{}).steps||64,i=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!R(r))throw new Error("options must be an object");if(!T(o))throw new Error("steps must be a number");if(!T(s))throw new Error("angle must be a number");var l=Q(t);if("degrees"===i)var c=P(s);else e=Co(t,e,90,{units:i}),n=Co(t,n,0,{units:i}),e=Q(e)[0]-l[0],n=Q(n)[1]-l[1];for(var f=[],h=0;h<o;h+=1){var d=-360*h/o,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(ga(d),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(ga(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===i){var m=g*Math.cos(c)+y*Math.sin(c),v=y*Math.cos(c)-g*Math.sin(c);g=m,y=v}f.push([g+l[0],y+l[1]])}return f.push(f[0]),"degrees"===i?p([f],u):Di(p([f],u),s,{pivot:a})}function ga(t){var e=t*Math.PI/180;return Math.tan(e)}function ya(t,e){void 0===e&&(e={});var n=0,r=0,o=0;return V(t,(function(t,i,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!T(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+i);(a=Number(a))>0&&k(t,(function(t){n+=t[0]*a,r+=t[1]*a,o+=a}))})),l([n/o,r/o],e.properties,e)}function ma(t,e,n,r,o){var i=r.tolerance||.001,s=0,a=0,u=0,c=0;if(F(n,(function(e){var n,r=null===(n=e.properties)||void 0===n?void 0:n.weight,o=null==r?1:r;if(!T(o=Number(o)))throw new Error("weight value must be a number");if(o>0){c+=1;var i=o*be(e,t);0===i&&(i=1);var l=o/i;s+=e.geometry.coordinates[0]*l,a+=e.geometry.coordinates[1]*l,u+=l}})),c<1)throw new Error("no features to measure");var p=s/u,f=a/u;return 1===c||0===o||Math.abs(p-e[0])<i&&Math.abs(f-e[1])<i?l([p,f],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([p,f]),ma([p,f],t,n,r,o-1))}function va(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ba(t,e){var n=0,r=0;k(t,(function(o,i,s,a,u){u>n&&(n=u,r=i,e.push([]));var l=i-r,c=t.coordinates[u][l+1],p=o[0],f=o[1],h=c[0],d=c[1];e[u].push([.75*p+.25*h,.75*f+.25*d]),e[u].push([.25*p+.75*h,.25*f+.75*d])}),!0),e.forEach((function(t){t.push(t[0])}))}function _a(t,e){var n=0,r=0,o=0;k(t,(function(i,s,a,u,l){u>o&&(o=u,r=s,e.push([[]])),l>n&&(n=l,r=s,e[u].push([]));var c=s-r,p=t.coordinates[u][l][c+1],f=i[0],h=i[1],d=p[0],g=p[1];e[u][l].push([.75*f+.25*d,.75*h+.25*g]),e[u][l].push([.25*f+.75*d,.25*h+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function wa(t,e,n){void 0===n&&(n=2);var r=Q(t),o=Q(e),i=r[0]-o[0],s=r[1]-o[1];return 1===n?Math.abs(i)+Math.abs(s):Math.pow(Math.pow(i,n)+Math.pow(s,n),1/n)}function xa(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,o=e.binary||!1,i=e.alpha||-1,s=e.standardization||!1,a=[];F(t,(function(t){a.push(yn(t))}));for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var c=l;c<a.length;c++){l===c&&(u[l][c]=0);var p=wa(a[l],a[c],r);u[l][c]=p,u[c][l]=p}for(l=0;l<a.length;l++)for(c=0;c<a.length;c++)0!==(p=u[l][c])&&(u[l][c]=o?p<=n?1:0:p<=n?Math.pow(p,i):0);if(s)for(l=0;l<a.length;l++){var f=u[l].reduce((function(t,e){return t+e}),0);for(c=0;c<a.length;c++)u[l][c]=u[l][c]/f}return u}function Sa(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function Ea(t,e){return void 0===e&&(e={}),Pa(t,"mercator",e)}function Oa(t,e){return void 0===e&&(e={}),Pa(t,"wgs84",e)}function Pa(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&T(t[0])?t="mercator"===e?Ca(t):Ia(t):(!0!==r&&(t=Ee(t)),k(t,(function(t){var n="mercator"===e?Ca(t):Ia(t);t[0]=n[0],t[1]=n[1]}))),t}function Ca(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,o=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return o[0]>r&&(o[0]=r),o[0]<-r&&(o[0]=-r),o[1]>r&&(o[1]=r),o[1]<-r&&(o[1]=-r),o}function Ia(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}fa.prototype={constructor:fa,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Gs(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(i=(o=n.halfedges).length)for(var o,i,s,a,u,l,c=n.site,p=-1,f=e[o[i-1]],h=f.left===c?f.right:f.left;++p<i;)s=h,h=(f=e[o[p]]).left===c?f.right:f.left,s&&h&&r<s.index&&r<h.index&&(u=s,l=h,((a=c)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([c.data,s.data,h.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,o,i=this,s=i._found||0,a=i.cells.length;!(o=i.cells[s]);)if(++s>=a)return null;var u=t-o.site[0],l=e-o.site[1],c=u*u+l*l;do{o=i.cells[r=s],s=null,o.halfedges.forEach((function(n){var r=i.edges[n],a=r.left;if(a!==o.site&&a||(a=r.right)){var u=t-a[0],l=e-a[1],p=u*u+l*l;p<c&&(c=p,s=a.index)}}))}while(null!==s);return i._found=r,null==n||c<=n*n?o.site:null}};var Ta=Object.freeze({__proto__:null,toMercator:Ea,toWgs84:Oa});function Ra(t){return Array.isArray(t)?La(t):t&&t.bbox?La(t.bbox):[360*ka(),180*ka()]}function Ma(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(l(Ra(e.bbox)));return g(n)}function Aa(t,e){void 0===e&&(e={}),null==t&&(t=1),T(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),T(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,o=[],i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(Array(e.num_vertices+1)).map(Math.random);i.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),i.forEach((function(t){t=2*t*Math.PI/i[i.length-1];var n=Math.random();o.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),o[o.length-1]=o[0],o=o.map((r=Ra(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(p([o]))},o=0;o<t;o++)r();return g(n)}function Na(t,e){if(void 0===e&&(e={}),!R(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,o=e.max_length,i=e.max_rotation;null==t&&(t=1),(!T(r)||void 0===r||r<2)&&(r=10),T(o)&&void 0!==o||(o=1e-4),T(i)&&void 0!==i||(i=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Ra(n)],l=0;l<r-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*i*2,p=Math.random()*o;u.push([u[l][0]+p*Math.cos(c),u[l][1]+p*Math.sin(c)])}s.push(h(u))}return g(s)}function ka(){return Math.random()-.5}function La(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var Da=Object.freeze({__proto__:null,randomPosition:Ra,randomPoint:Ma,randomPolygon:Aa,randomLineString:Na});function ja(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return F(t,(function(t){Va(t.properties,e)&&n.push(t)})),g(n)}function Fa(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=za(t,e),o=Object.keys(r),i=0;i<o.length;i++){for(var s=o[i],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(g(u),s,i)}}function Ba(t,e,n,r){var o=r;return Fa(t,e,(function(t,e,i){o=0===i&&void 0===r?t:n(o,t,e,i)})),o}function za(t,e){var n={};return F(t,(function(t,r){var o=t.properties||{};if(Object.prototype.hasOwnProperty.call(o,String(e))){var i=o[e];Object.prototype.hasOwnProperty.call(n,i)?n[i].push(r):n[i]=[r]}})),n}function Va(t,e){if(void 0===t)return!1;var n=a(e);if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Va(t,e[r]))return!1;return!0}return Ua(t,e)}function Ua(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var o=n[r];if(t[o]!==e[o])return!1}return!0}function Ha(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var o=e[r];Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n}var Ga=Object.freeze({__proto__:null,getCluster:ja,clusterEach:Fa,clusterReduce:Ba,createBins:za,applyFilter:Va,propertiesContainsFilter:Ua,filterProperties:Ha}),qa=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function Wa(t,e){return t>e?1:t<e?-1:0}function Ya(t,e,n){for(var r=new qa(null,null),o=r,i=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}i.left=e,i=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,i.left=e.right,e.left=r.right,e.right=r.left,e}function Xa(t,e,n,r){var o=new qa(t,e);if(null===n)return o.left=o.right=null,o;var i=r(t,(n=Ya(t,n,r)).key);return i<0?(o.left=n.left,o.right=n,n.left=null):i>=0&&(o.right=n.right,o.left=n,n.right=null),o}function $a(t,e,n){var r=null,o=null;if(e){var i=n((e=Ya(t,e,n)).key,t);0===i?(r=e.left,o=e.right):i<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function Ka(t,e,n,r,o){if(t){r(e+(n?"└── ":"├── ")+o(t)+"\n");var i=e+(n?"    ":"│   ");t.left&&Ka(t.left,i,!1,r,o),t.right&&Ka(t.right,i,!0,r,o)}}var Za=function(){function t(t){void 0===t&&(t=Wa),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=Xa(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new qa(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=Ya(t,this._root,r),i=r(t,o.key);return 0===i?this._root=o:(i<0?(n.left=o.left,n.right=o,o.left=null):i>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=Ya(t,e,n)).key)?(null===e.left?r=e.right:(r=Ya(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Ya(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=Ya(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],o=!1;!o;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):o=!0;return this},t.prototype.range=function(t,e,n,r){for(var o=[],i=this._comparator,s=this._root;0!==o.length||s;)if(s)o.push(s),s=s.left;else{if(i((s=o.pop()).key,e)>0)break;if(i(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,o=[];!n;)if(e)o.push(e),e=e.left;else if(o.length>0){if(e=o.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var o=r(t.key,e.key);if(0===o)break;o<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var o=r(t.key,e.key);if(0===o)break;o<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,o=new qa(null,null),i=o;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=i=i.next=n.pop()).right:r=!0;return i.next=null,o.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,o=this._comparator;if(n&&tu(t,e,0,r-1,o),null===this._root)this._root=Ja(t,e,0,r),this._size=r;else{var i=function(t,e,n){for(var r=new qa(null,null),o=r,i=t,s=e;null!==i&&null!==s;)n(i.key,s.key)<0?(o.next=i,i=i.next):(o.next=s,s=s.next),o=o.next;return null!==i?o.next=i:null!==s&&(o.next=s),r.next}(this.toList(),function(t,e){for(var n=new qa(null,null),r=n,o=0;o<t.length;o++)r=r.next=new qa(t[o],e[o]);return r.next=null,n.next}(t,e),o);r=this._size+r,this._root=Qa({head:i},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return Ka(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,o=$a(t,this._root,r),i=o.left,s=o.right;r(t,e)<0?s=Xa(e,n,s,r):i=Xa(e,n,i,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=Ya(t.key,e,n)).left=t),e)}(i,s,r)},t.prototype.split=function(t){return $a(t,this._root,this._comparator)},t}();function Ja(t,e,n,r){var o=r-n;if(o>0){var i=n+Math.floor(o/2),s=t[i],a=e[i],u=new qa(s,a);return u.left=Ja(t,e,n,i),u.right=Ja(t,e,i+1,r),u}return null}function Qa(t,e,n){var r=n-e;if(r>0){var o=e+Math.floor(r/2),i=Qa(t,e,o),s=t.head;return s.left=i,t.head=t.head.next,s.right=Qa(t,o+1,n),s}return null}function tu(t,e,n,r,o){if(!(n>=r)){for(var i=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(o(t[s],i)<0);do{a--}while(o(t[a],i)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}tu(t,e,n,a,o),tu(t,e,a+1,r,o)}}function eu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ru(t,e,n){return e&&nu(t.prototype,e),n&&nu(t,n),t}var ou=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},iu=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},su=Number.EPSILON;void 0===su&&(su=Math.pow(2,-52));var au=su*su,uu=function(t,e){if(-su<t&&t<su&&-su<e&&e<su)return 0;var n=t-e;return n*n<au*t*e?0:t<e?-1:1},lu=function(){function t(){eu(this,t),this.reset()}return ru(t,[{key:"reset",value:function(){this.xRounder=new cu,this.yRounder=new cu}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),cu=function(){function t(){eu(this,t),this.tree=new Za,this.round(0)}return ru(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===uu(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===uu(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),pu=new lu,fu=function(t,e){return t.x*e.y-t.y*e.x},hu=function(t,e){return t.x*e.x+t.y*e.y},du=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y},i=fu(r,o);return uu(i,0)},gu=function(t){return Math.sqrt(hu(t,t))},yu=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return hu(o,r)/gu(o)/gu(r)},mu=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},vu=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},bu=function(){function t(e,n){eu(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return ru(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:wu.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),ru(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var o=e[n];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var o=this.point.events[r];void 0===o.consumedBy&&n.otherSE.point.events===o.otherSE.point.events&&n.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var o,i,s,a,u,l=r.otherSE;n.set(r,{sine:(o=e.point,i=t.point,s=l.point,a={x:i.x-o.x,y:i.y-o.y},u={x:s.x-o.x,y:s.y-o.y},fu(u,a)/gu(u)/gu(a)),cosine:yu(e.point,t.point,l.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var o=n.get(t),i=o.sine,s=o.cosine,a=n.get(e),u=a.sine,l=a.cosine;return i>=0&&u>=0?s<l?1:s>l?-1:0:i<0&&u<0?s<l?-1:s>l?1:0:u<i?-1:u>i?1:0}}}]),t}(),_u=0,wu=function(){function t(e,n,r,o){eu(this,t),this.id=++_u,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=o}return ru(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,o=t.rightSE.point.x,i=e.rightSE.point.x;if(i<n)return 1;if(o<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var p=e.comparePoint(t.rightSE.point);return 0!==p?p:-1}if(n>r){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var h=t.comparePoint(e.rightSE.point);return h<0?1:h>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(o<i){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(o>i){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(o!==i){var y=u-s,m=o-n,v=l-a,b=i-r;if(y>m&&v<b)return 1;if(y<m&&v>b)return-1}return o>i?1:o<i||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),ru(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var o=(t.y-e.y)/r.y,i=e.x+o*r.x;if(t.x===i)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=iu(e,n);if(null===r)return null;var o=this.leftSE.point,i=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=ou(e,s)&&0===this.comparePoint(s),l=ou(n,o)&&0===t.comparePoint(o),c=ou(e,a)&&0===this.comparePoint(a),p=ou(n,i)&&0===t.comparePoint(i);if(l&&u)return p&&!c?i:!p&&c?a:null;if(l)return c&&o.x===a.x&&o.y===a.y?null:o;if(u)return p&&i.x===s.x&&i.y===s.y?null:s;if(p&&c)return null;if(p)return i;if(c)return a;var f=function(t,e,n,r){if(0===e.x)return vu(n,r,t.x);if(0===r.x)return vu(t,e,n.x);if(0===e.y)return mu(n,r,t.y);if(0===r.y)return mu(t,e,n.y);var o=fu(e,r);if(0==o)return null;var i={x:n.x-t.x,y:n.y-t.y},s=fu(i,e)/o,a=fu(i,r)/o;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}}(o,this.vector(),s,t.vector());return null===f?null:ou(r,f)?pu.round(f.x,f.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,o=new bu(e,!0),i=new bu(e,!1),s=this.rightSE;this.replaceRightSE(i),n.push(i),n.push(o);var a=new t(o,s,this.rings.slice(),this.windings.slice());return bu.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),bu.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(o.checkForConsuming(),i.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var o=t.compare(n,r);if(0!==o){if(o>0){var i=n;n=r,r=i}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],c=r.windings[a],p=n.rings.indexOf(l);-1===p?(n.rings.push(l),n.windings.push(c)):n.windings[p]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,o=0,i=this.rings.length;o<i;o++){var s=this.rings[o],a=this.windings[o],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],c=[],p=0,f=e.length;p<f;p++)if(0!==n[p]){var h=e[p],d=h.poly;if(-1===c.indexOf(d))if(h.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var g=l.indexOf(h.poly);-1!==g&&l.splice(g,1)}}for(var y=0,m=l.length;y<m;y++){var v=l[y].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Mu.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var o,i;t.length<e.length?(o=t.length,i=e.length):(o=e.length,i=t.length),this._isInResult=i===Mu.numMultiPolys&&o<i;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(Mu.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var o,i,s,a=bu.comparePoints(e,n);if(a<0)o=e,i=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));o=n,i=e,s=-1}return new t(new bu(o,!0),new bu(i,!1),[r],[s])}}]),t}(),xu=function(){function t(e,n,r){if(eu(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=pu.round(e[0][0],e[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var i=o,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=pu.round(e[s][0],e[s][1]);u.x===i.x&&u.y===i.y||(this.segments.push(wu.fromRing(i,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),i=u)}o.x===i.x&&o.y===i.y||this.segments.push(wu.fromRing(i,o,this))}return ru(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),Su=function(){function t(e,n){if(eu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new xu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=e.length;r<o;r++){var i=new xu(e[r],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}return ru(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),o=0,i=r.length;o<i;o++)t.push(r[o]);return t}}]),t}(),Eu=function(){function t(e,n){if(eu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=e.length;r<o;r++){var i=new Su(e[r],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}return ru(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),o=0,i=r.length;o<i;o++)t.push(r[o]);return t}}]),t}(),Ou=function(){function t(e){eu(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return ru(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];if(i.isInResult()&&!i.ringOut){for(var s=null,a=i.leftSE,u=i.rightSE,l=[a],c=a.point,p=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var h=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var g=null,y=0,m=p.length;y<m;y++)if(p[y].point===a.point){g=y;break}if(null===g){p.push({index:l.length,point:a.point});var v=a.getLeftmostComparator(s);u=f.sort(v)[0].otherSE;break}var b=p.splice(g)[0],_=l.splice(b.index);_.unshift(_[0].otherSE),n.push(new t(_.reverse()))}n.push(new t(l))}}return n}}]),ru(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var o=this.events[n].point,i=this.events[n+1].point;0!==du(o,t,i)&&(e.push(o),t=o)}if(1===e.length)return null;var s=e[0],a=e[1];0===du(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,p=[],f=l;f!=c;f+=u)p.push([e[f].x,e[f].y]);return p}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];bu.compare(t,r)>0&&(t=r)}for(var o=t.segment.prevInResult(),i=o?o.prevInResult():null;;){if(!o)return null;if(!i)return o.ringOut;if(i.ringOut!==o.ringOut)return i.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=i.prevInResult(),i=o?o.prevInResult():null}}}]),t}(),Pu=function(){function t(e){eu(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return ru(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),Cu=function(){function t(e){eu(this,t),this.rings=e,this.polys=this._composePolys(e)}return ru(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];if(!o.poly)if(o.isExteriorRing())e.push(new Pu(o));else{var i=o.enclosingRing();i.poly||e.push(new Pu(i)),i.poly.addInterior(o)}}return e}}]),t}(),Iu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wu.compare;eu(this,t),this.queue=e,this.tree=new Za(n),this.segments=[]}return ru(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=r,i=r,s=void 0,a=void 0;void 0===s;)null===(o=this.tree.prev(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);for(;void 0===a;)null===(i=this.tree.next(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var c=this._splitSafely(s,l),p=0,f=c.length;p<f;p++)n.push(c[p])}var h=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(h=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),y=0,m=g.length;y<m;y++)n.push(g[y])}if(null!==u||null!==h){var v=null;v=null===u?h:null===h||bu.comparePoints(u,h)<=0?u:h,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var b=e.split(v),_=0,w=b.length;_<w;_++)n.push(b[_])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var x=s.getIntersection(a);if(null!==x){if(!s.isAnEndpoint(x))for(var S=this._splitSafely(s,x),E=0,O=S.length;E<O;E++)n.push(S[E]);if(!a.isAnEndpoint(x))for(var P=this._splitSafely(a,x),C=0,I=P.length;C<I;C++)n.push(P[C])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),Tu=void 0!==n&&n.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ru=void 0!==n&&n.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Mu=new(function(){function t(){eu(this,t)}return ru(t,[{key:"run",value:function(t,e,n){Mu.type=t,pu.reset();for(var r=[new Eu(e,!0)],o=0,i=n.length;o<i;o++)r.push(new Eu(n[o],!1));if(Mu.numMultiPolys=r.length,"difference"===Mu.type)for(var s=r[0],a=1;a<r.length;)null!==iu(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===Mu.type)for(var u=0,l=r.length;u<l;u++)for(var c=r[u],p=u+1,f=r.length;p<f;p++)if(null===iu(c.bbox,r[p].bbox))return[];for(var h=new Za(bu.compare),d=0,g=r.length;d<g;d++)for(var y=r[d].getSweepEvents(),m=0,v=y.length;m<v;m++)if(h.insert(y[m]),h.size>Tu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new Iu(h),_=h.size,w=h.pop();w;){var x=w.key;if(h.size===_){var S=x.segment;throw new Error("Unable to pop() ".concat(x.isLeft?"left":"right"," SweepEvent ")+"[".concat(x.point.x,", ").concat(x.point.y,"] from segment #").concat(S.id," ")+"[".concat(S.leftSE.point.x,", ").concat(S.leftSE.point.y,"] -> ")+"[".concat(S.rightSE.point.x,", ").concat(S.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(h.size>Tu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>Ru)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var E=b.process(x),O=0,P=E.length;O<P;O++){var C=E[O];void 0===C.consumedBy&&h.insert(C)}_=h.size,w=h.pop()}pu.reset();var I=Ou.factory(b.segments);return new Cu(I).getGeom()}}]),t}()),Au={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Mu.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Mu.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Mu.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Mu.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var o=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(o=o<0?Math.max(n+arguments[2],0):Math.min(o,n);r<o;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Nu=function(){};Nu.prototype.interfaces_=function(){return[]},Nu.prototype.getClass=function(){return Nu},Nu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var ku=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Lu=function(){},Du={MAX_VALUE:{configurable:!0}};Lu.isNaN=function(t){return Number.isNaN(t)},Lu.doubleToLongBits=function(t){return t},Lu.longBitsToDouble=function(t){return t},Lu.isInfinite=function(t){return!Number.isFinite(t)},Du.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Lu,Du);var ju=function(){},Fu=function(){},Bu=function(){};function zu(){}var Vu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Uu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Vu.prototype.setOrdinate=function(t,e){switch(t){case Vu.X:this.x=e;break;case Vu.Y:this.y=e;break;case Vu.Z:this.z=e;break;default:throw new ku("Invalid ordinate index: "+t)}},Vu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Nu.equalsWithTolerance(this.x,e.x,n)&&!!Nu.equalsWithTolerance(this.y,e.y,n)}},Vu.prototype.getOrdinate=function(t){switch(t){case Vu.X:return this.x;case Vu.Y:return this.y;case Vu.Z:return this.z}throw new ku("Invalid ordinate index: "+t)},Vu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Lu.isNaN(this.z))&&Lu.isNaN(t.z)},Vu.prototype.equals=function(t){return t instanceof Vu&&this.equals2D(t)},Vu.prototype.equalInZ=function(t,e){return Nu.equalsWithTolerance(this.z,t.z,e)},Vu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Vu.prototype.clone=function(){},Vu.prototype.copy=function(){return new Vu(this)},Vu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Vu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},Vu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Vu.prototype.hashCode=function(){var t=17;return 37*(t=37*t+Vu.hashCode(this.x))+Vu.hashCode(this.y)},Vu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Vu.prototype.interfaces_=function(){return[ju,Fu,zu]},Vu.prototype.getClass=function(){return Vu},Vu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=Lu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Uu.DimensionalComparator.get=function(){return Hu},Uu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Uu.NULL_ORDINATE.get=function(){return Lu.NaN},Uu.X.get=function(){return 0},Uu.Y.get=function(){return 1},Uu.Z.get=function(){return 2},Object.defineProperties(Vu,Uu);var Hu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new ku("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Hu.prototype.compare=function(t,e){var n=t,r=e,o=Hu.compare(n.x,r.x);if(0!==o)return o;var i=Hu.compare(n.y,r.y);return 0!==i?i:this._dimensionsToTest<=2?0:Hu.compare(n.z,r.z)},Hu.prototype.interfaces_=function(){return[Bu]},Hu.prototype.getClass=function(){return Hu},Hu.compare=function(t,e){return t<e?-1:t>e?1:Lu.isNaN(t)?Lu.isNaN(e)?0:-1:Lu.isNaN(e)?1:0};var Gu=function(){};Gu.prototype.create=function(){},Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu};var qu=function(){},Wu={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},qu.toLocationSymbol=function(t){switch(t){case qu.EXTERIOR:return"e";case qu.BOUNDARY:return"b";case qu.INTERIOR:return"i";case qu.NONE:return"-"}throw new ku("Unknown location value: "+t)},Wu.INTERIOR.get=function(){return 0},Wu.BOUNDARY.get=function(){return 1},Wu.EXTERIOR.get=function(){return 2},Wu.NONE.get=function(){return-1},Object.defineProperties(qu,Wu);var Yu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Xu=function(){},$u={LOG_10:{configurable:!0}};Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu},Xu.log10=function(t){var e=Math.log(t);return Lu.isInfinite(e)||Lu.isNaN(e)?e:e/Xu.LOG_10},Xu.min=function(t,e,n,r){var o=t;return e<o&&(o=e),n<o&&(o=n),r<o&&(o=r),o},Xu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1],i=arguments[2];return r<o?o:r>i?i:r}},Xu.wrap=function(t,e){return t<0?e- -t%e:t%e},Xu.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var o=arguments[0],i=arguments[1],s=arguments[2],a=arguments[3],u=o;return i>u&&(u=i),s>u&&(u=s),a>u&&(u=a),u}},Xu.average=function(t,e){return(t+e)/2},$u.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Xu,$u);var Ku=function(t){this.str=t};Ku.prototype.append=function(t){this.str+=t},Ku.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Ku.prototype.toString=function(t){return this.str};var Zu=function(t){this.value=t};Zu.prototype.intValue=function(){return this.value},Zu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Zu.isNaN=function(t){return Number.isNaN(t)};var Ju=function(){};Ju.isWhitespace=function(t){return t<=32&&t>=0||127===t},Ju.toUpperCase=function(t){return t.toUpperCase()};var Qu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var o=arguments[0],i=arguments[1];this.init(o,i)}},tl={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Qu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Qu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Qu.magnitude(n._hi),o=Qu.TEN.pow(r);(n=n.divide(o)).gt(Qu.TEN)?(n=n.divide(Qu.TEN),r+=1):n.lt(Qu.ONE)&&(n=n.multiply(Qu.TEN),r-=1);for(var i=r+1,s=new Ku,a=Qu.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===i&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,p=0;l>9?(c=!0,p="9"):p="0"+l,s.append(p),n=n.subtract(Qu.valueOf(l)).multiply(Qu.TEN),c&&n.selfAdd(Qu.TEN);var f=!0,h=Qu.magnitude(n._hi);if(h<0&&Math.abs(h)>=a-u&&(f=!1),!f)break}return e[0]=r,s.toString()},Qu.prototype.sqr=function(){return this.multiply(this)},Qu.prototype.doubleValue=function(){return this._hi+this._lo},Qu.prototype.subtract=function(){if(arguments[0]instanceof Qu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Qu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Qu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Qu.prototype.selfSubtract=function(){if(arguments[0]instanceof Qu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Qu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Qu.prototype.min=function(t){return this.le(t)?this:t},Qu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Qu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],o=null,i=null,s=null,a=null,u=null,l=null,c=null,p=null;return u=this._hi/n,p=(o=(l=Qu.SPLIT*u)-(o=l-u))*(s=(p=Qu.SPLIT*n)-(s=p-n))-(c=u*n)+o*(a=n-s)+(i=u-o)*s+i*a,p=u+(l=(this._hi-c-p+this._lo-u*r)/n),this._hi=p,this._lo=u-p+l,this}},Qu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Qu.prototype.divide=function(){if(arguments[0]instanceof Qu){var t=arguments[0],e=null,n=null,r=null,o=null,i=null,s=null,a=null,u=null;n=(i=this._hi/t._hi)-(e=(s=Qu.SPLIT*i)-(e=s-i)),u=e*(r=(u=Qu.SPLIT*t._hi)-(r=u-t._hi))-(a=i*t._hi)+e*(o=t._hi-r)+n*r+n*o;var l=u=i+(s=(this._hi-a-u+this._lo-i*t._lo)/t._hi),c=i-u+s;return new Qu(l,c)}if("number"==typeof arguments[0]){var p=arguments[0];return Lu.isNaN(p)?Qu.createNaN():Qu.copy(this).selfDivide(p,0)}},Qu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Qu.prototype.pow=function(t){if(0===t)return Qu.valueOf(1);var e=new Qu(this),n=Qu.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Qu.prototype.ceil=function(){if(this.isNaN())return Qu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Qu(t,e)},Qu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Qu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Qu.prototype.setValue=function(){if(arguments[0]instanceof Qu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Qu.prototype.max=function(t){return this.ge(t)?this:t},Qu.prototype.sqrt=function(){if(this.isZero())return Qu.valueOf(0);if(this.isNegative())return Qu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Qu.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Qu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Qu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,o=null,i=null,s=null,a=null;return i=(o=this._hi+e)-(s=o-this._hi),r=(a=(i=e-s+(this._hi-i))+this._lo)+(o-(n=o+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,p=null,f=null,h=null,d=null,g=null,y=null;h=this._hi+u,p=this._lo+l,d=h-(g=h-this._hi),f=p-(y=p-this._lo);var m=(c=h+(g=(d=u-g+(this._hi-d))+p))+(g=(f=l-y+(this._lo-f))+(g+(h-c))),v=g+(c-m);return this._hi=m,this._lo=v,this}},Qu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Qu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],o=null,i=null,s=null,a=null,u=null,l=null;o=(u=Qu.SPLIT*this._hi)-this._hi,l=Qu.SPLIT*n,o=u-o,i=this._hi-o,s=l-n;var c=(u=this._hi*n)+(l=o*(s=l-s)-u+o*(a=n-s)+i*s+i*a+(this._hi*r+this._lo*n)),p=l+(o=u-c);return this._hi=c,this._lo=p,this}},Qu.prototype.selfSqr=function(){return this.selfMultiply(this)},Qu.prototype.floor=function(){if(this.isNaN())return Qu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Qu(t,e)},Qu.prototype.negate=function(){return this.isNaN()?this:new Qu(-this._hi,-this._lo)},Qu.prototype.clone=function(){},Qu.prototype.multiply=function(){if(arguments[0]instanceof Qu){var t=arguments[0];return t.isNaN()?Qu.createNaN():Qu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Lu.isNaN(e)?Qu.createNaN():Qu.copy(this).selfMultiply(e,0)}},Qu.prototype.isNaN=function(){return Lu.isNaN(this._hi)},Qu.prototype.intValue=function(){return Math.trunc(this._hi)},Qu.prototype.toString=function(){var t=Qu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Qu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,o=n;if("."===n.charAt(0))o="0"+n;else if(r<0)o="0."+Qu.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var i=r-n.length;o=n+Qu.stringOfChar("0",i)+".0"}return this.isNegative()?"-"+o:o},Qu.prototype.reciprocal=function(){var t,e,n,r,o=null,i=null,s=null,a=null;t=(n=1/this._hi)-(o=(s=Qu.SPLIT*n)-(o=s-n)),i=(a=Qu.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=o*(i=a-i)-r+o*(e=this._hi-i)+t*i+t*e)-n*this._lo)/this._hi);return new Qu(u,n-u+s)},Qu.prototype.toSciNotation=function(){if(this.isZero())return Qu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Qu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var o="";n.length>1&&(o=n.substring(1));var i=n.charAt(0)+"."+o;return this.isNegative()?"-"+i+r:i+r},Qu.prototype.abs=function(){return this.isNaN()?Qu.NaN:this.isNegative()?this.negate():new Qu(this)},Qu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Qu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Qu.prototype.add=function(){if(arguments[0]instanceof Qu){var t=arguments[0];return Qu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Qu.copy(this).selfAdd(e)}},Qu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Qu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Qu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Qu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Qu.prototype.trunc=function(){return this.isNaN()?Qu.NaN:this.isPositive()?this.floor():this.ceil()},Qu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Qu.prototype.interfaces_=function(){return[zu,ju,Fu]},Qu.prototype.getClass=function(){return Qu},Qu.sqr=function(t){return Qu.valueOf(t).selfMultiply(t)},Qu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Qu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Qu(e)}},Qu.sqrt=function(t){return Qu.valueOf(t).sqrt()},Qu.parse=function(t){for(var e=0,n=t.length;Ju.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var o=t.charAt(e);"-"!==o&&"+"!==o||(e++,"-"===o&&(r=!0))}for(var i=new Qu,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,Ju.isDigit(l)){var c=l-"0";i.selfMultiply(Qu.TEN),i.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var p=t.substring(e);try{u=Zu.parseInt(p)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+p+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=i,h=s-a-u;if(0===h)f=i;else if(h>0){var d=Qu.TEN.pow(h);f=i.divide(d)}else if(h<0){var g=Qu.TEN.pow(-h);f=i.multiply(g)}return r?f.negate():f},Qu.createNaN=function(){return new Qu(Lu.NaN,Lu.NaN)},Qu.copy=function(t){return new Qu(t)},Qu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Qu.stringOfChar=function(t,e){for(var n=new Ku,r=0;r<e;r++)n.append(t);return n.toString()},tl.PI.get=function(){return new Qu(3.141592653589793,12246467991473532e-32)},tl.TWO_PI.get=function(){return new Qu(6.283185307179586,24492935982947064e-32)},tl.PI_2.get=function(){return new Qu(1.5707963267948966,6123233995736766e-32)},tl.E.get=function(){return new Qu(2.718281828459045,14456468917292502e-32)},tl.NaN.get=function(){return new Qu(Lu.NaN,Lu.NaN)},tl.EPS.get=function(){return 123259516440783e-46},tl.SPLIT.get=function(){return 134217729},tl.MAX_PRINT_DIGITS.get=function(){return 32},tl.TEN.get=function(){return Qu.valueOf(10)},tl.ONE.get=function(){return Qu.valueOf(1)},tl.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},tl.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Qu,tl);var el=function(){},nl={DP_SAFE_EPSILON:{configurable:!0}};el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el},el.orientationIndex=function(t,e,n){var r=el.orientationIndexFilter(t,e,n);if(r<=1)return r;var o=Qu.valueOf(e.x).selfAdd(-t.x),i=Qu.valueOf(e.y).selfAdd(-t.y),s=Qu.valueOf(n.x).selfAdd(-e.x),a=Qu.valueOf(n.y).selfAdd(-e.y);return o.selfMultiply(a).selfSubtract(i.selfMultiply(s)).signum()},el.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},el.intersection=function(t,e,n,r){var o=Qu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Qu.valueOf(e.x).selfSubtract(t.x)),i=Qu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Qu.valueOf(e.y).selfSubtract(t.y)),s=o.subtract(i),a=Qu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Qu.valueOf(t.y).selfSubtract(n.y)),u=Qu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Qu.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=Qu.valueOf(t.x).selfAdd(Qu.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),p=Qu.valueOf(e.x).selfSubtract(t.x).selfMultiply(Qu.valueOf(t.y).selfSubtract(n.y)),f=Qu.valueOf(e.y).selfSubtract(t.y).selfMultiply(Qu.valueOf(t.x).selfSubtract(n.x)),h=p.subtract(f).selfDivide(s).doubleValue(),d=Qu.valueOf(n.y).selfAdd(Qu.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new Vu(c,d)},el.orientationIndexFilter=function(t,e,n){var r=null,o=(t.x-n.x)*(e.y-n.y),i=(t.y-n.y)*(e.x-n.x),s=o-i;if(o>0){if(i<=0)return el.signum(s);r=o+i}else{if(!(o<0))return el.signum(s);if(i>=0)return el.signum(s);r=-o-i}var a=el.DP_SAFE_EPSILON*r;return s>=a||-s>=a?el.signum(s):2},el.signum=function(t){return t>0?1:t<0?-1:0},nl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(el,nl);var rl=function(){},ol={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};ol.X.get=function(){return 0},ol.Y.get=function(){return 1},ol.Z.get=function(){return 2},ol.M.get=function(){return 3},rl.prototype.setOrdinate=function(t,e,n){},rl.prototype.size=function(){},rl.prototype.getOrdinate=function(t,e){},rl.prototype.getCoordinate=function(){},rl.prototype.getCoordinateCopy=function(t){},rl.prototype.getDimension=function(){},rl.prototype.getX=function(t){},rl.prototype.clone=function(){},rl.prototype.expandEnvelope=function(t){},rl.prototype.copy=function(){},rl.prototype.getY=function(t){},rl.prototype.toCoordinateArray=function(){},rl.prototype.interfaces_=function(){return[Fu]},rl.prototype.getClass=function(){return rl},Object.defineProperties(rl,ol);var il=function(){},sl=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(il),al=function(){};al.arraycopy=function(t,e,n,r,o){for(var i=0,s=e;s<e+o;s++)n[r+i]=t[s],i++},al.getProperty=function(t){return{"line.separator":"\n"}[t]};var ul=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var o=arguments[0],i=arguments[1];this.x=o.y*i.w-i.y*o.w,this.y=i.x*o.w-o.x*i.w,this.w=o.x*i.y-i.x*o.y}else if(arguments[0]instanceof Vu&&arguments[1]instanceof Vu){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var p=arguments[0],f=arguments[1],h=arguments[2],d=arguments[3],g=p.y-f.y,y=f.x-p.x,m=p.x*f.y-f.x*p.y,v=h.y-d.y,b=d.x-h.x,_=h.x*d.y-d.x*h.y;this.x=y*_-b*m,this.y=v*m-g*_,this.w=g*b-v*y}};ul.prototype.getY=function(){var t=this.y/this.w;if(Lu.isNaN(t)||Lu.isInfinite(t))throw new sl;return t},ul.prototype.getX=function(){var t=this.x/this.w;if(Lu.isNaN(t)||Lu.isInfinite(t))throw new sl;return t},ul.prototype.getCoordinate=function(){var t=new Vu;return t.x=this.getX(),t.y=this.getY(),t},ul.prototype.interfaces_=function(){return[]},ul.prototype.getClass=function(){return ul},ul.intersection=function(t,e,n,r){var o=t.y-e.y,i=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=o*u-a*i,p=(i*l-u*s)/c,f=(a*s-o*l)/c;if(Lu.isNaN(p)||Lu.isInfinite(p)||Lu.isNaN(f)||Lu.isInfinite(f))throw new sl;return new Vu(p,f)};var ll=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Vu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r.x,o.x,r.y,o.y)}else if(4===arguments.length){var i=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(i,s,a,u)}},cl={serialVersionUID:{configurable:!0}};ll.prototype.getArea=function(){return this.getWidth()*this.getHeight()},ll.prototype.equals=function(t){if(!(t instanceof ll))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},ll.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new ll;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,o=this._maxy<t._maxy?this._maxy:t._maxy;return new ll(e,r,n,o)},ll.prototype.isNull=function(){return this._maxx<this._minx},ll.prototype.getMaxX=function(){return this._maxx},ll.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Vu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof ll){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},ll.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Vu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},ll.prototype.getMinY=function(){return this._miny},ll.prototype.getMinX=function(){return this._minx},ll.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Vu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof ll){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},ll.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},ll.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},ll.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},ll.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},ll.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},ll.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},ll.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},ll.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},ll.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},ll.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof ll){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Vu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},ll.prototype.centre=function(){return this.isNull()?null:new Vu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},ll.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Vu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof ll){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var o=arguments[0],i=arguments[1],s=arguments[2],a=arguments[3];o<i?(this._minx=o,this._maxx=i):(this._minx=i,this._maxx=o),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},ll.prototype.getMaxY=function(){return this._maxy},ll.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},ll.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+Vu.hashCode(this._minx))+Vu.hashCode(this._maxx))+Vu.hashCode(this._miny))+Vu.hashCode(this._maxy)},ll.prototype.interfaces_=function(){return[ju,zu]},ll.prototype.getClass=function(){return ll},ll.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2],s=arguments[3],a=Math.min(i.x,s.x),u=Math.max(i.x,s.x),l=Math.min(r.x,o.x),c=Math.max(r.x,o.x);return!(l>u||c<a||(a=Math.min(i.y,s.y),u=Math.max(i.y,s.y),l=Math.min(r.y,o.y),c=Math.max(r.y,o.y),l>u||c<a))}},cl.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(ll,cl);var pl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},fl=function(t){this.geometryFactory=t||new Zc};fl.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var o=pl.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((o=pl.emptyTypeStr.exec(t))[2]=void 0),o&&(n=o[1].toLowerCase(),r=o[2],dl[n]&&(e=dl[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},fl.prototype.write=function(t){return this.extractGeometry(t)},fl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!hl[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+hl[e].apply(this,[t])+")"};var hl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return hl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+hl.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(hl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(hl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+hl.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+hl.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+hl.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+hl.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},dl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(pl.spaces);return this.geometryFactory.createPoint(new Vu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],o=0,i=n.length;o<i;++o)e=n[o].replace(pl.trimParens,"$1"),r.push(dl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],o=0,i=n.length;o<i;++o)e=n[o].trim().split(pl.spaces),r.push(new Vu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],o=0,i=n.length;o<i;++o)e=n[o].trim().split(pl.spaces),r.push(new Vu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(pl.parenComma),r=[],o=0,i=n.length;o<i;++o)e=n[o].replace(pl.trimParens,"$1"),r.push(dl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var o,i=t.trim().split(pl.parenComma),s=[],a=0,u=i.length;a<u;++a)e=i[a].replace(pl.trimParens,"$1"),n=dl.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?o=r:s.push(r);return this.geometryFactory.createPolygon(o,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(pl.doubleParenComma),r=[],o=0,i=n.length;o<i;++o)e=n[o].replace(pl.trimParens,"$1"),r.push(dl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,o=e.length;r<o;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},gl=function(t){this.parser=new fl(t)};gl.prototype.write=function(t){return this.parser.write(t)},gl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var yl=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ml=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yl),vl=function(){};vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl},vl.shouldNeverReachHere=function(){if(0===arguments.length)vl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new ml("Should never reach here"+(null!==t?": "+t:""))}},vl.isTrue=function(){var t;if(1===arguments.length)vl.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new ml:new ml(t)},vl.equals=function(){var t,e,n;if(2===arguments.length)vl.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new ml("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var bl=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Vu,this._intPt[1]=new Vu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},_l={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};bl.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},bl.prototype.getTopologySummary=function(){var t=new Ku;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},bl.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},bl.prototype.getIntersectionNum=function(){return this._result},bl.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},bl.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},bl.prototype.setPrecisionModel=function(t){this._precisionModel=t},bl.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},bl.prototype.getIntersection=function(t){return this._intPt[t]},bl.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},bl.prototype.hasIntersection=function(){return this._result!==bl.NO_INTERSECTION},bl.prototype.getEdgeDistance=function(t,e){return bl.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},bl.prototype.isCollinear=function(){return this._result===bl.COLLINEAR_INTERSECTION},bl.prototype.toString=function(){return gl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+gl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},bl.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},bl.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},bl.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},bl.prototype.interfaces_=function(){return[]},bl.prototype.getClass=function(){return bl},bl.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),o=Math.abs(n.y-e.y),i=-1;if(t.equals(e))i=0;else if(t.equals(n))i=r>o?r:o;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(i=r>o?s:a)||t.equals(e)||(i=Math.max(s,a))}return vl.isTrue(!(0===i&&!t.equals(e)),"Bad distance calculation"),i},bl.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,o=t.y-e.y,i=Math.sqrt(r*r+o*o);return vl.isTrue(!(0===i&&!t.equals(e)),"Invalid distance calculation"),i},_l.DONT_INTERSECT.get=function(){return 0},_l.DO_INTERSECT.get=function(){return 1},_l.COLLINEAR.get=function(){return 2},_l.NO_INTERSECTION.get=function(){return 0},_l.POINT_INTERSECTION.get=function(){return 1},_l.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(bl,_l);var wl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new ll(this._inputLines[0][0],this._inputLines[0][1]),n=new ll(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,ll.intersects(n,r,e)&&0===El.orientationIndex(n,r,e)&&0===El.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,o){o.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),o.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=o.x,t.y-=o.y,e.x-=o.x,e.y-=o.y,n.x-=o.x,n.y-=o.y,r.x-=o.x,r.y-=o.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,o){var i=null;try{i=ul.intersection(t,n,r,o)}catch(s){if(!(s instanceof sl))throw s;i=e.nearestEndpoint(t,n,r,o)}return i},e.prototype.intersection=function(t,n,r,o){var i=this.intersectionWithNormalization(t,n,r,o);return this.isInSegmentEnvelopes(i)||(i=new Vu(e.nearestEndpoint(t,n,r,o))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},e.prototype.smallestInAbsValue=function(t,e,n,r){var o=t,i=Math.abs(o);return Math.abs(e)<i&&(o=e,i=Math.abs(e)),Math.abs(n)<i&&(o=n,i=Math.abs(n)),Math.abs(r)<i&&(o=r),o},e.prototype.checkDD=function(t,e,n,r,o){var i=el.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(i);al.out.println("DD in env = "+s+"  --------------------- "+i),o.distance(i)>1e-4&&al.out.println("Distance = "+o.distance(i))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var o=new Vu(t),i=new Vu(e),s=new Vu(n),a=new Vu(r),u=new Vu;this.normalizeToEnvCentre(o,i,s,a,u);var l=this.safeHCoordinateIntersection(o,i,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,o){var i=ll.intersects(e,n,r),s=ll.intersects(e,n,o),a=ll.intersects(r,o,e),u=ll.intersects(r,o,n);return i&&s?(this._intPt[0]=r,this._intPt[1]=o,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):i&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=o,this._intPt[1]=e,!o.equals(e)||i||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=o,this._intPt[1]=n,!o.equals(n)||i||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,o){var i=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,p=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,h=((i>l?i:l)+(a<p?a:p))/2,d=((s>c?s:c)+(u<f?u:f))/2;o.x=h,o.y=d,t.x-=o.x,t.y-=o.y,e.x-=o.x,e.y-=o.y,n.x-=o.x,n.y-=o.y,r.x-=o.x,r.y-=o.y},e.prototype.computeIntersect=function(e,n,r,o){if(this._isProper=!1,!ll.intersects(e,n,r,o))return t.NO_INTERSECTION;var i=El.orientationIndex(e,n,r),s=El.orientationIndex(e,n,o);if(i>0&&s>0||i<0&&s<0)return t.NO_INTERSECTION;var a=El.orientationIndex(r,o,e),u=El.orientationIndex(r,o,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===i&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,o):(0===i||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(o)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(o)?this._intPt[0]=n:0===i?this._intPt[0]=new Vu(r):0===s?this._intPt[0]=new Vu(o):0===a?this._intPt[0]=new Vu(e):0===u&&(this._intPt[0]=new Vu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,o)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var o=t,i=El.distancePointLine(t,n,r),s=El.distancePointLine(e,n,r);return s<i&&(i=s,o=e),(s=El.distancePointLine(n,t,e))<i&&(i=s,o=n),(s=El.distancePointLine(r,t,e))<i&&(i=s,o=r),o},e}(bl),xl=function(){};xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl},xl.orientationIndex=function(t,e,n){var r=e.x-t.x,o=e.y-t.y,i=n.x-e.x,s=n.y-e.y;return xl.signOfDet2x2(r,o,i,s)},xl.signOfDet2x2=function(t,e,n,r){var o=null,i=null,s=null;if(o=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-o:o:n>0?o:-o;if(0===e||0===n)return r>0?t>0?o:-o:t>0?-o:o;if(e>0?r>0?e<=r||(o=-o,i=t,t=n,n=i,i=e,e=r,r=i):e<=-r?(o=-o,n=-n,r=-r):(i=t,t=-n,n=i,i=e,e=-r,r=i):r>0?-e<=r?(o=-o,t=-t,e=-e):(i=-t,t=n,n=i,i=-e,e=r,r=i):e>=r?(t=-t,e=-e,n=-n,r=-r):(o=-o,i=-t,t=-n,n=i,i=-e,e=-r,r=i),t>0){if(!(n>0))return o;if(!(t<=n))return o}else{if(n>0)return-o;if(!(t>=n))return-o;o=-o,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-o;if(r>e)return o;if(t>(n-=s*t)+n){if(e<r+r)return o}else{if(e>r+r)return-o;n=t-n,r=e-r,o=-o}if(0===r)return 0===n?0:-o;if(0===n)return o;if((e-=(s=Math.floor(t/n))*r)<0)return o;if(e>r)return-o;if(n>(t-=s*n)+t){if(r<e+e)return-o}else{if(r>e+e)return o;t=n-t,e=r-e,o=-o}if(0===e)return 0===t?0:o;if(0===t)return-o}};var Sl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Sl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var o=t.x-this._p.x,i=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=xl.signOfDet2x2(o,i,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<i&&(u=-u),u>0&&this._crossingCount++}},Sl.prototype.isPointInPolygon=function(){return this.getLocation()!==qu.EXTERIOR},Sl.prototype.getLocation=function(){return this._isPointOnSegment?qu.BOUNDARY:this._crossingCount%2==1?qu.INTERIOR:qu.EXTERIOR},Sl.prototype.isOnSegment=function(){return this._isPointOnSegment},Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl},Sl.locatePointInRing=function(){if(arguments[0]instanceof Vu&&Yu(arguments[1],rl)){for(var t=arguments[0],e=arguments[1],n=new Sl(t),r=new Vu,o=new Vu,i=1;i<e.size();i++)if(e.getCoordinate(i,r),e.getCoordinate(i-1,o),n.countSegment(r,o),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Vu&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Sl(s),l=1;l<a.length;l++){var c=a[l],p=a[l-1];if(u.countSegment(c,p),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var El=function(){},Ol={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El},El.orientationIndex=function(t,e,n){return el.orientationIndex(t,e,n)},El.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var o=t[r].x-n,i=t[r+1].y,s=t[r-1].y;e+=o*(s-i)}return e/2}if(Yu(arguments[0],rl)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new Vu,c=new Vu,p=new Vu;a.getCoordinate(0,c),a.getCoordinate(1,p);var f=c.x;p.x-=f;for(var h=0,d=1;d<u-1;d++)l.y=c.y,c.x=p.x,c.y=p.y,a.getCoordinate(d+1,p),p.x-=f,h+=c.x*(l.y-p.y);return h/2}},El.distanceLineLine=function(t,e,n,r){if(t.equals(e))return El.distancePointLine(t,n,r);if(n.equals(r))return El.distancePointLine(r,t,e);var o=!1;if(ll.intersects(t,e,n,r)){var i=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===i)o=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/i,u=s/i;(u<0||u>1||a<0||a>1)&&(o=!0)}}else o=!0;return o?Xu.min(El.distancePointLine(t,n,r),El.distancePointLine(e,n,r),El.distancePointLine(n,t,e),El.distancePointLine(r,t,e)):0},El.isPointInRing=function(t,e){return El.locatePointInRing(t,e)!==qu.EXTERIOR},El.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new Vu;t.getCoordinate(0,r);for(var o=r.x,i=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-o,c=u-i;n+=Math.sqrt(l*l+c*c),o=a,i=u}return n},El.isCCW=function(t){var e=t.length-1;if(e<3)throw new ku("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,o=1;o<=e;o++){var i=t[o];i.y>n.y&&(n=i,r=o)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=El.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},El.locatePointInRing=function(t,e){return Sl.locatePointInRing(t,e)},El.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),o=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(o)*Math.sqrt(r)},El.computeOrientation=function(t,e,n){return El.orientationIndex(t,e,n)},El.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new ku("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var o=El.distancePointLine(t,e[r],e[r+1]);o<n&&(n=o)}return n}if(3===arguments.length){var i=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return i.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((i.x-s.x)*(a.x-s.x)+(i.y-s.y)*(a.y-s.y))/u;if(l<=0)return i.distance(s);if(l>=1)return i.distance(a);var c=((s.y-i.y)*(a.x-s.x)-(s.x-i.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},El.isOnLine=function(t,e){for(var n=new wl,r=1;r<e.length;r++){var o=e[r-1],i=e[r];if(n.computeIntersection(t,o,i),n.hasIntersection())return!0}return!1},Ol.CLOCKWISE.get=function(){return-1},Ol.RIGHT.get=function(){return El.CLOCKWISE},Ol.COUNTERCLOCKWISE.get=function(){return 1},Ol.LEFT.get=function(){return El.COUNTERCLOCKWISE},Ol.COLLINEAR.get=function(){return 0},Ol.STRAIGHT.get=function(){return El.COLLINEAR},Object.defineProperties(El,Ol);var Pl=function(){};Pl.prototype.filter=function(t){},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var Cl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Il={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Cl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Cl.SORTINDEX_GEOMETRYCOLLECTION},Cl.prototype.getFactory=function(){return this._factory},Cl.prototype.getGeometryN=function(t){return this},Cl.prototype.getArea=function(){return 0},Cl.prototype.isRectangle=function(){return!1},Cl.prototype.equals=function(){if(arguments[0]instanceof Cl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Cl))return!1;var n=e;return this.equalsExact(n)}},Cl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Cl.prototype.geometryChanged=function(){this.apply(Cl.geometryChangedFilter)},Cl.prototype.geometryChangedAction=function(){this._envelope=null},Cl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Cl.prototype.getLength=function(){return 0},Cl.prototype.getNumGeometries=function(){return 1},Cl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Cl.prototype.getUserData=function(){return this._userData},Cl.prototype.getSRID=function(){return this._SRID},Cl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Cl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Cl.SORTINDEX_GEOMETRYCOLLECTION)throw new ku("This method does not support GeometryCollection arguments")},Cl.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Cl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Cl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Cl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new ll(this._envelope)},Cl.prototype.setSRID=function(t){this._SRID=t},Cl.prototype.setUserData=function(t){this._userData=t},Cl.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var o=n.next(),i=r.next(),s=o.compareTo(i);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},Cl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Cl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Cl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Cl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Cl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Cl.SORTINDEX_MULTIPOLYGON},Cl.prototype.interfaces_=function(){return[Fu,ju,zu]},Cl.prototype.getClass=function(){return Cl},Cl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Cl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Il.serialVersionUID.get=function(){return 0x799ea46522854c00},Il.SORTINDEX_POINT.get=function(){return 0},Il.SORTINDEX_MULTIPOINT.get=function(){return 1},Il.SORTINDEX_LINESTRING.get=function(){return 2},Il.SORTINDEX_LINEARRING.get=function(){return 3},Il.SORTINDEX_MULTILINESTRING.get=function(){return 4},Il.SORTINDEX_POLYGON.get=function(){return 5},Il.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Il.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Il.geometryChangedFilter.get=function(){return Tl},Object.defineProperties(Cl,Il);var Tl=function(){};Tl.interfaces_=function(){return[Pl]},Tl.filter=function(t){t.geometryChangedAction()};var Rl=function(){};Rl.prototype.filter=function(t){},Rl.prototype.interfaces_=function(){return[]},Rl.prototype.getClass=function(){return Rl};var Ml=function(){},Al={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Ml.prototype.isInBoundary=function(t){},Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml},Al.Mod2BoundaryNodeRule.get=function(){return Nl},Al.EndPointBoundaryNodeRule.get=function(){return kl},Al.MultiValentEndPointBoundaryNodeRule.get=function(){return Ll},Al.MonoValentEndPointBoundaryNodeRule.get=function(){return Dl},Al.MOD2_BOUNDARY_RULE.get=function(){return new Nl},Al.ENDPOINT_BOUNDARY_RULE.get=function(){return new kl},Al.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ll},Al.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Dl},Al.OGC_SFS_BOUNDARY_RULE.get=function(){return Ml.MOD2_BOUNDARY_RULE},Object.defineProperties(Ml,Al);var Nl=function(){};Nl.prototype.isInBoundary=function(t){return t%2==1},Nl.prototype.interfaces_=function(){return[Ml]},Nl.prototype.getClass=function(){return Nl};var kl=function(){};kl.prototype.isInBoundary=function(t){return t>0},kl.prototype.interfaces_=function(){return[Ml]},kl.prototype.getClass=function(){return kl};var Ll=function(){};Ll.prototype.isInBoundary=function(t){return t>1},Ll.prototype.interfaces_=function(){return[Ml]},Ll.prototype.getClass=function(){return Ll};var Dl=function(){};Dl.prototype.isInBoundary=function(t){return 1===t},Dl.prototype.interfaces_=function(){return[Ml]},Dl.prototype.getClass=function(){return Dl};var jl=function(){};function Fl(t){this.message=t||""}jl.prototype.add=function(){},jl.prototype.addAll=function(){},jl.prototype.isEmpty=function(){},jl.prototype.iterator=function(){},jl.prototype.size=function(){},jl.prototype.toArray=function(){},jl.prototype.remove=function(){},Fl.prototype=new Error,Fl.prototype.name="IndexOutOfBoundsException";var Bl=function(){};Bl.prototype.hasNext=function(){},Bl.prototype.next=function(){},Bl.prototype.remove=function(){};var zl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(jl);function Vl(t){this.message=t||""}Vl.prototype=new Error,Vl.prototype.name="NoSuchElementException";var Ul=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof jl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,jl]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Hl(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new Fl;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(zl),Hl=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Vl;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Bl),Gl=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],r=arguments[1],o=!1,i=n.iterator();i.hasNext();)e.add(i.next(),r),o=!0;return o}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1];return this.add(r,o,!0),!0}if(arguments[0]instanceof Vu&&"boolean"==typeof arguments[1]){var i=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(i))return null}t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var c=arguments[0],p=arguments[1],f=arguments[2];if(f)for(var h=0;h<c.length;h++)e.add(c[h],p);else for(var d=c.length-1;d>=0;d--)e.add(c[d],p);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Vu){var g=arguments[0],y=arguments[1],m=arguments[2];if(!m){var v=this.size();if(v>0){if(g>0){var b=this.get(g-1);if(b.equals2D(y))return null}if(g<v){var _=this.get(g);if(_.equals2D(y))return null}}}t.prototype.add.call(this,g,y)}}else if(4===arguments.length){var w=arguments[0],x=arguments[1],S=arguments[2],E=arguments[3],O=1;S>E&&(O=-1);for(var P=S;P!==E;P+=O)e.add(w[P],x);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Vu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Ul),ql=function(){},Wl={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Wl.ForwardComparator.get=function(){return Yl},Wl.BidirectionalComparator.get=function(){return Xl},Wl.coordArrayType.get=function(){return new Array(0).fill(null)},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},ql.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(ql.indexOf(r,e)<0)return r}return null},ql.scroll=function(t,e){var n=ql.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);al.arraycopy(t,n,r,0,t.length-n),al.arraycopy(t,0,r,t.length-n,n),al.arraycopy(r,0,t,0,t.length)},ql.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2];if(r===o)return!0;if(null===r||null===o)return!1;if(r.length!==o.length)return!1;for(var s=0;s<r.length;s++)if(0!==i.compare(r[s],o[s]))return!1;return!0}},ql.intersection=function(t,e){for(var n=new Gl,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},ql.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},ql.removeRepeatedPoints=function(t){return ql.hasRepeatedPoints(t)?new Gl(t,!1).toCoordinateArray():t},ql.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var o=t[r];t[r]=t[e-r],t[e-r]=o}},ql.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var o=0,i=0;i<t.length;i++)null!==t[i]&&(r[o++]=t[i]);return r},ql.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Vu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],o=arguments[1],i=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)i[s+u]=new Vu(r[o+u])},ql.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=e[t.length-n-1];if(0!==r.compareTo(o))return!1}return!0},ql.envelope=function(t){for(var e=new ll,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},ql.toCoordinateArray=function(t){return t.toArray(ql.coordArrayType)},ql.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},ql.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},ql.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},ql.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},ql.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},ql.extract=function(t,e,n){e=Xu.clamp(e,0,t.length);var r=(n=Xu.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var o=new Array(r).fill(null);if(0===r)return o;for(var i=0,s=e;s<=n;s++)o[i++]=t[s];return o},Object.defineProperties(ql,Wl);var Yl=function(){};Yl.prototype.compare=function(t,e){return ql.compare(t,e)},Yl.prototype.interfaces_=function(){return[Bu]},Yl.prototype.getClass=function(){return Yl};var Xl=function(){};Xl.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var o=ql.compare(n,r);return ql.isEqualReversed(n,r)?0:o},Xl.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var o=ql.increasingDirection(n),i=ql.increasingDirection(r),s=o>0?0:n.length-1,a=i>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=o,a+=i}return 0},Xl.prototype.interfaces_=function(){return[Bu]},Xl.prototype.getClass=function(){return Xl};var $l=function(){};$l.prototype.get=function(){},$l.prototype.put=function(){},$l.prototype.size=function(){},$l.prototype.values=function(){},$l.prototype.entrySet=function(){};var Kl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}($l);function Zl(t){this.message=t||""}function Jl(){}Zl.prototype=new Error,Zl.prototype.name="OperationNotSupported",Jl.prototype=new jl,Jl.prototype.contains=function(){};var Ql=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof jl&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new tc(this)},e}(Jl),tc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Vl;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Zl},e}(Bl);function ec(t){return null===t?0:t.color}function nc(t){return null===t?null:t.parent}function rc(t,e){null!==t&&(t.color=e)}function oc(t){return null===t?null:t.left}function ic(t){return null===t?null:t.right}function sc(){this.root_=null,this.size_=0}sc.prototype=new Kl,sc.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},sc.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,o=this.root_;do{if(n=o,(r=t.compareTo(o.key))<0)o=o.left;else{if(!(r>0)){var i=o.value;return o.value=e,i}o=o.right}}while(null!==o);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},sc.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(nc(t)===oc(nc(nc(t)))){var n=ic(nc(nc(t)));1===ec(n)?(rc(nc(t),0),rc(n,0),rc(nc(nc(t)),1),t=nc(nc(t))):(t===ic(nc(t))&&(t=nc(t),e.rotateLeft(t)),rc(nc(t),0),rc(nc(nc(t)),1),e.rotateRight(nc(nc(t))))}else{var r=oc(nc(nc(t)));1===ec(r)?(rc(nc(t),0),rc(r,0),rc(nc(nc(t)),1),t=nc(nc(t))):(t===oc(nc(t))&&(t=nc(t),e.rotateRight(t)),rc(nc(t),0),rc(nc(nc(t)),1),e.rotateLeft(nc(nc(t))))}this.root_.color=0},sc.prototype.values=function(){var t=new Ul,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=sc.successor(e));)t.add(e.value);return t},sc.prototype.entrySet=function(){var t=new Ql,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=sc.successor(e));)t.add(e);return t},sc.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},sc.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},sc.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},sc.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},sc.prototype.size=function(){return this.size_};var ac=function(){};function uc(){}function lc(){this.array_=[],arguments[0]instanceof jl&&this.addAll(arguments[0])}ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},uc.prototype=new Jl,lc.prototype=new uc,lc.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},lc.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},lc.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},lc.prototype.remove=function(t){throw new Zl},lc.prototype.size=function(){return this.array_.length},lc.prototype.isEmpty=function(){return 0===this.array_.length},lc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},lc.prototype.iterator=function(){return new cc(this)};var cc=function(t){this.treeSet_=t,this.position_=0};cc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Vl;return this.treeSet_.array_[this.position_++]},cc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},cc.prototype.remove=function(){throw new Zl};var pc=function(){};pc.sort=function(){var t,e,n,r,o=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},o.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},o.sort(r);else if(3===arguments.length){(e=o.slice(arguments[1],arguments[2])).sort();var i=o.slice(0,arguments[1]).concat(e,o.slice(arguments[2],o.length));for(o.splice(0,o.length),t=0;t<i.length;t++)o.push(i[t])}else if(4===arguments.length)for(e=o.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),i=o.slice(0,arguments[1]).concat(e,o.slice(arguments[2],o.length)),o.splice(0,o.length),t=0;t<i.length;t++)o.push(i[t])},pc.asList=function(t){for(var e=new Ul,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var fc=function(){},hc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};hc.P.get=function(){return 0},hc.L.get=function(){return 1},hc.A.get=function(){return 2},hc.FALSE.get=function(){return-1},hc.TRUE.get=function(){return-2},hc.DONTCARE.get=function(){return-3},hc.SYM_FALSE.get=function(){return"F"},hc.SYM_TRUE.get=function(){return"T"},hc.SYM_DONTCARE.get=function(){return"*"},hc.SYM_P.get=function(){return"0"},hc.SYM_L.get=function(){return"1"},hc.SYM_A.get=function(){return"2"},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc},fc.toDimensionSymbol=function(t){switch(t){case fc.FALSE:return fc.SYM_FALSE;case fc.TRUE:return fc.SYM_TRUE;case fc.DONTCARE:return fc.SYM_DONTCARE;case fc.P:return fc.SYM_P;case fc.L:return fc.SYM_L;case fc.A:return fc.SYM_A}throw new ku("Unknown dimension value: "+t)},fc.toDimensionValue=function(t){switch(Ju.toUpperCase(t)){case fc.SYM_FALSE:return fc.FALSE;case fc.SYM_TRUE:return fc.TRUE;case fc.SYM_DONTCARE:return fc.DONTCARE;case fc.SYM_P:return fc.P;case fc.SYM_L:return fc.L;case fc.SYM_A:return fc.A}throw new ku("Unknown dimension symbol: "+t)},Object.defineProperties(fc,hc);var dc=function(){};dc.prototype.filter=function(t){},dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc};var gc=function(){};gc.prototype.filter=function(t,e){},gc.prototype.isDone=function(){},gc.prototype.isGeometryChanged=function(){},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc};var yc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new ku("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new ll,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),o=0;o<r.length;o++)t[++e]=r[o];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var o=n;if(this._geometries.length!==o._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!e._geometries[i].equalsExact(o._geometries[i],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();pc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=fc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=fc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new lc(pc.asList(this._geometries)),r=new lc(pc.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var o=arguments[0],i=arguments[1],s=o,a=this.getNumGeometries(),u=s.getNumGeometries(),l=0;l<a&&l<u;){var c=t.getGeometryN(l),p=s.getGeometryN(l),f=c.compareToSameClass(p,i);if(0!==f)return f;l++}return l<a?1:l<u?-1:0}},e.prototype.apply=function(){var t=this;if(Yu(arguments[0],Rl))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(Yu(arguments[0],gc)){var r=arguments[0];if(0===this._geometries.length)return null;for(var o=0;o<this._geometries.length&&(t._geometries[o].apply(r),!r.isDone());o++);r.isGeometryChanged()&&this.geometryChanged()}else if(Yu(arguments[0],dc)){var i=arguments[0];i.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(i)}else if(Yu(arguments[0],Pl)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),vl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Cl),mc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Cl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?fc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new vc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[ac]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(yc),vc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Ml.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};vc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},vc.prototype.getBoundary=function(){return this._geom instanceof Tc?this.boundaryLineString(this._geom):this._geom instanceof mc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},vc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},vc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},vc.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new Ul;this._endpointMap=new sc;for(var r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r);0!==o.getNumPoints()&&(e.addEndpoint(o.getCoordinateN(0)),e.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var s=i.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return ql.toCoordinateArray(n)},vc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new bc,this._endpointMap.put(t,e)),e.count++},vc.prototype.interfaces_=function(){return[]},vc.prototype.getClass=function(){return vc},vc.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new vc(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],o=new vc(n,r);return o.getBoundary()}};var bc=function(){this.count=null};function _c(){}function wc(){}bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc};var xc=function(){};function Sc(){}function Ec(){}function Oc(){}var Pc=function(){},Cc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Pc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Pc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Sc,n=new _c(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],o=arguments[1],i="",s=new wc(Pc.getStackTrace(r)),a=new Oc(s),u=0;u<o;u++)try{i+=a.readLine()+Pc.NEWLINE}catch(t){if(!(t instanceof Ec))throw t;vl.shouldNeverReachHere()}return i}},Pc.split=function(t,e){for(var n=e.length,r=new Ul,o=""+t,i=o.indexOf(e);i>=0;){var s=o.substring(0,i);r.add(s),i=(o=o.substring(i+n)).indexOf(e)}o.length>0&&r.add(o);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Pc.toString=function(){if(1===arguments.length){var t=arguments[0];return Pc.SIMPLE_ORDINATE_FORMAT.format(t)}},Pc.spaces=function(t){return Pc.chars(" ",t)},Cc.NEWLINE.get=function(){return al.getProperty("line.separator")},Cc.SIMPLE_ORDINATE_FORMAT.get=function(){return new xc("0.#")},Object.defineProperties(Pc,Cc);var Ic=function(){};Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Ic.copyCoord=function(t,e,n,r){for(var o=Math.min(t.getDimension(),n.getDimension()),i=0;i<o;i++)n.setOrdinate(r,i,t.getOrdinate(e,i))},Ic.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,rl.X)===t.getOrdinate(e-1,rl.X)&&t.getOrdinate(0,rl.Y)===t.getOrdinate(e-1,rl.Y)},Ic.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),o=0;o<n;o++)for(var i=0;i<r;i++){var s=t.getOrdinate(o,i),a=e.getOrdinate(o,i);if(!(t.getOrdinate(o,i)===e.getOrdinate(o,i)||Lu.isNaN(s)&&Lu.isNaN(a)))return!1}return!0},Ic.extend=function(t,e,n){var r=t.create(n,e.getDimension()),o=e.size();if(Ic.copy(e,0,r,0,o),o>0)for(var i=o;i<n;i++)Ic.copy(e,o-1,r,i,1);return r},Ic.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Ic.swap(t,r,e-r)},Ic.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var o=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,o)}},Ic.copy=function(t,e,n,r,o){for(var i=0;i<o;i++)Ic.copyCoord(t,e+i,n,r+i)},Ic.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Ku;r.append("(");for(var o=0;o<e;o++){o>0&&r.append(" ");for(var i=0;i<n;i++)i>0&&r.append(","),r.append(Pc.toString(t.getOrdinate(o,i)))}return r.append(")"),r.toString()}},Ic.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ic.createClosedRing(t,e,4):e.getOrdinate(0,rl.X)===e.getOrdinate(n-1,rl.X)&&e.getOrdinate(0,rl.Y)===e.getOrdinate(n-1,rl.Y)?e:Ic.createClosedRing(t,e,n+1)},Ic.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),o=e.size();Ic.copy(e,0,r,0,o);for(var i=o;i<n;i++)Ic.copy(e,0,r,i,1);return r};var Tc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new ll:this._points.expandEnvelope(new ll)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var o=n;if(this._points.size()!==o._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!e.equal(e._points.getCoordinate(i),o._points.getCoordinate(i),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&Ic.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?fc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return El.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ic.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,r=0,o=0;r<this._points.size()&&o<n._points.size();){var i=t._points.getCoordinate(r).compareTo(n._points.getCoordinate(o));if(0!==i)return i;r++,o++}return r<this._points.size()?1:o<n._points.size()?-1:0}if(2===arguments.length){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(Yu(arguments[0],Rl))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(Yu(arguments[0],gc)){var r=arguments[0];if(0===this._points.size())return null;for(var o=0;o<this._points.size()&&(r.filter(t._points,o),!r.isDone());o++);r.isGeometryChanged()&&this.geometryChanged()}else if(Yu(arguments[0],dc)){var i=arguments[0];i.filter(this)}else if(Yu(arguments[0],Pl)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return new vc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new ku("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[ac]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Cl),Rc=function(){};Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc};var Mc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new ll;var t=new ll;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return fc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],o=n;return r.compare(this._coordinates,o._coordinates)}},e.prototype.apply=function(){if(Yu(arguments[0],Rl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Yu(arguments[0],gc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(Yu(arguments[0],dc)){var n=arguments[0];n.filter(this)}else if(Yu(arguments[0],Pl)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),vl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Rc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Cl),Ac=function(){};Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var Nc=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new ku("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new ku("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var o=0;o<this._holes.length;o++)for(var i=this._holes[o].getCoordinates(),s=0;s<i.length;s++)t[++e]=i[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(El.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(El.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var o=t.getY(n);if(o!==e.getMinY()&&o!==e.getMaxY())return!1}for(var i=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==i==(l!==s))return!1;i=u,s=l}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var o=n,i=this._shell,s=o._shell;if(!i.equalsExact(s,r))return!1;if(this._holes.length!==o._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(o._holes[a],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);pc.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var o=new Array(n.getCoordinates().length-1).fill(null);al.arraycopy(n.getCoordinates(),0,o,0,o.length);var i=ql.minCoordinate(n.getCoordinates());ql.scroll(o,i),al.arraycopy(o,0,n.getCoordinates(),0,o.length),n.getCoordinates()[o.length]=o[0],El.isCCW(n.getCoordinates())===r&&ql.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var o=arguments[0],i=arguments[1],s=o,a=this._shell,u=s._shell,l=a.compareToSameClass(u,i);if(0!==l)return l;for(var c=this.getNumInteriorRing(),p=s.getNumInteriorRing(),f=0;f<c&&f<p;){var h=t.getInteriorRingN(f),d=s.getInteriorRingN(f),g=h.compareToSameClass(d,i);if(0!==g)return g;f++}return f<c?1:f<p?-1:0}},e.prototype.apply=function(t){var e=this;if(Yu(t,Rl)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(Yu(t,gc)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(Yu(t,dc))t.filter(this);else if(Yu(t,Pl)){t.filter(this),this._shell.apply(t);for(var o=0;o<this._holes.length;o++)e._holes[o].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Ac]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Cl),kc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Cl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return fc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Rc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(yc),Lc=function(t){function e(e,n){e instanceof Vu&&n instanceof Zc&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Cl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return fc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ic.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new ku("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new ku("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Tc),Dc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Cl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Ul,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ac]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(yc),jc=function(t){this._factory=t||null,this._isUserDataCopied=!1},Fc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};jc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},jc.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},jc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof yc?this.editGeometryCollection(t,e):t instanceof Nc?this.editPolygon(t,e):t instanceof Mc||t instanceof Tc?e.edit(t,this._factory):(vl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},jc.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Ul,o=0;o<n.getNumGeometries();o++){var i=this.edit(n.getGeometryN(o),e);null===i||i.isEmpty()||r.add(i)}return n.getClass()===kc?this._factory.createMultiPoint(r.toArray([])):n.getClass()===mc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===Dc?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},jc.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var o=new Ul,i=0;i<n.getNumInteriorRing();i++){var s=this.edit(n.getInteriorRingN(i),e);null===s||s.isEmpty()||o.add(s)}return this._factory.createPolygon(r,o.toArray([]))},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.GeometryEditorOperation=function(){},Fc.NoOpGeometryOperation.get=function(){return Bc},Fc.CoordinateOperation.get=function(){return zc},Fc.CoordinateSequenceOperation.get=function(){return Vc},Object.defineProperties(jc,Fc);var Bc=function(){};Bc.prototype.edit=function(t,e){return t},Bc.prototype.interfaces_=function(){return[jc.GeometryEditorOperation]},Bc.prototype.getClass=function(){return Bc};var zc=function(){};zc.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Lc?e.createLinearRing(n):t instanceof Tc?e.createLineString(n):t instanceof Mc?n.length>0?e.createPoint(n[0]):e.createPoint():t},zc.prototype.interfaces_=function(){return[jc.GeometryEditorOperation]},zc.prototype.getClass=function(){return zc};var Vc=function(){};Vc.prototype.edit=function(t,e){return t instanceof Lc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Tc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Mc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Vc.prototype.interfaces_=function(){return[jc.GeometryEditorOperation]},Vc.prototype.getClass=function(){return Vc};var Uc=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new Vu}else if(Yu(arguments[0],rl)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)t._coordinates[o]=r.getCoordinateCopy(o)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],s=arguments[1];this._coordinates=i,this._dimension=s,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new Vu}},Hc={serialVersionUID:{configurable:!0}};Uc.prototype.setOrdinate=function(t,e,n){switch(e){case rl.X:this._coordinates[t].x=n;break;case rl.Y:this._coordinates[t].y=n;break;case rl.Z:this._coordinates[t].z=n;break;default:throw new ku("invalid ordinateIndex")}},Uc.prototype.size=function(){return this._coordinates.length},Uc.prototype.getOrdinate=function(t,e){switch(e){case rl.X:return this._coordinates[t].x;case rl.Y:return this._coordinates[t].y;case rl.Z:return this._coordinates[t].z}return Lu.NaN},Uc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Uc.prototype.getCoordinateCopy=function(t){return new Vu(this._coordinates[t])},Uc.prototype.getDimension=function(){return this._dimension},Uc.prototype.getX=function(t){return this._coordinates[t].x},Uc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Uc(t,this._dimension)},Uc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Uc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Uc(t,this._dimension)},Uc.prototype.toString=function(){if(this._coordinates.length>0){var t=new Ku(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Uc.prototype.getY=function(t){return this._coordinates[t].y},Uc.prototype.toCoordinateArray=function(){return this._coordinates},Uc.prototype.interfaces_=function(){return[rl,zu]},Uc.prototype.getClass=function(){return Uc},Hc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Uc,Hc);var Gc=function(){},qc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Gc.prototype.readResolve=function(){return Gc.instance()},Gc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Uc(t)}if(Yu(arguments[0],rl)){var e=arguments[0];return new Uc(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Uc(n):new Uc(n,r)}},Gc.prototype.interfaces_=function(){return[Gu,zu]},Gc.prototype.getClass=function(){return Gc},Gc.instance=function(){return Gc.instanceObject},qc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},qc.instanceObject.get=function(){return new Gc},Object.defineProperties(Gc,qc);var Wc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Ul,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Ql;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}($l),Yc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof $c){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Xc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Yc.prototype.equals=function(t){if(!(t instanceof Yc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Yc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Zu(n).compareTo(new Zu(r))},Yc.prototype.getScale=function(){return this._scale},Yc.prototype.isFloating=function(){return this._modelType===Yc.FLOATING||this._modelType===Yc.FLOATING_SINGLE},Yc.prototype.getType=function(){return this._modelType},Yc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Yc.FLOATING?t="Floating":this._modelType===Yc.FLOATING_SINGLE?t="Floating-Single":this._modelType===Yc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Yc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Lu.isNaN(t)||this._modelType===Yc.FLOATING_SINGLE?t:this._modelType===Yc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Vu){var e=arguments[0];if(this._modelType===Yc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Yc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Yc.FLOATING?t=16:this._modelType===Yc.FLOATING_SINGLE?t=6:this._modelType===Yc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Yc.prototype.setScale=function(t){this._scale=Math.abs(t)},Yc.prototype.interfaces_=function(){return[zu,ju]},Yc.prototype.getClass=function(){return Yc},Yc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Xc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Xc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Yc,Xc);var $c=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Kc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};$c.prototype.readResolve=function(){return $c.nameToTypeMap.get(this._name)},$c.prototype.toString=function(){return this._name},$c.prototype.interfaces_=function(){return[zu]},$c.prototype.getClass=function(){return $c},Kc.serialVersionUID.get=function(){return-552860263173159e4},Kc.nameToTypeMap.get=function(){return new Wc},Object.defineProperties($c,Kc),Yc.Type=$c,Yc.FIXED=new $c("FIXED"),Yc.FLOATING=new $c("FLOATING"),Yc.FLOATING_SINGLE=new $c("FLOATING SINGLE");var Zc=function t(){this._precisionModel=new Yc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Yu(arguments[0],Gu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Yc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Jc={serialVersionUID:{configurable:!0}};Zc.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Vu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Vu(t.getMinX(),t.getMinY()),new Vu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Vu(t.getMinX(),t.getMinY()),new Vu(t.getMinX(),t.getMaxY()),new Vu(t.getMaxX(),t.getMaxY()),new Vu(t.getMaxX(),t.getMinY()),new Vu(t.getMinX(),t.getMinY())]),null)},Zc.prototype.createLineString=function(t){return t?t instanceof Array?new Tc(this.getCoordinateSequenceFactory().create(t),this):Yu(t,rl)?new Tc(t,this):void 0:new Tc(this.getCoordinateSequenceFactory().create([]),this)},Zc.prototype.createMultiLineString=function(){if(0===arguments.length)return new mc(null,this);if(1===arguments.length){var t=arguments[0];return new mc(t,this)}},Zc.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,o=t.iterator();o.hasNext();){var i=o.next(),s=i.getClass();null===e&&(e=s),s!==e&&(n=!0),i.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Zc.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Nc)return this.createMultiPolygon(Zc.toPolygonArray(t));if(a instanceof Tc)return this.createMultiLineString(Zc.toLineStringArray(t));if(a instanceof Mc)return this.createMultiPoint(Zc.toPointArray(t));vl.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Zc.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Zc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Vu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Yu(arguments[0],rl)){var e=arguments[0];return new Mc(e,this)}}},Zc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Zc.prototype.createPolygon=function(){if(0===arguments.length)return new Nc(null,null,this);if(1===arguments.length){if(Yu(arguments[0],rl)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Lc){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];return new Nc(r,o,this)}},Zc.prototype.getSRID=function(){return this._SRID},Zc.prototype.createGeometryCollection=function(){if(0===arguments.length)return new yc(null,this);if(1===arguments.length){var t=arguments[0];return new yc(t,this)}},Zc.prototype.createGeometry=function(t){return new jc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Zc.prototype.getPrecisionModel=function(){return this._precisionModel},Zc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Yu(arguments[0],rl)){var e=arguments[0];return new Lc(e,this)}}},Zc.prototype.createMultiPolygon=function(){if(0===arguments.length)return new Dc(null,this);if(1===arguments.length){var t=arguments[0];return new Dc(t,this)}},Zc.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new kc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new kc(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(Yu(arguments[0],rl)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(r.size()).fill(null),i=0;i<r.size();i++){var s=t.getCoordinateSequenceFactory().create(1,r.getDimension());Ic.copy(r,i,s,0,1),o[i]=t.createPoint(s)}return this.createMultiPoint(o)}}},Zc.prototype.interfaces_=function(){return[zu]},Zc.prototype.getClass=function(){return Zc},Zc.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.getDefaultCoordinateSequenceFactory=function(){return Gc.instance()},Zc.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Jc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Zc,Jc);var Qc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],tp=function(t){this.geometryFactory=t||new Zc};tp.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!ep[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Qc.indexOf(n)?ep[n].apply(this,[e.coordinates]):"GeometryCollection"===n?ep[n].apply(this,[e.geometries]):ep[n].apply(this,[e])},tp.prototype.write=function(t){var e=t.getGeometryType();if(!np[e])throw new Error("Geometry is not supported");return np[e].apply(this,[t])};var ep={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!ep[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ep.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Vu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Vu(t[0],t[1]),new Vu(t[2],t[1]),new Vu(t[2],t[3]),new Vu(t[0],t[3]),new Vu(t[0],t[1])])},Point:function(t){var e=new Vu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ep.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ep.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ep.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ep.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],o=1;o<t.length;++o){var i=t[o],s=ep.coordinates.apply(this,[i]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(ep.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},np={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:np.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],o=np.Point.apply(this,[r]);e.push(o.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var o=n[r];e.push(np.coordinate.apply(this,[o]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],o=np.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=np.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var o=t._holes[r],i=np.LineString.apply(this,[o]);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],o=np.Polygon.apply(this,[r]);e.push(o.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],o=r.getGeometryType();e.push(np[o].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},rp=function(t){this.geometryFactory=t||new Zc,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new tp(this.geometryFactory)};rp.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Yc.FIXED&&this.reducePrecision(e),e},rp.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var op=function(){this.parser=new tp(this.geometryFactory)};op.prototype.write=function(t){return this.parser.write(t)};var ip=function(){},sp={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function ap(t){this.message=t||""}function up(){this.array_=[]}ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.opposite=function(t){return t===ip.LEFT?ip.RIGHT:t===ip.RIGHT?ip.LEFT:t},sp.ON.get=function(){return 0},sp.LEFT.get=function(){return 1},sp.RIGHT.get=function(){return 2},Object.defineProperties(ip,sp),ap.prototype=new Error,ap.prototype.name="EmptyStackException",up.prototype=new zl,up.prototype.add=function(t){return this.array_.push(t),!0},up.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},up.prototype.push=function(t){return this.array_.push(t),t},up.prototype.pop=function(t){if(0===this.array_.length)throw new ap;return this.array_.pop()},up.prototype.peek=function(){if(0===this.array_.length)throw new ap;return this.array_[this.array_.length-1]},up.prototype.empty=function(){return 0===this.array_.length},up.prototype.isEmpty=function(){return this.empty()},up.prototype.search=function(t){return this.array_.indexOf(t)},up.prototype.size=function(){return this.array_.length},up.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var lp=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};lp.prototype.getCoordinate=function(){return this._minCoord},lp.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},lp.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();vl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=El.computeOrientation(this._minCoord,n,e),o=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===El.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===El.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)},lp.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=ip.LEFT;return n[e].y<n[e+1].y&&(r=ip.RIGHT),r},lp.prototype.getEdge=function(){return this._orientedDe},lp.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},lp.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},lp.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}vl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ip.LEFT&&(this._orientedDe=this._minDe.getSym())},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp};var cp=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new Vu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(yl),pp=function(){this.array_=[]};pp.prototype.addLast=function(t){this.array_.push(t)},pp.prototype.removeFirst=function(){return this.array_.shift()},pp.prototype.isEmpty=function(){return 0===this.array_.length};var fp=function(){this._finder=null,this._dirEdgeList=new Ul,this._nodes=new Ul,this._rightMostCoord=null,this._env=null,this._finder=new lp};fp.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},fp.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},fp.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new cp("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var o=t.getEdges().iterator();o.hasNext();){var i=o.next();i.setVisited(!0),this.copySymDepths(i)}},fp.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(ip.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},fp.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},fp.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(ip.RIGHT)>=1&&e.getDepth(ip.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},fp.prototype.computeDepths=function(t){var e=new Ql,n=new pp,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var o=n.removeFirst();e.add(o),this.computeNodeDepth(o);for(var i=o.getEdges().iterator();i.hasNext();){var s=i.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},fp.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},fp.prototype.getEnvelope=function(){if(null===this._env){for(var t=new ll,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},fp.prototype.addReachable=function(t){var e=new up;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},fp.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(ip.LEFT,t.getDepth(ip.RIGHT)),e.setDepth(ip.RIGHT,t.getDepth(ip.LEFT))},fp.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var o=r.getSym().getNode();o.isVisited()||e.push(o)}},fp.prototype.getNodes=function(){return this._nodes},fp.prototype.getDirectedEdges=function(){return this._dirEdgeList},fp.prototype.interfaces_=function(){return[ju]},fp.prototype.getClass=function(){return fp};var hp=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[ip.ON]=r}else if(arguments[0]instanceof t){var o=arguments[0];if(this.init(o.location.length),null!==o)for(var i=0;i<this.location.length;i++)e.location[i]=o.location[i]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[ip.ON]=s,this.location[ip.LEFT]=a,this.location[ip.RIGHT]=u}};hp.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},hp.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==qu.NONE)return!1;return!0},hp.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===qu.NONE&&(this.location[e]=t)},hp.prototype.isLine=function(){return 1===this.location.length},hp.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[ip.ON]=this.location[ip.ON],e[ip.LEFT]=qu.NONE,e[ip.RIGHT]=qu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===qu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},hp.prototype.getLocations=function(){return this.location},hp.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[ip.LEFT];this.location[ip.LEFT]=this.location[ip.RIGHT],this.location[ip.RIGHT]=t},hp.prototype.toString=function(){var t=new Ku;return this.location.length>1&&t.append(qu.toLocationSymbol(this.location[ip.LEFT])),t.append(qu.toLocationSymbol(this.location[ip.ON])),this.location.length>1&&t.append(qu.toLocationSymbol(this.location[ip.RIGHT])),t.toString()},hp.prototype.setLocations=function(t,e,n){this.location[ip.ON]=t,this.location[ip.LEFT]=e,this.location[ip.RIGHT]=n},hp.prototype.get=function(t){return t<this.location.length?this.location[t]:qu.NONE},hp.prototype.isArea=function(){return this.location.length>1},hp.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===qu.NONE)return!0;return!1},hp.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(ip.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},hp.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(qu.NONE)},hp.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},hp.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp};var dp=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new hp(e),this.elt[1]=new hp(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new hp(n.elt[0]),this.elt[1]=new hp(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.elt[0]=new hp(qu.NONE),this.elt[1]=new hp(qu.NONE),this.elt[r].setLocation(o)}else if(3===arguments.length){var i=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new hp(i,s,a),this.elt[1]=new hp(i,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],p=arguments[3];this.elt[0]=new hp(qu.NONE,qu.NONE,qu.NONE),this.elt[1]=new hp(qu.NONE,qu.NONE,qu.NONE),this.elt[u].setLocations(l,c,p)}};dp.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},dp.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},dp.prototype.isNull=function(t){return this.elt[t].isNull()},dp.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},dp.prototype.isLine=function(t){return this.elt[t].isLine()},dp.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new hp(t.elt[n]):e.elt[n].merge(t.elt[n])},dp.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},dp.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(ip.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},dp.prototype.toString=function(){var t=new Ku;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},dp.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},dp.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},dp.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(ip.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this.elt[n].setLocation(r,o)}},dp.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},dp.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},dp.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new hp(this.elt[t].location[0]))},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.toLineLabel=function(t){for(var e=new dp(qu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var gp=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ul,this._pts=new Ul,this._label=new dp(qu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ul,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};gp.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=El.isCCW(this._ring.getCoordinates())},gp.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},gp.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new cp("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new cp("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var o=n.getLabel();vl.isTrue(o.isArea()),e.mergeLabel(o),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},gp.prototype.getLinearRing=function(){return this._ring},gp.prototype.getCoordinate=function(t){return this._pts.get(t)},gp.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},gp.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var o=1;n&&(o=0);for(var i=o;i<r.length;i++)this._pts.add(r[i])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},gp.prototype.isHole=function(){return this._isHole},gp.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},gp.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!El.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},gp.prototype.addHole=function(t){this._holes.add(t)},gp.prototype.isShell=function(){return null===this._shell},gp.prototype.getLabel=function(){return this._label},gp.prototype.getEdges=function(){return this._edges},gp.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},gp.prototype.getShell=function(){return this._shell},gp.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,ip.RIGHT);if(r===qu.NONE)return null;if(this._label.getLocation(n)===qu.NONE)return this._label.setLocation(n,r),null}},gp.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},gp.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp};var yp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gp),mp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Ul,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new yp(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gp),vp=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};vp.prototype.setVisited=function(t){this._isVisited=t},vp.prototype.setInResult=function(t){this._isInResult=t},vp.prototype.isCovered=function(){return this._isCovered},vp.prototype.isCoveredSet=function(){return this._isCoveredSet},vp.prototype.setLabel=function(t){this._label=t},vp.prototype.getLabel=function(){return this._label},vp.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},vp.prototype.updateIM=function(t){vl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},vp.prototype.isInResult=function(){return this._isInResult},vp.prototype.isVisited=function(){return this._isVisited},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp};var bp=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new dp(0,qu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=qu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==qu.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new dp(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof dp)for(var r=arguments[0],o=0;o<2;o++){var i=t.computeMergedLocation(r,o),s=t._label.getLocation(o);s===qu.NONE&&t._label.setLocation(o,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=qu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case qu.BOUNDARY:n=qu.INTERIOR;break;case qu.INTERIOR:default:n=qu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vp),_p=function(){this.nodeMap=new sc,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};_p.prototype.find=function(t){return this.nodeMap.get(t)},_p.prototype.addNode=function(){if(arguments[0]instanceof Vu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof bp){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},_p.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},_p.prototype.iterator=function(){return this.nodeMap.values().iterator()},_p.prototype.values=function(){return this.nodeMap.values()},_p.prototype.getBoundaryNodes=function(t){for(var e=new Ul,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===qu.BOUNDARY&&e.add(r)}return e},_p.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p};var wp=function(){},xp={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},wp.isNorthern=function(t){return t===wp.NE||t===wp.NW},wp.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},wp.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},wp.isInHalfPlane=function(t,e){return e===wp.SE?t===wp.SE||t===wp.SW:t===e||t===e+1},wp.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new ku("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?wp.NE:wp.SE:e>=0?wp.NW:wp.SW}if(arguments[0]instanceof Vu&&arguments[1]instanceof Vu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new ku("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?wp.NE:wp.SE:r.y>=n.y?wp.NW:wp.SW}},xp.NE.get=function(){return 0},xp.NW.get=function(){return 1},xp.SW.get=function(){return 2},xp.SE.get=function(){return 3},Object.defineProperties(wp,xp);var Sp=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],o=null;this._edge=e,this.init(n,r),this._label=o}else if(4===arguments.length){var i=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=i,this.init(s,a),this._label=u}};Sp.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:El.computeOrientation(t._p0,t._p1,this._p1)},Sp.prototype.getDy=function(){return this._dy},Sp.prototype.getCoordinate=function(){return this._p0},Sp.prototype.setNode=function(t){this._node=t},Sp.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),o=n.substring(r+1);t.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Sp.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Sp.prototype.getDirectedCoordinate=function(){return this._p1},Sp.prototype.getDx=function(){return this._dx},Sp.prototype.getLabel=function(){return this._label},Sp.prototype.getEdge=function(){return this._edge},Sp.prototype.getQuadrant=function(){return this._quadrant},Sp.prototype.getNode=function(){return this._node},Sp.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Sp.prototype.computeLabel=function(t){},Sp.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=wp.quadrant(this._dx,this._dy),vl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Sp.prototype.interfaces_=function(){return[ju]},Sp.prototype.getClass=function(){return Sp};var Ep=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new dp(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new cp("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,ip.LEFT)===qu.INTERIOR&&t._label.getLocation(n,ip.RIGHT)===qu.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[ip.LEFT]+"/"+this._depth[ip.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,qu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,qu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===ip.LEFT&&(r=-1);var o=ip.opposite(t),i=e+n*r;this.setDepth(t,e),this.setDepth(o,i)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===qu.EXTERIOR&&e===qu.INTERIOR?1:t===qu.INTERIOR&&e===qu.EXTERIOR?-1:0},e}(Sp),Op=function(){};Op.prototype.createNode=function(t){return new bp(t,null)},Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op};var Pp=function(){if(this._edges=new Ul,this._nodes=null,this._edgeEndList=new Ul,0===arguments.length)this._nodes=new _p(new Op);else if(1===arguments.length){var t=arguments[0];this._nodes=new _p(t)}};Pp.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Pp.prototype.find=function(t){return this._nodes.find(t)},Pp.prototype.addNode=function(){if(arguments[0]instanceof bp){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Vu){var e=arguments[0];return this._nodes.addNode(e)}},Pp.prototype.getNodeIterator=function(){return this._nodes.iterator()},Pp.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Pp.prototype.debugPrintln=function(t){al.out.println(t)},Pp.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===qu.BOUNDARY},Pp.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Pp.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&El.computeOrientation(t,e,r)===El.COLLINEAR&&wp.quadrant(t,e)===wp.quadrant(n,r)},Pp.prototype.getEdgeEnds=function(){return this._edgeEndList},Pp.prototype.debugPrint=function(t){al.out.print(t)},Pp.prototype.getEdgeIterator=function(){return this._edges.iterator()},Pp.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var o=n._edges.get(r),i=o.getCoordinates();if(n.matchInSameDirection(t,e,i[0],i[1]))return o;if(n.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return o}return null},Pp.prototype.insertEdge=function(t){this._edges.add(t)},Pp.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Pp.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var o=new Ep(r,!0),i=new Ep(r,!1);o.setSym(i),i.setSym(o),e.add(o),e.add(i)}},Pp.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Pp.prototype.getNodes=function(){return this._nodes.values()},Pp.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),o=r.getCoordinates();if(t.equals(o[0])&&e.equals(o[1]))return r}return null},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Pp.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Cp=function(){this._geometryFactory=null,this._shellList=new Ul;var t=arguments[0];this._geometryFactory=t};Cp.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var o=r.next();o.isHole()?n.add(o):e.add(o)}},Cp.prototype.computePolygons=function(t){for(var e=new Ul,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Cp.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var o=this.findEdgeRingContaining(r,t);if(null===o)throw new cp("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(o)}}},Cp.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Ul,o=t.iterator();o.hasNext();){var i=o.next();if(i.getMaxNodeDegree()>2){i.linkDirectedEdgesForMinimalEdgeRings();var s=i.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(i)}return r},Cp.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Cp.prototype.buildMaximalEdgeRings=function(t){for(var e=new Ul,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var o=new mp(r,this._geometryFactory);e.add(o),o.setInResult()}}return e},Cp.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Cp.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Cp.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),o=n.getCoordinateN(0),i=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==i&&(s=i.getLinearRing().getEnvelopeInternal());var p=!1;c.contains(r)&&El.isPointInRing(o,l.getCoordinates())&&(p=!0),p&&(null===i||s.contains(c))&&(i=u)}return i},Cp.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var o=r.next();o.isHole()||(n=o,e++)}return vl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Cp.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Pp.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),o=new Ul,i=this.buildMinimalEdgeRings(r,this._shellList,o);this.sortShellsAndHoles(i,this._shellList,o),this.placeFreeHoles(this._shellList,o)}},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp};var Ip=function(){};Ip.prototype.getBounds=function(){},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};var Tp=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Tp.prototype.getItem=function(){return this._item},Tp.prototype.getBounds=function(){return this._bounds},Tp.prototype.interfaces_=function(){return[Ip,zu]},Tp.prototype.getClass=function(){return Tp};var Rp=function(){this._size=null,this._items=null,this._size=0,this._items=new Ul,this._items.add(null)};Rp.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Rp.prototype.size=function(){return this._size},Rp.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},Rp.prototype.clear=function(){this._size=0,this._items.clear()},Rp.prototype.isEmpty=function(){return 0===this._size},Rp.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp};var Mp=function(){};Mp.prototype.visitItem=function(t){},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp};var Ap=function(){};Ap.prototype.insert=function(t,e){},Ap.prototype.remove=function(t,e){},Ap.prototype.query=function(){},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap};var Np=function(){if(this._childBoundables=new Ul,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},kp={serialVersionUID:{configurable:!0}};Np.prototype.getLevel=function(){return this._level},Np.prototype.size=function(){return this._childBoundables.size()},Np.prototype.getChildBoundables=function(){return this._childBoundables},Np.prototype.addChildBoundable=function(t){vl.isTrue(null===this._bounds),this._childBoundables.add(t)},Np.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Np.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Np.prototype.interfaces_=function(){return[Ip,zu]},Np.prototype.getClass=function(){return Np},kp.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Np,kp);var Lp=function(){};Lp.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Lp.min=function(t){return Lp.sort(t),t.get(0)},Lp.sort=function(t,e){var n=t.toArray();e?pc.sort(n,e):pc.sort(n);for(var r=t.iterator(),o=0,i=n.length;o<i;o++)r.next(),r.set(n[o])},Lp.singletonList=function(t){var e=new Ul;return e.add(t),e};var Dp=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Dp.prototype.expandToQueue=function(t,e){var n=Dp.isComposite(this._boundable1),r=Dp.isComposite(this._boundable2);if(n&&r)return Dp.area(this._boundable1)>Dp.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new ku("neither boundable is composite")},Dp.prototype.isLeaves=function(){return!(Dp.isComposite(this._boundable1)||Dp.isComposite(this._boundable2))},Dp.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Dp.prototype.expand=function(t,e,n,r){for(var o=t.getChildBoundables().iterator();o.hasNext();){var i=o.next(),s=new Dp(i,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},Dp.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Dp.prototype.getDistance=function(){return this._distance},Dp.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Dp.prototype.interfaces_=function(){return[ju]},Dp.prototype.getClass=function(){return Dp},Dp.area=function(t){return t.getBounds().getArea()},Dp.isComposite=function(t){return t instanceof Np};var jp=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Ul,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];vl.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Fp={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};jp.prototype.getNodeCapacity=function(){return this._nodeCapacity},jp.prototype.lastNode=function(t){return t.get(t.size()-1)},jp.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var o=r.next();o instanceof Np?n+=t.size(o):o instanceof Tp&&(n+=1)}return n}},jp.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next();o instanceof Tp&&o.getItem()===e&&(n=o)}return null!==n&&(t.getChildBoundables().remove(n),!0)},jp.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new Ul:e}if(1===arguments.length){for(var n=arguments[0],r=new Ul,o=n.getChildBoundables().iterator();o.hasNext();){var i=o.next();if(i instanceof Np){var s=t.itemsTree(i);null!==s&&r.add(s)}else i instanceof Tp?r.add(i.getItem()):vl.shouldNeverReachHere()}return r.size()<=0?null:r}},jp.prototype.insert=function(t,e){vl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Tp(t,e))},jp.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Ul;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2];if(vl.isTrue(r>-2),o.getLevel()===r)return i.add(o),null;for(var s=o.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Np?t.boundablesAtLevel(r,a,i):(vl.isTrue(a instanceof Tp),-1===r&&i.add(a))}return null}},jp.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new Ul;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,o)}else if(3===arguments.length)if(Yu(arguments[2],Mp)&&arguments[0]instanceof Object&&arguments[1]instanceof Np)for(var i=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),l=0;l<u.size();l++){var c=u.get(l);t.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Np?t.query(i,c,a):c instanceof Tp?a.visitItem(c.getItem()):vl.shouldNeverReachHere())}else if(Yu(arguments[2],zl)&&arguments[0]instanceof Object&&arguments[1]instanceof Np)for(var p=arguments[0],f=arguments[1],h=arguments[2],d=f.getChildBoundables(),g=0;g<d.size();g++){var y=d.get(g);t.getIntersectsOp().intersects(y.getBounds(),p)&&(y instanceof Np?t.query(p,y,h):y instanceof Tp?h.add(y.getItem()):vl.shouldNeverReachHere())}},jp.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},jp.prototype.getRoot=function(){return this.build(),this._root},jp.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2],s=this.removeItem(o,i);if(s)return!0;for(var a=null,u=o.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof Np&&(s=t.remove(r,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(a),s}},jp.prototype.createHigherLevels=function(t,e){vl.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},jp.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var o=r.next();if(o instanceof Np){var i=t.depth(o);i>n&&(n=i)}}return n+1}},jp.prototype.createParentBoundables=function(t,e){var n=this;vl.isTrue(!t.isEmpty());var r=new Ul;r.add(this.createNode(e));var o=new Ul(t);Lp.sort(o,this.getComparator());for(var i=o.iterator();i.hasNext();){var s=i.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},jp.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},jp.prototype.interfaces_=function(){return[zu]},jp.prototype.getClass=function(){return jp},jp.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Fp.IntersectsOp.get=function(){return Bp},Fp.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Fp.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(jp,Fp);var Bp=function(){},zp=function(){};zp.prototype.distance=function(t,e){},zp.prototype.interfaces_=function(){return[]},zp.prototype.getClass=function(){return zp};var Vp=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){vl.isTrue(t.length>0);for(var n=new Ul,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new Up(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),o=t.iterator(),i=0;i<e;i++){r[i]=new Ul;for(var s=0;o.hasNext()&&s<n;){var a=o.next();r[i].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(Yu(arguments[2],Mp)&&arguments[0]instanceof Object&&arguments[1]instanceof Np){var o=arguments[0],i=arguments[1],s=arguments[2];t.prototype.query.call(this,o,i,s)}else if(Yu(arguments[2],zl)&&arguments[0]instanceof Object&&arguments[1]instanceof Np){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){vl.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),o=new Ul(t);Lp.sort(o,e.xComparator);var i=this.verticalSlices(o,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(i,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Yu(arguments[0],zp)){var t=arguments[0],n=new Dp(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Dp){var r=arguments[0];return this.nearestNeighbour(r,Lu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Yu(arguments[1],zp)){var o=arguments[0],i=arguments[1],s=new Dp(this.getRoot(),o.getRoot(),i);return this.nearestNeighbour(s)}if(arguments[0]instanceof Dp&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=u,c=null,p=new Rp;for(p.add(a);!p.isEmpty()&&l>0;){var f=p.poll(),h=f.getDistance();if(h>=l)break;f.isLeaves()?(l=h,c=f):f.expandToQueue(p,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=new Tp(d,g),v=new Dp(this.getRoot(),m,y);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[Ap,zu]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Up},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Bu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Bu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(jp),Up=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new ll(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Np),Hp=function(){};Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp},Hp.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Hp.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Hp.relativeSign(e.x,n.x),o=Hp.relativeSign(e.y,n.y);switch(t){case 0:return Hp.compareValue(r,o);case 1:return Hp.compareValue(o,r);case 2:return Hp.compareValue(o,-r);case 3:return Hp.compareValue(-r,o);case 4:return Hp.compareValue(-r,-o);case 5:return Hp.compareValue(-o,-r);case 6:return Hp.compareValue(-o,r);case 7:return Hp.compareValue(r,-o)}return vl.shouldNeverReachHere("invalid octant value"),0},Hp.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Gp=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new Vu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Gp.prototype.getCoordinate=function(){return this.coord},Gp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Gp.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Hp.compare(this._segmentOctant,this.coord,e.coord)},Gp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Gp.prototype.isInterior=function(){return this._isInterior},Gp.prototype.interfaces_=function(){return[ju]},Gp.prototype.getClass=function(){return Gp};var qp=function(){this._nodeMap=new sc,this._edge=null;var t=arguments[0];this._edge=t};qp.prototype.getSplitCoordinates=function(){var t=new Gl;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},qp.prototype.addCollapsedNodes=function(){var t=new Ul;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},qp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},qp.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Zu(e+1))}},qp.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(r);n.add(new Vu(t.coord),!1);for(var i=t.segmentIndex+1;i<=e.segmentIndex;i++)n.add(this._edge.getCoordinate(i));o&&n.add(new Vu(e.coord))},qp.prototype.iterator=function(){return this._nodeMap.values().iterator()},qp.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),o=this.createSplitEdge(n,r);t.add(o),n=r}},qp.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},qp.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var o=n.next();this.findCollapseIndex(r,o,e)&&t.add(new Zu(e[0])),r=o}},qp.prototype.getEdge=function(){return this._edge},qp.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},qp.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(r);o||n--;var i=new Array(n).fill(null),s=0;i[s++]=new Vu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)i[s++]=this._edge.getCoordinate(a);return o&&(i[s]=new Vu(e.coord)),new $p(i,this._edge.getData())},qp.prototype.add=function(t,e){var n=new Gp(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(vl.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},qp.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new yl("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),o=r[r.length-1];if(!o.equals2D(e[e.length-1]))throw new yl("bad split edge end point at "+o)},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp};var Wp=function(){};Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp},Wp.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new ku("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof Vu&&arguments[1]instanceof Vu){var o=arguments[0],i=arguments[1],s=i.x-o.x,a=i.y-o.y;if(0===s&&0===a)throw new ku("Cannot compute the octant for two identical points "+o);return Wp.octant(s,a)}};var Yp=function(){};Yp.prototype.getCoordinates=function(){},Yp.prototype.size=function(){},Yp.prototype.getCoordinate=function(t){},Yp.prototype.isClosed=function(){},Yp.prototype.setData=function(t){},Yp.prototype.getData=function(){},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp};var Xp=function(){};Xp.prototype.addIntersection=function(t,e){},Xp.prototype.interfaces_=function(){return[Yp]},Xp.prototype.getClass=function(){return Xp};var $p=function(){this._nodeList=new qp(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};$p.prototype.getCoordinates=function(){return this._pts},$p.prototype.size=function(){return this._pts.length},$p.prototype.getCoordinate=function(t){return this._pts[t]},$p.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},$p.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},$p.prototype.setData=function(t){this._data=t},$p.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Wp.octant(t,e)},$p.prototype.getData=function(){return this._data},$p.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[3],i=new Vu(n.getIntersection(o));this.addIntersection(i,r)}},$p.prototype.toString=function(){return gl.toLineString(new Uc(this._pts))},$p.prototype.getNodeList=function(){return this._nodeList},$p.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var o=this._pts[r];t.equals2D(o)&&(n=r)}return this._nodeList.add(t,n)},$p.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},$p.prototype.interfaces_=function(){return[Xp]},$p.prototype.getClass=function(){return $p},$p.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Ul;return $p.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],o=n.iterator();o.hasNext();){var i=o.next();i.getNodeList().addSplitEdges(r)}};var Kp=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Vu,this.p1=new Vu;else if(1===arguments.length){var t=arguments[0];this.p0=new Vu(t.p0),this.p1=new Vu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],o=arguments[3];this.p0=new Vu(e,n),this.p1=new Vu(r,o)}},Zp={serialVersionUID:{configurable:!0}};Kp.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Kp.prototype.orientationIndex=function(){if(arguments[0]instanceof Kp){var t=arguments[0],e=El.orientationIndex(this.p0,this.p1,t.p0),n=El.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Vu){var r=arguments[0];return El.orientationIndex(this.p0,this.p1,r)}},Kp.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Kp.prototype.isVertical=function(){return this.p0.x===this.p1.x},Kp.prototype.equals=function(t){if(!(t instanceof Kp))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Kp.prototype.intersection=function(t){var e=new wl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Kp.prototype.project=function(){if(arguments[0]instanceof Vu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Vu(t);var e=this.projectionFactor(t),n=new Vu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Kp){var r=arguments[0],o=this.projectionFactor(r.p0),i=this.projectionFactor(r.p1);if(o>=1&&i>=1)return null;if(o<=0&&i<=0)return null;var s=this.project(r.p0);o<0&&(s=this.p0),o>1&&(s=this.p1);var a=this.project(r.p1);return i<0&&(a=this.p0),i>1&&(a=this.p1),new Kp(s,a)}},Kp.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Kp.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Kp.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Kp.prototype.distancePerpendicular=function(t){return El.distancePointLinePerpendicular(t,this.p0,this.p1)},Kp.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Kp.prototype.midPoint=function(){return Kp.midPoint(this.p0,this.p1)},Kp.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?Lu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Kp.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=Lu.MAX_VALUE,o=null,i=this.closestPoint(t.p0);r=i.distance(t.p0),n[0]=i,n[1]=t.p0;var s=this.closestPoint(t.p1);(o=s.distance(t.p1))<r&&(r=o,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(o=a.distance(this.p0))<r&&(r=o,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(o=u.distance(this.p1))<r&&(r=o,n[0]=this.p1,n[1]=u),n},Kp.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Kp.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Kp.prototype.getLength=function(){return this.p0.distance(this.p1)},Kp.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Kp.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Kp.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Kp.prototype.lineIntersection=function(t){try{return ul.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof sl))throw t}return null},Kp.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Kp.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,s=Math.sqrt(o*o+i*i),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*o/s,u=e*i/s}return new Vu(n-u,r+a)},Kp.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Kp.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Lu.isNaN(e))&&(e=1),e},Kp.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Kp.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Kp.prototype.distance=function(){if(arguments[0]instanceof Kp){var t=arguments[0];return El.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Vu){var e=arguments[0];return El.distancePointLine(e,this.p0,this.p1)}},Kp.prototype.pointAlong=function(t){var e=new Vu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Kp.prototype.hashCode=function(){var t=Lu.doubleToLongBits(this.p0.x);t^=31*Lu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Lu.doubleToLongBits(this.p1.x);return n^=31*Lu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Kp.prototype.interfaces_=function(){return[ju,zu]},Kp.prototype.getClass=function(){return Kp},Kp.midPoint=function(t,e){return new Vu((t.x+e.x)/2,(t.y+e.y)/2)},Zp.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Kp,Zp);var Jp=function(){this.tempEnv1=new ll,this.tempEnv2=new ll,this._overlapSeg1=new Kp,this._overlapSeg2=new Kp};Jp.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var Qp=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};Qp.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Qp.prototype.computeSelect=function(t,e,n,r){var o=this._pts[e],i=this._pts[n];if(r.tempEnv1.init(o,i),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},Qp.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Qp.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Qp.prototype.setId=function(t){this._id=t},Qp.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Qp.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new ll(t,e)}return this._env},Qp.prototype.getEndIndex=function(){return this._end},Qp.prototype.getStartIndex=function(){return this._start},Qp.prototype.getContext=function(){return this._context},Qp.prototype.getId=function(){return this._id},Qp.prototype.computeOverlapsInternal=function(t,e,n,r,o,i){var s=this._pts[t],a=this._pts[e],u=n._pts[r],l=n._pts[o];if(e-t==1&&o-r==1)return i.overlap(this,t,n,r),null;if(i.tempEnv1.init(s,a),i.tempEnv2.init(u,l),!i.tempEnv1.intersects(i.tempEnv2))return null;var c=Math.trunc((t+e)/2),p=Math.trunc((r+o)/2);t<c&&(r<p&&this.computeOverlapsInternal(t,c,n,r,p,i),p<o&&this.computeOverlapsInternal(t,c,n,p,o,i)),c<e&&(r<p&&this.computeOverlapsInternal(c,e,n,r,p,i),p<o&&this.computeOverlapsInternal(c,e,n,p,o,i))},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp};var tf=function(){};tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf},tf.getChainStartIndices=function(t){var e=0,n=new Ul;n.add(new Zu(e));do{var r=tf.findChainEnd(t,e);n.add(new Zu(r)),e=r}while(e<t.length-1);return tf.toIntArray(n)},tf.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=wp.quadrant(t[n],t[n+1]),o=e+1;o<t.length&&(t[o-1].equals2D(t[o])||wp.quadrant(t[o-1],t[o])===r);)o++;return o-1},tf.getChains=function(){if(1===arguments.length){var t=arguments[0];return tf.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Ul,o=tf.getChainStartIndices(e),i=0;i<o.length-1;i++){var s=new Qp(e,o[i],o[i+1],n);r.add(s)}return r}},tf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var ef=function(){};ef.prototype.computeNodes=function(t){},ef.prototype.getNodedSubstrings=function(){},ef.prototype.interfaces_=function(){return[]},ef.prototype.getClass=function(){return ef};var nf=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};nf.prototype.setSegmentIntersector=function(t){this._segInt=t},nf.prototype.interfaces_=function(){return[ef]},nf.prototype.getClass=function(){return nf};var rf=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Ul,this._index=new Vp,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return $p.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=tf.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new of(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),o=t._index.query(r.getEnvelope()).iterator();o.hasNext();){var i=o.next();if(i.getId()>r.getId()&&(r.computeOverlaps(i,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return of},Object.defineProperties(e,n),e}(nf),of=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],o=arguments[3],i=e.getContext(),s=r.getContext();this._si.processIntersections(i,n,s,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Jp),sf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var o=arguments[0],i=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(o),this.setEndCapStyle(i),this.setJoinStyle(s),this.setMitreLimit(a)}},af={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};sf.prototype.getEndCapStyle=function(){return this._endCapStyle},sf.prototype.isSingleSided=function(){return this._isSingleSided},sf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=sf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=sf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==sf.JOIN_ROUND&&(this._quadrantSegments=sf.DEFAULT_QUADRANT_SEGMENTS)},sf.prototype.getJoinStyle=function(){return this._joinStyle},sf.prototype.setJoinStyle=function(t){this._joinStyle=t},sf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},sf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},sf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},sf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},sf.prototype.getMitreLimit=function(){return this._mitreLimit},sf.prototype.setMitreLimit=function(t){this._mitreLimit=t},sf.prototype.setSingleSided=function(t){this._isSingleSided=t},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},af.CAP_ROUND.get=function(){return 1},af.CAP_FLAT.get=function(){return 2},af.CAP_SQUARE.get=function(){return 3},af.JOIN_ROUND.get=function(){return 1},af.JOIN_MITRE.get=function(){return 2},af.JOIN_BEVEL.get=function(){return 3},af.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},af.DEFAULT_MITRE_LIMIT.get=function(){return 5},af.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(sf,af);var uf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=El.COUNTERCLOCKWISE,this._inputLine=t||null},lf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};uf.prototype.isDeletable=function(t,e,n,r){var o=this._inputLine[t],i=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(o,i,s)&&!!this.isShallow(o,i,s,r)&&this.isShallowSampled(o,i,t,n,r)},uf.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),o=!1;r<this._inputLine.length;){var i=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=uf.DELETE,i=!0,o=!0),e=i?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return o},uf.prototype.isShallowConcavity=function(t,e,n,r){return El.computeOrientation(t,e,n)===this._angleOrientation&&El.distancePointLine(e,t,n)<r},uf.prototype.isShallowSampled=function(t,e,n,r,o){var i=Math.trunc((r-n)/uf.NUM_PTS_TO_CHECK);i<=0&&(i=1);for(var s=n;s<r;s+=i)if(!this.isShallow(t,e,this._inputLine[s],o))return!1;return!0},uf.prototype.isConcave=function(t,e,n){return El.computeOrientation(t,e,n)===this._angleOrientation},uf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=El.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},uf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===uf.DELETE;)e++;return e},uf.prototype.isShallow=function(t,e,n,r){return El.distancePointLine(e,t,n)<r},uf.prototype.collapseLine=function(){for(var t=new Gl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==uf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf},uf.simplify=function(t,e){return new uf(t).simplify(e)},lf.INIT.get=function(){return 0},lf.DELETE.get=function(){return 1},lf.KEEP.get=function(){return 1},lf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(uf,lf);var cf=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ul},pf={COORDINATE_ARRAY_TYPE:{configurable:!0}};cf.prototype.getCoordinates=function(){return this._ptList.toArray(cf.COORDINATE_ARRAY_TYPE)},cf.prototype.setPrecisionModel=function(t){this._precisionModel=t},cf.prototype.addPt=function(t){var e=new Vu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},cf.prototype.revere=function(){},cf.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},cf.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},cf.prototype.toString=function(){return(new Zc).createLineString(this.getCoordinates()).toString()},cf.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Vu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},cf.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},pf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(cf,pf);var ff=function(){},hf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},ff.toDegrees=function(t){return 180*t/Math.PI},ff.normalize=function(t){for(;t>Math.PI;)t-=ff.PI_TIMES_2;for(;t<=-Math.PI;)t+=ff.PI_TIMES_2;return t},ff.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,o=n.y-e.y;return Math.atan2(o,r)}},ff.isAcute=function(t,e,n){var r=t.x-e.x,o=t.y-e.y;return r*(n.x-e.x)+o*(n.y-e.y)>0},ff.isObtuse=function(t,e,n){var r=t.x-e.x,o=t.y-e.y;return r*(n.x-e.x)+o*(n.y-e.y)<0},ff.interiorAngle=function(t,e,n){var r=ff.angle(e,t),o=ff.angle(e,n);return Math.abs(o-r)},ff.normalizePositive=function(t){if(t<0){for(;t<0;)t+=ff.PI_TIMES_2;t>=ff.PI_TIMES_2&&(t=0)}else{for(;t>=ff.PI_TIMES_2;)t-=ff.PI_TIMES_2;t<0&&(t=0)}return t},ff.angleBetween=function(t,e,n){var r=ff.angle(e,t),o=ff.angle(e,n);return ff.diff(r,o)},ff.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},ff.toRadians=function(t){return t*Math.PI/180},ff.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?ff.COUNTERCLOCKWISE:n<0?ff.CLOCKWISE:ff.NONE},ff.angleBetweenOriented=function(t,e,n){var r=ff.angle(e,t),o=ff.angle(e,n)-r;return o<=-Math.PI?o+ff.PI_TIMES_2:o>Math.PI?o-ff.PI_TIMES_2:o},hf.PI_TIMES_2.get=function(){return 2*Math.PI},hf.PI_OVER_2.get=function(){return Math.PI/2},hf.PI_OVER_4.get=function(){return Math.PI/4},hf.COUNTERCLOCKWISE.get=function(){return El.COUNTERCLOCKWISE},hf.CLOCKWISE.get=function(){return El.CLOCKWISE},hf.NONE.get=function(){return El.COLLINEAR},Object.defineProperties(ff,hf);var df=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Kp,this._seg1=new Kp,this._offset0=new Kp,this._offset1=new Kp,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new wl,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===sf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},gf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};df.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=El.computeOrientation(this._s0,this._s1,this._s2),r=n===El.CLOCKWISE&&this._side===ip.LEFT||n===El.COUNTERCLOCKWISE&&this._side===ip.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},df.prototype.addLineEndCap=function(t,e){var n=new Kp(t,e),r=new Kp;this.computeOffsetSegment(n,ip.LEFT,this._distance,r);var o=new Kp;this.computeOffsetSegment(n,ip.RIGHT,this._distance,o);var i=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,i);switch(this._bufParams.getEndCapStyle()){case sf.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,El.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case sf.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(o.p1);break;case sf.CAP_SQUARE:var u=new Vu;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new Vu(r.p1.x+u.x,r.p1.y+u.y),c=new Vu(o.p1.x+u.x,o.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},df.prototype.getCoordinates=function(){return this._segList.getCoordinates()},df.prototype.addMitreJoin=function(t,e,n,r){var o=!0,i=null;try{i=ul.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:i.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(o=!1)}catch(t){if(!(t instanceof sl))throw t;i=new Vu(0,0),o=!1}o?this._segList.addPt(i):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},df.prototype.addFilletCorner=function(t,e,n,r,o){var i=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,i),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===El.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,r,o),this._segList.addPt(n)},df.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*df.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===sf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===sf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},df.prototype.createSquare=function(t){this._segList.addPt(new Vu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Vu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Vu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Vu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},df.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},df.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},df.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},df.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},df.prototype.addLimitedMitreJoin=function(t,e,n,r){var o=this._seg0.p1,i=ff.angle(o,this._seg0.p0),s=ff.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1)/2,a=ff.normalize(i+s),u=ff.normalize(a+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(s)),p=o.x+l*Math.cos(u),f=o.y+l*Math.sin(u),h=new Vu(p,f),d=new Kp(o,h),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===ip.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},df.prototype.computeOffsetSegment=function(t,e,n,r){var o=e===ip.LEFT?1:-1,i=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(i*i+s*s),u=o*n*i/a,l=o*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},df.prototype.addFilletArc=function(t,e,n,r,o){var i=r===El.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new Vu;l<s;){var p=e+i*l;c.x=t.x+o*Math.cos(p),c.y=t.y+o*Math.sin(p),this._segList.addPt(c),l+=u}},df.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*df.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Vu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Vu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},df.prototype.createCircle=function(t){var e=new Vu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},df.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},df.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new cf,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*df.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},df.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===sf.JOIN_BEVEL||this._bufParams.getJoinStyle()===sf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,El.CLOCKWISE,this._distance))},df.prototype.closeRing=function(){this._segList.closeRing()},df.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},gf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},gf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},gf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},gf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(df,gf);var yf=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};yf.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),o=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],o):this.computeOffsetCurve(t,n,o);var i=o.getCoordinates();return n&&ql.reverse(i),i},yf.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var o=uf.simplify(t,-r),i=o.length-1;n.initSideSegments(o[i],o[i-1],ip.LEFT),n.addFirstSegment();for(var s=i-2;s>=0;s--)n.addNextSegment(o[s],!0)}else{n.addSegments(t,!1);var a=uf.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],ip.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},yf.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===ip.RIGHT&&(r=-r);var o=uf.simplify(t,r),i=o.length-1;n.initSideSegments(o[i-1],o[0],e);for(var s=1;s<=i;s++){var a=1!==s;n.addNextSegment(o[s],a)}n.closeRing()},yf.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=uf.simplify(t,n),o=r.length-1;e.initSideSegments(r[0],r[1],ip.LEFT);for(var i=2;i<=o;i++)e.addNextSegment(r[i],!0);e.addLastSegment(),e.addLineEndCap(r[o-1],r[o]);var s=uf.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],ip.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},yf.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case sf.CAP_ROUND:e.createCircle(t);break;case sf.CAP_SQUARE:e.createSquare(t)}},yf.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var o=e<0;this.computeSingleSidedBufferCurve(t,o,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},yf.prototype.getBufferParameters=function(){return this._bufParams},yf.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},yf.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return yf.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},yf.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var o=uf.simplify(t,-r),i=o.length-1;n.initSideSegments(o[i],o[i-1],ip.LEFT),n.addFirstSegment();for(var s=i-2;s>=0;s--)n.addNextSegment(o[s],!0)}else{var a=uf.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],ip.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},yf.prototype.getSegGen=function(t){return new df(this._precisionModel,this._bufParams,t)},yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf},yf.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Vu(t[n]);return e};var mf=function(){this._subgraphs=null,this._seg=new Kp,this._cga=new El;var t=arguments[0];this._subgraphs=t},vf={DepthSegment:{configurable:!0}};mf.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new Ul,r=this._subgraphs.iterator();r.hasNext();){var o=r.next(),i=o.getEnvelope();e.y<i.getMinY()||e.y>i.getMaxY()||t.findStabbedSegments(e,o.getDirectedEdges(),n)}return n}if(3===arguments.length)if(Yu(arguments[2],zl)&&arguments[0]instanceof Vu&&arguments[1]instanceof Ep)for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++){t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var p=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(p<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||El.computeOrientation(t._seg.p0,t._seg.p1,s)===El.RIGHT)){var f=a.getDepth(ip.LEFT);t._seg.p0.equals(l[c])||(f=a.getDepth(ip.RIGHT));var h=new bf(t._seg,f);u.add(h)}}else if(Yu(arguments[2],zl)&&arguments[0]instanceof Vu&&Yu(arguments[1],zl))for(var d=arguments[0],g=arguments[1],y=arguments[2],m=g.iterator();m.hasNext();){var v=m.next();v.isForward()&&t.findStabbedSegments(d,v,y)}},mf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Lp.min(e)._leftDepth},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf},vf.DepthSegment.get=function(){return bf},Object.defineProperties(mf,vf);var bf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Kp(t),this._leftDepth=e};bf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},bf.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},bf.prototype.toString=function(){return this._upwardSeg.toString()},bf.prototype.interfaces_=function(){return[ju]},bf.prototype.getClass=function(){return bf};var _f=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};_f.prototype.area=function(){return _f.area(this.p0,this.p1,this.p2)},_f.prototype.signedArea=function(){return _f.signedArea(this.p0,this.p1,this.p2)},_f.prototype.interpolateZ=function(t){if(null===t)throw new ku("Supplied point is null.");return _f.interpolateZ(t,this.p0,this.p1,this.p2)},_f.prototype.longestSideLength=function(){return _f.longestSideLength(this.p0,this.p1,this.p2)},_f.prototype.isAcute=function(){return _f.isAcute(this.p0,this.p1,this.p2)},_f.prototype.circumcentre=function(){return _f.circumcentre(this.p0,this.p1,this.p2)},_f.prototype.area3D=function(){return _f.area3D(this.p0,this.p1,this.p2)},_f.prototype.centroid=function(){return _f.centroid(this.p0,this.p1,this.p2)},_f.prototype.inCentre=function(){return _f.inCentre(this.p0,this.p1,this.p2)},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f},_f.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},_f.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},_f.det=function(t,e,n,r){return t*r-e*n},_f.interpolateZ=function(t,e,n,r){var o=e.x,i=e.y,s=n.x-o,a=r.x-o,u=n.y-i,l=r.y-i,c=s*l-a*u,p=t.x-o,f=t.y-i,h=(l*p-a*f)/c,d=(-u*p+s*f)/c;return e.z+h*(n.z-e.z)+d*(r.z-e.z)},_f.longestSideLength=function(t,e,n){var r=t.distance(e),o=e.distance(n),i=n.distance(t),s=r;return o>s&&(s=o),i>s&&(s=i),s},_f.isAcute=function(t,e,n){return!!ff.isAcute(t,e,n)&&!!ff.isAcute(e,n,t)&&!!ff.isAcute(n,t,e)},_f.circumcentre=function(t,e,n){var r=n.x,o=n.y,i=t.x-r,s=t.y-o,a=e.x-r,u=e.y-o,l=2*_f.det(i,s,a,u),c=_f.det(s,i*i+s*s,u,a*a+u*u),p=_f.det(i,i*i+s*s,a,a*a+u*u);return new Vu(r-c/l,o+p/l)},_f.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,o=new ul(t.x+n/2,t.y+r/2,1),i=new ul(t.x-r+n/2,t.y+n+r/2,1);return new ul(o,i)},_f.angleBisector=function(t,e,n){var r=e.distance(t),o=r/(r+e.distance(n)),i=n.x-t.x,s=n.y-t.y;return new Vu(t.x+o*i,t.y+o*s)},_f.area3D=function(t,e,n){var r=e.x-t.x,o=e.y-t.y,i=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=o*u-i*a,c=i*s-r*u,p=r*a-o*s,f=l*l+c*c+p*p;return Math.sqrt(f)/2},_f.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,o=(t.y+e.y+n.y)/3;return new Vu(r,o)},_f.inCentre=function(t,e,n){var r=e.distance(n),o=t.distance(n),i=t.distance(e),s=r+o+i,a=(r*t.x+o*e.x+i*n.x)/s,u=(r*t.y+o*e.y+i*n.y)/s;return new Vu(a,u)};var wf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ul;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};wf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,qu.EXTERIOR,qu.INTERIOR)},wf.prototype.addPolygon=function(t){var e=this,n=this._distance,r=ip.LEFT;this._distance<0&&(n=-this._distance,r=ip.RIGHT);var o=t.getExteriorRing(),i=ql.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,n,r,qu.EXTERIOR,qu.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=ql.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,ip.opposite(r),qu.INTERIOR,qu.EXTERIOR)}},wf.prototype.isTriangleErodedCompletely=function(t,e){var n=new _f(t[0],t[1],t[2]),r=n.inCentre();return El.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},wf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=ql.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,qu.EXTERIOR,qu.INTERIOR)},wf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new $p(t,new dp(0,qu.BOUNDARY,e,n));this._curveList.add(r)},wf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},wf.prototype.addPolygonRing=function(t,e,n,r,o){if(0===e&&t.length<Lc.MINIMUM_VALID_SIZE)return null;var i=r,s=o;t.length>=Lc.MINIMUM_VALID_SIZE&&El.isCCW(t)&&(i=o,s=r,n=ip.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,i,s)},wf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Nc?this.addPolygon(t):t instanceof Tc?this.addLineString(t):t instanceof Mc?this.addPoint(t):(t instanceof kc||t instanceof mc||t instanceof Dc||t instanceof yc)&&this.addCollection(t)},wf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),o=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>o},wf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf};var xf=function(){};xf.prototype.locate=function(t){},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var Sf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Sf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Sf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Vl;var t=this._parent.getGeometryN(this._index++);return t instanceof yc?(this._subcollectionIterator=new Sf(t),this._subcollectionIterator.next()):t},Sf.prototype.remove=function(){throw new Error(this.getClass().getName())},Sf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Sf.prototype.interfaces_=function(){return[Bl]},Sf.prototype.getClass=function(){return Sf},Sf.isAtomic=function(t){return!(t instanceof yc)};var Ef=function(){this._geom=null;var t=arguments[0];this._geom=t};Ef.prototype.locate=function(t){return Ef.locate(t,this._geom)},Ef.prototype.interfaces_=function(){return[xf]},Ef.prototype.getClass=function(){return Ef},Ef.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&El.isPointInRing(t,e.getCoordinates())},Ef.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Ef.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r);if(Ef.isPointInRing(t,o))return!1}return!0},Ef.containsPoint=function(t,e){if(e instanceof Nc)return Ef.containsPointInPolygon(t,e);if(e instanceof yc)for(var n=new Sf(e);n.hasNext();){var r=n.next();if(r!==e&&Ef.containsPoint(t,r))return!0}return!1},Ef.locate=function(t,e){return e.isEmpty()?qu.EXTERIOR:Ef.containsPoint(t,e)?qu.INTERIOR:qu.EXTERIOR};var Of=function(){this._edgeMap=new sc,this._edgeList=null,this._ptInAreaLocation=[qu.NONE,qu.NONE]};Of.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Of.prototype.propagateSideLabels=function(t){for(var e=qu.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,ip.LEFT)!==qu.NONE&&(e=r.getLocation(t,ip.LEFT))}if(e===qu.NONE)return null;for(var o=e,i=this.iterator();i.hasNext();){var s=i.next(),a=s.getLabel();if(a.getLocation(t,ip.ON)===qu.NONE&&a.setLocation(t,ip.ON,o),a.isArea(t)){var u=a.getLocation(t,ip.LEFT),l=a.getLocation(t,ip.RIGHT);if(l!==qu.NONE){if(l!==o)throw new cp("side location conflict",s.getCoordinate());u===qu.NONE&&vl.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),o=u}else vl.isTrue(a.getLocation(t,ip.LEFT)===qu.NONE,"found single null side"),a.setLocation(t,ip.RIGHT,o),a.setLocation(t,ip.LEFT,o)}}},Of.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Of.prototype.print=function(t){al.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Of.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Of.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,ip.LEFT);vl.isTrue(r!==qu.NONE,"Found unlabelled area edge");for(var o=r,i=this.iterator();i.hasNext();){var s=i.next().getLabel();vl.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,ip.LEFT),u=s.getLocation(t,ip.RIGHT);if(a===u)return!1;if(u!==o)return!1;o=a}return!0},Of.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Of.prototype.iterator=function(){return this.getEdges().iterator()},Of.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ul(this._edgeMap.values())),this._edgeList},Of.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===qu.NONE&&(this._ptInAreaLocation[t]=Ef.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Of.prototype.toString=function(){var t=new Ku;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Of.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Of.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),o=0;o<2;o++)r.isLine(o)&&r.getLocation(o)===qu.BOUNDARY&&(e[o]=!0);for(var i=this.iterator();i.hasNext();)for(var s=i.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=qu.NONE;if(e[u])l=qu.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},Of.prototype.getDegree=function(){return this._edgeMap.size()},Of.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of};var Pf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,o=0;o<this._resultAreaEdgeList.size();o++){var i=t._resultAreaEdgeList.get(o),s=i.getSym();if(i.getLabel().isArea())switch(null===e&&i.isInResult()&&(e=i),r){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!i.isInResult())continue;n.setNext(i),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new cp("no outgoing dirEdge found",this.getCoordinate());vl.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),o=n.getQuadrant(),i=r.getQuadrant();return wp.isNorthern(o)&&wp.isNorthern(i)?n:wp.isNorthern(o)||wp.isNorthern(i)?0!==n.getDy()?n:0!==r.getDy()?r:(vl.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){al.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ul;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),o=r.getSym();null===e&&(e=o),null!==t&&o.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(ip.LEFT),o=e.getDepth(ip.RIGHT),i=this.computeDepths(n+1,this._edgeList.size(),r),s=this.computeDepths(0,n,i);if(s!==o)throw new cp("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=l,p=a;p<u;p++){var f=t._edgeList.get(p);f.setEdgeDepths(ip.RIGHT,c),c=f.getDepth(ip.LEFT)}return c}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,o=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var s=e._resultAreaEdgeList.get(i),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),o){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,o=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;r.setNextMin(s),o=e._SCANNING_FOR_INCOMING}}o===this._LINKING_TO_OUTGOING&&(vl.isTrue(null!==n,"found null for first outgoing dirEdge"),vl.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],o=0,i=this.iterator();i.hasNext();){var s=i.next();s.getEdgeRing()===r&&o++}return o}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=qu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=qu.INTERIOR;break}if(r.isInResult()){t=qu.EXTERIOR;break}}}if(t===qu.NONE)return null;for(var o=t,i=this.iterator();i.hasNext();){var s=i.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(o===qu.INTERIOR):(s.isInResult()&&(o=qu.EXTERIOR),a.isInResult()&&(o=qu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new dp(qu.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),o=0;o<2;o++){var i=r.getLocation(o);i!==qu.INTERIOR&&i!==qu.BOUNDARY||this._label.setLocation(o,qu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Of),Cf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new bp(t,new Pf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Op),If=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};If.prototype.compareTo=function(t){var e=t;return If.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},If.prototype.interfaces_=function(){return[ju]},If.prototype.getClass=function(){return If},If.orientation=function(t){return 1===ql.increasingDirection(t)},If.compareOriented=function(t,e,n,r){for(var o=e?1:-1,i=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var p=(u+=o)===s,f=(l+=i)===a;if(p&&!f)return-1;if(!p&&f)return 1;if(p&&f)return 0}};var Tf=function(){this._edges=new Ul,this._ocaMap=new sc};Tf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),o=0;o<r.length;o++)o>0&&t.print(","),t.print(r[o].x+" "+r[o].y);t.println(")")}t.print(")  ")},Tf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Tf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Tf.prototype.iterator=function(){return this._edges.iterator()},Tf.prototype.getEdges=function(){return this._edges},Tf.prototype.get=function(t){return this._edges.get(t)},Tf.prototype.findEqualEdge=function(t){var e=new If(t.getCoordinates());return this._ocaMap.get(e)},Tf.prototype.add=function(t){this._edges.add(t);var e=new If(t.getCoordinates());this._ocaMap.put(e,t)},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf};var Rf=function(){};Rf.prototype.processIntersections=function(t,e,n,r){},Rf.prototype.isDone=function(){},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf};var Mf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Mf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Mf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var o=t.size()-1;if(0===e&&r===o||0===r&&e===o)return!0}}return!1},Mf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Mf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Mf.prototype.getLineIntersector=function(){return this._li},Mf.prototype.hasProperIntersection=function(){return this._hasProper},Mf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var o=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(o,i,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Mf.prototype.hasIntersection=function(){return this._hasIntersection},Mf.prototype.isDone=function(){return!1},Mf.prototype.hasInteriorIntersection=function(){return this._hasInterior},Mf.prototype.interfaces_=function(){return[Rf]},Mf.prototype.getClass=function(){return Mf},Mf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Af=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Vu(t),this.segmentIndex=e,this.dist=n};Af.prototype.getSegmentIndex=function(){return this.segmentIndex},Af.prototype.getCoordinate=function(){return this.coord},Af.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Af.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Af.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Af.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Af.prototype.getDistance=function(){return this.dist},Af.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Af.prototype.interfaces_=function(){return[ju]},Af.prototype.getClass=function(){return Af};var Nf=function(){this._nodeMap=new sc,this.edge=null;var t=arguments[0];this.edge=t};Nf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Nf.prototype.iterator=function(){return this._nodeMap.values().iterator()},Nf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),o=this.createSplitEdge(n,r);t.add(o),n=r}},Nf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Nf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],o=e.dist>0||!e.coord.equals2D(r);o||n--;var i=new Array(n).fill(null),s=0;i[s++]=new Vu(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)i[s++]=this.edge.pts[a];return o&&(i[s]=e.coord),new Ff(i,new dp(this.edge._label))},Nf.prototype.add=function(t,e,n){var r=new Af(t,e,n),o=this._nodeMap.get(r);return null!==o?o:(this._nodeMap.put(r,r),r)},Nf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf};var kf=function(){};kf.prototype.getChainStartIndices=function(t){var e=0,n=new Ul;n.add(new Zu(e));do{var r=this.findChainEnd(t,e);n.add(new Zu(r)),e=r}while(e<t.length-1);return kf.toIntArray(n)},kf.prototype.findChainEnd=function(t,e){for(var n=wp.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&wp.quadrant(t[r-1],t[r])===n;)r++;return r-1},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},kf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Lf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new ll,this.env2=new ll;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new kf;this.startIndex=e.getChainStartIndices(this.pts)};Lf.prototype.getCoordinates=function(){return this.pts},Lf.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Lf.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Lf.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var o=arguments[0],i=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[o],p=this.pts[i],f=s.pts[a],h=s.pts[u];if(i-o==1&&u-a==1)return l.addIntersections(this.e,o,s.e,a),null;if(this.env1.init(c,p),this.env2.init(f,h),!this.env1.intersects(this.env2))return null;var d=Math.trunc((o+i)/2),g=Math.trunc((a+u)/2);o<d&&(a<g&&this.computeIntersectsForChain(o,d,s,a,g,l),g<u&&this.computeIntersectsForChain(o,d,s,g,u,l)),d<i&&(a<g&&this.computeIntersectsForChain(d,i,s,a,g,l),g<u&&this.computeIntersectsForChain(d,i,s,g,u,l))}},Lf.prototype.getStartIndexes=function(){return this.startIndex},Lf.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf};var Df=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},jf={NULL_VALUE:{configurable:!0}};Df.prototype.getDepth=function(t,e){return this._depth[t][e]},Df.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Df.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==Df.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===Df.NULL_VALUE}if(2===arguments.length){var o=arguments[0],i=arguments[1];return this._depth[o][i]===Df.NULL_VALUE}},Df.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var o=0;t._depth[e][r]>n&&(o=1),t._depth[e][r]=o}}},Df.prototype.getDelta=function(t){return this._depth[t][ip.RIGHT]-this._depth[t][ip.LEFT]},Df.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?qu.EXTERIOR:qu.INTERIOR},Df.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Df.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var o=e.getLocation(n,r);o!==qu.EXTERIOR&&o!==qu.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=Df.depthAtLocation(o):t._depth[n][r]+=Df.depthAtLocation(o))}else if(3===arguments.length){var i=arguments[0],s=arguments[1],a=arguments[2];a===qu.INTERIOR&&this._depth[i][s]++}},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.depthAtLocation=function(t){return t===qu.EXTERIOR?0:t===qu.INTERIOR?1:Df.NULL_VALUE},jf.NULL_VALUE.get=function(){return-1},Object.defineProperties(Df,jf);var Ff=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Nf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Df,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.pts=r,this._label=o}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,dp.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,o=!0,i=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--i])||(o=!1),!r&&!o)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Lf(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new ll;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var o=new Vu(t.getIntersection(r)),i=e,s=t.getEdgeDistance(n,r),a=i+1;if(a<this.pts.length){var u=this.pts[a];o.equals2D(u)&&(i=a,s=0)}this.eiList.add(o,i,s)},e.prototype.toString=function(){var t=new Ku;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,ip.ON),e.getLocation(1,ip.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,ip.LEFT),e.getLocation(1,ip.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,ip.RIGHT),e.getLocation(1,ip.RIGHT),2))},e}(vp),Bf=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Tf,this._bufParams=t||null};Bf.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Bf.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new dp(t.getLabel())).flip(),n.merge(r);var o=Bf.depthDelta(r),i=e.getDepthDelta()+o;e.setDepthDelta(i)}else this._edgeList.add(t),t.setDepthDelta(Bf.depthDelta(t.getLabel()))},Bf.prototype.buildSubgraphs=function(t,e){for(var n=new Ul,r=t.iterator();r.hasNext();){var o=r.next(),i=o.getRightmostCoordinate(),s=new mf(n).getDepth(i);o.computeDepth(s),o.findResultEdges(),n.add(o),e.add(o.getDirectedEdges(),o.getNodes())}},Bf.prototype.createSubgraphs=function(t){for(var e=new Ul,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var o=new fp;o.create(r),e.add(o)}}return Lp.sort(e,Lp.reverseOrder()),e},Bf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Bf.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new rf,n=new wl;return n.setPrecisionModel(t),e.setSegmentIntersector(new Mf(n)),e},Bf.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new yf(n,this._bufParams),o=new wf(t,e,r).getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new Pp(new Cf),this._graph.addEdges(this._edgeList.getEdges());var i=this.createSubgraphs(this._graph),s=new Cp(this._geomFact);this.buildSubgraphs(i,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},Bf.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var o=r.next(),i=o.getCoordinates();if(2!==i.length||!i[0].equals2D(i[1])){var s=o.getData(),a=new Ff(o.getCoordinates(),new dp(s));this.insertUniqueEdge(a)}}},Bf.prototype.setNoder=function(t){this._workingNoder=t},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},Bf.depthDelta=function(t){var e=t.getLocation(0,ip.LEFT),n=t.getLocation(0,ip.RIGHT);return e===qu.INTERIOR&&n===qu.EXTERIOR?1:e===qu.EXTERIOR&&n===qu.INTERIOR?-1:0},Bf.convertSegStrings=function(t){for(var e=new Zc,n=new Ul;t.hasNext();){var r=t.next(),o=e.createLineString(r.getCoordinates());n.add(o)}return e.buildGeometry(n)};var zf=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],i=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=o,this._offsetY=i,this._isScaled=!this.isIntegerPrecision()}};zf.prototype.rescale=function(){var t=this;if(Yu(arguments[0],jl))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],i=0;i<o.length;i++)o[i].x=o[i].x/t._scaleFactor+t._offsetX,o[i].y=o[i].y/t._scaleFactor+t._offsetY;2===o.length&&o[0].equals2D(o[1])&&al.out.println(o)}},zf.prototype.scale=function(){var t=this;if(Yu(arguments[0],jl)){for(var e=arguments[0],n=new Ul,r=e.iterator();r.hasNext();){var o=r.next();n.add(new $p(t.scale(o.getCoordinates()),o.getData()))}return n}if(arguments[0]instanceof Array){for(var i=arguments[0],s=new Array(i.length).fill(null),a=0;a<i.length;a++)s[a]=new Vu(Math.round((i[a].x-t._offsetX)*t._scaleFactor),Math.round((i[a].y-t._offsetY)*t._scaleFactor),i[a].z);var u=ql.removeRepeatedPoints(s);return u}},zf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},zf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},zf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},zf.prototype.interfaces_=function(){return[ef]},zf.prototype.getClass=function(){return zf};var Vf=function(){this._li=new wl,this._segStrings=null;var t=arguments[0];this._segStrings=t},Uf={fact:{configurable:!0}};Vf.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var o=arguments[0],i=arguments[1],s=i.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(o))throw new yl("found endpt/interior pt intersection at index "+l+" :pt "+o)},Vf.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var o=r.next();t.checkInteriorIntersections(n,o)}else if(2===arguments.length)for(var i=arguments[0],s=arguments[1],a=i.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)t.checkInteriorIntersections(i,l,s,c);else if(4===arguments.length){var p=arguments[0],f=arguments[1],h=arguments[2],d=arguments[3];if(p===h&&f===d)return null;var g=p.getCoordinates()[f],y=p.getCoordinates()[f+1],m=h.getCoordinates()[d],v=h.getCoordinates()[d+1];if(this._li.computeIntersection(g,y,m,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,y)||this.hasInteriorIntersection(this._li,m,v)))throw new yl("found non-noded intersection at "+g+"-"+y+" and "+m+"-"+v)}},Vf.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Vf.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0],o=r.getCoordinates(),i=0;i<o.length-2;i++)t.checkCollapse(o[i],o[i+1],o[i+2])},Vf.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var o=t.getIntersection(r);if(!o.equals(e)&&!o.equals(n))return!0}return!1},Vf.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new yl("found non-noded collapse at "+Vf.fact.createLineString([t,e,n]))},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf},Uf.fact.get=function(){return new Zc},Object.defineProperties(Vf,Uf);var Hf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new ku("Scale factor must be non-zero");1!==e&&(this._pt=new Vu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Vu,this._p1Scaled=new Vu),this.initCorners(this._pt)},Gf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Hf.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),o=Math.min(t.y,e.y),i=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<o||this._miny>i;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return vl.isTrue(!(s&&a),"Found bad envelope test"),a},Hf.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new Vu(this._maxx,this._maxy),this._corner[1]=new Vu(this._minx,this._maxy),this._corner[2]=new Vu(this._minx,this._miny),this._corner[3]=new Vu(this._maxx,this._miny)},Hf.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Hf.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Hf.prototype.getCoordinate=function(){return this._originalPt},Hf.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Hf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Hf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new ll(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Hf.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Hf.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},Hf.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Hf.prototype.interfaces_=function(){return[]},Hf.prototype.getClass=function(){return Hf},Gf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Hf,Gf);var qf=function(){this.tempEnv1=new ll,this.selectedSegment=new Kp};qf.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf};var Wf=function(){this._index=null;var t=arguments[0];this._index=t},Yf={HotPixelSnapAction:{configurable:!0}};Wf.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],o=e.getSafeEnvelope(),i=new Xf(e,n,r);return this._index.query(o,{interfaces_:function(){return[Mp]},visitItem:function(t){t.select(o,i)}}),i.isNodeAdded()}},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf},Yf.HotPixelSnapAction.get=function(){return Xf},Object.defineProperties(Wf,Yf);var Xf=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qf),$f=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ul};$f.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var o=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,i,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},$f.prototype.isDone=function(){return!1},$f.prototype.getInteriorIntersections=function(){return this._interiorIntersections},$f.prototype.interfaces_=function(){return[Rf]},$f.prototype.getClass=function(){return $f};var Kf=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new wl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Kf.prototype.checkCorrectness=function(t){var e=$p.getNodedSubstrings(t),n=new Vf(e);try{n.checkValid()}catch(t){if(!(t instanceof il))throw t;t.printStackTrace()}},Kf.prototype.getNodedSubstrings=function(){return $p.getNodedSubstrings(this._nodedSegStrings)},Kf.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Kf.prototype.findInteriorIntersections=function(t,e){var n=new $f(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Kf.prototype.computeVertexSnaps=function(){var t=this;if(Yu(arguments[0],jl))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof $p)for(var o=arguments[0],i=o.getCoordinates(),s=0;s<i.length;s++){var a=new Hf(i[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,o,s);u&&o.addIntersection(i[s],s)}},Kf.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new rf,this._pointSnapper=new Wf(this._noder.getIndex()),this.snapRound(t,this._li)},Kf.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),o=new Hf(r,e._scaleFactor,e._li);e._pointSnapper.snap(o)}},Kf.prototype.interfaces_=function(){return[ef]},Kf.prototype.getClass=function(){return Kf};var Zf=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new sf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},Jf={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Zf.prototype.bufferFixedPrecision=function(t){var e=new zf(new Kf(new Yc(1)),t.getScale()),n=new Bf(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Zf.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Zf.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof cp))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Zf.precisionScaleFactor(this._argGeom,this._distance,n),o=new Yc(r);this.bufferFixedPrecision(o)}},Zf.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Yc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Zf.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Zf.prototype.bufferOriginalPrecision=function(){try{var t=new Bf(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof yl))throw t;this._saveException=t}},Zf.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Zf.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Zf.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Zf(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Cl&&"number"==typeof arguments[1]){var o=arguments[0],i=arguments[1],s=arguments[2],a=new Zf(o);a.setQuadrantSegments(s);var u=a.getResultGeometry(i);return u}if(arguments[2]instanceof sf&&arguments[0]instanceof Cl&&"number"==typeof arguments[1]){var l=arguments[0],c=arguments[1],p=arguments[2],f=new Zf(l,p),h=f.getResultGeometry(c);return h}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=arguments[3],v=new Zf(d);v.setQuadrantSegments(y),v.setEndCapStyle(m);var b=v.getResultGeometry(g);return b}},Zf.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),o=Xu.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),i=n-Math.trunc(Math.log(o)/Math.log(10)+1);return Math.pow(10,i)},Jf.CAP_ROUND.get=function(){return sf.CAP_ROUND},Jf.CAP_BUTT.get=function(){return sf.CAP_FLAT},Jf.CAP_FLAT.get=function(){return sf.CAP_FLAT},Jf.CAP_SQUARE.get=function(){return sf.CAP_SQUARE},Jf.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Zf,Jf);var Qf=function(){this._pt=[new Vu,new Vu],this._distance=Lu.NaN,this._isNull=!0};Qf.prototype.getCoordinates=function(){return this._pt},Qf.prototype.getCoordinate=function(t){return this._pt[t]},Qf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Qf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=o,this._isNull=!1}},Qf.prototype.getDistance=function(){return this._distance},Qf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf};var th=function(){};th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th},th.computeDistance=function(){if(arguments[2]instanceof Qf&&arguments[0]instanceof Tc&&arguments[1]instanceof Vu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),o=new Kp,i=0;i<r.length-1;i++){o.setCoordinates(r[i],r[i+1]);var s=o.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Qf&&arguments[0]instanceof Nc&&arguments[1]instanceof Vu){var a=arguments[0],u=arguments[1],l=arguments[2];th.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)th.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Qf&&arguments[0]instanceof Cl&&arguments[1]instanceof Vu){var p=arguments[0],f=arguments[1],h=arguments[2];if(p instanceof Tc)th.computeDistance(p,f,h);else if(p instanceof Nc)th.computeDistance(p,f,h);else if(p instanceof yc)for(var d=p,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);th.computeDistance(y,f,h)}else h.setMinimum(p.getCoordinate(),f)}else if(arguments[2]instanceof Qf&&arguments[0]instanceof Kp&&arguments[1]instanceof Vu){var m=arguments[0],v=arguments[1],b=arguments[2],_=m.closestPoint(v);b.setMinimum(_,v)}};var eh=function(t){this._maxPtDist=new Qf,this._inputGeom=t||null},nh={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};eh.prototype.computeMaxMidpointDistance=function(t){var e=new oh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},eh.prototype.computeMaxVertexDistance=function(t){var e=new rh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},eh.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},eh.prototype.getDistancePoints=function(){return this._maxPtDist},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},nh.MaxPointDistanceFilter.get=function(){return rh},nh.MaxMidpointDistanceFilter.get=function(){return oh},Object.defineProperties(eh,nh);var rh=function(t){this._maxPtDist=new Qf,this._minPtDist=new Qf,this._geom=t||null};rh.prototype.filter=function(t){this._minPtDist.initialize(),th.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},rh.prototype.getMaxPointDistance=function(){return this._maxPtDist},rh.prototype.interfaces_=function(){return[Rl]},rh.prototype.getClass=function(){return rh};var oh=function(t){this._maxPtDist=new Qf,this._minPtDist=new Qf,this._geom=t||null};oh.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),o=new Vu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),th.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},oh.prototype.isDone=function(){return!1},oh.prototype.isGeometryChanged=function(){return!1},oh.prototype.getMaxPointDistance=function(){return this._maxPtDist},oh.prototype.interfaces_=function(){return[gc]},oh.prototype.getClass=function(){return oh};var ih=function(t){this._comps=t||null};ih.prototype.filter=function(t){t instanceof Nc&&this._comps.add(t)},ih.prototype.interfaces_=function(){return[dc]},ih.prototype.getClass=function(){return ih},ih.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return ih.getPolygons(t,new Ul)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Nc?n.add(e):e instanceof yc&&e.apply(new ih(n)),n}};var sh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};sh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Lc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Tc&&this._lines.add(t)},sh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},sh.prototype.interfaces_=function(){return[Pl]},sh.prototype.getClass=function(){return sh},sh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(sh.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(sh.getLines(e,n))}},sh.getLines=function(){if(1===arguments.length){var t=arguments[0];return sh.getLines(t,!1)}if(2===arguments.length){if(Yu(arguments[0],jl)&&Yu(arguments[1],jl)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var o=r.next();sh.getLines(o,n)}return n}if(arguments[0]instanceof Cl&&"boolean"==typeof arguments[1]){var i=arguments[0],s=arguments[1],a=new Ul;return i.apply(new sh(a,s)),a}if(arguments[0]instanceof Cl&&Yu(arguments[1],jl)){var u=arguments[0],l=arguments[1];return u instanceof Tc?l.add(u):u.apply(new sh(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Yu(arguments[0],jl)&&Yu(arguments[1],jl)){for(var c=arguments[0],p=arguments[1],f=arguments[2],h=c.iterator();h.hasNext();){var d=h.next();sh.getLines(d,p,f)}return p}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Cl&&Yu(arguments[1],jl)){var g=arguments[0],y=arguments[1],m=arguments[2];return g.apply(new sh(y,m)),y}}};var ah=function(){if(this._boundaryRule=Ml.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new ku("Rule must be non-null");this._boundaryRule=t}};ah.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof Vu&&arguments[1]instanceof Nc){var e=arguments[0],n=arguments[1];if(n.isEmpty())return qu.EXTERIOR;var r=n.getExteriorRing(),o=this.locateInPolygonRing(e,r);if(o===qu.EXTERIOR)return qu.EXTERIOR;if(o===qu.BOUNDARY)return qu.BOUNDARY;for(var i=0;i<n.getNumInteriorRing();i++){var s=n.getInteriorRingN(i),a=t.locateInPolygonRing(e,s);if(a===qu.INTERIOR)return qu.EXTERIOR;if(a===qu.BOUNDARY)return qu.BOUNDARY}return qu.INTERIOR}if(arguments[0]instanceof Vu&&arguments[1]instanceof Tc){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return qu.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!u.equals(c[0])&&!u.equals(c[c.length-1])?El.isOnLine(u,c)?qu.INTERIOR:qu.EXTERIOR:qu.BOUNDARY}if(arguments[0]instanceof Vu&&arguments[1]instanceof Mc){var p=arguments[0],f=arguments[1],h=f.getCoordinate();return h.equals2D(p)?qu.INTERIOR:qu.EXTERIOR}},ah.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?El.locatePointInRing(t,e.getCoordinates()):qu.EXTERIOR},ah.prototype.intersects=function(t,e){return this.locate(t,e)!==qu.EXTERIOR},ah.prototype.updateLocationInfo=function(t){t===qu.INTERIOR&&(this._isIn=!0),t===qu.BOUNDARY&&this._numBoundaries++},ah.prototype.computeLocation=function(t,e){var n=this;if(e instanceof Mc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Tc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Nc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof mc)for(var r=e,o=0;o<r.getNumGeometries();o++){var i=r.getGeometryN(o);n.updateLocationInfo(n.locateInternal(t,i))}else if(e instanceof Dc)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof yc)for(var l=new Sf(e);l.hasNext();){var c=l.next();c!==e&&n.computeLocation(t,c)}},ah.prototype.locate=function(t,e){return e.isEmpty()?qu.EXTERIOR:e instanceof Tc||e instanceof Nc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?qu.BOUNDARY:this._numBoundaries>0||this._isIn?qu.INTERIOR:qu.EXTERIOR)},ah.prototype.interfaces_=function(){return[]},ah.prototype.getClass=function(){return ah};var uh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2];this._component=r,this._segIndex=o,this._pt=i}},lh={INSIDE_AREA:{configurable:!0}};uh.prototype.isInsideArea=function(){return this._segIndex===uh.INSIDE_AREA},uh.prototype.getCoordinate=function(){return this._pt},uh.prototype.getGeometryComponent=function(){return this._component},uh.prototype.getSegmentIndex=function(){return this._segIndex},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh},lh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(uh,lh);var ch=function(t){this._pts=t||null};ch.prototype.filter=function(t){t instanceof Mc&&this._pts.add(t)},ch.prototype.interfaces_=function(){return[dc]},ch.prototype.getClass=function(){return ch},ch.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Mc?Lp.singletonList(t):ch.getPoints(t,new Ul)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Mc?n.add(e):e instanceof yc&&e.apply(new ch(n)),n}};var ph=function(){this._locations=null;var t=arguments[0];this._locations=t};ph.prototype.filter=function(t){(t instanceof Mc||t instanceof Tc||t instanceof Nc)&&this._locations.add(new uh(t,0,t.getCoordinate()))},ph.prototype.interfaces_=function(){return[dc]},ph.prototype.getClass=function(){return ph},ph.getLocations=function(t){var e=new Ul;return t.apply(new ph(e)),e};var fh=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new ah,this._minDistanceLocation=null,this._minDistance=Lu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=o}};fh.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],o=1-n,i=ih.getPolygons(this._geom[n]);if(i.size()>0){var s=ph.getLocations(this._geom[o]);if(this.computeContainmentDistance(s,i,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Yu(arguments[0],zl)&&Yu(arguments[1],zl)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var p=a.get(c),f=0;f<u.size();f++)if(t.computeContainmentDistance(p,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof uh&&arguments[1]instanceof Nc){var h=arguments[0],d=arguments[1],g=arguments[2],y=h.getCoordinate();if(qu.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=h,g[1]=new uh(d,y),null}},fh.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,o=0;o<t.size();o++)for(var i=t.get(o),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(i,a,n),r._minDistance<=r._terminateDistance)return null}},fh.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=sh.getLines(this._geom[0]),n=sh.getLines(this._geom[1]),r=ch.getPoints(this._geom[0]),o=ch.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,o,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,o,t),void this.updateMinDistance(t,!1))))},fh.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},fh.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},fh.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},fh.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Tc&&arguments[1]instanceof Mc){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var o=e.getCoordinates(),i=n.getCoordinate(),s=0;s<o.length-1;s++){var a=El.distancePointLine(i,o[s],o[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new Kp(o[s],o[s+1]),l=u.closestPoint(i);r[0]=new uh(e,s,l),r[1]=new uh(n,0,i)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tc&&arguments[1]instanceof Tc){var c=arguments[0],p=arguments[1],f=arguments[2];if(c.getEnvelopeInternal().distance(p.getEnvelopeInternal())>this._minDistance)return null;for(var h=c.getCoordinates(),d=p.getCoordinates(),g=0;g<h.length-1;g++)for(var y=0;y<d.length-1;y++){var m=El.distanceLineLine(h[g],h[g+1],d[y],d[y+1]);if(m<t._minDistance){t._minDistance=m;var v=new Kp(h[g],h[g+1]),b=new Kp(d[y],d[y+1]),_=v.closestPoints(b);f[0]=new uh(c,g,_[0]),f[1]=new uh(p,y,_[1])}if(t._minDistance<=t._terminateDistance)return null}}},fh.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,o=0;o<t.size();o++)for(var i=t.get(o),s=0;s<e.size();s++){var a=e.get(s),u=i.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new uh(i,0,i.getCoordinate()),n[1]=new uh(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},fh.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new ku("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},fh.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,o=0;o<t.size();o++)for(var i=t.get(o),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(i,a,n),r._minDistance<=r._terminateDistance)return null}},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh},fh.distance=function(t,e){return new fh(t,e).distance()},fh.isWithinDistance=function(t,e,n){return new fh(t,e,n).distance()<=n},fh.nearestPoints=function(t,e){return new fh(t,e).nearestPoints()};var hh=function(){this._pt=[new Vu,new Vu],this._distance=Lu.NaN,this._isNull=!0};hh.prototype.getCoordinates=function(){return this._pt},hh.prototype.getCoordinate=function(t){return this._pt[t]},hh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},hh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=o,this._isNull=!1}},hh.prototype.toString=function(){return gl.toLineString(this._pt[0],this._pt[1])},hh.prototype.getDistance=function(){return this._distance},hh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh};var dh=function(){};dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh},dh.computeDistance=function(){if(arguments[2]instanceof hh&&arguments[0]instanceof Tc&&arguments[1]instanceof Vu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Kp,o=t.getCoordinates(),i=0;i<o.length-1;i++){r.setCoordinates(o[i],o[i+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof hh&&arguments[0]instanceof Nc&&arguments[1]instanceof Vu){var a=arguments[0],u=arguments[1],l=arguments[2];dh.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)dh.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof hh&&arguments[0]instanceof Cl&&arguments[1]instanceof Vu){var p=arguments[0],f=arguments[1],h=arguments[2];if(p instanceof Tc)dh.computeDistance(p,f,h);else if(p instanceof Nc)dh.computeDistance(p,f,h);else if(p instanceof yc)for(var d=p,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);dh.computeDistance(y,f,h)}else h.setMinimum(p.getCoordinate(),f)}else if(arguments[2]instanceof hh&&arguments[0]instanceof Kp&&arguments[1]instanceof Vu){var m=arguments[0],v=arguments[1],b=arguments[2],_=m.closestPoint(v);b.setMinimum(_,v)}};var gh=function(){this._g0=null,this._g1=null,this._ptDist=new hh,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},yh={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};gh.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},gh.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new ku("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},gh.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},gh.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},gh.prototype.computeOrientedDistance=function(t,e,n){var r=new mh(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var o=new vh(e,this._densifyFrac);t.apply(o),n.setMaximum(o.getMaxPointDistance())}},gh.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh},gh.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new gh(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2],s=new gh(r,o);return s.setDensifyFraction(i),s.distance()}},yh.MaxPointDistanceFilter.get=function(){return mh},yh.MaxDensifiedByFractionDistanceFilter.get=function(){return vh},Object.defineProperties(gh,yh);var mh=function(){this._maxPtDist=new hh,this._minPtDist=new hh,this._euclideanDist=new dh,this._geom=null;var t=arguments[0];this._geom=t};mh.prototype.filter=function(t){this._minPtDist.initialize(),dh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},mh.prototype.getMaxPointDistance=function(){return this._maxPtDist},mh.prototype.interfaces_=function(){return[Rl]},mh.prototype.getClass=function(){return mh};var vh=function(){this._maxPtDist=new hh,this._minPtDist=new hh,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};vh.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),o=t.getCoordinate(e),i=(o.x-r.x)/this._numSubSegs,s=(o.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*i,l=r.y+a*s,c=new Vu(u,l);n._minPtDist.initialize(),dh.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},vh.prototype.isDone=function(){return!1},vh.prototype.isGeometryChanged=function(){return!1},vh.prototype.getMaxPointDistance=function(){return this._maxPtDist},vh.prototype.interfaces_=function(){return[gc]},vh.prototype.getClass=function(){return vh};var bh=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},_h={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};bh.prototype.checkMaximumDistance=function(t,e,n){var r=new gh(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var o=r.getCoordinates();this._errorLocation=o[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+gl.toLineString(o[0],o[1])+")"}},bh.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=bh.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),bh.VERBOSE&&al.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},bh.prototype.checkNegativeValid=function(){if(!(this._input instanceof Nc||this._input instanceof Dc||this._input instanceof yc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},bh.prototype.getErrorIndicator=function(){return this._errorIndicator},bh.prototype.checkMinimumDistance=function(t,e,n){var r=new fh(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var o=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+gl.toLineString(o[0],o[1])+" )"}},bh.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},bh.prototype.getErrorLocation=function(){return this._errorLocation},bh.prototype.getPolygonLines=function(t){for(var e=new Ul,n=new sh(e),r=ih.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},bh.prototype.getErrorMessage=function(){return this._errMsg},bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh},_h.VERBOSE.get=function(){return!1},_h.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(bh,_h);var wh=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},xh={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};wh.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},wh.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*wh.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new ll(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new ll(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},wh.prototype.checkDistance=function(){var t=new bh(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},wh.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},wh.prototype.checkPolygonal=function(){this._result instanceof Nc||this._result instanceof Dc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},wh.prototype.getErrorIndicator=function(){return this._errorIndicator},wh.prototype.getErrorLocation=function(){return this._errorLocation},wh.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},wh.prototype.report=function(t){if(!wh.VERBOSE)return null;al.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},wh.prototype.getErrorMessage=function(){return this._errorMsg},wh.prototype.interfaces_=function(){return[]},wh.prototype.getClass=function(){return wh},wh.isValidMsg=function(t,e,n){var r=new wh(t,e,n);return r.isValid()?null:r.getErrorMessage()},wh.isValid=function(t,e,n){return!!new wh(t,e,n).isValid()},xh.VERBOSE.get=function(){return!1},xh.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(wh,xh);var Sh=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Sh.prototype.getCoordinates=function(){return this._pts},Sh.prototype.size=function(){return this._pts.length},Sh.prototype.getCoordinate=function(t){return this._pts[t]},Sh.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Sh.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Wp.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Sh.prototype.setData=function(t){this._data=t},Sh.prototype.getData=function(){return this._data},Sh.prototype.toString=function(){return gl.toLineString(new Uc(this._pts))},Sh.prototype.interfaces_=function(){return[Yp]},Sh.prototype.getClass=function(){return Sh};var Eh=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ul,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Eh.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Eh.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Eh.prototype.getIntersectionSegments=function(){return this._intSegments},Eh.prototype.count=function(){return this._intersectionCount},Eh.prototype.getIntersections=function(){return this._intersections},Eh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Eh.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Eh.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var o=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(o,i,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=i,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Eh.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Eh.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Eh.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Eh.prototype.interfaces_=function(){return[Rf]},Eh.prototype.getClass=function(){return Eh},Eh.createAllIntersectionsFinder=function(t){var e=new Eh(t);return e.setFindAllIntersections(!0),e},Eh.createAnyIntersectionFinder=function(t){return new Eh(t)},Eh.createIntersectionCounter=function(t){var e=new Eh(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Oh=function(){this._li=new wl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Oh.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Oh.prototype.getIntersections=function(){return this._segInt.getIntersections()},Oh.prototype.isValid=function(){return this.execute(),this._isValid},Oh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Oh.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Eh(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new rf;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Oh.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new cp(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Oh.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+gl.toLineString(t[0],t[1])+" and "+gl.toLineString(t[2],t[3])},Oh.prototype.interfaces_=function(){return[]},Oh.prototype.getClass=function(){return Oh},Oh.computeIntersections=function(t){var e=new Oh(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Ph=function t(){this._nv=null;var e=arguments[0];this._nv=new Oh(t.toSegmentStrings(e))};Ph.prototype.checkValid=function(){this._nv.checkValid()},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ph.toSegmentStrings=function(t){for(var e=new Ul,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Sh(r.getCoordinates(),r))}return e},Ph.checkValid=function(t){new Ph(t).checkValid()};var Ch=function(t){this._mapOp=t};Ch.prototype.map=function(t){for(var e=new Ul,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Zc.toGeometryArray(e))},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.map=function(t,e){return new Ch(e).map(t)};var Ih=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ul,this._resultLineList=new Ul;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Ih.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},Ih.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Ih.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Ih.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),o=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ud.isResultOfOp(r,e)||o.isCovered()||(n.add(o),t.setVisitedEdge(!0)))},Ih.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var o=this._op.isCoveredByA(n.getCoordinate());r.setCovered(o)}}},Ih.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Ih.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Ih.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(vl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ud.isResultOfOp(r,e)&&e===ud.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih};var Th=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ul;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Th.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Th.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ud.INTERSECTION)){var r=n.getLabel();ud.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Th.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Rh=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Rh.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Rh.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof Lc&&!r.isEmpty()||(n=!1);for(var o=new Ul,i=0;i<t.getNumInteriorRing();i++){var s=this.transformLinearRing(t.getInteriorRingN(i),t);null===s||s.isEmpty()||(s instanceof Lc||(n=!1),o.add(s))}if(n)return this._factory.createPolygon(r,o.toArray([]));var a=new Ul;return null!==r&&a.add(r),a.addAll(o),this._factory.buildGeometry(a)},Rh.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Rh.prototype.getInputGeometry=function(){return this._inputGeom},Rh.prototype.transformMultiLineString=function(t,e){for(var n=new Ul,r=0;r<t.getNumGeometries();r++){var o=this.transformLineString(t.getGeometryN(r),t);null!==o&&(o.isEmpty()||n.add(o))}return this._factory.buildGeometry(n)},Rh.prototype.transformCoordinates=function(t,e){return this.copy(t)},Rh.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Rh.prototype.transformMultiPoint=function(t,e){for(var n=new Ul,r=0;r<t.getNumGeometries();r++){var o=this.transformPoint(t.getGeometryN(r),t);null!==o&&(o.isEmpty()||n.add(o))}return this._factory.buildGeometry(n)},Rh.prototype.transformMultiPolygon=function(t,e){for(var n=new Ul,r=0;r<t.getNumGeometries();r++){var o=this.transformPolygon(t.getGeometryN(r),t);null!==o&&(o.isEmpty()||n.add(o))}return this._factory.buildGeometry(n)},Rh.prototype.copy=function(t){return t.copy()},Rh.prototype.transformGeometryCollection=function(t,e){for(var n=new Ul,r=0;r<t.getNumGeometries();r++){var o=this.transform(t.getGeometryN(r));null!==o&&(this._pruneEmptyGeometry&&o.isEmpty()||n.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Zc.toGeometryArray(n)):this._factory.buildGeometry(n)},Rh.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Mc)return this.transformPoint(t,null);if(t instanceof kc)return this.transformMultiPoint(t,null);if(t instanceof Lc)return this.transformLinearRing(t,null);if(t instanceof Tc)return this.transformLineString(t,null);if(t instanceof mc)return this.transformMultiLineString(t,null);if(t instanceof Nc)return this.transformPolygon(t,null);if(t instanceof Dc)return this.transformMultiPolygon(t,null);if(t instanceof yc)return this.transformGeometryCollection(t,null);throw new ku("Unknown Geometry subtype: "+t.getClass().getName())},Rh.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh};var Mh=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Kp,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Tc&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],o=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=o}};Mh.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var o=t.get(r),i=this.findSnapForVertex(o,e);null!==i&&(t.set(r,new Vu(i)),0===r&&this._isClosed&&t.set(t.size()-1,new Vu(i)))}},Mh.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Mh.prototype.snapTo=function(t){var e=new Gl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Mh.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var o=e[r],i=this.findSegmentIndexToSnap(o,t);i>=0&&t.add(i+1,new Vu(o),!1)}},Mh.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=Lu.MAX_VALUE,o=-1,i=0;i<e.size()-1;i++){if(n._seg.p0=e.get(i),n._seg.p1=e.get(i+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,o=i)}return o},Mh.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Ah=function(t){this._srcGeom=t||null},Nh={SNAP_PRECISION_FACTOR:{configurable:!0}};Ah.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new kh(e,n).transform(this._srcGeom)},Ah.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new kh(t,n,!0).transform(this._srcGeom),o=r;return e&&Yu(o,Ac)&&(o=r.buffer(0)),o},Ah.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Ah.prototype.extractTargetCoordinates=function(t){for(var e=new lc,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Ah.prototype.computeMinimumSegmentLength=function(t){for(var e=Lu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Ah.snap=function(t,e,n){var r=new Array(2).fill(null),o=new Ah(t);r[0]=o.snapTo(e,n);var i=new Ah(e);return r[1]=i.snapTo(r[0],n),r},Ah.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Ah.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Yc.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var o=arguments[0],i=arguments[1];return Math.min(Ah.computeOverlaySnapTolerance(o),Ah.computeOverlaySnapTolerance(i))}},Ah.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Ah.SNAP_PRECISION_FACTOR},Ah.snapToSelf=function(t,e,n){return new Ah(t).snapToSelf(e,n)},Nh.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Ah,Nh);var kh=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Mh(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rh),Lh=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Lh.prototype.getCommon=function(){return Lu.longBitsToDouble(this._commonBits)},Lh.prototype.add=function(t){var e=Lu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Lh.signExpBits(this._commonBits),this._isFirst=!1,null):Lh.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Lh.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Lh.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Lh.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Lu.longBitsToDouble(t),n=Lu.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,o=r.substring(r.length-64),i=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+e+" ]";return i}},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Lh.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Lh.signExpBits=function(t){return t>>52},Lh.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Lh.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Lh.getBit(t,r)!==Lh.getBit(e,r))return n;n++}return 52};var Dh=function(){this._commonCoord=null,this._ccFilter=new Fh},jh={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Dh.prototype.addCommonBits=function(t){var e=new Bh(this._commonCoord);t.apply(e),t.geometryChanged()},Dh.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Vu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Bh(e);return t.apply(n),t.geometryChanged(),t},Dh.prototype.getCommonCoordinate=function(){return this._commonCoord},Dh.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},jh.CommonCoordinateFilter.get=function(){return Fh},jh.Translater.get=function(){return Bh},Object.defineProperties(Dh,jh);var Fh=function(){this._commonBitsX=new Lh,this._commonBitsY=new Lh};Fh.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Fh.prototype.getCommonCoordinate=function(){return new Vu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Fh.prototype.interfaces_=function(){return[Rl]},Fh.prototype.getClass=function(){return Fh};var Bh=function(){this.trans=null;var t=arguments[0];this.trans=t};Bh.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},Bh.prototype.isDone=function(){return!1},Bh.prototype.isGeometryChanged=function(){return!0},Bh.prototype.interfaces_=function(){return[gc]},Bh.prototype.getClass=function(){return Bh};var zh=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};zh.prototype.selfSnap=function(t){return new Ah(t).snapTo(t,this._snapTolerance)},zh.prototype.removeCommonBits=function(t){this._cbr=new Dh,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},zh.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},zh.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=ud.overlayOp(e[0],e[1],t);return this.prepareResult(n)},zh.prototype.checkValid=function(t){t.isValid()||al.out.println("Snapped geometry is invalid")},zh.prototype.computeSnapTolerance=function(){this._snapTolerance=Ah.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},zh.prototype.snap=function(t){var e=this.removeCommonBits(t);return Ah.snap(e[0],e[1],this._snapTolerance)},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh.overlayOp=function(t,e,n){return new zh(t,e).getResultGeometry(n)},zh.union=function(t,e){return zh.overlayOp(t,e,ud.UNION)},zh.intersection=function(t,e){return zh.overlayOp(t,e,ud.INTERSECTION)},zh.symDifference=function(t,e){return zh.overlayOp(t,e,ud.SYMDIFFERENCE)},zh.difference=function(t,e){return zh.overlayOp(t,e,ud.DIFFERENCE)};var Vh=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Vh.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=ud.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof yl))throw t;r=t}if(!n)try{e=zh.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof yl?r:t}return e},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.overlayOp=function(t,e,n){return new Vh(t,e).getResultGeometry(n)},Vh.union=function(t,e){return Vh.overlayOp(t,e,ud.UNION)},Vh.intersection=function(t,e){return Vh.overlayOp(t,e,ud.INTERSECTION)},Vh.symDifference=function(t,e){return Vh.overlayOp(t,e,ud.SYMDIFFERENCE)},Vh.difference=function(t,e){return Vh.overlayOp(t,e,ud.DIFFERENCE)};var Uh=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Uh.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh};var Hh=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=o,this._obj=i}},Gh={INSERT:{configurable:!0},DELETE:{configurable:!0}};Hh.prototype.isDelete=function(){return this._eventType===Hh.DELETE},Hh.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Hh.prototype.getObject=function(){return this._obj},Hh.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Hh.prototype.getInsertEvent=function(){return this._insertEvent},Hh.prototype.isInsert=function(){return this._eventType===Hh.INSERT},Hh.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Hh.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Hh.prototype.interfaces_=function(){return[ju]},Hh.prototype.getClass=function(){return Hh},Gh.INSERT.get=function(){return 1},Gh.DELETE.get=function(){return 2},Object.defineProperties(Hh,Gh);var qh=function(){};qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var Wh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};Wh.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Wh.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var o=t.getNumPoints()-1;if(0===e&&r===o||0===r&&e===o)return!0}}return!1},Wh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Wh.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Wh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Wh.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Wh.prototype.hasProperIntersection=function(){return this._hasProper},Wh.prototype.hasIntersection=function(){return this._hasIntersection},Wh.prototype.isDone=function(){return this._isDone},Wh.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Wh.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Wh.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var o=t.getCoordinates()[e],i=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(o,i,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh},Wh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Yh=function(t){function e(){t.call(this),this.events=new Ul,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Lp.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Wh&&Yu(arguments[0],zl)&&Yu(arguments[1],zl)){var o=arguments[0],i=arguments[1],s=arguments[2];this.addEdges(o,o),this.addEdges(i,i),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&Yu(arguments[0],zl)&&arguments[1]instanceof Wh){var a=arguments[0],u=arguments[1],l=arguments[2];l?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),o=0;o<r.length-1;o++){var i=new Uh(n,o),s=new Hh(e,n.getMinX(o),i);this.events.add(s),this.events.add(new Hh(n.getMaxX(o),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var o=n.getObject(),i=t;i<e;i++){var s=this.events.get(i);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(o.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.addEdge(r,r)}else if(2===arguments.length)for(var o=arguments[0],i=arguments[1],s=o.iterator();s.hasNext();){var a=s.next();t.addEdge(a,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qh),Xh=function(){this._min=Lu.POSITIVE_INFINITY,this._max=Lu.NEGATIVE_INFINITY},$h={NodeComparator:{configurable:!0}};Xh.prototype.getMin=function(){return this._min},Xh.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Xh.prototype.getMax=function(){return this._max},Xh.prototype.toString=function(){return gl.toLineString(new Vu(this._min,0),new Vu(this._max,0))},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh},$h.NodeComparator.get=function(){return Kh},Object.defineProperties(Xh,$h);var Kh=function(){};Kh.prototype.compare=function(t,e){var n=t,r=e,o=(n._min+n._max)/2,i=(r._min+r._max)/2;return o<i?-1:o>i?1:0},Kh.prototype.interfaces_=function(){return[Bu]},Kh.prototype.getClass=function(){return Kh};var Zh=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xh),Jh=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xh),Qh=function(){this._leaves=new Ul,this._root=null,this._level=0};Qh.prototype.buildTree=function(){Lp.sort(this._leaves,new Xh.NodeComparator);for(var t=this._leaves,e=null,n=new Ul;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Qh.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Zh(t,e,n))},Qh.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Qh.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Qh.prototype.printNode=function(t){al.out.println(gl.toLineString(new Vu(t._min,this._level),new Vu(t._max,this._level)))},Qh.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Qh.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var o=new Jh(t.get(n),t.get(n+1));e.add(o)}}},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var td=function(){this._items=new Ul};td.prototype.visitItem=function(t){this._items.add(t)},td.prototype.getItems=function(){return this._items},td.prototype.interfaces_=function(){return[Mp]},td.prototype.getClass=function(){return td};var ed=function(){this._index=null;var t=arguments[0];if(!Yu(t,Ac))throw new ku("Argument must be Polygonal");this._index=new od(t)},nd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};ed.prototype.locate=function(t){var e=new Sl(t),n=new rd(e);return this._index.query(t.y,t.y,n),e.getLocation()},ed.prototype.interfaces_=function(){return[xf]},ed.prototype.getClass=function(){return ed},nd.SegmentVisitor.get=function(){return rd},nd.IntervalIndexedGeometry.get=function(){return od},Object.defineProperties(ed,nd);var rd=function(){this._counter=null;var t=arguments[0];this._counter=t};rd.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},rd.prototype.interfaces_=function(){return[Mp]},rd.prototype.getClass=function(){return rd};var od=function(){this._index=new Qh;var t=arguments[0];this.init(t)};od.prototype.init=function(t){for(var e=sh.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},od.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Kp(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),o=Math.max(n.p0.y,n.p1.y);this._index.insert(r,o,n)}},od.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new td;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2];this._index.query(r,o,i)}},od.prototype.interfaces_=function(){return[]},od.prototype.getClass=function(){return od};var id=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Wc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new ah,2===arguments.length){var e=arguments[0],n=arguments[1],r=Ml.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var o=arguments[0],i=arguments[1],s=arguments[2];this._argIndex=o,this._parentGeom=i,this._boundaryNodeRule=s,null!==i&&this.add(i)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),o=1;r.getLocation(t,ip.ON)===qu.BOUNDARY&&o++;var i=e.determineBoundary(this._boundaryNodeRule,o);r.setLocation(t,i)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],i=new Wh(n,!0,!1);i.setIsDoneIfProperInt(o);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof Lc||this._parentGeom instanceof Nc||this._parentGeom instanceof Dc,u=r||!a;return s.computeIntersections(this._edges,i,u),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new Wh(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Mc){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,qu.INTERIOR)}else if(arguments[0]instanceof Vu){var n=arguments[0];this.insertPoint(this._argIndex,n,qu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),qu.EXTERIOR,qu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,qu.INTERIOR,qu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],qu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],qu.BOUNDARY)},e.prototype.addLineString=function(t){var e=ql.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Ff(e,new dp(this._argIndex,qu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),vl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var o=r.next();e[n++]=o.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===qu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=ql.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var o=e,i=n;El.isCCW(r)&&(o=n,i=e);var s=new Ff(r,new dp(this._argIndex,qu.BOUNDARY,o,i));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],qu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),o=r.getLabel();null===o?r._label=new dp(t,n):o.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Yh},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),o=n.eiList.iterator();o.hasNext();){var i=o.next();this.addSelfIntersectionNode(t,i.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Dc&&(this._useBoundaryDeterminationRule=!1),e instanceof Nc)this.addPolygon(e);else if(e instanceof Tc)this.addLineString(e);else if(e instanceof Mc)this.addPoint(e);else if(e instanceof kc)this.addCollection(e);else if(e instanceof mc)this.addCollection(e);else if(e instanceof Dc)this.addCollection(e);else{if(!(e instanceof yc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Yu(this._parentGeom,Ac)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new ed(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?qu.BOUNDARY:qu.INTERIOR},e}(Pp),sd=function(){if(this._li=new wl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new id(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Ml.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new id(0,e,r),this._arg[1]=new id(1,n,r)}else if(3===arguments.length){var o=arguments[0],i=arguments[1],s=arguments[2];o.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new id(0,o,s),this._arg[1]=new id(1,i,s)}};sd.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},sd.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},sd.prototype.interfaces_=function(){return[]},sd.prototype.getClass=function(){return sd};var ad=function(){};ad.prototype.interfaces_=function(){return[]},ad.prototype.getClass=function(){return ad},ad.map=function(){if(arguments[0]instanceof Cl&&Yu(arguments[1],ad.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Ul,r=0;r<t.getNumGeometries();r++){var o=e.map(t.getGeometryN(r));null!==o&&n.add(o)}return t.getFactory().buildGeometry(n)}if(Yu(arguments[0],jl)&&Yu(arguments[1],ad.MapOp)){for(var i=arguments[0],s=arguments[1],a=new Ul,u=i.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},ad.MapOp=function(){};var ud=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new ah,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Tf,this._resultPolyList=new Ul,this._resultLineList=new Ul,this._resultPointList=new Ul,this._graph=new Pp(new Cf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new dp(t.getLabel())).flip();var o=e.getDepth();o.isNull()&&o.add(n),o.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,o){var i=new Ul;return i.addAll(t),i.addAll(n),i.addAll(r),i.isEmpty()?e.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==qu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Ul,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Ul;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ph.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Cp(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Ih(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var o=new Th(this,this._geomFact,this._ptLocator);this._resultPointList=o.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),o=r.getLabel();o.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(o.getLocation(0,ip.RIGHT),o.getLocation(1,ip.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var o=0;o<2;o++)n.isNull(o)||!n.isArea()||r.isNull(o)||(0===r.getDelta(o)?n.toLine(o):(vl.isTrue(!r.isNull(o,ip.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(o,ip.LEFT,r.getLocation(o,ip.LEFT)),vl.isTrue(!r.isNull(o,ip.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(o,ip.RIGHT,r.getLocation(o,ip.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(sd);ud.overlayOp=function(t,e,n){return new ud(t,e).getResultGeometry(n)},ud.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ud.createEmptyResult(ud.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Ch.map(t,{interfaces_:function(){return[ad.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vh.overlayOp(t,e,ud.INTERSECTION)},ud.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ud.createEmptyResult(ud.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vh.overlayOp(t,e,ud.SYMDIFFERENCE)},ud.resultDimension=function(t,e,n){var r=e.getDimension(),o=n.getDimension(),i=-1;switch(t){case ud.INTERSECTION:i=Math.min(r,o);break;case ud.UNION:i=Math.max(r,o);break;case ud.DIFFERENCE:i=r;break;case ud.SYMDIFFERENCE:i=Math.max(r,o)}return i},ud.createEmptyResult=function(t,e,n,r){var o=null;switch(ud.resultDimension(t,e,n)){case-1:o=r.createGeometryCollection(new Array(0).fill(null));break;case 0:o=r.createPoint();break;case 1:o=r.createLineString();break;case 2:o=r.createPolygon()}return o},ud.difference=function(t,e){return t.isEmpty()?ud.createEmptyResult(ud.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vh.overlayOp(t,e,ud.DIFFERENCE))},ud.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return ud.isResultOfOp(n,r,e)}if(3===arguments.length){var o=arguments[0],i=arguments[1],s=arguments[2];switch(o===qu.BOUNDARY&&(o=qu.INTERIOR),i===qu.BOUNDARY&&(i=qu.INTERIOR),s){case ud.INTERSECTION:return o===qu.INTERIOR&&i===qu.INTERIOR;case ud.UNION:return o===qu.INTERIOR||i===qu.INTERIOR;case ud.DIFFERENCE:return o===qu.INTERIOR&&i!==qu.INTERIOR;case ud.SYMDIFFERENCE:return o===qu.INTERIOR&&i!==qu.INTERIOR||o!==qu.INTERIOR&&i===qu.INTERIOR}return!1}},ud.INTERSECTION=1,ud.UNION=2,ud.DIFFERENCE=3,ud.SYMDIFFERENCE=4;var ld=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new ah,this._seg=new Kp;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};ld.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),o=0;o<r.size()-1;o++)if(r.getCoordinate(o,e._seg.p0),r.getCoordinate(o+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},ld.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?qu.BOUNDARY:this._ptLocator.locate(t,this._g)},ld.prototype.extractLinework=function(t){var e=new cd;t.apply(e);var n=e.getLinework(),r=Zc.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld};var cd=function(){this._linework=null,this._linework=new Ul};cd.prototype.getLinework=function(){return this._linework},cd.prototype.filter=function(t){if(t instanceof Nc){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},cd.prototype.interfaces_=function(){return[dc]},cd.prototype.getClass=function(){return cd};var pd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};pd.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),o=0;o<r.length-1;o++)this.computeOffsetPoints(r[o],r[o+1],e,n)},pd.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},pd.prototype.getPoints=function(t){for(var e=new Ul,n=sh.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},pd.prototype.computeOffsetPoints=function(t,e,n,r){var o=e.x-t.x,i=e.y-t.y,s=Math.sqrt(o*o+i*i),a=n*o/s,u=n*i/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var p=new Vu(l-u,c+a);r.add(p)}if(this._doRight){var f=new Vu(l+u,c-a);r.add(f)}},pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd};var fd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Ul;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new ld(this._geom[0],this._boundaryDistanceTolerance),new ld(this._geom[1],this._boundaryDistanceTolerance),new ld(this._geom[2],this._boundaryDistanceTolerance)]},hd={TOLERANCE:{configurable:!0}};fd.prototype.reportResult=function(t,e,n){al.out.println("Overlay result invalid - A:"+qu.toLocationSymbol(e[0])+" B:"+qu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+qu.toLocationSymbol(e[2]))},fd.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},fd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var o=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!fd.hasLocation(this._location,qu.BOUNDARY)||this.isValidResult(o,this._location)}},fd.prototype.addTestPts=function(t){var e=new pd(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},fd.prototype.isValidResult=function(t,e){var n=ud.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===qu.INTERIOR);return r||this.reportResult(t,e,n),r},fd.prototype.getInvalidLocation=function(){return this._invalidLocation},fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd},fd.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},fd.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Ah.computeSizeBasedSnapTolerance(t),Ah.computeSizeBasedSnapTolerance(e))},fd.isValid=function(t,e,n,r){return new fd(t,e,r).isValid(n)},hd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(fd,hd);var dd=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};dd.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},dd.prototype.combine=function(){for(var t=new Ul,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},dd.prototype.interfaces_=function(){return[]},dd.prototype.getClass=function(){return dd},dd.combine=function(){if(1===arguments.length){var t=arguments[0],e=new dd(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],o=new dd(dd.createList(n,r));return o.combine()}if(3===arguments.length){var i=arguments[0],s=arguments[1],a=arguments[2],u=new dd(dd.createList(i,s,a));return u.combine()}},dd.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},dd.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ul;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],o=arguments[1],i=arguments[2],s=new Ul;return s.add(r),s.add(o),s.add(i),s}};var gd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Ul)},yd={STRTREE_NODE_CAPACITY:{configurable:!0}};gd.prototype.reduceToGeometries=function(t){for(var e=new Ul,n=t.iterator();n.hasNext();){var r=n.next(),o=null;Yu(r,zl)?o=this.unionTree(r):r instanceof Cl&&(o=r),e.add(o)}return e},gd.prototype.extractByEnvelope=function(t,e,n){for(var r=new Ul,o=0;o<e.getNumGeometries();o++){var i=e.getGeometryN(o);i.getEnvelopeInternal().intersects(t)?r.add(i):n.add(i)}return this._geomFactory.buildGeometry(r)},gd.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return dd.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,o)},gd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Vp(gd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},gd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var o=gd.getGeometry(e,n);return this.unionSafe(o,null)}if(r-n==2)return this.unionSafe(gd.getGeometry(e,n),gd.getGeometry(e,n+1));var i=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,i),a=this.binaryUnion(e,i,r);return this.unionSafe(s,a)}},gd.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},gd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},gd.prototype.unionActual=function(t,e){return gd.restrictToPolygons(t.union(e))},gd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},gd.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Ul,o=this.extractByEnvelope(n,t,r),i=this.extractByEnvelope(n,e,r),s=this.unionActual(o,i);return r.add(s),dd.combine(r)},gd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var o=arguments[0],i=arguments[1],s=o.getFactory(),a=s.createGeometryCollection([o,i]),u=a.buffer(0);return u}},gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd},gd.restrictToPolygons=function(t){if(Yu(t,Ac))return t;var e=ih.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Zc.toPolygonArray(e))},gd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},gd.union=function(t){return new gd(t).union()},yd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(gd,yd);var md=function(){};function vd(){return new bd}function bd(){this.reset()}md.prototype.interfaces_=function(){return[]},md.prototype.getClass=function(){return md},md.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ud.createEmptyResult(ud.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vh.overlayOp(t,e,ud.UNION)},bd.prototype={constructor:bd,reset:function(){this.s=this.t=0},add:function(t){wd(_d,t,this.t),wd(this,_d.s,this.s),this.s?this.t+=_d.t:this.s=_d.t},valueOf:function(){return this.s}};var _d=new bd;function wd(t,e,n){var r=t.s=e+n,o=r-e,i=r-o;t.t=e-i+(n-o)}var xd=1e-6,Sd=Math.PI,Ed=Sd/2,Od=Sd/4,Pd=2*Sd,Cd=180/Sd,Id=Sd/180,Td=Math.abs,Rd=Math.atan,Md=Math.atan2,Ad=Math.cos,Nd=Math.sin,kd=Math.sqrt;function Ld(t){return t>1?0:t<-1?Sd:Math.acos(t)}function Dd(t){return t>1?Ed:t<-1?-Ed:Math.asin(t)}function jd(){}function Fd(t,e){t&&Ud.hasOwnProperty(t.type)&&Ud[t.type](t,e)}var Bd,zd,Vd={Feature:function(t,e){Fd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)Fd(n[r].geometry,e)}},Ud={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Hd(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)Hd(n[r],e,0)},Polygon:function(t,e){Gd(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)Gd(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)Fd(n[r],e)}};function Hd(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();++o<i;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function Gd(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Hd(t[n],e,1);e.polygonEnd()}function qd(t){return[Md(t[1],t[0]),Dd(t[2])]}function Wd(t){var e=t[0],n=t[1],r=Ad(n);return[r*Ad(e),r*Nd(e),Nd(n)]}function Yd(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Xd(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $d(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Kd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Zd(t){var e=kd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Jd(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Qd(t,e){return[t>Sd?t-Pd:t<-Sd?t+Pd:t,e]}function tg(t){return function(e,n){return[(e+=t)>Sd?e-Pd:e<-Sd?e+Pd:e,n]}}function eg(t){var e=tg(t);return e.invert=tg(-t),e}function ng(t,e){var n=Ad(t),r=Nd(t),o=Ad(e),i=Nd(e);function s(t,e){var s=Ad(e),a=Ad(t)*s,u=Nd(t)*s,l=Nd(e),c=l*n+a*r;return[Md(u*o-c*i,a*n-l*r),Dd(c*o+u*i)]}return s.invert=function(t,e){var s=Ad(e),a=Ad(t)*s,u=Nd(t)*s,l=Nd(e),c=l*o-u*i;return[Md(u*o+l*i,a*n+c*r),Dd(c*n-a*r)]},s}function rg(t,e){(e=Wd(e))[0]-=t,Zd(e);var n=Ld(-e[1]);return((-e[2]<0?-n:n)+Pd-xd)%Pd}function og(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:jd,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ig(t,e){return Td(t[0]-e[0])<xd&&Td(t[1]-e[1])<xd}function sg(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ag(t,e,n,r,o){var i,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(ig(r,s)){for(o.lineStart(),i=0;i<e;++i)o.point((r=t[i])[0],r[1]);o.lineEnd()}else a.push(n=new sg(r,t,null,!0)),u.push(n.o=new sg(r,null,n,!1)),a.push(n=new sg(s,t,null,!1)),u.push(n.o=new sg(s,null,n,!0))}})),a.length){for(u.sort(e),ug(a),ug(u),i=0,s=u.length;i<s;++i)u[i].e=n=!n;for(var l,c,p=a[0];;){for(var f=p,h=!0;f.v;)if((f=f.n)===p)return;l=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(i=0,s=l.length;i<s;++i)o.point((c=l[i])[0],c[1]);else r(f.x,f.n.x,1,o);f=f.n}else{if(h)for(l=f.p.z,i=l.length-1;i>=0;--i)o.point((c=l[i])[0],c[1]);else r(f.x,f.p.x,-1,o);f=f.p}l=(f=f.o).z,h=!h}while(!f.v);o.lineEnd()}}}function ug(t){if(e=t.length){for(var e,n,r=0,o=t[0];++r<e;)o.n=n=t[r],n.p=o,o=n;o.n=n=t[0],n.p=o}}function lg(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function cg(t){for(var e,n,r,o=t.length,i=-1,s=0;++i<o;)s+=t[i].length;for(n=new Array(s);--o>=0;)for(e=(r=t[o]).length;--e>=0;)n[--s]=r[e];return n}vd(),vd(),vd(),Qd.invert=Qd,1===(Bd=lg).length&&(zd=Bd,Bd=function(t,e){return lg(zd(t),e)});var pg=1e9,fg=-pg;function hg(t,e,n,r){function o(o,i){return t<=o&&o<=n&&e<=i&&i<=r}function i(o,i,a,l){var c=0,p=0;if(null==o||(c=s(o,a))!==(p=s(i,a))||u(o,i)<0^a>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+a+4)%4)!==p);else l.point(i[0],i[1])}function s(r,o){return Td(r[0]-t)<xd?o>0?0:3:Td(r[0]-n)<xd?o>0?2:1:Td(r[1]-e)<xd?o>0?1:0:o>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,c,p,f,h,d,g,y,m,v,b=s,_=og(),w={point:x,lineStart:function(){w.point=S,l&&l.push(c=[]),m=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(S(p,f),h&&y&&_.rejoin(),u.push(_.result())),w.point=x,y&&b.lineEnd()},polygonStart:function(){b=_,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,o=l.length;n<o;++n)for(var i,s,a=l[n],u=1,c=a.length,p=a[0],f=p[0],h=p[1];u<c;++u)i=f,s=h,f=(p=a[u])[0],h=p[1],s<=r?h>r&&(f-i)*(r-s)>(h-s)*(t-i)&&++e:h<=r&&(f-i)*(r-s)<(h-s)*(t-i)&&--e;return e}(),n=v&&e,o=(u=cg(u)).length;(n||o)&&(s.polygonStart(),n&&(s.lineStart(),i(null,null,1,s),s.lineEnd()),o&&ag(u,a,e,i,s),s.polygonEnd()),b=s,u=l=c=null}};function x(t,e){o(t,e)&&b.point(t,e)}function S(i,s){var a=o(i,s);if(l&&c.push([i,s]),m)p=i,f=s,h=a,m=!1,a&&(b.lineStart(),b.point(i,s));else if(a&&y)b.point(i,s);else{var u=[d=Math.max(fg,Math.min(pg,d)),g=Math.max(fg,Math.min(pg,g))],_=[i=Math.max(fg,Math.min(pg,i)),s=Math.max(fg,Math.min(pg,s))];!function(t,e,n,r,o,i){var s,a=t[0],u=t[1],l=0,c=1,p=e[0]-a,f=e[1]-u;if(s=n-a,p||!(s>0)){if(s/=p,p<0){if(s<l)return;s<c&&(c=s)}else if(p>0){if(s>c)return;s>l&&(l=s)}if(s=o-a,p||!(s<0)){if(s/=p,p<0){if(s>c)return;s>l&&(l=s)}else if(p>0){if(s<l)return;s<c&&(c=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>l&&(l=s)}if(s=i-u,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*p,t[1]=u+l*f),c<1&&(e[0]=a+c*p,e[1]=u+c*f),!0}}}}}(u,_,t,e,n,r)?a&&(b.lineStart(),b.point(i,s),v=!1):(y||(b.lineStart(),b.point(u[0],u[1])),b.point(_[0],_[1]),a||b.lineEnd(),v=!1)}d=i,g=s,y=a}return w}}var dg=vd();function gg(t){return t}vd(),vd(),vd();var yg=1/0,mg=yg,vg=-yg,bg=vg,_g={point:function(t,e){t<yg&&(yg=t),t>vg&&(vg=t),e<mg&&(mg=e),e>bg&&(bg=e)},lineStart:jd,lineEnd:jd,polygonStart:jd,polygonEnd:jd,result:function(){var t=[[yg,mg],[vg,bg]];return vg=bg=-(mg=yg=1/0),t}};function wg(t,e,n,r){return function(o,i){var s,a,u,l=e(i),c=o.invert(r[0],r[1]),p=og(),f=e(p),h=!1,d={point:g,lineStart:m,lineEnd:v,polygonStart:function(){d.point=b,d.lineStart=_,d.lineEnd=w,a=[],s=[]},polygonEnd:function(){d.point=g,d.lineStart=m,d.lineEnd=v,a=cg(a);var t=function(t,e){var n=e[0],r=e[1],o=[Nd(n),-Ad(n),0],i=0,s=0;dg.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,p=l[c-1],f=p[0],h=p[1]/2+Od,d=Nd(h),g=Ad(h),y=0;y<c;++y,f=v,d=_,g=w,p=m){var m=l[y],v=m[0],b=m[1]/2+Od,_=Nd(b),w=Ad(b),x=v-f,S=x>=0?1:-1,E=S*x,O=E>Sd,P=d*_;if(dg.add(Md(P*S*Nd(E),g*w+P*Ad(E))),i+=O?x+S*Pd:x,O^f>=n^v>=n){var C=Xd(Wd(p),Wd(m));Zd(C);var I=Xd(o,C);Zd(I);var T=(O^x>=0?-1:1)*Dd(I[2]);(r>T||r===T&&(C[0]||C[1]))&&(s+=O^x>=0?1:-1)}}return(i<-1e-6||i<xd&&dg<-1e-6)^1&s}(s,c);a.length?(h||(i.polygonStart(),h=!0),ag(a,Sg,t,n,i)):t&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),a=s=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&i.point(e,n)}function y(t,e){var n=o(t,e);l.point(n[0],n[1])}function m(){d.point=y,l.lineStart()}function v(){d.point=g,l.lineEnd()}function b(t,e){u.push([t,e]);var n=o(t,e);f.point(n[0],n[1])}function _(){f.lineStart(),u=[]}function w(){b(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,o=f.clean(),l=p.result(),c=l.length;if(u.pop(),s.push(u),u=null,c)if(1&o){if((e=(n=l[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else c>1&&2&o&&l.push(l.pop().concat(l.shift())),a.push(l.filter(xg))}return d}}function xg(t){return t.length>1}function Sg(t,e){return((t=t.x)[0]<0?t[1]-Ed-xd:Ed-t[1])-((e=e.x)[0]<0?e[1]-Ed-xd:Ed-e[1])}vd();var Eg=wg((function(){return!0}),(function(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,s){var a=i>0?Sd:-Sd,u=Td(i-n);Td(u-Sd)<xd?(t.point(n,r=(r+s)/2>0?Ed:-Ed),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(i,r),e=0):o!==a&&u>=Sd&&(Td(n-o)<xd&&(n-=o*xd),Td(i-a)<xd&&(i-=a*xd),r=function(t,e,n,r){var o,i,s=Nd(t-n);return Td(s)>xd?Rd((Nd(e)*(i=Ad(r))*Nd(n)-Nd(r)*(o=Ad(e))*Nd(t))/(o*i*s)):(e+r)/2}(n,r,i,s),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=i,r=s),o=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var o;if(null==t)o=n*Ed,r.point(-Sd,o),r.point(0,o),r.point(Sd,o),r.point(Sd,0),r.point(Sd,-o),r.point(0,-o),r.point(-Sd,-o),r.point(-Sd,0),r.point(-Sd,o);else if(Td(t[0]-e[0])>xd){var i=t[0]<e[0]?Sd:-Sd;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(e[0],e[1])}),[-Sd,-Ed]);function Og(t,e){var n=Ad(t),r=n>0,o=Td(n)>xd;function i(t,e){return Ad(t)*Ad(e)>n}function s(t,e,r){var o=[1,0,0],i=Xd(Wd(t),Wd(e)),s=Yd(i,i),a=i[0],u=s-a*a;if(!u)return!r&&t;var l=n*s/u,c=-n*a/u,p=Xd(o,i),f=Kd(o,l);$d(f,Kd(i,c));var h=p,d=Yd(f,h),g=Yd(h,h),y=d*d-g*(Yd(f,f)-1);if(!(y<0)){var m=kd(y),v=Kd(h,(-d-m)/g);if($d(v,f),v=qd(v),!r)return v;var b,_=t[0],w=e[0],x=t[1],S=e[1];w<_&&(b=_,_=w,w=b);var E=w-_,O=Td(E-Sd)<xd;if(!O&&S<x&&(b=x,x=S,S=b),O||E<xd?O?x+S>0^v[1]<(Td(v[0]-_)<xd?x:S):x<=v[1]&&v[1]<=S:E>Sd^(_<=v[0]&&v[0]<=w)){var P=Kd(h,(-d+m)/g);return $d(P,f),[v,qd(P)]}}}function a(e,n){var o=r?t:Sd-t,i=0;return e<-o?i|=1:e>o&&(i|=2),n<-o?i|=4:n>o&&(i|=8),i}return wg(i,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(p,f){var h,d=[p,f],g=i(p,f),y=r?g?0:a(p,f):g?a(p+(p<0?Sd:-Sd),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(h=s(e,d))||ig(e,h)||ig(d,h))&&(d[0]+=xd,d[1]+=xd,g=i(d[0],d[1])),g!==u)c=0,g?(t.lineStart(),h=s(d,e),t.point(h[0],h[1])):(h=s(e,d),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(o&&e&&r^g){var m;y&n||!(m=s(d,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&ig(e,d)||t.point(d[0],d[1]),e=d,u=g,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(n,r,o,i){!function(t,e,n,r,o,i){if(n){var s=Ad(e),a=Nd(e),u=r*n;null==o?(o=e+r*Pd,i=e-u/2):(o=rg(s,o),i=rg(s,i),(r>0?o<i:o>i)&&(o+=r*Pd));for(var l,c=o;r>0?c>i:c<i;c-=u)l=qd([s,-a*Ad(c),-a*Nd(c)]),t.point(l[0],l[1])}}(i,t,e,o,n,r)}),r?[0,-t]:[-Sd,t-Sd])}function Pg(t){return function(e){var n=new Cg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Cg(){}function Ig(t,e,n){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],i=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),function(t,e){t&&Vd.hasOwnProperty(t.type)?Vd[t.type](t,e):Fd(t,e)}(n,t.stream(_g));var s=_g.result(),a=Math.min(r/(s[1][0]-s[0][0]),o/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(o-a*(s[1][1]+s[0][1]))/2;return null!=i&&t.clipExtent(i),t.scale(150*a).translate([u,l])}Cg.prototype={constructor:Cg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Tg=Ad(30*Id);function Rg(t,e){return+e?function(t,e){function n(r,o,i,s,a,u,l,c,p,f,h,d,g,y){var m=l-r,v=c-o,b=m*m+v*v;if(b>4*e&&g--){var _=s+f,w=a+h,x=u+d,S=kd(_*_+w*w+x*x),E=Dd(x/=S),O=Td(Td(x)-1)<xd||Td(i-p)<xd?(i+p)/2:Md(w,_),P=t(O,E),C=P[0],I=P[1],T=C-r,R=I-o,M=v*T-m*R;(M*M/b>e||Td((m*T+v*R)/b-.5)>.3||s*f+a*h+u*d<Tg)&&(n(r,o,i,s,a,u,C,I,O,_/=S,w/=S,x,g,y),y.point(C,I),n(C,I,O,_,w,x,l,c,p,f,h,d,g,y))}}return function(e){var r,o,i,s,a,u,l,c,p,f,h,d,g={point:y,lineStart:m,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=_},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){c=NaN,g.point=v,e.lineStart()}function v(r,o){var i=Wd([r,o]),s=t(r,o);n(c,p,l,f,h,d,c=s[0],p=s[1],l=r,f=i[0],h=i[1],d=i[2],16,e),e.point(c,p)}function b(){g.point=y,e.lineEnd()}function _(){m(),g.point=w,g.lineEnd=x}function w(t,e){v(r=t,e),o=c,i=p,s=f,a=h,u=d,g.point=v}function x(){n(c,p,l,f,h,d,o,i,r,s,a,u,16,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return Pg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Mg=Pg({point:function(t,e){this.stream.point(t*Id,e*Id)}}),Ag=function(t,e){var n=Ad(t),r=Ad(e),o=function(t){return(t=Ld(t))&&t/Nd(t)}(n*r);return[o*r*Nd(t),o*Nd(e)]};function Ng(){return function(t){return function(t){var e,n,r,o,i,s,a,u,l,c,p=150,f=480,h=250,d=0,g=0,y=0,m=0,v=0,b=null,_=Eg,w=null,x=gg,S=.5,E=Rg(C,S);function O(t){return[(t=i(t[0]*Id,t[1]*Id))[0]*p+n,r-t[1]*p]}function P(t){return(t=i.invert((t[0]-n)/p,(r-t[1])/p))&&[t[0]*Cd,t[1]*Cd]}function C(t,o){return[(t=e(t,o))[0]*p+n,r-t[1]*p]}function I(){i=Jd(o=function(t,e,n){return(t%=Pd)?e||n?Jd(eg(t),ng(e,n)):eg(t):e||n?ng(e,n):Qd}(y,m,v),e);var t=e(d,g);return n=f-t[0]*p,r=h+t[1]*p,T()}function T(){return l=c=null,O}return O.stream=function(t){return l&&c===t?l:l=Mg(_(o,E(x(c=t))))},O.clipAngle=function(t){return arguments.length?(_=+t?Og(b=t*Id,6*Id):(b=null,Eg),T()):b*Cd},O.clipExtent=function(t){return arguments.length?(x=null==t?(w=s=a=u=null,gg):hg(w=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),T()):null==w?null:[[w,s],[a,u]]},O.scale=function(t){return arguments.length?(p=+t,I()):p},O.translate=function(t){return arguments.length?(f=+t[0],h=+t[1],I()):[f,h]},O.center=function(t){return arguments.length?(d=t[0]%360*Id,g=t[1]%360*Id,I()):[d*Cd,g*Cd]},O.rotate=function(t){return arguments.length?(y=t[0]%360*Id,m=t[1]%360*Id,v=t.length>2?t[2]%360*Id:0,I()):[y*Cd,m*Cd,v*Cd]},O.precision=function(t){return arguments.length?(E=Rg(C,S=t*t),T()):kd(S)},O.fitExtent=function(t,e){return Ig(O,t,e)},O.fitSize=function(t,e){return function(t,e,n){return Ig(t,[[0,0],e],n)}(O,t,e)},function(){return e=t.apply(this,arguments),O.invert=e.invert&&P,I()}}((function(){return t}))()}(Ag).scale(79.4188).clipAngle(179.999)}function kg(t,n,r,o){var i=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return V(t,(function(t){var e=kg(t,n,r,o);e&&u.push(e)})),g(u)}var l=function(t){var n=gn(t).geometry.coordinates,r=[-n[0],-n[1]];return Ng().rotate(r).scale(e)}(a),c={type:a.type,coordinates:Dg(a.coordinates,l)},p=(new rp).read(c),f=w(x(n,r),"meters"),h=Zf.bufferOp(p,f,o);if(!Lg((h=(new op).write(h)).coordinates))return s({type:h.type,coordinates:jg(h.coordinates,l)},i)}function Lg(t){return Array.isArray(t[0])?Lg(t[0]):isNaN(t[0])}function Dg(t,e){return"object"!=a(t[0])?e(t):t.map((function(t){return Dg(t,e)}))}function jg(t,e){return"object"!=a(t[0])?e.invert(t):t.map((function(t){return jg(t,e)}))}function Fg(t,e,n){void 0===n&&(n={});var r=it(t),o=it(e),i=Au.intersection(r.coordinates,o.coordinates);return 0===i.length?null:1===i.length?p(i[0],n.properties):v(i,n.properties)}function Bg(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),o=t[0],i=t[1],s=t[2],a=t[3],u=(i+a)/2,l=(o+s)/2,c=2*e/be([o,u],[s,u],n)*(s-o),p=2*e/be([l,i],[l,a],n)*(a-i),f=c/2,h=2*f,d=Math.sqrt(3)/2*p,y=s-o,m=a-i,v=3/4*h,b=d,_=(y-h)/(h-f/2),w=Math.floor(_),x=(w*v-f/2-y)/2-f/2+v/2,S=Math.floor((m-d)/d),E=(m-S*d)/2,O=S*d-m>d/2;O&&(E-=d/4);for(var P=[],C=[],I=0;I<6;I++){var T=2*Math.PI/6*I;P.push(Math.cos(T)),C.push(Math.sin(T))}for(var R=[],M=0;M<=w;M++)for(var A=0;A<=S;A++){var N=M%2==1;if(!(0===A&&N||0===A&&O)){var k=M*v+o-x,L=A*b+i+E;if(N&&(L-=d/2),!0===n.triangles)Vg([k,L],c/2,p/2,JSON.parse(r),P,C).forEach((function(t){n.mask?Fg(n.mask,t)&&R.push(t):R.push(t)}));else{var D=zg([k,L],c/2,p/2,JSON.parse(r),P,C);n.mask?Fg(n.mask,D)&&R.push(D):R.push(D)}}}return g(R)}function zg(t,e,n,r,o,i){for(var s=[],a=0;a<6;a++){var u=t[0]+e*o[a],l=t[1]+n*i[a];s.push([u,l])}return s.push(s[0].slice()),p([s],r)}function Vg(t,e,n,r,o,i){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*o[a],t[1]+n*i[a]]),u.push([t[0]+e*o[(a+1)%6],t[1]+n*i[(a+1)%6]]),u.push(t),s.push(p([u],r))}return s}function Ug(t){return v(t)}function Hg(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var o=[],i=t[0],s=t[1],a=t[2],u=t[3],l=e/be([i,s],[a,s],r)*(a-i),c=n/be([i,s],[i,u],r)*(u-s),f=a-i,h=u-s,d=Math.floor(f/l),y=Math.floor(h/c),m=(h-y*c)/2,v=i+(f-d*l)/2,b=0;b<d;b++){for(var _=s+m,w=0;w<y;w++){var x=p([[[v,_],[v,_+c],[v+l,_+c],[v+l,_],[v,_]]],r.properties);r.mask?cs(r.mask,x)&&o.push(x):o.push(x),_+=c}v+=l}return g(o)}(t,e,e,n)}function Gg(t,e,n){void 0===n&&(n={});for(var r=[],o=e/be([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),i=e/be([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var c=null,f=null;s%2==0&&u%2==0?(c=p([[[a,l],[a,l+i],[a+o,l],[a,l]]],n.properties),f=p([[[a,l+i],[a+o,l+i],[a+o,l],[a,l+i]]],n.properties)):s%2==0&&u%2==1?(c=p([[[a,l],[a+o,l+i],[a+o,l],[a,l]]],n.properties),f=p([[[a,l],[a,l+i],[a+o,l+i],[a,l]]],n.properties)):u%2==0&&s%2==1?(c=p([[[a,l],[a,l+i],[a+o,l+i],[a,l]]],n.properties),f=p([[[a,l],[a+o,l+i],[a+o,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(c=p([[[a,l],[a,l+i],[a+o,l],[a,l]]],n.properties),f=p([[[a,l+i],[a+o,l+i],[a+o,l],[a,l+i]]],n.properties)),n.mask?(Fg(n.mask,c)&&r.push(c),Fg(n.mask,f)&&r.push(f)):(r.push(c),r.push(f)),l+=i,u++}s++,a+=o}return g(r)}Ag.invert=function(t,e){var n=kd(t*t+e*e),r=n,o=Nd(r),i=Ad(r);return[Md(t*o,n*i),Dd(n&&e*o/n)]},t.along=function(t,e,n){void 0===n&&(n={});for(var r=it(t).coordinates,o=0,i=0;i<r.length&&!(e>=o&&i===r.length-1);i++){if(o>=e){var s=e-o;if(s){var a=dn(r[i],r[i-1])-180;return fn(r[i],s,a,n)}return l(r[i])}o+=be(r[i],r[i+1],n)}return l(r[r.length-1])},t.angle=function(t,e,n,r){if(void 0===r&&(r={}),!R(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var o=t,i=e,s=n,a=E(!0!==r.mercator?dn(o,i):Oo(o,i)),u=E(!0!==r.mercator?dn(s,i):Oo(s,i)),l=Math.abs(a-u);return!0===r.explementary?360-l:l},t.applyFilter=Va,t.area=Cr,t.areaFactors=i,t.bbox=J,t.bboxClip=function(t,e){var n=it(t),r=n.type,o="Feature"===t.type?t.properties:{},i=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(i=[i]),i.forEach((function(t){!function(t,e,n){var r,o,i,s,a,u=t.length,l=mo(t[0],e),c=[];for(n||(n=[]),r=1;r<u;r++){for(s=t[r-1],o=i=mo(a=t[r],e);;){if(!(l|o)){c.push(s),o!==i?(c.push(a),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(a);break}if(l&o)break;l?l=mo(s=yo(s,a,l,e),e):o=mo(a=yo(s,a,o,e),e)}l=i}c.length&&n.push(c)}(t,e,s)})),1===s.length?h(s[0],o):y(s,o);case"Polygon":return p(vo(i,e),o);case"MultiPolygon":return v(i.map((function(t){return vo(t,e)})),o);default:throw new Error("geometry "+r+" not supported")}},t.bboxPolygon=ln,t.bearing=dn,t.bearingToAngle=E,t.bearingToAzimuth=E,t.bezier=un,t.bezierSpline=un,t.booleanClockwise=Mo,t.booleanContains=function(t,e){var n=it(t),r=it(e),o=n.type,i=r.type,s=n.coordinates,a=r.coordinates;switch(o){case"Point":switch(i){case"Point":return Qi(s,a);default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Qi(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var o=r[n],i=!1,s=0,a=t.coordinates;s<a.length;s++)if(Qi(o,a[s])){i=!0;break}if(!i)return!1}return!0}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"Point":return Nr(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,o=e.coordinates;r<o.length;r++){var i=o[r];if(Nr({type:"Point",coordinates:i},t,{ignoreEndVertices:!0})&&(n=!0),!Nr({type:"Point",coordinates:i},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,o=e.coordinates;r<o.length;r++){var i=o[r];if(Nr(i,t,{ignoreEndVertices:!0})&&(n=!0),!Nr(i,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Point":return ye(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!Ji(J(t),J(e)))return!1;for(;r<e.coordinates.length-1;r++)if(ye({type:"Point",coordinates:ts(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!Ji(J(t),J(e)))return!1;for(var n=0,r=it(e).coordinates;n<r.length;n++)for(var o=0,i=r[n];o<i.length;o++)if(!ye(i[o],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!ye(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=it(t),r=it(e),o=n.type,i=r.type;switch(o){case"MultiPoint":switch(i){case"LineString":return es(n,r);case"Polygon":return rs(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"MultiPoint":return es(r,n);case"LineString":return function(t,e){if(yr(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var o=!0;if(0!==r&&r!==e.coordinates.length-2||(o=!1),os(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],o))return!0}return!1}(n,r);case"Polygon":return ns(n,r);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"MultiPoint":return rs(r,n);case"LineString":return ns(r,n);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}},t.booleanDisjoint=Xi,t.booleanEqual=function(t,e){return it(t).type===it(e).type&&new ls({precision:6}).compare($e(t),$e(e))},t.booleanIntersects=cs,t.booleanOverlap=function(t,e){var n=it(t),r=it(e),o=n.type,i=r.type;if("MultiPoint"===o&&"MultiPoint"!==i||("LineString"===o||"MultiLineString"===o)&&"LineString"!==i&&"MultiLineString"!==i||("Polygon"===o||"MultiPolygon"===o)&&"Polygon"!==i&&"MultiPolygon"!==i)throw new Error("features must be of the same type");if("Point"===o)throw new Error("Point geometry not supported");if(new ls({precision:6}).compare(t,e))return!1;var s=0;switch(o){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var l=n.coordinates[a],c=r.coordinates[u];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":q(t,(function(t){q(e,(function(e){xo(t,e).features.length&&s++}))}));break;case"Polygon":case"MultiPolygon":q(t,(function(t){q(e,(function(e){yr(t,e).features.length&&s++}))}))}return s>0},t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Ss(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Ss(e,"line2"))throw new Error("line2 must be a LineString");for(var n=qn($e(t)).features,r=qn($e(e)).features,o=0;o<n.length;o++){var i=n[o].geometry.coordinates;if(!r[o])break;if(!xs(i,r[o].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=ye,t.booleanPointOnLine=Nr,t.booleanWithin=Lr,t.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",o=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=a(n))throw new Error("options must be an object");if("number"!=typeof o)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(o<=0)throw new Error("steps must be greater than 0");var i=[];switch(t.type){case"GeometryCollection":return V(t,(function(t){var n=kg(t,e,r,o);n&&i.push(n)})),g(i);case"FeatureCollection":return F(t,(function(t){var n=kg(t,e,r,o);n&&F(n,(function(t){t&&i.push(t)}))})),g(i)}return kg(t,e,r,o)},t.center=gn,t.centerMean=ya,t.centerMedian=function(t,e){if(void 0===e&&(e={}),!R(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!T(n))throw new Error("counter must be a number");var r=e.weight,o=ya(t,{weight:e.weight}),i=g([]);F(t,(function(t){var e;i.features.push(yn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))}));var s={tolerance:e.tolerance,medianCandidates:[]};return ma(o.geometry.coordinates,[0,0],i,s,n)},t.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),st(e)){case"Point":return l(Q(e),n.properties);case"Polygon":var r=[];k(e,(function(t){r.push(t)}));var o,i,s,a,u,c,p,f,h=yn(e,{properties:n.properties}),d=h.geometry.coordinates,g=0,y=0,m=0,v=r.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(o=0;o<r.length-1;o++)a=(i=v[o])[0],c=i[1],u=(s=v[o+1])[0],m+=f=a*(p=s[1])-u*c,g+=(a+u)*f,y+=(c+p)*f;if(0===m)return h;var b=1/(.5*m*6);return l([d[0]+b*g,d[1]+b*y],n.properties);default:var _=ge(e);return _?t(_,{properties:n.properties}):yn(e,{properties:n.properties})}},t.centroid=yn,t.circle=hn,t.cleanCoords=$e,t.clone=Ee,t.clusterEach=Fa,t.clusterReduce=Ba,t.clusters=Ga,t.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Ee(t)),n.minPoints=n.minPoints||3;var r=new gs.DBSCAN,o=r.run(z(t),C(e,n.units),n.minPoints,be),i=-1;return o.forEach((function(e){i++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=i,n.properties.dbscan="core"}))})),r.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Ee(t));var r=z(t),o=r.slice(0,e.numberOfClusters),i=ws(r,e.numberOfClusters,o),s={};return i.centroids.forEach((function(t,e){s[e]=t})),F(t,(function(t,e){var n=i.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]})),t},t.collect=function(t,e,n,r){var o=Pt(6),i=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return o.load(i),t.features.forEach((function(t){t.properties||(t.properties={});var e=J(t),n=o.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),i=[];n.forEach((function(e){ye([e.minX,e.minY],t)&&i.push(e.property)})),t.properties[r]=i})),t},t.collectionOf=ot,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return F(t,(function(t){var n,r,o,i;switch(null===(i=t.geometry)||void 0===i?void 0:i.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(o=e.MultiPolygon.coordinates).push.apply(o,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),g(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return s({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},t.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=_e(function(t){var e=[],n={};return F(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}})),g(e)}(t));if(r.features=r.features.filter((function(t){var r=t.geometry.coordinates[0][0],o=t.geometry.coordinates[0][1],i=t.geometry.coordinates[0][2],s=be(r,o,e),a=be(o,i,e),u=be(r,i,e);return s<=n&&a<=n&&u<=n})),r.features.length<1)return null;var o=Xe(r);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),s(o)},t.containsNumber=et,t.convertArea=I,t.convertDistance=C,t.convertLength=C,t.convex=ge,t.coordAll=z,t.coordEach=k,t.coordReduce=L,t.createBins=za,t.degrees2radians=P,t.degreesToRadians=P,t.destination=fn,t.difference=function(t,e){var n=it(t),r=it(e),o=t.properties||{},i=Au.difference(n.coordinates,r.coordinates);return 0===i.length?null:1===i.length?p(i[0],o):v(i,o)},t.dissolve=function(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;ot(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return Vr(v(Au.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var o={};F(t,(function(t){Object.prototype.hasOwnProperty.call(o,t.properties[n])||(o[t.properties[n]]=[]),o[t.properties[n]].push(t)}));for(var i=Object.keys(o),s=0;s<i.length;s++){var a=v(Au.union.apply(null,o[i[s]].map((function(t){return t.geometry.coordinates}))));a.properties[n]=i[s],r.push(a)}return Vr(g(r))},t.distance=be,t.distanceToDegrees=S,t.distanceToRadians=x,t.distanceWeight=xa,t.earthRadius=e,t.ellipse=da,t.envelope=cn,t.explode=mn,t.factors=r,t.feature=s,t.featureCollection=g,t.featureEach=F,t.featureOf=rt,t.featureReduce=B,t.filterProperties=Ha,t.findPoint=K,t.findSegment=$,t.flatten=Vr,t.flattenEach=H,t.flattenReduce=G,t.flip=function(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Ee(t)),k(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.geojsonType=nt,t.geomEach=V,t.geomReduce=U,t.geometry=u,t.geometryCollection=b,t.getCluster=ja,t.getCoord=Q,t.getCoords=tt,t.getGeom=it,t.getType=st,t.greatCircle=function(t,e,n){if("object"!=a(n=n||{}))throw new Error("options is invalid");var r=n.properties,o=n.npoints,i=n.offset;return t=Q(t),e=Q(e),r=r||{},o=o||100,i=i||10,new eo({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(o,{offset:i}).json()},t.helpers=N,t.hexGrid=Bg,t.inside=ye,t.interpolate=function(t,e,n){if("object"!=a(n=n||{}))throw new Error("options is invalid");var r=n.gridType,o=n.property,i=n.weight;if(!t)throw new Error("points is required");if(ot(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==i&&"number"!=typeof i)throw new Error("weight must be a number");o=o||"elevation",r=r||"square",i=i||1;var s,u=J(t);switch(r){case"point":case"points":s=Br(u,e,n);break;case"square":case"squares":s=Hg(u,e,n);break;case"hex":case"hexes":s=Bg(u,e,n);break;case"triangle":case"triangles":s=Gg(u,e,n);break;default:throw new Error("invalid gridType")}var l=[];return F(s,(function(e){var s=0,a=0;F(t,(function(t){var u,l=be("point"===r?e:yn(e),t,n);if(void 0!==o&&(u=t.properties[o]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var c=1/Math.pow(l,i);a+=c,s+=c*u}));var u=Ee(e);u.properties[o]=s/a,l.push(u)})),g(l)},t.intersect=Fg,t.invariant=at,t.isNumber=T,t.isObject=R,t.isobands=function(t,e,n){if(!R(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",o=n.commonProperties||{},i=n.breaksProperties||[];if(ot(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!R(o))throw new Error("commonProperties is not an Object");if(!Array.isArray(i))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,o=e.flags;ot(t,"Point","input must contain Points");for(var i=function(t,e){var n={};return F(t,(function(t){var e=tt(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return tt(t)[0]-tt(e)[0]}))})).sort((function(t,n){return e?tt(t[0])[1]-tt(n[0])[1]:tt(n[0])[1]-tt(t[0])[1]}))}(t,r),s=[],a=0;a<i.length;a++){for(var u=i[a],l=[],c=0;c<u.length;c++){var p=u[c];p.properties[n]?l.push(p.properties[n]):l.push(0),!0===o&&(p.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],o=1;o<e.length;o++){var i=+e[o-1],s=+e[o],a=Ni(Ai(jo(t,i,s-i))),u={};u.groupedRings=a,u[n]=i+"-"+s,r.push(u)}return r}(s,e,r);return g((a=function(t,e,n){var r=J(n),o=r[2]-r[0],i=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,c=o/u,p=i/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*p+a};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(a,s,t)).map((function(t,e){if(i[e]&&!R(i[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ft({},o,i[e]);return n[r]=t[r],v(t.groupedRings,n)})))},t.isolines=function(t,e,n){if(!R(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",o=n.commonProperties||{},i=n.breaksProperties||[];if(ot(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!R(o))throw new Error("commonProperties must be an Object");if(!Array.isArray(i))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,o=e.flags;ot(t,"Point","input must contain Points");for(var i=function(t,e){var n={};return F(t,(function(t){var e=tt(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return tt(t)[0]-tt(e)[0]}))})).sort((function(t,n){return e?tt(t[0])[1]-tt(n[0])[1]:tt(n[0])[1]-tt(t[0])[1]}))}(t,r),s=[],a=0;a<i.length;a++){for(var u=i[a],l=[],c=0;c<u.length;c++){var p=u[c];p.properties[n]?l.push(p.properties[n]):l.push(0),!0===o&&(p.properties.matrixPosition=[a,c])}s.push(l)}return s}(t,{zProperty:r,flip:!0});return g(function(t,e,n){var r=J(n),o=r[2]-r[0],i=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,c=o/u,p=i/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*p+a};return t.forEach((function(t){k(t,f)})),t}(function(t,e,n,r,o){for(var i=[],s=1;s<e.length;s++){var a=+e[s],u=ft({},r,o[s]);u[n]=a;var l=y(gt(t,a),u);i.push(l)}return i}(s,e,r,o,i),s,t))},t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var i=Sr(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);i&&r.features.push(l([i[0],i[1]]))}}))})),r},t.length=Mr,t.lengthToDegrees=S,t.lengthToRadians=x,t.lineArc=so,t.lineChunk=function(t,e,n){if(!R(n=n||{}))throw new Error("options is invalid");var r=n.units,o=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var i=[];return H(t,(function(t){o&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var o=Mr(t,{units:n});if(o<=e)return r(t);var i=o/e;Number.isInteger(i)||(i=Math.floor(i)+1);for(var s=0;s<i;s++)r(Ar(t,e*s,e*(s+1),{units:n}))}(t,e,r,(function(t){i.push(t)}))})),g(i)},t.lineDistance=Mr,t.lineEach=Y,t.lineIntersect=yr,t.lineOffset=function(t,e,n){if(!R(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var o=st(t),i=t.properties;switch(o){case"LineString":return Vi(t,e,r);case"MultiLineString":var s=[];return H(t,(function(t){s.push(Vi(t,e,r).geometry.coordinates)})),y(s,i);default:throw new Error("geometry "+o+" is not supported")}},t.lineOverlap=xo,t.lineReduce=X,t.lineSegment=qn,t.lineSlice=function(t,e,n){var r=tt(n);if("LineString"!==st(n))throw new Error("line must be a LineString");for(var o,i=vr(n,t),s=vr(n,e),a=[(o=i.properties.index<=s.properties.index?[i,s]:[s,i])[0].geometry.coordinates],u=o[0].properties.index+1;u<o[1].properties.index+1;u++)a.push(r[u]);return a.push(o[1].geometry.coordinates),h(a,n.properties)},t.lineSliceAlong=Ar,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=st(t),r=st(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var o=zr(e,{precision:7});switch(r){case"Point":return ro(t,o);case"MultiPoint":return no(t,o);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return no(t,yr(t,o))}},t.lineString=h,t.lineStringToPolygon=po,t.lineStrings=d,t.lineToPolygon=po,t.mask=function(t,e){var n,r=function(t){return p(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e);return("FeatureCollection"===t.type?Ug(2===(n=t).features.length?Au.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):Au.union.apply(Au,n.features.map((function(t){return t.geometry.coordinates})))):Ug(Au.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){r.geometry.coordinates.push(t[0])})),r},t.meta=Z,t.midpoint=function(t,e){return fn(t,be(t,e)/2,dn(t,e))},t.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,o=e.p||2,i=e.binary||!1,s=xa(t,{alpha:e.alpha||-1,binary:i,p:o,standardization:e.standardization||!0,threshold:r}),a=[];F(t,(function(t){var e=t.properties||{};a.push(e[n])}));for(var u=Sa(a),l=function(t){for(var e=Sa(t),n=0,r=0,o=t;r<o.length;r++){var i=o[r];n+=Math.pow(i-e,2)}return n/t.length}(a),c=0,p=0,f=0,h=0,d=s.length,g=0;g<d;g++){for(var y=0,m=0;m<d;m++)c+=s[g][m]*(a[g]-u)*(a[m]-u),p+=s[g][m],f+=Math.pow(s[g][m]+s[m][g],2),y+=s[g][m]+s[m][g];h+=Math.pow(y,2)}var v=c/p/l,b=-1/(d-1),_=(d*d*(f*=.5)-d*h+p*p*3)/((d-1)*(d+1)*(p*p))-b*b,w=Math.sqrt(_);return{expectedMoranIndex:b,moranIndex:v,stdNorm:w,zNorm:(v-b)/w}},t.multiLineString=y,t.multiPoint=m,t.multiPolygon=v,t.nearest=Gn,t.nearestPoint=Gn,t.nearestPointOnLine=vr,t.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,o=n.properties||{},i=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return V(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!i.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==st(e))throw new Error("line must be a LineString");var s=1/0,a=null;return F(i,(function(t){var n=_r(t,e,{units:r});n<s&&(s=n,a=t)})),a&&(a.properties=ft({dist:s},a.properties,o)),a},t.planepoint=function(t,e){var n=Q(t),r=it(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var o=e.properties||{},i=o.a,s=o.b,a=o.c,u=n[0],l=n[1],c=r[0][0],p=r[0][1],f=void 0!==i?i:r[0][2],h=r[1][0],d=r[1][1],g=void 0!==s?s:r[1][2],y=r[2][0],m=r[2][1],v=void 0!==a?a:r[2][2];return(v*(u-c)*(l-d)+f*(u-h)*(l-m)+g*(u-y)*(l-p)-g*(u-c)*(l-m)-v*(u-h)*(l-p)-f*(u-y)*(l-d))/((u-c)*(l-d)+(u-h)*(l-m)+(u-y)*(l-p)-(u-c)*(l-m)-(u-h)*(l-p)-(u-y)*(l-d))},t.point=l,t.pointGrid=Br,t.pointOnFeature=Er,t.pointOnLine=vr,t.pointOnSurface=Er,t.pointToLineDistance=_r,t.points=c,t.pointsWithinPolygon=ve,t.polygon=p,t.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return V(t,(function(t,e,o){var i,s,a;switch(t.type){case"Polygon":i=[[]];for(var u=0;u<r;u++)a=[[]],s=t,u>0&&(s=p(i).geometry),ba(s,a),i=a.slice(0);n.push(p(i,o));break;case"MultiPolygon":i=[[[]]];for(var l=0;l<r;l++)a=[[[]]],s=t,l>0&&(s=v(i).geometry),_a(s,a),i=a.slice(0);n.push(v(i,o));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),g(n)},t.polygonTangents=function(t,e){var n,r,o,i,s=tt(t),a=tt(e),u=J(e),c=0,p=null;switch(s[0]>u[0]&&s[0]<u[2]&&s[1]>u[1]&&s[1]<u[3]&&(c=(p=Gn(t,mn(e))).properties.featureIndex),st(e)){case"Polygon":n=a[0][c],r=a[0][0],null!==p&&p.geometry.coordinates[1]<s[1]&&(r=a[0][c]),i=Ro(a[0][0],a[0][a[0].length-1],s);var f=Io(a[0],s,i,o,n,r);n=f[0],r=f[1];break;case"MultiPolygon":for(var h=0,d=0,y=0,m=0;m<a[0].length;m++){h=m;for(var v=!1,b=0;b<a[0][m].length;b++){if(d=b,y===c){v=!0;break}y++}if(v)break}n=a[0][h][d],r=a[0][h][d],i=Ro(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach((function(t){var e=Io(t[0],s,i,o,n,r);n=e[0],r=e[1]}))}return g([l(n),l(r)])},t.polygonToLine=uo,t.polygonToLineString=uo,t.polygonize=function(t){var e=Yi.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){Wi.findEdgeRingContaining(t,r)&&r.push(t)})),g(r.map((function(t){return t.toPolygon()})))},t.polygons=f,t.projection=Ta,t.propEach=D,t.propReduce=j,t.propertiesContainsFilter=Ua,t.radians2degrees=O,t.radiansToDegrees=O,t.radiansToDistance=w,t.radiansToLength=w,t.random=Da,t.randomLineString=Na,t.randomPoint=Ma,t.randomPolygon=Aa,t.randomPosition=Ra,t.rewind=function(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Ee(t));var o=[];switch(t.type){case"GeometryCollection":return V(t,(function(t){Ao(t,n)})),t;case"FeatureCollection":return F(t,(function(t){F(Ao(t,n),(function(t){o.push(t)}))})),g(o)}return Ao(t,n)},t.rhumbBearing=Oo,t.rhumbDestination=Co,t.rhumbDistance=br,t.round=_,t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return g(function(t,e){for(var n,r,o=t.slice(0),i=t.length,s=i-e;i-- >s;)n=o[r=Math.floor((i+1)*Math.random())],o[r]=o[i],o[i]=n;return o.slice(s)}(t.features,e))},t.sector=function(t,e,n,r,o){if(!R(o=o||{}))throw new Error("options is invalid");var i=o.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=a(o))throw new Error("options must be an object");if(Eo(n)===Eo(r))return hn(t,e,o);var s=tt(t),u=so(t,e,n,r,o),l=[[s]];return k(u,(function(t){l[0].push(t)})),l[0].push(s),p(l,i)},t.segmentEach=q,t.segmentReduce=W,t.shortestPath=function(t,e,n){if(!R(n=n||{}))throw new Error("options is invalid");var r=n.resolution,o=n.minDistance,i=n.obstacles||g([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!T(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(o)throw new Error("options.minDistance is not yet implemented");var a=Q(t),u=Q(e);switch(t=l(a),e=l(u),st(i)){case"FeatureCollection":if(0===i.features.length)return h([a,u]);break;case"Polygon":i=g([s(it(i))]);break;default:throw new Error("invalid obstacles")}var c=i;c.features.push(t),c.features.push(e);var p=J(ji(ln(J(c)),1.15));r||(r=be([p[0],p[1]],[p[2],p[1]],n)/100),c.features.pop(),c.features.pop();for(var f=p[0],d=p[1],y=p[2],m=p[3],v=r/be([f,d],[y,d],n)*(y-f),b=r/be([f,d],[f,m],n)*(m-d),_=y-f,w=m-d,x=Math.floor(_/v),S=Math.floor(w/b),E=(_-x*v)/2,O=[],P=[],C=[],I=[],M=1/0,A=1/0,N=m-(w-S*b)/2,k=0;N>=d;){for(var L=[],D=[],j=f+E,F=0;j<=y;){var B=l([j,N]),z=Ts(B,i);L.push(z?0:1),D.push(j+"|"+N);var V=be(B,t);!z&&V<M&&(M=V,C={x:F,y:k});var U=be(B,e);!z&&U<A&&(A=U,I={x:F,y:k}),j+=v,F++}P.push(L),O.push(D),N-=b,k++}var H=new Ps(P,{diagonal:!0}),G=H.grid[C.y][C.x],q=H.grid[I.y][I.x],W=Os.search(H,G,q),Y=[a];return W.forEach((function(t){var e=O[t.x][t.y].split("|");Y.push([+e[0],+e[1]])})),Y.push(u),$e(h(Y))},t.simplify=function(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,o=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==o&&(t=Ee(t)),V(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;$e(t,!0);var o=t.coordinates;switch(r){case"LineString":t.coordinates=rn(o,e,n);break;case"MultiLineString":t.coordinates=o.map((function(t){return rn(t,e,n)}));break;case"Polygon":t.coordinates=on(o,e,n);break;case"MultiPolygon":t.coordinates=o.map((function(t){return on(t,e,n)}))}}(t,n,r)})),t},t.square=pn,t.squareGrid=Hg,t.standardDeviationalEllipse=function(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,o=e.properties||{};if(!T(n))throw new Error("steps must be a number");if(!R(o))throw new Error("properties must be a number");var i=z(t).length,s=ya(t,{weight:r}),a=0,u=0,l=0;F(t,(function(t){var e=t.properties[r]||1,n=va(tt(t),tt(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e}));var c=a-u,p=Math.sqrt(Math.pow(c,2)+4*Math.pow(l,2)),f=2*l,h=Math.atan((c+p)/f),d=180*h/Math.PI,y=0,m=0,v=0;F(t,(function(t){var e=t.properties[r]||1,n=va(tt(t),tt(s));y+=Math.pow(n.x*Math.cos(h)-n.y*Math.sin(h),2)*e,m+=Math.pow(n.x*Math.sin(h)+n.y*Math.cos(h),2)*e,v+=e}));var b=Math.sqrt(2*y/v),_=Math.sqrt(2*m/v),w=da(s,b,_,{units:"degrees",angle:d,steps:n,properties:o}),x=ve(t,g([w])),S={meanCenterCoordinates:tt(s),semiMajorAxis:b,semiMinorAxis:_,numberOfFeatures:i,angle:d,percentageWithinEllipse:100*z(x).length/i};return w.properties.standardDeviationalEllipse=S,w},t.tag=function(t,e,n,r){return t=Ee(t),e=Ee(e),F(t,(function(t){t.properties||(t.properties={}),F(e,(function(e){void 0===t.properties[r]&&ye(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Hn(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Hn(t))})),e},t.tin=_e,t.toMercator=Ea,t.toWgs84=Oa,t.transformRotate=Di,t.transformScale=ji,t.transformTranslate=function(t,e,n,r){if(!R(r=r||{}))throw new Error("options is invalid");var o=r.units,i=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(i&&"number"!=typeof i&&isNaN(i))throw new Error("zTranslation is not a number");if(i=void 0!==i?i:0,0===e&&0===i)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Ee(t)),k(t,(function(t){var r=tt(Co(t,e,n,{units:o}));t[0]=r[0],t[1]=r[1],i&&3===t.length&&(t[2]+=i)})),t},t.triangleGrid=Gg,t.truncate=zr,t.union=function(t,e,n){void 0===n&&(n={});var r=it(t),o=it(e),i=Au.union(r.coordinates,o.coordinates);return 0===i.length?null:1===i.length?p(i[0],n.properties):v(i,n.properties)},t.unitsFactors=o,t.unkinkPolygon=function(t){var e=[];return H(t,(function(t){"Polygon"===t.geometry.type&&F(Hr(t),(function(n){e.push(p(n.geometry.coordinates,t.properties))}))})),g(e)},t.validateBBox=M,t.validateId=A,t.voronoi=function(t,e){if(!R(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return ot(t,"Point","points"),g(function(){var t=Ms,e=As,n=null;function r(r){return new fa(r.map((function(n,o){var i=[Math.round(t(n,o,r)/la)*la,Math.round(e(n,o,r)/la)*la];return i.index=o,i.data=n,i})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:Rs(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:Rs(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(ha))},t.within=ve,Object.defineProperty(t,"__esModule",{value:!0})},"object"==a(e)&&void 0!==t?s(e):(o=[e],void 0===(i="function"==typeof(r=s)?r.apply(e,o):r)||(t.exports=i))}).call(this,n(385))},function(t,e,n){"use strict";var r=n(83);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var r=n(83),o=n(58),i=o("%Function.prototype.apply%"),s=o("%Function.prototype.call%"),a=o("%Reflect.apply%",!0)||r.call(s,i),u=o("%Object.getOwnPropertyDescriptor%",!0),l=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(l)try{l({},"a",{value:1})}catch(t){l=null}t.exports=function(t){var e=a(r,s,arguments);if(u&&l){var n=u(e,"length");n.configurable&&l(e,"length",{value:1+c(0,t.length-(arguments.length-1))})}return e};var p=function(){return a(r,i,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(222),i="function"==typeof Symbol&&"symbol"===r(Symbol("foo")),s=Object.prototype.toString,a=Array.prototype.concat,u=Object.defineProperty,l=u&&function(){var t={};try{for(var e in u(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,n,r){var o;(!(e in t)||"function"==typeof(o=r)&&"[object Function]"===s.call(o)&&r())&&(l?u(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},p=function(t,e){var n=arguments.length>2?arguments[2]:{},r=o(e);i&&(r=a.call(r,Object.getOwnPropertySymbols(e)));for(var s=0;s<r.length;s+=1)c(t,r[s],e[r[s]],n[r[s]])};p.supportsDescriptors=!!l,t.exports=p},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=Object.prototype.toString;t.exports=function(t){var e=o.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"===r(t)&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===o.call(t.callee)),n}},function(t,e,n){"use strict";var r=n(224),o=n(226),i=n(227)("String.prototype.replace"),s=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=o(r(this));return i(i(t,s,""),a,"")}},function(t,e,n){"use strict";var r=n(127);t.exports=function(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:r}},function(t,e,n){var r=n(130);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(62),o=n(134);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(this,n(280))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return null!=t&&("object"==e||"function"==e)}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(286),o=n(293),i=n(295),s=n(296),a=n(297);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(298),o=n(301),i=n(302);t.exports=function(t,e,n,s,a,u){var l=1&n,c=t.length,p=e.length;if(c!=p&&!(l&&p>c))return!1;var f=u.get(t),h=u.get(e);if(f&&h)return f==e&&h==t;var d=-1,g=!0,y=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++d<c;){var m=t[d],v=e[d];if(s)var b=l?s(v,m,d,e,t,u):s(m,v,d,t,e,u);if(void 0!==b){if(b)continue;g=!1;break}if(y){if(!o(e,(function(t,e){if(!i(y,e)&&(m===t||a(m,t,n,s,u)))return y.push(e)}))){g=!1;break}}else if(m!==v&&!a(m,v,n,s,u)){g=!1;break}}return u.delete(t),u.delete(e),g}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(28),i=n(319),s="object"==r(e)&&e&&!e.nodeType&&e,a=s&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===s?o.Buffer:void 0,l=(u?u.isBuffer:void 0)||i;t.exports=l}).call(this,n(59)(t))},function(t,e,n){var r=n(321),o=n(322),i=n(323),s=i&&i.isTypedArray,a=s?o(s):r;t.exports=a},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){"use strict";var r=n(87);t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";var r=n(87),o=n(66),i=o("%Function.prototype.apply%"),s=o("%Function.prototype.call%"),a=o("%Reflect.apply%",!0)||r.call(s,i),u=o("%Object.getOwnPropertyDescriptor%",!0),l=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(l)try{l({},"a",{value:1})}catch(t){l=null}t.exports=function(t){var e=a(r,s,arguments);if(u&&l){var n=u(e,"length");n.configurable&&l(e,"length",{value:1+c(0,t.length-(arguments.length-1))})}return e};var p=function(){return a(r,i,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(341),i="function"==typeof Symbol&&"symbol"===r(Symbol("foo")),s=Object.prototype.toString,a=Array.prototype.concat,u=Object.defineProperty,l=u&&function(){var t={};try{for(var e in u(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,n,r){var o;(!(e in t)||"function"==typeof(o=r)&&"[object Function]"===s.call(o)&&r())&&(l?u(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},p=function(t,e){var n=arguments.length>2?arguments[2]:{},r=o(e);i&&(r=a.call(r,Object.getOwnPropertySymbols(e)));for(var s=0;s<r.length;s+=1)c(t,r[s],e[r[s]],n[r[s]])};p.supportsDescriptors=!!l,t.exports=p},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=Object.prototype.toString;t.exports=function(t){var e=o.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"===r(t)&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===o.call(t.callee)),n}},function(t,e,n){"use strict";var r=n(343),o=n(345),i=n(346)("String.prototype.replace"),s=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=o(r(this));return i(i(t,s,""),a,"")}},function(t,e,n){"use strict";var r=n(145);t.exports=function(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:r}},function(t,e,n){var r=n(148);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){t.exports=!n(13)&&!n(7)((function(){return 7!=Object.defineProperty(n(88)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(6),o=n(12),i=n(36),s=n(89),a=n(14).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,n){var r=n(18),o=n(20),i=n(68)(!1),s=n(90)("IE_PROTO");t.exports=function(t,e){var n,a=o(t),u=0,l=[];for(n in a)n!=s&&r(a,n)&&l.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~i(l,n)||l.push(n));return l}},function(t,e,n){var r=n(14),o=n(8),i=n(37);t.exports=n(13)?Object.defineProperties:function(t,e){o(t);for(var n,s=i(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(20),i=n(40).f,s={}.toString,a="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==s.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(o(t))}},function(t,e,n){"use strict";var r=n(13),o=n(37),i=n(69),s=n(55),a=n(15),u=n(54),l=Object.assign;t.exports=!l||n(7)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=r}))?function(t,e){for(var n=a(t),l=arguments.length,c=1,p=i.f,f=s.f;l>c;)for(var h,d=u(arguments[c++]),g=p?o(d).concat(p(d)):o(d),y=g.length,m=0;y>m;)h=g[m++],r&&!f.call(d,h)||(n[h]=d[h]);return n}:l},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(23),o=n(9),i=n(157),s=[].slice,a={},u=function(t,e,n){if(!(e in a)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";a[e]=Function("F,a","return new F("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=s.call(arguments,1),a=function r(){var o=n.concat(s.call(arguments));return this instanceof r?u(e,o.length,o):i(e,o,t)};return o(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(6).parseInt,o=n(46).trim,i=n(94),s=/^[-+]?0[xX]/;t.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(t,e){var n=o(String(t),3);return r(n,e>>>0||(s.test(n)?16:10))}:r},function(t,e,n){var r=n(6).parseFloat,o=n(46).trim;t.exports=1/r(n(94)+"-0")!=-1/0?function(t){var e=o(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(29);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(9),o=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&o(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){"use strict";var r=n(39),o=n(34),i=n(45),s={};n(19)(s,n(10)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(s,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(8);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){var r=n(480);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(23),o=n(15),i=n(54),s=n(11);t.exports=function(t,e,n,a,u){r(e);var l=o(t),c=i(l),p=s(l.length),f=u?p-1:0,h=u?-1:1;if(n<2)for(;;){if(f in c){a=c[f],f+=h;break}if(f+=h,u?f<0:p<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:p>f;f+=h)f in c&&(a=e(a,c[f],f,l));return a}},function(t,e,n){"use strict";var r=n(15),o=n(38),i=n(11);t.exports=[].copyWithin||function(t,e){var n=r(this),s=i(n.length),a=o(t,s),u=o(e,s),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?s:o(l,s))-u,s-a),p=1;for(u<a&&a<u+c&&(p=-1,u+=c-1,a+=c-1);c-- >0;)u in n?n[a]=n[u]:delete n[a],a+=p,u+=p;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(109);n(1)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){n(13)&&"g"!=/./g.flags&&n(14).f(RegExp.prototype,"flags",{configurable:!0,get:n(72)})},function(t,e,n){"use strict";var r,o,i,s,a=n(36),u=n(6),l=n(22),c=n(56),p=n(1),f=n(9),h=n(23),d=n(49),g=n(75),y=n(57),m=n(111).set,v=n(500)(),b=n(172),_=n(501),w=n(76),x=n(173),S="Promise",E=u.TypeError,O=u.process,P=O&&O.versions,C=P&&P.v8||"",I=u.Promise,T="process"==c(O),R=function(){},M=o=b.f,A=!!function(){try{var t=I.resolve(1),e=(t.constructor={})[n(10)("species")]=function(t){t(R,R)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},k=function(t,e){if(!t._n){t._n=!0;var n=t._c;v((function(){for(var r=t._v,o=1==t._s,i=0,s=function(e){var n,i,s,a=o?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{a?(o||(2==t._h&&j(t),t._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&(c.exit(),s=!0)),n===e.promise?l(E("Promise-chain cycle")):(i=N(n))?i.call(n,u,l):u(n)):l(r)}catch(t){c&&!s&&c.exit(),l(t)}};n.length>i;)s(n[i++]);t._c=[],t._n=!1,e&&!t._h&&L(t)}))}},L=function(t){m.call(u,(function(){var e,n,r,o=t._v,i=D(t);if(i&&(e=_((function(){T?O.emit("unhandledRejection",o,t):(n=u.onunhandledrejection)?n({promise:t,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=T||D(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},j=function(t){m.call(u,(function(){var e;T?O.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},F=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),k(e,!0))},B=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw E("Promise can't be resolved itself");(n=N(e))?v((function(){var o={_w:r,_d:!1};try{n.call(e,l(t,o,1),l(F,o,1))}catch(t){F.call(o,t)}})):(r._v=e,r._s=1,k(r,!1))}catch(t){F.call({_w:r,_d:!1},t)}}};A||(I=function(t){d(this,I,S,"_h"),h(t),r.call(this);try{t(l(B,this,1),l(F,this,1))}catch(t){F.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(50)(I.prototype,{then:function(t,e){var n=M(y(this,I));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&k(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=l(B,t,1),this.reject=l(F,t,1)},b.f=M=function(t){return t===I||t===s?new i(t):o(t)}),p(p.G+p.W+p.F*!A,{Promise:I}),n(45)(I,S),n(48)(S),s=n(12).Promise,p(p.S+p.F*!A,S,{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),p(p.S+p.F*(a||!A),S,{resolve:function(t){return x(a&&this===s?I:this,t)}}),p(p.S+p.F*!(A&&n(71)((function(t){I.all(t).catch(R)}))),S,{all:function(t){var e=this,n=M(e),r=n.resolve,o=n.reject,i=_((function(){var n=[],i=0,s=1;g(t,!1,(function(t){var a=i++,u=!1;n.push(void 0),s++,e.resolve(t).then((function(t){u||(u=!0,n[a]=t,--s||r(n))}),o)})),--s||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=M(e),r=n.reject,o=_((function(){g(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(t,e,n){"use strict";var r=n(23);function o(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new o(t)}},function(t,e,n){var r=n(8),o=n(9),i=n(172);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(14).f,o=n(39),i=n(50),s=n(22),a=n(49),u=n(75),l=n(100),c=n(168),p=n(48),f=n(13),h=n(33).fastKey,d=n(43),g=f?"_s":"size",y=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var c=t((function(t,r){a(t,c,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[g]=0,null!=r&&u(r,n,t[l],t)}));return i(c.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var n=d(this,e),r=y(n,t);if(r){var o=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=o),o&&(o.p=i),n._f==r&&(n._f=o),n._l==r&&(n._l=i),n[g]--}return!!r},forEach:function(t){d(this,e);for(var n,r=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(d(this,e),t)}}),f&&r(c.prototype,"size",{get:function(){return d(this,e)[g]}}),c},def:function(t,e,n){var r,o,i=y(t,e);return i?i.v=n:(t._l=i={i:o=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=i),r&&(r.n=i),t[g]++,"F"!==o&&(t._i[o]=i)),t},getEntry:y,setStrong:function(t,e,n){l(t,e,(function(t,n){this._t=d(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?c(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,c(1))}),n?"entries":"values",!n,!0),p(e)}}},function(t,e,n){"use strict";var r=n(50),o=n(33).getWeak,i=n(8),s=n(9),a=n(49),u=n(75),l=n(27),c=n(18),p=n(43),f=l(5),h=l(6),d=0,g=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},m=function(t,e){return f(t.a,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,i){var l=t((function(t,r){a(t,l,e,"_i"),t._t=e,t._i=d++,t._l=void 0,null!=r&&u(r,n,t[i],t)}));return r(l.prototype,{delete:function(t){if(!s(t))return!1;var n=o(t);return!0===n?g(p(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!s(t))return!1;var n=o(t);return!0===n?g(p(this,e)).has(t):n&&c(n,this._i)}}),l},def:function(t,e,n){var r=o(i(e),!0);return!0===r?g(t).set(e,n):r[t._i]=n,t},ufstore:g}},function(t,e,n){var r=n(24),o=n(11);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(40),o=n(69),i=n(8),s=n(6).Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(i(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(11),o=n(96),i=n(30);t.exports=function(t,e,n,s){var a=String(i(t)),u=a.length,l=void 0===n?" ":String(n),c=r(e);if(c<=u||""==l)return a;var p=c-u,f=o.call(l,Math.ceil(p/l.length));return f.length>p&&(f=f.slice(0,p)),s?f+a:a+f}},function(t,e,n){var r=n(13),o=n(37),i=n(20),s=n(55).f;t.exports=function(t){return function(e){for(var n,a=i(e),u=o(a),l=u.length,c=0,p=[];l>c;)n=u[c++],r&&!s.call(a,n)||p.push(t?[n,a[n]]:a[n]);return p}}},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(215),i=n(217),s=n(123),a=n(219),u=function(t){i(!1,t)},l=String.prototype.replace,c=String.prototype.split,p="||||",f=function(t){var e=t%100,n=e%10;return 11!==e&&1===n?0:2<=n&&n<=4&&!(e>=12&&e<=14)?1:2},h={pluralTypes:{arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:f,chinese:function(){return 0},croatian:f,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:f,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function d(t,e){var n,r,i=(n=t.pluralTypeToLanguages,r={},o(n,(function(t,e){o(t,(function(t){r[t]=e}))})),r);return i[e]||i[c.call(e,/-/,1)[0]]||i.en}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var y=/%\{(.*?)\}/g;function m(t,e,n,r,o){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var i=t,u=r||y,f=o||h,g="number"==typeof e?{smart_count:e}:e;if(null!=g.smart_count&&i){var m=c.call(i,p);i=a(m[function(t,e,n){return t.pluralTypes[d(t,e)](n)}(f,n||"en",g.smart_count)]||m[0])}return i=l.call(i,u,(function(t,e){return s(g,e)&&null!=g[e]?g[e]:t}))}function v(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var n=e.allowMissing?m:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:n,this.warn=e.warn||u,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",n=t&&t.suffix||"}";if(e===p||n===p)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(g(e)+"(.*?)"+g(n),"g")}(e.interpolation),this.pluralRules=e.pluralRules||h}v.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},v.prototype.extend=function(t,e){o(t,(function(t,n){var o=e?e+"."+n:n;"object"===r(t)?this.extend(t,o):this.phrases[o]=t}),this)},v.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:o(t,(function(t,n){var o=e?e+"."+n:n;"object"===r(t)?this.unset(t,o):delete this.phrases[o]}),this)},v.prototype.clear=function(){this.phrases={}},v.prototype.replace=function(t){this.clear(),this.extend(t)},v.prototype.t=function(t,e){var n,r,o=null==e?{}:e;if("string"==typeof this.phrases[t])n=this.phrases[t];else if("string"==typeof o._)n=o._;else if(this.onMissingKey){r=(0,this.onMissingKey)(t,o,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+t+'"'),r=t;return"string"==typeof n&&(r=m(n,o,this.currentLocale,this.tokenRegex,this.pluralRules)),r},v.prototype.has=function(t){return s(this.phrases,t)},v.transformPhrase=function(t,e,n){return m(t,e,n)},t.exports=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=[["ثانية","ثانيتين","%s ثوان","%s ثانية"],["دقيقة","دقيقتين","%s دقائق","%s دقيقة"],["ساعة","ساعتين","%s ساعات","%s ساعة"],["يوم","يومين","%s أيام","%s يوماً"],["أسبوع","أسبوعين","%s أسابيع","%s أسبوعاً"],["شهر","شهرين","%s أشهر","%s شهراً"],["عام","عامين","%s أعوام","%s عاماً"]];e.default=function(t,e){if(0===e)return["منذ لحظات","بعد لحظات"];var n,o,i=(n=Math.floor(e/2),(o=t)<3?r[n][o-1]:o>=3&&o<=10?r[n][2]:r[n][3]);return["منذ "+i,"بعد "+i]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=0;return(1==e||3==e||5==e||7==e||9==e||11==e||13==e)&&t>=5&&(n=1),[[["právě teď","právě teď"]],[["před %s vteřinami","za %s vteřiny"],["před %s vteřinami","za %s vteřin"]],[["před minutou","za minutu"]],[["před %s minutami","za %s minuty"],["před %s minutami","za %s minut"]],[["před hodinou","za hodinu"]],[["před %s hodinami","za %s hodiny"],["před %s hodinami","za %s hodin"]],[["včera","zítra"]],[["před %s dny","za %s dny"],["před %s dny","za %s dnů"]],[["minulý týden","příští týden"]],[["před %s týdny","za %s týdny"],["před %s týdny","za %s týdnů"]],[["minulý měsíc","přístí měsíc"]],[["před %s měsíci","za %s měsíce"],["před %s měsíci","za %s měsíců"]],[["před rokem","přístí rok"]],[["před %s lety","za %s roky"],["před %s lety","za %s let"]]][e][n]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["μόλις τώρα","σε λίγο"],["%s δευτερόλεπτα πριν","σε %s δευτερόλεπτα"],["1 λεπτό πριν","σε 1 λεπτό"],["%s λεπτά πριν","σε %s λεπτά"],["1 ώρα πριν","σε 1 ώρα"],["%s ώρες πριν","σε %s ώρες"],["1 μέρα πριν","σε 1 μέρα"],["%s μέρες πριν","σε %s μέρες"],["1 εβδομάδα πριν","σε 1 εβδομάδα"],["%s εβδομάδες πριν","σε %s εβδομάδες"],["1 μήνα πριν","σε 1 μήνα"],["%s μήνες πριν","σε %s μήνες"],["1 χρόνο πριν","σε 1 χρόνο"],["%s χρόνια πριν","σε %s χρόνια"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 día","en 1 día"],["hace %s días","en %s días"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 año","en 1 año"],["hace %s años","en %s años"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["xusto agora","daquí a un pouco"],["hai %s segundos","en %s segundos"],["hai 1 minuto","nun minuto"],["hai %s minutos","en %s minutos"],["hai 1 hora","nunha hora"],["hai %s horas","en %s horas"],["hai 1 día","nun día"],["hai %s días","en %s días"],["hai 1 semana","nunha semana"],["hai %s semanas","en %s semanas"],["hai 1 mes","nun mes"],["hai %s meses","en %s meses"],["hai 1 ano","nun ano"],["hai %s anos","en %s anos"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["अभी","कुछ समय"],["%s सेकंड पहले","%s सेकंड में"],["1 मिनट पहले","1 मिनट में"],["%s मिनट पहले","%s मिनट में"],["1 घंटे पहले","1 घंटे में"],["%s घंटे पहले","%s घंटे में"],["1 दिन पहले","1 दिन में"],["%s दिन पहले","%s दिनों में"],["1 सप्ताह पहले","1 सप्ताह में"],["%s हफ्ते पहले","%s हफ्तों में"],["1 महीने पहले","1 महीने में"],["%s महीने पहले","%s महीनों में"],["1 साल पहले","1 साल में"],["%s साल पहले","%s साल में"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["recent","binnenkort"],["%s seconden geleden","binnen %s seconden"],["1 minuut geleden","binnen 1 minuut"],["%s minuten geleden","binnen %s minuten"],["1 uur geleden","binnen 1 uur"],["%s uur geleden","binnen %s uur"],["1 dag geleden","binnen 1 dag"],["%s dagen geleden","binnen %s dagen"],["1 week geleden","binnen 1 week"],["%s weken geleden","binnen %s weken"],["1 maand geleden","binnen 1 maand"],["%s maanden geleden","binnen %s maanden"],["1 jaar geleden","binnen 1 jaar"],["%s jaar geleden","binnen %s jaar"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["agora mesmo","agora"],["há %s segundos","em %s segundos"],["há um minuto","em um minuto"],["há %s minutos","em %s minutos"],["há uma hora","em uma hora"],["há %s horas","em %s horas"],["há um dia","em um dia"],["há %s dias","em %s dias"],["há uma semana","em uma semana"],["há %s semanas","em %s semanas"],["há um mês","em um mês"],["há %s meses","em %s meses"],["há um ano","em um ano"],["há %s anos","em %s anos"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["just nu","om en stund"],["%s sekunder sedan","om %s sekunder"],["1 minut sedan","om 1 minut"],["%s minuter sedan","om %s minuter"],["1 timme sedan","om 1 timme"],["%s timmar sedan","om %s timmar"],["1 dag sedan","om 1 dag"],["%s dagar sedan","om %s dagar"],["1 vecka sedan","om 1 vecka"],["%s veckor sedan","om %s veckor"],["1 månad sedan","om 1 månad"],["%s månader sedan","om %s månader"],["1 år sedan","om 1 år"],["%s år sedan","om %s år"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["az önce","şimdi"],["%s saniye önce","%s saniye içinde"],["1 dakika önce","1 dakika içinde"],["%s dakika önce","%s dakika içinde"],["1 saat önce","1 saat içinde"],["%s saat önce","%s saat içinde"],["1 gün önce","1 gün içinde"],["%s gün önce","%s gün içinde"],["1 hafta önce","1 hafta içinde"],["%s hafta önce","%s hafta içinde"],["1 ay önce","1 ay içinde"],["%s ay önce","%s ay içinde"],["1 yıl önce","1 yıl içinde"],["%s yıl önce","%s yıl içinde"]][e]}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(243);e.default=r.TextareaAutosize},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(334),i=n(336),s=n(141),a=n(338),u=function(t){i(!1,t)},l=String.prototype.replace,c=String.prototype.split,p="||||",f=function(t){var e=t%100,n=e%10;return 11!==e&&1===n?0:2<=n&&n<=4&&!(e>=12&&e<=14)?1:2},h={pluralTypes:{arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:f,chinese:function(){return 0},croatian:f,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:f,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function d(t,e){var n,r,i=(n=t.pluralTypeToLanguages,r={},o(n,(function(t,e){o(t,(function(t){r[t]=e}))})),r);return i[e]||i[c.call(e,/-/,1)[0]]||i.en}function g(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var y=/%\{(.*?)\}/g;function m(t,e,n,r,o){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var i=t,u=r||y,f=o||h,g="number"==typeof e?{smart_count:e}:e;if(null!=g.smart_count&&i){var m=c.call(i,p);i=a(m[function(t,e,n){return t.pluralTypes[d(t,e)](n)}(f,n||"en",g.smart_count)]||m[0])}return i=l.call(i,u,(function(t,e){return s(g,e)&&null!=g[e]?g[e]:t}))}function v(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var n=e.allowMissing?m:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:n,this.warn=e.warn||u,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",n=t&&t.suffix||"}";if(e===p||n===p)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(g(e)+"(.*?)"+g(n),"g")}(e.interpolation),this.pluralRules=e.pluralRules||h}v.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},v.prototype.extend=function(t,e){o(t,(function(t,n){var o=e?e+"."+n:n;"object"===r(t)?this.extend(t,o):this.phrases[o]=t}),this)},v.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:o(t,(function(t,n){var o=e?e+"."+n:n;"object"===r(t)?this.unset(t,o):delete this.phrases[o]}),this)},v.prototype.clear=function(){this.phrases={}},v.prototype.replace=function(t){this.clear(),this.extend(t)},v.prototype.t=function(t,e){var n,r,o=null==e?{}:e;if("string"==typeof this.phrases[t])n=this.phrases[t];else if("string"==typeof o._)n=o._;else if(this.onMissingKey){r=(0,this.onMissingKey)(t,o,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+t+'"'),r=t;return"string"==typeof n&&(r=m(n,o,this.currentLocale,this.tokenRegex,this.pluralRules)),r},v.prototype.has=function(t){return s(this.phrases,t)},v.transformPhrase=function(t,e,n){return m(t,e,n)},t.exports=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=[["ثانية","ثانيتين","%s ثوان","%s ثانية"],["دقيقة","دقيقتين","%s دقائق","%s دقيقة"],["ساعة","ساعتين","%s ساعات","%s ساعة"],["يوم","يومين","%s أيام","%s يوماً"],["أسبوع","أسبوعين","%s أسابيع","%s أسبوعاً"],["شهر","شهرين","%s أشهر","%s شهراً"],["عام","عامين","%s أعوام","%s عاماً"]];e.default=function(t,e){if(0===e)return["منذ لحظات","بعد لحظات"];var n,o,i=(n=Math.floor(e/2),(o=t)<3?r[n][o-1]:o>=3&&o<=10?r[n][2]:r[n][3]);return["منذ "+i,"بعد "+i]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=0;return(1==e||3==e||5==e||7==e||9==e||11==e||13==e)&&t>=5&&(n=1),[[["právě teď","právě teď"]],[["před %s vteřinami","za %s vteřiny"],["před %s vteřinami","za %s vteřin"]],[["před minutou","za minutu"]],[["před %s minutami","za %s minuty"],["před %s minutami","za %s minut"]],[["před hodinou","za hodinu"]],[["před %s hodinami","za %s hodiny"],["před %s hodinami","za %s hodin"]],[["včera","zítra"]],[["před %s dny","za %s dny"],["před %s dny","za %s dnů"]],[["minulý týden","příští týden"]],[["před %s týdny","za %s týdny"],["před %s týdny","za %s týdnů"]],[["minulý měsíc","přístí měsíc"]],[["před %s měsíci","za %s měsíce"],["před %s měsíci","za %s měsíců"]],[["před rokem","přístí rok"]],[["před %s lety","za %s roky"],["před %s lety","za %s let"]]][e][n]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["gerade eben","vor einer Weile"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in 1 Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahren"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["μόλις τώρα","σε λίγο"],["%s δευτερόλεπτα πριν","σε %s δευτερόλεπτα"],["1 λεπτό πριν","σε 1 λεπτό"],["%s λεπτά πριν","σε %s λεπτά"],["1 ώρα πριν","σε 1 ώρα"],["%s ώρες πριν","σε %s ώρες"],["1 μέρα πριν","σε 1 μέρα"],["%s μέρες πριν","σε %s μέρες"],["1 εβδομάδα πριν","σε 1 εβδομάδα"],["%s εβδομάδες πριν","σε %s εβδομάδες"],["1 μήνα πριν","σε 1 μήνα"],["%s μήνες πριν","σε %s μήνες"],["1 χρόνο πριν","σε 1 χρόνο"],["%s χρόνια πριν","σε %s χρόνια"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["justo ahora","en un rato"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 día","en 1 día"],["hace %s días","en %s días"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 año","en 1 año"],["hace %s años","en %s años"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["xusto agora","daquí a un pouco"],["hai %s segundos","en %s segundos"],["hai 1 minuto","nun minuto"],["hai %s minutos","en %s minutos"],["hai 1 hora","nunha hora"],["hai %s horas","en %s horas"],["hai 1 día","nun día"],["hai %s días","en %s días"],["hai 1 semana","nunha semana"],["hai %s semanas","en %s semanas"],["hai 1 mes","nun mes"],["hai %s meses","en %s meses"],["hai 1 ano","nun ano"],["hai %s anos","en %s anos"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["अभी","कुछ समय"],["%s सेकंड पहले","%s सेकंड में"],["1 मिनट पहले","1 मिनट में"],["%s मिनट पहले","%s मिनट में"],["1 घंटे पहले","1 घंटे में"],["%s घंटे पहले","%s घंटे में"],["1 दिन पहले","1 दिन में"],["%s दिन पहले","%s दिनों में"],["1 सप्ताह पहले","1 सप्ताह में"],["%s हफ्ते पहले","%s हफ्तों में"],["1 महीने पहले","1 महीने में"],["%s महीने पहले","%s महीनों में"],["1 साल पहले","1 साल में"],["%s साल पहले","%s साल में"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["poco fa","fra poco"],["%s secondi fa","fra %s secondi"],["un minuto fa","fra un minuto"],["%s minuti fa","fra %s minuti"],["un'ora fa","fra un'ora"],["%s ore fa","fra %s ore"],["un giorno fa","fra un giorno"],["%s giorni fa","fra %s giorni"],["una settimana fa","fra una settimana"],["%s settimane fa","fra %s settimane"],["un mese fa","fra un mese"],["%s mesi fa","fra %s mesi"],["un anno fa","fra un anno"],["%s anni fa","fra %s anni"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["recent","binnenkort"],["%s seconden geleden","binnen %s seconden"],["1 minuut geleden","binnen 1 minuut"],["%s minuten geleden","binnen %s minuten"],["1 uur geleden","binnen 1 uur"],["%s uur geleden","binnen %s uur"],["1 dag geleden","binnen 1 dag"],["%s dagen geleden","binnen %s dagen"],["1 week geleden","binnen 1 week"],["%s weken geleden","binnen %s weken"],["1 maand geleden","binnen 1 maand"],["%s maanden geleden","binnen %s maanden"],["1 jaar geleden","binnen 1 jaar"],["%s jaar geleden","binnen %s jaar"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["agora mesmo","agora"],["há %s segundos","em %s segundos"],["há um minuto","em um minuto"],["há %s minutos","em %s minutos"],["há uma hora","em uma hora"],["há %s horas","em %s horas"],["há um dia","em um dia"],["há %s dias","em %s dias"],["há uma semana","em uma semana"],["há %s semanas","em %s semanas"],["há um mês","em um mês"],["há %s meses","em %s meses"],["há um ano","em um ano"],["há %s anos","em %s anos"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["just nu","om en stund"],["%s sekunder sedan","om %s sekunder"],["1 minut sedan","om 1 minut"],["%s minuter sedan","om %s minuter"],["1 timme sedan","om 1 timme"],["%s timmar sedan","om %s timmar"],["1 dag sedan","om 1 dag"],["%s dagar sedan","om %s dagar"],["1 vecka sedan","om 1 vecka"],["%s veckor sedan","om %s veckor"],["1 månad sedan","om 1 månad"],["%s månader sedan","om %s månader"],["1 år sedan","om 1 år"],["%s år sedan","om %s år"]][e]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return[["az önce","şimdi"],["%s saniye önce","%s saniye içinde"],["1 dakika önce","1 dakika içinde"],["%s dakika önce","%s dakika içinde"],["1 saat önce","1 saat içinde"],["%s saat önce","%s saat içinde"],["1 gün önce","1 gün içinde"],["%s gün önce","%s gün içinde"],["1 hafta önce","1 hafta içinde"],["%s hafta önce","%s hafta içinde"],["1 ay önce","1 ay içinde"],["%s ay önce","%s ay içinde"],["1 yıl önce","1 yıl içinde"],["%s yıl önce","%s yıl içinde"]][e]}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(362);e.default=r.TextareaAutosize},,,,,,function(t,e,n){"use strict";var r=n(216),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty,s=function(t,e,n){for(var r=0,o=t.length;r<o;r++)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))},a=function(t,e,n){for(var r=0,o=t.length;r<o;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)},u=function(t,e,n){for(var r in t)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))};t.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),"[object Array]"===o.call(t)?s(t,e,i):"string"==typeof t?a(t,e,i):u(t,e,i)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o,i,s=Function.prototype.toString,a="object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{o=Object.defineProperty({},"length",{get:function(){throw i}}),i={},a((function(){throw 42}),null,o)}catch(t){t!==i&&(a=null)}else a=null;var u=/^\s*class\b/,l=function(t){try{var e=s.call(t);return u.test(e)}catch(t){return!1}},c=Object.prototype.toString,p="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag),f="object"===("undefined"==typeof document?"undefined":r(document))&&void 0===document.all&&void 0!==document.all?document.all:{};t.exports=a?function(t){if(t===f)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!==r(t))return!1;if("function"==typeof t&&!t.prototype)return!0;try{a(t,null,o)}catch(t){if(t!==i)return!1}return!l(t)}:function(t){if(t===f)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!==r(t))return!1;if("function"==typeof t&&!t.prototype)return!0;if(p)return function(t){try{return!l(t)&&(s.call(t),!0)}catch(t){return!1}}(t);if(l(t))return!1;var e=c.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";var r="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,i=Object.prototype.toString,s="[object Function]";t.exports=function(t){var e=this;if("function"!=typeof e||i.call(e)!==s)throw new TypeError(r+e);for(var n,a=o.call(arguments,1),u=function(){if(this instanceof n){var r=e.apply(this,a.concat(o.call(arguments)));return Object(r)===r?r:this}return e.apply(t,a.concat(o.call(arguments)))},l=Math.max(0,e.length-a.length),c=[],p=0;p<l;p++)c.push("$"+p);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),e.prototype){var f=function(){};f.prototype=e.prototype,n.prototype=new f,f.prototype=null}return n}},function(t,e,n){"use strict";var r=n(124),o=n(125),i=n(127),s=n(128),a=n(228),u=r(s());o(u,{getPolyfill:s,implementation:i,shim:a}),t.exports=u},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="undefined"!=typeof Symbol&&Symbol,i=n(221);t.exports=function(){return"function"==typeof o&&("function"==typeof Symbol&&("symbol"===r(o("foo"))&&("symbol"===r(Symbol("bar"))&&i())))}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===r(Symbol.iterator))return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r=Array.prototype.slice,o=n(126),i=Object.keys,s=i?function(t){return i(t)}:n(223),a=Object.keys;s.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?a(r.call(t)):a(t)}):Object.keys=s;return Object.keys||s},t.exports=s},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=n(126),u=Object.prototype.propertyIsEnumerable,l=!u.call({toString:null},"toString"),c=u.call((function(){}),"prototype"),p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===r(window[t]))try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();o=function(t){var e=null!==t&&"object"===r(t),n="[object Function]"===s.call(t),o=a(t),u=e&&"[object String]"===s.call(t),h=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var g=c&&n;if(u&&t.length>0&&!i.call(t,0))for(var y=0;y<t.length;++y)h.push(String(y));if(o&&t.length>0)for(var m=0;m<t.length;++m)h.push(String(m));else for(var v in t)g&&"prototype"===v||!i.call(t,v)||h.push(String(v));if(l)for(var b=function(t){if("undefined"==typeof window||!d)return f(t);try{return f(t)}catch(t){return!1}}(t),_=0;_<p.length;++_)b&&"constructor"===p[_]||!i.call(t,p[_])||h.push(p[_]);return h}}t.exports=o},function(t,e,n){"use strict";t.exports=n(225)},function(t,e,n){"use strict";var r=n(58)("%TypeError%");t.exports=function(t,e){if(null==t)throw new r(e||"Cannot call method on "+t);return t}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(58),i=o("%String%"),s=o("%TypeError%");t.exports=function(t){if("symbol"===r(t))throw new s("Cannot convert a Symbol value to a string");return i(t)}},function(t,e,n){"use strict";var r=n(58),o=n(124),i=o(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&i(t,".prototype.")>-1?o(n):n}},function(t,e,n){"use strict";var r=n(125),o=n(128);t.exports=function(){var t=o();return r(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},function(t,e,n){var r={"./messages_ar.json":230,"./messages_cs.json":231,"./messages_de.json":232,"./messages_el.json":233,"./messages_es.json":234,"./messages_gl.json":235,"./messages_hi.json":236,"./messages_it.json":237,"./messages_nl.json":238,"./messages_pt.json":239,"./messages_sv.json":240,"./messages_tr.json":241,"./messages_ur.json":242};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=229},function(t){t.exports=JSON.parse('{"Add a comment...":"إضافة تعليق","Add a reply...":"إضافة رد","Add tag...":"إضافة علامة","Cancel":"إلغاء","Close":"إغلاق","Edit":"Edit","Delete":"Delete","Ok":"تم"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Napsat komentář...","Add a reply...":"Odpovědět...","Add tag...":"Přidat štítek...","Cancel":"Zrušit","Close":"Zavřít","Edit":"Upravit","Delete":"Smazat","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...","Cancel":"Abbrechen","Close":"Schliessen","Edit":"Bearbeiten","Delete":"Löschen","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Σχολίασε...","Add a reply...":"Απάντησε...","Add tag...":"Πρόσθεσε tag...","Cancel":"Άκυρο","Close":"Κλείσιμο","Edit":"Επεξεργασία","Delete":"Διαγραφή","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Cerrar","Edit":"Editar","Delete":"Eliminar","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Pechar","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"टिप्पणी जोड़ें","Add a reply...":"जवाब दें","Add tag...":"टैग लगाएँ","Cancel":"रद्द करें","Close":"बंद करें","Edit":"संपादित करें","Delete":"हटाएँ","Ok":"ठीक है"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...","Cancel":"Annulla","Close":"Chiudi","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Commentaar toevoegen...","Add a reply...":"Antwoord toevoegen...","Add tag...":"Tag toevoegen...","Cancel":"Afbreken","Close":"Sluiten","Edit":"Bewerken","Delete":"Verwijderen","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Adicionar um comentário...","Add a reply...":"Adicionar uma resposta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Fechar","Edit":"Editar","Delete":"Apagar","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...","Cancel":"Cancel","Close":"Stäng","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Yorum ekle...","Add a reply...":"Cevap ekle...","Add tag...":"Tag Ekle...","Cancel":"İptal","Close":"Kapat","Edit":"Düzenle","Delete":"Sil","Ok":"Tamam"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"تبصرہ کریں","Add a reply...":"جواب دیں","Add tag...":"ٹیگ لگائیں","Cancel":"منسوخ کریں","Close":"بند کریں","Edit":"ترمیم کریں","Delete":"ہٹائیں","Ok":"ٹھیک ہے"}')},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n};e.__esModule=!0;var a=n(0),u=n(2),l=n(246),c=n(247),p="autosize:resized",f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={lineHeight:null},e.textarea=null,e.onResize=function(t){e.props.onResize&&e.props.onResize(t)},e.updateLineHeight=function(){e.textarea&&e.setState({lineHeight:c(e.textarea)})},e.onChange=function(t){var n=e.props.onChange;e.currentValue=t.currentTarget.value,n&&n(t)},e}return o(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.maxRows,r=e.async;"number"==typeof n&&this.updateLineHeight(),"number"==typeof n||r?setTimeout((function(){return t.textarea&&l(t.textarea)})):this.textarea&&l(this.textarea),this.textarea&&this.textarea.addEventListener(p,this.onResize)},e.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(p,this.onResize),l.destroy(this.textarea))},e.prototype.render=function(){var t=this,e=this.props,n=(e.onResize,e.maxRows),r=(e.onChange,e.style),o=(e.innerRef,e.children),u=s(e,["onResize","maxRows","onChange","style","innerRef","children"]),l=this.state.lineHeight,c=n&&l?l*n:null;return a.createElement("textarea",i({},u,{onChange:this.onChange,style:c?i({},r,{maxHeight:c}):r,ref:function(e){t.textarea=e,"function"==typeof t.props.innerRef?t.props.innerRef(e):t.props.innerRef&&(t.props.innerRef.current=e)}}),o)},e.prototype.componentDidUpdate=function(){this.textarea&&l.update(this.textarea)},e.defaultProps={rows:1,async:!1},e.propTypes={rows:u.number,maxRows:u.number,onResize:u.func,innerRef:u.any,async:u.bool},e}(a.Component);e.TextareaAutosize=a.forwardRef((function(t,e){return a.createElement(f,i({},t,{innerRef:e}))}))},function(t,e,n){"use strict";var r=n(245);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r,o,i;o=[t,e],void 0===(i="function"==typeof(r=function(t,e){"use strict";var n,r,o="function"==typeof Map?new Map:(n=[],r=[],{has:function(t){return n.indexOf(t)>-1},get:function(t){return r[n.indexOf(t)]},set:function(t,e){-1===n.indexOf(t)&&(n.push(t),r.push(e))},delete:function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),r.splice(e,1))}}),i=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){i=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function s(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var e=null,n=null,r=null,s=function(){t.clientWidth!==n&&f()},a=function(e){window.removeEventListener("resize",s,!1),t.removeEventListener("input",f,!1),t.removeEventListener("keyup",f,!1),t.removeEventListener("autosize:destroy",a,!1),t.removeEventListener("autosize:update",f,!1),Object.keys(e).forEach((function(n){t.style[n]=e[n]})),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",a,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",f,!1),window.addEventListener("resize",s,!1),t.addEventListener("input",f,!1),t.addEventListener("autosize:update",f,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:a,update:f}),u()}function u(){var n=window.getComputedStyle(t,null);"vertical"===n.resize?t.style.resize="none":"both"===n.resize&&(t.style.resize="horizontal"),e="content-box"===n.boxSizing?-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),isNaN(e)&&(e=0),f()}function l(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function c(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function p(){if(0!==t.scrollHeight){var r=c(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+e+"px",n=t.clientWidth,r.forEach((function(t){t.node.scrollTop=t.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function f(){p();var e=Math.round(parseFloat(t.style.height)),n=window.getComputedStyle(t,null),o="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):t.offsetHeight;if(o<e?"hidden"===n.overflowY&&(l("scroll"),p(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==n.overflowY&&(l("hidden"),p(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),r!==o){r=o;var s=i("autosize:resized");try{t.dispatchEvent(s)}catch(t){}}}}function a(t){var e=o.get(t);e&&e.destroy()}function u(t){var e=o.get(t);e&&e.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(t){return t}).destroy=function(t){return t},l.update=function(t){return t}):((l=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return s(t,e)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],a),t},l.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],u),t}),e.default=l,t.exports=e.default})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){var r=n(248);t.exports=function(t){var e=r(t,"line-height"),n=parseFloat(e,10);if(e===n+""){var o=t.style.lineHeight;t.style.lineHeight=e+"em",e=r(t,"line-height"),n=parseFloat(e,10),o?t.style.lineHeight=o:delete t.style.lineHeight}if(-1!==e.indexOf("pt")?(n*=4,n/=3):-1!==e.indexOf("mm")?(n*=96,n/=25.4):-1!==e.indexOf("cm")?(n*=96,n/=2.54):-1!==e.indexOf("in")?n*=96:-1!==e.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===e){var i=t.nodeName,s=document.createElement(i);s.innerHTML="&nbsp;","TEXTAREA"===i.toUpperCase()&&s.setAttribute("rows","1");var a=r(t,"font-size");s.style.fontSize=a,s.style.padding="0px",s.style.border="0px";var u=document.body;u.appendChild(s),n=s.offsetHeight,u.removeChild(s)}return n}},function(t,e){t.exports=function(t,e,n){return((n=window.getComputedStyle)?n(t):t.currentStyle)[e.replace(/-(\w)/gi,(function(t,e){return e.toUpperCase()}))]}},function(t,e,n){var r=n(250);t.exports=function(t,e){if(null==t)return{};var n,o,i=r(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)n=s[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.default=t.exports,t.exports.__esModule=!0,n.apply(this,arguments)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(253),o=n(254),i=n(129),s=n(255);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(257),o=n(258),i=n(129),s=n(259);t.exports=function(t){return r(t)||o(t)||i(t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(130);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(263);t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,u=o?Symbol.for("react.strict_mode"):60108,l=o?Symbol.for("react.profiler"):60114,c=o?Symbol.for("react.provider"):60109,p=o?Symbol.for("react.context"):60110,f=o?Symbol.for("react.async_mode"):60111,h=o?Symbol.for("react.concurrent_mode"):60111,d=o?Symbol.for("react.forward_ref"):60112,g=o?Symbol.for("react.suspense"):60113,y=o?Symbol.for("react.suspense_list"):60120,m=o?Symbol.for("react.memo"):60115,v=o?Symbol.for("react.lazy"):60116,b=o?Symbol.for("react.block"):60121,_=o?Symbol.for("react.fundamental"):60117,w=o?Symbol.for("react.responder"):60118,x=o?Symbol.for("react.scope"):60119;function S(t){if("object"===r(t)&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case f:case h:case a:case l:case u:case g:return t;default:switch(t=t&&t.$$typeof){case p:case d:case v:case m:case c:return t;default:return e}}case s:return e}}}function E(t){return S(t)===h}e.AsyncMode=f,e.ConcurrentMode=h,e.ContextConsumer=p,e.ContextProvider=c,e.Element=i,e.ForwardRef=d,e.Fragment=a,e.Lazy=v,e.Memo=m,e.Portal=s,e.Profiler=l,e.StrictMode=u,e.Suspense=g,e.isAsyncMode=function(t){return E(t)||S(t)===f},e.isConcurrentMode=E,e.isContextConsumer=function(t){return S(t)===p},e.isContextProvider=function(t){return S(t)===c},e.isElement=function(t){return"object"===r(t)&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return S(t)===d},e.isFragment=function(t){return S(t)===a},e.isLazy=function(t){return S(t)===v},e.isMemo=function(t){return S(t)===m},e.isPortal=function(t){return S(t)===s},e.isProfiler=function(t){return S(t)===l},e.isStrictMode=function(t){return S(t)===u},e.isSuspense=function(t){return S(t)===g},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===h||t===l||t===u||t===g||t===y||"object"===r(t)&&null!==t&&(t.$$typeof===v||t.$$typeof===m||t.$$typeof===c||t.$$typeof===p||t.$$typeof===d||t.$$typeof===_||t.$$typeof===w||t.$$typeof===x||t.$$typeof===b)},e.typeOf=S},function(t,e,n){var r=n(267),o=n(65);t.exports=function t(e,n,i,s,a){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,s,t,a))}},function(t,e,n){var r=n(268),o=n(137),i=n(303),s=n(307),a=n(329),u=n(86),l=n(138),c=n(139),p="[object Arguments]",f="[object Array]",h="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,y,m){var v=u(t),b=u(e),_=v?f:a(t),w=b?f:a(e),x=(_=_==p?h:_)==h,S=(w=w==p?h:w)==h,E=_==w;if(E&&l(t)){if(!l(e))return!1;v=!0,x=!1}if(E&&!x)return m||(m=new r),v||c(t)?o(t,e,n,g,y,m):i(t,e,_,n,g,y,m);if(!(1&n)){var O=x&&d.call(t,"__wrapped__"),P=S&&d.call(e,"__wrapped__");if(O||P){var C=O?t.value():t,I=P?e.value():e;return m||(m=new r),y(C,I,n,g,m)}}return!!E&&(m||(m=new r),s(t,e,n,g,y,m))}},function(t,e,n){var r=n(60),o=n(274),i=n(275),s=n(276),a=n(277),u=n(278);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=u,t.exports=l},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(61),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(61);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(61);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(61);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(60);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(60),o=n(84),i=n(136);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!o||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(132),o=n(283),i=n(134),s=n(135),a=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,p=l.hasOwnProperty,f=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?f:a).test(s(t))}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e,n){var r=n(85),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var o=s.call(t);return r&&(e?t[a]=n:delete t[a]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,o=n(284),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(28)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(287),o=n(60),i=n(84);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(288),o=n(289),i=n(290),s=n(291),a=n(292);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,t.exports=u},function(t,e,n){var r=n(63);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(63),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(63),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(63);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(64);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(64);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(64);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(64);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(136),o=n(299),i=n(300);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,t.exports=s},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(85),o=n(304),i=n(131),s=n(137),a=n(305),u=n(306),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,p,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!p(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var h=a;case"[object Set]":var d=1&r;if(h||(h=u),t.size!=e.size&&!d)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var y=s(h(t),h(e),r,l,p,f);return f.delete(t),y;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e,n){var r=n(28).Uint8Array;t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var r=n(308),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,s,a){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var p=c;p--;){var f=l[p];if(!(u?f in e:o.call(e,f)))return!1}var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var g=!0;a.set(t,e),a.set(e,t);for(var y=u;++p<c;){var m=t[f=l[p]],v=e[f];if(i)var b=u?i(v,m,f,e,t,a):i(m,v,f,t,e,a);if(!(void 0===b?m===v||s(m,v,n,i,a):b)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var _=t.constructor,w=e.constructor;_==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}},function(t,e,n){var r=n(309),o=n(311),i=n(314);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(310),o=n(86);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(312),o=n(313),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),(function(e){return i.call(t,e)})))}:o;t.exports=a},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(315),o=n(324),i=n(328);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){var r=n(316),o=n(317),i=n(86),s=n(138),a=n(320),u=n(139),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),c=!n&&o(t),p=!n&&!c&&s(t),f=!n&&!c&&!p&&u(t),h=n||c||p||f,d=h?r(t.length,String):[],g=d.length;for(var y in t)!e&&!l.call(t,y)||h&&("length"==y||p&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,g))||d.push(y);return d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(318),o=n(65),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e,n){var r=n(62),o=n(65);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=n(t);return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(62),o=n(140),i=n(65),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!s[r(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(133),i="object"==r(e)&&e&&!e.nodeType&&e,s=i&&"object"==r(t)&&t&&!t.nodeType&&t,a=s&&s.exports===i&&o.process,u=function(){try{var t=s&&s.require&&s.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=u}).call(this,n(59)(t))},function(t,e,n){var r=n(325),o=n(326),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(327)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(132),o=n(140);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){var r=n(330),o=n(84),i=n(331),s=n(332),a=n(333),u=n(62),l=n(135),c="[object Map]",p="[object Promise]",f="[object Set]",h="[object WeakMap]",d="[object DataView]",g=l(r),y=l(o),m=l(i),v=l(s),b=l(a),_=u;(r&&_(new r(new ArrayBuffer(1)))!=d||o&&_(new o)!=c||i&&_(i.resolve())!=p||s&&_(new s)!=f||a&&_(new a)!=h)&&(_=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return d;case y:return c;case m:return p;case v:return f;case b:return h}return e}),t.exports=_},function(t,e,n){var r=n(44)(n(28),"DataView");t.exports=r},function(t,e,n){var r=n(44)(n(28),"Promise");t.exports=r},function(t,e,n){var r=n(44)(n(28),"Set");t.exports=r},function(t,e,n){var r=n(44)(n(28),"WeakMap");t.exports=r},function(t,e,n){"use strict";var r=n(335),o=Object.prototype.toString,i=Object.prototype.hasOwnProperty,s=function(t,e,n){for(var r=0,o=t.length;r<o;r++)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))},a=function(t,e,n){for(var r=0,o=t.length;r<o;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)},u=function(t,e,n){for(var r in t)i.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))};t.exports=function(t,e,n){if(!r(e))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),"[object Array]"===o.call(t)?s(t,e,i):"string"==typeof t?a(t,e,i):u(t,e,i)}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o,i,s=Function.prototype.toString,a="object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{o=Object.defineProperty({},"length",{get:function(){throw i}}),i={},a((function(){throw 42}),null,o)}catch(t){t!==i&&(a=null)}else a=null;var u=/^\s*class\b/,l=function(t){try{var e=s.call(t);return u.test(e)}catch(t){return!1}},c=Object.prototype.toString,p="function"==typeof Symbol&&"symbol"===r(Symbol.toStringTag),f="object"===("undefined"==typeof document?"undefined":r(document))&&void 0===document.all&&void 0!==document.all?document.all:{};t.exports=a?function(t){if(t===f)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!==r(t))return!1;if("function"==typeof t&&!t.prototype)return!0;try{a(t,null,o)}catch(t){if(t!==i)return!1}return!l(t)}:function(t){if(t===f)return!0;if(!t)return!1;if("function"!=typeof t&&"object"!==r(t))return!1;if("function"==typeof t&&!t.prototype)return!0;if(p)return function(t){try{return!l(t)&&(s.call(t),!0)}catch(t){return!1}}(t);if(l(t))return!1;var e=c.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";var r="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,i=Object.prototype.toString,s="[object Function]";t.exports=function(t){var e=this;if("function"!=typeof e||i.call(e)!==s)throw new TypeError(r+e);for(var n,a=o.call(arguments,1),u=function(){if(this instanceof n){var r=e.apply(this,a.concat(o.call(arguments)));return Object(r)===r?r:this}return e.apply(t,a.concat(o.call(arguments)))},l=Math.max(0,e.length-a.length),c=[],p=0;p<l;p++)c.push("$"+p);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),e.prototype){var f=function(){};f.prototype=e.prototype,n.prototype=new f,f.prototype=null}return n}},function(t,e,n){"use strict";var r=n(142),o=n(143),i=n(145),s=n(146),a=n(347),u=r(s());o(u,{getPolyfill:s,implementation:i,shim:a}),t.exports=u},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="undefined"!=typeof Symbol&&Symbol,i=n(340);t.exports=function(){return"function"==typeof o&&("function"==typeof Symbol&&("symbol"===r(o("foo"))&&("symbol"===r(Symbol("bar"))&&i())))}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===r(Symbol.iterator))return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r=Array.prototype.slice,o=n(144),i=Object.keys,s=i?function(t){return i(t)}:n(342),a=Object.keys;s.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return o(t)?a(r.call(t)):a(t)}):Object.keys=s;return Object.keys||s},t.exports=s},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;if(!Object.keys){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=n(144),u=Object.prototype.propertyIsEnumerable,l=!u.call({toString:null},"toString"),c=u.call((function(){}),"prototype"),p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!h["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"===r(window[t]))try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();o=function(t){var e=null!==t&&"object"===r(t),n="[object Function]"===s.call(t),o=a(t),u=e&&"[object String]"===s.call(t),h=[];if(!e&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var g=c&&n;if(u&&t.length>0&&!i.call(t,0))for(var y=0;y<t.length;++y)h.push(String(y));if(o&&t.length>0)for(var m=0;m<t.length;++m)h.push(String(m));else for(var v in t)g&&"prototype"===v||!i.call(t,v)||h.push(String(v));if(l)for(var b=function(t){if("undefined"==typeof window||!d)return f(t);try{return f(t)}catch(t){return!1}}(t),_=0;_<p.length;++_)b&&"constructor"===p[_]||!i.call(t,p[_])||h.push(p[_]);return h}}t.exports=o},function(t,e,n){"use strict";t.exports=n(344)},function(t,e,n){"use strict";var r=n(66)("%TypeError%");t.exports=function(t,e){if(null==t)throw new r(e||"Cannot call method on "+t);return t}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(66),i=o("%String%"),s=o("%TypeError%");t.exports=function(t){if("symbol"===r(t))throw new s("Cannot convert a Symbol value to a string");return i(t)}},function(t,e,n){"use strict";var r=n(66),o=n(142),i=o(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&i(t,".prototype.")>-1?o(n):n}},function(t,e,n){"use strict";var r=n(143),o=n(146);t.exports=function(){var t=o();return r(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},function(t,e,n){var r={"./messages_ar.json":349,"./messages_cs.json":350,"./messages_de.json":351,"./messages_el.json":352,"./messages_es.json":353,"./messages_gl.json":354,"./messages_hi.json":355,"./messages_it.json":356,"./messages_nl.json":357,"./messages_pt.json":358,"./messages_sv.json":359,"./messages_tr.json":360,"./messages_ur.json":361};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=348},function(t){t.exports=JSON.parse('{"Add a comment...":"إضافة تعليق","Add a reply...":"إضافة رد","Add tag...":"إضافة علامة","Cancel":"إلغاء","Close":"إغلاق","Edit":"Edit","Delete":"Delete","Ok":"تم"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Napsat komentář...","Add a reply...":"Odpovědět...","Add tag...":"Přidat štítek...","Cancel":"Zrušit","Close":"Zavřít","Edit":"Upravit","Delete":"Smazat","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Kommentar schreiben...","Add a reply...":"Antwort schreiben...","Add tag...":"Tag...","Cancel":"Abbrechen","Close":"Schliessen","Edit":"Bearbeiten","Delete":"Löschen","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Σχολίασε...","Add a reply...":"Απάντησε...","Add tag...":"Πρόσθεσε tag...","Cancel":"Άκυρο","Close":"Κλείσιμο","Edit":"Επεξεργασία","Delete":"Διαγραφή","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Agregar un comentario...","Add a reply...":"Agregar una respuesta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Cerrar","Edit":"Editar","Delete":"Eliminar","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Engadir un comentario...","Add a reply...":"Engadir unha resposta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Pechar","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"टिप्पणी जोड़ें","Add a reply...":"जवाब दें","Add tag...":"टैग लगाएँ","Cancel":"रद्द करें","Close":"बंद करें","Edit":"संपादित करें","Delete":"हटाएँ","Ok":"ठीक है"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Commenta...","Add a reply...":"Rispondi...","Add tag...":"Aggiungi tag...","Cancel":"Annulla","Close":"Chiudi","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Commentaar toevoegen...","Add a reply...":"Antwoord toevoegen...","Add tag...":"Tag toevoegen...","Cancel":"Afbreken","Close":"Sluiten","Edit":"Bewerken","Delete":"Verwijderen","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Adicionar um comentário...","Add a reply...":"Adicionar uma resposta...","Add tag...":"Etiquetar...","Cancel":"Cancelar","Close":"Fechar","Edit":"Editar","Delete":"Apagar","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Skriv en kommentar...","Add a reply...":"Skriv ett svar...","Add tag...":"Tagg...","Cancel":"Cancel","Close":"Stäng","Edit":"Edit","Delete":"Delete","Ok":"Ok"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"Yorum ekle...","Add a reply...":"Cevap ekle...","Add tag...":"Tag Ekle...","Cancel":"İptal","Close":"Kapat","Edit":"Düzenle","Delete":"Sil","Ok":"Tamam"}')},function(t){t.exports=JSON.parse('{"Add a comment...":"تبصرہ کریں","Add a reply...":"جواب دیں","Add tag...":"ٹیگ لگائیں","Cancel":"منسوخ کریں","Close":"بند کریں","Edit":"ترمیم کریں","Delete":"ہٹائیں","Ok":"ٹھیک ہے"}')},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n};e.__esModule=!0;var a=n(0),u=n(3),l=n(365),c=n(366),p="autosize:resized",f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={lineHeight:null},e.textarea=null,e.onResize=function(t){e.props.onResize&&e.props.onResize(t)},e.updateLineHeight=function(){e.textarea&&e.setState({lineHeight:c(e.textarea)})},e.onChange=function(t){var n=e.props.onChange;e.currentValue=t.currentTarget.value,n&&n(t)},e}return o(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.maxRows,r=e.async;"number"==typeof n&&this.updateLineHeight(),"number"==typeof n||r?setTimeout((function(){return t.textarea&&l(t.textarea)})):this.textarea&&l(this.textarea),this.textarea&&this.textarea.addEventListener(p,this.onResize)},e.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(p,this.onResize),l.destroy(this.textarea))},e.prototype.render=function(){var t=this,e=this.props,n=(e.onResize,e.maxRows),r=(e.onChange,e.style),o=(e.innerRef,e.children),u=s(e,["onResize","maxRows","onChange","style","innerRef","children"]),l=this.state.lineHeight,c=n&&l?l*n:null;return a.createElement("textarea",i({},u,{onChange:this.onChange,style:c?i({},r,{maxHeight:c}):r,ref:function(e){t.textarea=e,"function"==typeof t.props.innerRef?t.props.innerRef(e):t.props.innerRef&&(t.props.innerRef.current=e)}}),o)},e.prototype.componentDidUpdate=function(){this.textarea&&l.update(this.textarea)},e.defaultProps={rows:1,async:!1},e.propTypes={rows:u.number,maxRows:u.number,onResize:u.func,innerRef:u.any,async:u.bool},e}(a.Component);e.TextareaAutosize=a.forwardRef((function(t,e){return a.createElement(f,i({},t,{innerRef:e}))}))},function(t,e,n){"use strict";var r=n(364);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r,o,i;o=[t,e],void 0===(i="function"==typeof(r=function(t,e){"use strict";var n,r,o="function"==typeof Map?new Map:(n=[],r=[],{has:function(t){return n.indexOf(t)>-1},get:function(t){return r[n.indexOf(t)]},set:function(t,e){-1===n.indexOf(t)&&(n.push(t),r.push(e))},delete:function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),r.splice(e,1))}}),i=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){i=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function s(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var e=null,n=null,r=null,s=function(){t.clientWidth!==n&&f()},a=function(e){window.removeEventListener("resize",s,!1),t.removeEventListener("input",f,!1),t.removeEventListener("keyup",f,!1),t.removeEventListener("autosize:destroy",a,!1),t.removeEventListener("autosize:update",f,!1),Object.keys(e).forEach((function(n){t.style[n]=e[n]})),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",a,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",f,!1),window.addEventListener("resize",s,!1),t.addEventListener("input",f,!1),t.addEventListener("autosize:update",f,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:a,update:f}),u()}function u(){var n=window.getComputedStyle(t,null);"vertical"===n.resize?t.style.resize="none":"both"===n.resize&&(t.style.resize="horizontal"),e="content-box"===n.boxSizing?-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),isNaN(e)&&(e=0),f()}function l(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function c(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function p(){if(0!==t.scrollHeight){var r=c(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+e+"px",n=t.clientWidth,r.forEach((function(t){t.node.scrollTop=t.scrollTop})),o&&(document.documentElement.scrollTop=o)}}function f(){p();var e=Math.round(parseFloat(t.style.height)),n=window.getComputedStyle(t,null),o="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):t.offsetHeight;if(o<e?"hidden"===n.overflowY&&(l("scroll"),p(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==n.overflowY&&(l("hidden"),p(),o="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),r!==o){r=o;var s=i("autosize:resized");try{t.dispatchEvent(s)}catch(t){}}}}function a(t){var e=o.get(t);e&&e.destroy()}function u(t){var e=o.get(t);e&&e.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(t){return t}).destroy=function(t){return t},l.update=function(t){return t}):((l=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return s(t,e)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],a),t},l.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],u),t}),e.default=l,t.exports=e.default})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){var r=n(367);t.exports=function(t){var e=r(t,"line-height"),n=parseFloat(e,10);if(e===n+""){var o=t.style.lineHeight;t.style.lineHeight=e+"em",e=r(t,"line-height"),n=parseFloat(e,10),o?t.style.lineHeight=o:delete t.style.lineHeight}if(-1!==e.indexOf("pt")?(n*=4,n/=3):-1!==e.indexOf("mm")?(n*=96,n/=25.4):-1!==e.indexOf("cm")?(n*=96,n/=2.54):-1!==e.indexOf("in")?n*=96:-1!==e.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===e){var i=t.nodeName,s=document.createElement(i);s.innerHTML="&nbsp;","TEXTAREA"===i.toUpperCase()&&s.setAttribute("rows","1");var a=r(t,"font-size");s.style.fontSize=a,s.style.padding="0px",s.style.border="0px";var u=document.body;u.appendChild(s),n=s.offsetHeight,u.removeChild(s)}return n}},function(t,e){t.exports=function(t,e,n){return((n=window.getComputedStyle)?n(t):t.currentStyle)[e.replace(/-(\w)/gi,(function(t,e){return e.toUpperCase()}))]}},function(t,e,n){var r=n(369);t.exports=function(t,e){if(null==t)return{};var n,o,i=r(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)n=s[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.default=t.exports,t.exports.__esModule=!0,n.apply(this,arguments)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(372),o=n(373),i=n(147),s=n(374);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(376),o=n(377),i=n(147),s=n(378);t.exports=function(t){return r(t)||o(t)||i(t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(148);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(382);t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,a=o?Symbol.for("react.fragment"):60107,u=o?Symbol.for("react.strict_mode"):60108,l=o?Symbol.for("react.profiler"):60114,c=o?Symbol.for("react.provider"):60109,p=o?Symbol.for("react.context"):60110,f=o?Symbol.for("react.async_mode"):60111,h=o?Symbol.for("react.concurrent_mode"):60111,d=o?Symbol.for("react.forward_ref"):60112,g=o?Symbol.for("react.suspense"):60113,y=o?Symbol.for("react.suspense_list"):60120,m=o?Symbol.for("react.memo"):60115,v=o?Symbol.for("react.lazy"):60116,b=o?Symbol.for("react.block"):60121,_=o?Symbol.for("react.fundamental"):60117,w=o?Symbol.for("react.responder"):60118,x=o?Symbol.for("react.scope"):60119;function S(t){if("object"===r(t)&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case f:case h:case a:case l:case u:case g:return t;default:switch(t=t&&t.$$typeof){case p:case d:case v:case m:case c:return t;default:return e}}case s:return e}}}function E(t){return S(t)===h}e.AsyncMode=f,e.ConcurrentMode=h,e.ContextConsumer=p,e.ContextProvider=c,e.Element=i,e.ForwardRef=d,e.Fragment=a,e.Lazy=v,e.Memo=m,e.Portal=s,e.Profiler=l,e.StrictMode=u,e.Suspense=g,e.isAsyncMode=function(t){return E(t)||S(t)===f},e.isConcurrentMode=E,e.isContextConsumer=function(t){return S(t)===p},e.isContextProvider=function(t){return S(t)===c},e.isElement=function(t){return"object"===r(t)&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return S(t)===d},e.isFragment=function(t){return S(t)===a},e.isLazy=function(t){return S(t)===v},e.isMemo=function(t){return S(t)===m},e.isPortal=function(t){return S(t)===s},e.isProfiler=function(t){return S(t)===l},e.isStrictMode=function(t){return S(t)===u},e.isSuspense=function(t){return S(t)===g},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===h||t===l||t===u||t===g||t===y||"object"===r(t)&&null!==t&&(t.$$typeof===v||t.$$typeof===m||t.$$typeof===c||t.$$typeof===p||t.$$typeof===d||t.$$typeof===_||t.$$typeof===w||t.$$typeof===x||t.$$typeof===b)},e.typeOf=S},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,l=[],c=!1,p=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):p=-1,l.length&&h())}function h(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++p<e;)u&&u[p].run();p=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";n(387);var r,o=(r=n(559))&&r.__esModule?r:{default:r};o.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),o.default._babelPolyfill=!0},function(t,e,n){"use strict";n(388),n(531),n(533),n(536),n(538),n(540),n(542),n(544),n(546),n(548),n(550),n(552),n(554),n(558)},function(t,e,n){n(389),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(470),n(471),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(108),n(494),n(169),n(495),n(170),n(496),n(497),n(498),n(499),n(171),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),t.exports=n(12)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(6),i=n(18),s=n(13),a=n(1),u=n(16),l=n(33).KEY,c=n(7),p=n(67),f=n(45),h=n(35),d=n(10),g=n(89),y=n(150),m=n(391),v=n(70),b=n(8),_=n(9),w=n(15),x=n(20),S=n(32),E=n(34),O=n(39),P=n(153),C=n(25),I=n(69),T=n(14),R=n(37),M=C.f,A=T.f,N=P.f,k=o.Symbol,L=o.JSON,D=L&&L.stringify,j=d("_hidden"),F=d("toPrimitive"),B={}.propertyIsEnumerable,z=p("symbol-registry"),V=p("symbols"),U=p("op-symbols"),H=Object.prototype,G="function"==typeof k&&!!I.f,q=o.QObject,W=!q||!q.prototype||!q.prototype.findChild,Y=s&&c((function(){return 7!=O(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=M(H,e);r&&delete H[e],A(t,e,n),r&&t!==H&&A(H,e,r)}:A,X=function(t){var e=V[t]=O(k.prototype);return e._k=t,e},$=G&&"symbol"==r(k.iterator)?function(t){return"symbol"==r(t)}:function(t){return t instanceof k},K=function(t,e,n){return t===H&&K(U,e,n),b(t),e=S(e,!0),b(n),i(V,e)?(n.enumerable?(i(t,j)&&t[j][e]&&(t[j][e]=!1),n=O(n,{enumerable:E(0,!1)})):(i(t,j)||A(t,j,E(1,{})),t[j][e]=!0),Y(t,e,n)):A(t,e,n)},Z=function(t,e){b(t);for(var n,r=m(e=x(e)),o=0,i=r.length;i>o;)K(t,n=r[o++],e[n]);return t},J=function(t){var e=B.call(this,t=S(t,!0));return!(this===H&&i(V,t)&&!i(U,t))&&(!(e||!i(this,t)||!i(V,t)||i(this,j)&&this[j][t])||e)},Q=function(t,e){if(t=x(t),e=S(e,!0),t!==H||!i(V,e)||i(U,e)){var n=M(t,e);return!n||!i(V,e)||i(t,j)&&t[j][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=N(x(t)),r=[],o=0;n.length>o;)i(V,e=n[o++])||e==j||e==l||r.push(e);return r},et=function(t){for(var e,n=t===H,r=N(n?U:x(t)),o=[],s=0;r.length>s;)!i(V,e=r[s++])||n&&!i(H,e)||o.push(V[e]);return o};G||(u((k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function e(n){this===H&&e.call(U,n),i(this,j)&&i(this[j],t)&&(this[j][t]=!1),Y(this,t,E(1,n))};return s&&W&&Y(H,t,{configurable:!0,set:e}),X(t)}).prototype,"toString",(function(){return this._k})),C.f=Q,T.f=K,n(40).f=P.f=tt,n(55).f=J,I.f=et,s&&!n(36)&&u(H,"propertyIsEnumerable",J,!0),g.f=function(t){return X(d(t))}),a(a.G+a.W+a.F*!G,{Symbol:k});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)d(nt[rt++]);for(var ot=R(d.store),it=0;ot.length>it;)y(ot[it++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return i(z,t+="")?z[t]:z[t]=k(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!G,"Object",{create:function(t,e){return void 0===e?O(t):Z(O(t),e)},defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var st=c((function(){I.f(1)}));a(a.S+a.F*st,"Object",{getOwnPropertySymbols:function(t){return I.f(w(t))}}),L&&a(a.S+a.F*(!G||c((function(){var t=k();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(_(e)||void 0!==t)&&!$(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!$(e))return e}),r[1]=e,D.apply(L,r)}}),k.prototype[F]||n(19)(k.prototype,F,k.prototype.valueOf),f(k,"Symbol"),f(Math,"Math",!0),f(o.JSON,"JSON",!0)},function(t,e,n){t.exports=n(67)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(37),o=n(69),i=n(55);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var s,a=n(t),u=i.f,l=0;a.length>l;)u.call(t,s=a[l++])&&e.push(s);return e}},function(t,e,n){var r=n(1);r(r.S,"Object",{create:n(39)})},function(t,e,n){var r=n(1);r(r.S+r.F*!n(13),"Object",{defineProperty:n(14).f})},function(t,e,n){var r=n(1);r(r.S+r.F*!n(13),"Object",{defineProperties:n(152)})},function(t,e,n){var r=n(20),o=n(25).f;n(26)("getOwnPropertyDescriptor",(function(){return function(t,e){return o(r(t),e)}}))},function(t,e,n){var r=n(15),o=n(41);n(26)("getPrototypeOf",(function(){return function(t){return o(r(t))}}))},function(t,e,n){var r=n(15),o=n(37);n(26)("keys",(function(){return function(t){return o(r(t))}}))},function(t,e,n){n(26)("getOwnPropertyNames",(function(){return n(153).f}))},function(t,e,n){var r=n(9),o=n(33).onFreeze;n(26)("freeze",(function(t){return function(e){return t&&r(e)?t(o(e)):e}}))},function(t,e,n){var r=n(9),o=n(33).onFreeze;n(26)("seal",(function(t){return function(e){return t&&r(e)?t(o(e)):e}}))},function(t,e,n){var r=n(9),o=n(33).onFreeze;n(26)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(o(e)):e}}))},function(t,e,n){var r=n(9);n(26)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(9);n(26)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},function(t,e,n){var r=n(9);n(26)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},function(t,e,n){var r=n(1);r(r.S+r.F,"Object",{assign:n(154)})},function(t,e,n){var r=n(1);r(r.S,"Object",{is:n(155)})},function(t,e,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(93).set})},function(t,e,n){"use strict";var r=n(56),o={};o[n(10)("toStringTag")]="z",o+""!="[object z]"&&n(16)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(t,e,n){var r=n(1);r(r.P,"Function",{bind:n(156)})},function(t,e,n){var r=n(14).f,o=Function.prototype,i=/^\s*function ([^ (]*)/,s="name";s in o||n(13)&&r(o,s,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(9),o=n(41),i=n(10)("hasInstance"),s=Function.prototype;i in s||n(14).f(s,i,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=o(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(1),o=n(158);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(t,e,n){var r=n(1),o=n(159);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(t,e,n){"use strict";var r=n(6),o=n(18),i=n(29),s=n(95),a=n(32),u=n(7),l=n(40).f,c=n(25).f,p=n(14).f,f=n(46).trim,h="Number",d=r.Number,g=d,y=d.prototype,m=i(n(39)(y))==h,v="trim"in String.prototype,b=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,r,o,i=(e=v?e.trim():f(e,3)).charCodeAt(0);if(43===i||45===i){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var s,u=e.slice(2),l=0,c=u.length;l<c;l++)if((s=u.charCodeAt(l))<48||s>o)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(m?u((function(){y.valueOf.call(n)})):i(n)!=h)?s(new g(b(e)),n,d):b(e)};for(var _,w=n(13)?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)o(g,_=w[x])&&!o(d,_)&&p(d,_,c(g,_));d.prototype=y,y.constructor=d,n(16)(r,h,d)}},function(t,e,n){"use strict";var r=n(1),o=n(24),i=n(160),s=n(96),a=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",p="0",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*l[n],l[n]=r%1e7,r=u(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+s.call(p,7-n.length)+n}return e},g=function t(e,n,r){return 0===n?r:n%2==1?t(e,n-1,r*e):t(e*e,n/2,r)};r(r.P+r.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(7)((function(){a.call({})}))),"Number",{toFixed:function(t){var e,n,r,a,u=i(this,c),l=o(t),y="",m=p;if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*g(2,69,1))-69)<0?u*g(2,-e,1):u/g(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=l;r>=7;)f(1e7,0),r-=7;for(f(g(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),m=d()}else f(0,n),f(1<<-e,0),m=d()+s.call(p,l);return m=l>0?y+((a=m.length)<=l?"0."+s.call(p,l-a)+m:m.slice(0,a-l)+"."+m.slice(a-l)):y+m}})},function(t,e,n){"use strict";var r=n(1),o=n(7),i=n(160),s=1..toPrecision;r(r.P+r.F*(o((function(){return"1"!==s.call(1,void 0)}))||!o((function(){s.call({})}))),"Number",{toPrecision:function(t){var e=i(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,n){var r=n(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(1),o=n(6).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&o(t)}})},function(t,e,n){var r=n(1);r(r.S,"Number",{isInteger:n(161)})},function(t,e,n){var r=n(1);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(1),o=n(161),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return o(t)&&i(t)<=9007199254740991}})},function(t,e,n){var r=n(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(1),o=n(159);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(t,e,n){var r=n(1),o=n(158);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(t,e,n){var r=n(1),o=n(162),i=Math.sqrt,s=Math.acosh;r(r.S+r.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:o(t-1+i(t-1)*i(t+1))}})},function(t,e,n){var r=n(1),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(1),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(1),o=n(97);r(r.S,"Math",{cbrt:function(t){return o(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(1),o=Math.exp;r(r.S,"Math",{cosh:function(t){return(o(t=+t)+o(-t))/2}})},function(t,e,n){var r=n(1),o=n(98);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(t,e,n){var r=n(1);r(r.S,"Math",{fround:n(434)})},function(t,e,n){var r=n(97),o=Math.pow,i=o(2,-52),s=o(2,-23),a=o(2,127)*(2-s),u=o(2,-126);t.exports=Math.fround||function(t){var e,n,o=Math.abs(t),l=r(t);return o<u?l*(o/u/s+1/i-1/i)*u*s:(n=(e=(1+s/i)*o)-(e-o))>a||n!=n?l*(1/0):l*n}},function(t,e,n){var r=n(1),o=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,i=0,s=0,a=arguments.length,u=0;s<a;)u<(n=o(arguments[s++]))?(i=i*(r=u/n)*r+1,u=n):i+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(i)}})},function(t,e,n){var r=n(1),o=Math.imul;r(r.S+r.F*n(7)((function(){return-5!=o(4294967295,5)||2!=o.length})),"Math",{imul:function(t,e){var n=65535,r=+t,o=+e,i=n&r,s=n&o;return 0|i*s+((n&r>>>16)*s+i*(n&o>>>16)<<16>>>0)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(1);r(r.S,"Math",{log1p:n(162)})},function(t,e,n){var r=n(1);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(1);r(r.S,"Math",{sign:n(97)})},function(t,e,n){var r=n(1),o=n(98),i=Math.exp;r(r.S+r.F*n(7)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(o(t)-o(-t))/2:(i(t-1)-i(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(1),o=n(98),i=Math.exp;r(r.S,"Math",{tanh:function(t){var e=o(t=+t),n=o(-t);return e==1/0?1:n==1/0?-1:(e-n)/(i(t)+i(-t))}})},function(t,e,n){var r=n(1);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(1),o=n(38),i=String.fromCharCode,s=String.fromCodePoint;r(r.S+r.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,s=0;r>s;){if(e=+arguments[s++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?i(e):i(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(1),o=n(20),i=n(11);r(r.S,"String",{raw:function(t){for(var e=o(t.raw),n=i(e.length),r=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),a<r&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,n){"use strict";n(46)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,n){"use strict";var r=n(99)(!0);n(100)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){"use strict";var r=n(1),o=n(99)(!1);r(r.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,e,n){"use strict";var r=n(1),o=n(11),i=n(101),s="endsWith",a="".endsWith;r(r.P+r.F*n(103)(s),"String",{endsWith:function(t){var e=i(this,t,s),n=arguments.length>1?arguments[1]:void 0,r=o(e.length),u=void 0===n?r:Math.min(o(n),r),l=String(t);return a?a.call(e,l,u):e.slice(u-l.length,u)===l}})},function(t,e,n){"use strict";var r=n(1),o=n(101),i="includes";r(r.P+r.F*n(103)(i),"String",{includes:function(t){return!!~o(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(1);r(r.P,"String",{repeat:n(96)})},function(t,e,n){"use strict";var r=n(1),o=n(11),i=n(101),s="startsWith",a="".startsWith;r(r.P+r.F*n(103)(s),"String",{startsWith:function(t){var e=i(this,t,s),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(17)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,n){"use strict";n(17)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,n){"use strict";n(17)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,n){"use strict";n(17)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,n){"use strict";n(17)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,n){"use strict";n(17)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,n){"use strict";n(17)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,n){"use strict";n(17)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,n){"use strict";n(17)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,n){"use strict";n(17)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,n){"use strict";n(17)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,n){"use strict";n(17)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,n){"use strict";n(17)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,n){var r=n(1);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(1),o=n(15),i=n(32);r(r.P+r.F*n(7)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=o(this),n=i(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(1),o=n(469);r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(t,e,n){"use strict";var r=n(7),o=Date.prototype.getTime,i=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-50000000000001))}))||!r((function(){i.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}:i},function(t,e,n){var r=Date.prototype,o="Invalid Date",i="toString",s=r.toString,a=r.getTime;new Date(NaN)+""!=o&&n(16)(r,i,(function(){var t=a.call(this);return t==t?s.call(this):o}))},function(t,e,n){var r=n(10)("toPrimitive"),o=Date.prototype;r in o||n(19)(o,r,n(472))},function(t,e,n){"use strict";var r=n(8),o=n(32),i="number";t.exports=function(t){if("string"!==t&&t!==i&&"default"!==t)throw TypeError("Incorrect hint");return o(r(this),t!=i)}},function(t,e,n){var r=n(1);r(r.S,"Array",{isArray:n(70)})},function(t,e,n){"use strict";var r=n(22),o=n(1),i=n(15),s=n(164),a=n(104),u=n(11),l=n(105),c=n(106);o(o.S+o.F*!n(71)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,o,p,f=i(t),h="function"==typeof this?this:Array,d=arguments.length,g=d>1?arguments[1]:void 0,y=void 0!==g,m=0,v=c(f);if(y&&(g=r(g,d>2?arguments[2]:void 0,2)),null==v||h==Array&&a(v))for(n=new h(e=u(f.length));e>m;m++)l(n,m,y?g(f[m],m):f[m]);else for(p=v.call(f),n=new h;!(o=p.next()).done;m++)l(n,m,y?s(p,g,[o.value,m],!0):o.value);return n.length=m,n}})},function(t,e,n){"use strict";var r=n(1),o=n(105);r(r.S+r.F*n(7)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)o(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(1),o=n(20),i=[].join;r(r.P+r.F*(n(54)!=Object||!n(21)(i)),"Array",{join:function(t){return i.call(o(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(1),o=n(92),i=n(29),s=n(38),a=n(11),u=[].slice;r(r.P+r.F*n(7)((function(){o&&u.call(o)})),"Array",{slice:function(t,e){var n=a(this.length),r=i(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var o=s(t,n),l=s(e,n),c=a(l-o),p=new Array(c),f=0;f<c;f++)p[f]="String"==r?this.charAt(o+f):this[o+f];return p}})},function(t,e,n){"use strict";var r=n(1),o=n(23),i=n(15),s=n(7),a=[].sort,u=[1,2,3];r(r.P+r.F*(s((function(){u.sort(void 0)}))||!s((function(){u.sort(null)}))||!n(21)(a)),"Array",{sort:function(t){return void 0===t?a.call(i(this)):a.call(i(this),o(t))}})},function(t,e,n){"use strict";var r=n(1),o=n(27)(0),i=n(21)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,e,n){var r=n(9),o=n(70),i=n(10)("species");t.exports=function(t){var e;return o(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(1),o=n(27)(1);r(r.P+r.F*!n(21)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),o=n(27)(2);r(r.P+r.F*!n(21)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),o=n(27)(3);r(r.P+r.F*!n(21)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),o=n(27)(4);r(r.P+r.F*!n(21)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),o=n(166);r(r.P+r.F*!n(21)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(1),o=n(166);r(r.P+r.F*!n(21)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(1),o=n(68)(!1),i=[].indexOf,s=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(s||!n(21)(i)),"Array",{indexOf:function(t){return s?i.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),o=n(20),i=n(24),s=n(11),a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(21)(a)),"Array",{lastIndexOf:function(t){if(u)return a.apply(this,arguments)||0;var e=o(this),n=s(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(1);r(r.P,"Array",{copyWithin:n(167)}),n(42)("copyWithin")},function(t,e,n){var r=n(1);r(r.P,"Array",{fill:n(107)}),n(42)("fill")},function(t,e,n){"use strict";var r=n(1),o=n(27)(5),i="find",s=!0;i in[]&&Array(1).find((function(){s=!1})),r(r.P+r.F*s,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(42)(i)},function(t,e,n){"use strict";var r=n(1),o=n(27)(6),i="findIndex",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),r(r.P+r.F*s,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(42)(i)},function(t,e,n){n(48)("Array")},function(t,e,n){var r=n(6),o=n(95),i=n(14).f,s=n(40).f,a=n(102),u=n(72),l=r.RegExp,c=l,p=l.prototype,f=/a/g,h=/a/g,d=new l(f)!==f;if(n(13)&&(!d||n(7)((function(){return h[n(10)("match")]=!1,l(f)!=f||l(h)==h||"/a/i"!=l(f,"i")})))){l=function(t,e){var n=this instanceof l,r=a(t),i=void 0===e;return!n&&r&&t.constructor===l&&i?t:o(d?new c(r&&!i?t.source:t,e):c((r=t instanceof l)?t.source:t,r&&i?u.call(t):e),n?this:p,l)};for(var g=function(t){t in l||i(l,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},y=s(c),m=0;y.length>m;)g(y[m++]);p.constructor=l,l.prototype=p,n(16)(r,"RegExp",l)}n(48)("RegExp")},function(t,e,n){"use strict";n(170);var r=n(8),o=n(72),i=n(13),s="toString",a=/./.toString,u=function(t){n(16)(RegExp.prototype,s,t,!0)};n(7)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?u((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)})):a.name!=s&&u((function(){return a.call(this)}))},function(t,e,n){"use strict";var r=n(8),o=n(11),i=n(110),s=n(73);n(74)("match",1,(function(t,e,n,a){return[function(n){var r=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var u=r(t),l=String(this);if(!u.global)return s(u,l);var c=u.unicode;u.lastIndex=0;for(var p,f=[],h=0;null!==(p=s(u,l));){var d=String(p[0]);f[h]=d,""===d&&(u.lastIndex=i(l,o(u.lastIndex),c)),h++}return 0===h?null:f}]}))},function(t,e,n){"use strict";var r=n(8),o=n(15),i=n(11),s=n(24),a=n(110),u=n(73),l=Math.max,c=Math.min,p=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(74)("replace",2,(function(t,e,n,d){return[function(r,o){var i=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,i,o):n.call(String(i),r,o)},function(t,e){var o=d(n,t,this,e);if(o.done)return o.value;var p=r(t),f=String(this),h="function"==typeof e;h||(e=String(e));var y=p.global;if(y){var m=p.unicode;p.lastIndex=0}for(var v=[];;){var b=u(p,f);if(null===b)break;if(v.push(b),!y)break;""===String(b[0])&&(p.lastIndex=a(f,i(p.lastIndex),m))}for(var _,w="",x=0,S=0;S<v.length;S++){b=v[S];for(var E=String(b[0]),O=l(c(s(b.index),f.length),0),P=[],C=1;C<b.length;C++)P.push(void 0===(_=b[C])?_:String(_));var I=b.groups;if(h){var T=[E].concat(P,O,f);void 0!==I&&T.push(I);var R=String(e.apply(void 0,T))}else R=g(E,f,O,P,I,e);O>=x&&(w+=f.slice(x,O)+R,x=O+E.length)}return w+f.slice(x)}];function g(t,e,r,i,s,a){var u=r+t.length,l=i.length,c=h;return void 0!==s&&(s=o(s),c=f),n.call(a,c,(function(n,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":a=s[o.slice(1,-1)];break;default:var c=+o;if(0===c)return n;if(c>l){var f=p(c/10);return 0===f?n:f<=l?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):n}a=i[c-1]}return void 0===a?"":a}))}}))},function(t,e,n){"use strict";var r=n(8),o=n(155),i=n(73);n(74)("search",1,(function(t,e,n,s){return[function(n){var r=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var a=r(t),u=String(this),l=a.lastIndex;o(l,0)||(a.lastIndex=0);var c=i(a,u);return o(a.lastIndex,l)||(a.lastIndex=l),null===c?-1:c.index}]}))},function(t,e,n){"use strict";var r=n(102),o=n(8),i=n(57),s=n(110),a=n(11),u=n(73),l=n(109),c=n(7),p=Math.min,f=[].push,h=4294967295,d=!c((function(){RegExp(h,"y")}));n(74)("split",2,(function(t,e,n,c){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(o,t,e);for(var i,s,a,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,d=void 0===e?h:e>>>0,g=new RegExp(t.source,c+"g");(i=l.call(g,o))&&!((s=g.lastIndex)>p&&(u.push(o.slice(p,i.index)),i.length>1&&i.index<o.length&&f.apply(u,i.slice(1)),a=i[0].length,p=s,u.length>=d));)g.lastIndex===i.index&&g.lastIndex++;return p===o.length?!a&&g.test("")||u.push(""):u.push(o.slice(p)),u.length>d?u.slice(0,d):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var o=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):g.call(String(o),n,r)},function(t,e){var r=c(g,t,this,e,g!==n);if(r.done)return r.value;var l=o(t),f=String(this),y=i(l,RegExp),m=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(d?"y":"g"),b=new y(d?l:"^(?:"+l.source+")",v),_=void 0===e?h:e>>>0;if(0===_)return[];if(0===f.length)return null===u(b,f)?[f]:[];for(var w=0,x=0,S=[];x<f.length;){b.lastIndex=d?x:0;var E,O=u(b,d?f:f.slice(x));if(null===O||(E=p(a(b.lastIndex+(d?0:x)),f.length))===w)x=s(f,x,m);else{if(S.push(f.slice(w,x)),S.length===_)return S;for(var P=1;P<=O.length-1;P++)if(S.push(O[P]),S.length===_)return S;x=w=E}}return S.push(f.slice(w)),S}]}))},function(t,e,n){var r=n(6),o=n(111).set,i=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n(29)(s);t.exports=function(){var t,e,n,l=function(){var r,o;for(u&&(r=s.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);n=function(){c.then(l)}}else n=function(){o.call(r,l)};else{var p=!0,f=document.createTextNode("");new i(l).observe(f,{characterData:!0}),n=function(){f.data=p=!p}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){"use strict";var r=n(174),o=n(43),i="Map";t.exports=n(77)(i,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(o(this,i),t);return e&&e.v},set:function(t,e){return r.def(o(this,i),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(174),o=n(43);t.exports=n(77)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(o(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,o=n(6),i=n(27)(0),s=n(16),a=n(33),u=n(154),l=n(175),c=n(9),p=n(43),f=n(43),h=!o.ActiveXObject&&"ActiveXObject"in o,d="WeakMap",g=a.getWeak,y=Object.isExtensible,m=l.ufstore,v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(t){if(c(t)){var e=g(t);return!0===e?m(p(this,d)).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(p(this,d),t,e)}},_=t.exports=n(77)(d,v,b,l,!0,!0);f&&h&&(u((r=l.getConstructor(v,d)).prototype,b),a.NEED=!0,i(["delete","has","get","set"],(function(t){var e=_.prototype,n=e[t];s(e,t,(function(e,o){if(c(e)&&!y(e)){this._f||(this._f=new r);var i=this._f[t](e,o);return"set"==t?this:i}return n.call(this,e,o)}))})))},function(t,e,n){"use strict";var r=n(175),o=n(43),i="WeakSet";n(77)(i,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(o(this,i),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(1),o=n(78),i=n(112),s=n(8),a=n(38),u=n(11),l=n(9),c=n(6).ArrayBuffer,p=n(57),f=i.ArrayBuffer,h=i.DataView,d=o.ABV&&c.isView,g=f.prototype.slice,y=o.VIEW,m="ArrayBuffer";r(r.G+r.W+r.F*(c!==f),{ArrayBuffer:f}),r(r.S+r.F*!o.CONSTR,m,{isView:function(t){return d&&d(t)||l(t)&&y in t}}),r(r.P+r.U+r.F*n(7)((function(){return!new f(2).slice(1,void 0).byteLength})),m,{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(s(this),t);for(var n=s(this).byteLength,r=a(t,n),o=a(void 0===e?n:e,n),i=new(p(this,f))(u(o-r)),l=new h(this),c=new h(i),d=0;r<o;)c.setUint8(d++,l.getUint8(r++));return i}}),n(48)(m)},function(t,e,n){var r=n(1);r(r.G+r.W+r.F*!n(78).ABV,{DataView:n(112).DataView})},function(t,e,n){n(31)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(31)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(31)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},function(t,e,n){n(31)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(31)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(31)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(31)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(31)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){n(31)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(1),o=n(23),i=n(8),s=(n(6).Reflect||{}).apply,a=Function.apply;r(r.S+r.F*!n(7)((function(){s((function(){}))})),"Reflect",{apply:function(t,e,n){var r=o(t),u=i(n);return s?s(r,e,u):a.call(r,e,u)}})},function(t,e,n){var r=n(1),o=n(39),i=n(23),s=n(8),a=n(9),u=n(7),l=n(156),c=(n(6).Reflect||{}).construct,p=u((function(){function t(){}return!(c((function(){}),[],t)instanceof t)})),f=!u((function(){c((function(){}))}));r(r.S+r.F*(p||f),"Reflect",{construct:function(t,e){i(t),s(e);var n=arguments.length<3?t:i(arguments[2]);if(f&&!p)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var u=n.prototype,h=o(a(u)?u:Object.prototype),d=Function.apply.call(t,h,e);return a(d)?d:h}})},function(t,e,n){var r=n(14),o=n(1),i=n(8),s=n(32);o(o.S+o.F*n(7)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){i(t),e=s(e,!0),i(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(1),o=n(25).f,i=n(8);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=o(i(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(1),o=n(8),i=function(t){this._t=o(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(163)(i,"Object",(function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new i(t)}})},function(t,e,n){var r=n(25),o=n(41),i=n(18),s=n(1),a=n(9),u=n(8);s(s.S,"Reflect",{get:function t(e,n){var s,l,c=arguments.length<3?e:arguments[2];return u(e)===c?e[n]:(s=r.f(e,n))?i(s,"value")?s.value:void 0!==s.get?s.get.call(c):void 0:a(l=o(e))?t(l,n,c):void 0}})},function(t,e,n){var r=n(25),o=n(1),i=n(8);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(i(t),e)}})},function(t,e,n){var r=n(1),o=n(41),i=n(8);r(r.S,"Reflect",{getPrototypeOf:function(t){return o(i(t))}})},function(t,e,n){var r=n(1);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(1),o=n(8),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return o(t),!i||i(t)}})},function(t,e,n){var r=n(1);r(r.S,"Reflect",{ownKeys:n(177)})},function(t,e,n){var r=n(1),o=n(8),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){o(t);try{return i&&i(t),!0}catch(t){return!1}}})},function(t,e,n){var r=n(14),o=n(25),i=n(41),s=n(18),a=n(1),u=n(34),l=n(8),c=n(9);a(a.S,"Reflect",{set:function t(e,n,a){var p,f,h=arguments.length<4?e:arguments[3],d=o.f(l(e),n);if(!d){if(c(f=i(e)))return t(f,n,a,h);d=u(0)}if(s(d,"value")){if(!1===d.writable||!c(h))return!1;if(p=o.f(h,n)){if(p.get||p.set||!1===p.writable)return!1;p.value=a,r.f(h,n,p)}else r.f(h,n,u(0,a));return!0}return void 0!==d.set&&(d.set.call(h,a),!0)}})},function(t,e,n){var r=n(1),o=n(93);o&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){o.check(t,e);try{return o.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){n(532),t.exports=n(12).Array.includes},function(t,e,n){"use strict";var r=n(1),o=n(68)(!0);r(r.P,"Array",{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(42)("includes")},function(t,e,n){n(534),t.exports=n(12).Array.flatMap},function(t,e,n){"use strict";var r=n(1),o=n(535),i=n(15),s=n(11),a=n(23),u=n(165);r(r.P,"Array",{flatMap:function(t){var e,n,r=i(this);return a(t),e=s(r.length),n=u(r,0),o(n,r,r,e,0,1,t,arguments[1]),n}}),n(42)("flatMap")},function(t,e,n){"use strict";var r=n(70),o=n(9),i=n(11),s=n(22),a=n(10)("isConcatSpreadable");t.exports=function t(e,n,u,l,c,p,f,h){for(var d,g,y=c,m=0,v=!!f&&s(f,h,3);m<l;){if(m in u){if(d=v?v(u[m],m,n):u[m],g=!1,o(d)&&(g=void 0!==(g=d[a])?!!g:r(d)),g&&p>0)y=t(e,n,d,i(d.length),y,p-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=d}y++}m++}return y}},function(t,e,n){n(537),t.exports=n(12).String.padStart},function(t,e,n){"use strict";var r=n(1),o=n(178),i=n(76),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*s,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){n(539),t.exports=n(12).String.padEnd},function(t,e,n){"use strict";var r=n(1),o=n(178),i=n(76),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*s,"String",{padEnd:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){n(541),t.exports=n(12).String.trimLeft},function(t,e,n){"use strict";n(46)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,n){n(543),t.exports=n(12).String.trimRight},function(t,e,n){"use strict";n(46)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,n){n(545),t.exports=n(89).f("asyncIterator")},function(t,e,n){n(150)("asyncIterator")},function(t,e,n){n(547),t.exports=n(12).Object.getOwnPropertyDescriptors},function(t,e,n){var r=n(1),o=n(177),i=n(20),s=n(25),a=n(105);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=i(t),u=s.f,l=o(r),c={},p=0;l.length>p;)void 0!==(n=u(r,e=l[p++]))&&a(c,e,n);return c}})},function(t,e,n){n(549),t.exports=n(12).Object.values},function(t,e,n){var r=n(1),o=n(179)(!1);r(r.S,"Object",{values:function(t){return o(t)}})},function(t,e,n){n(551),t.exports=n(12).Object.entries},function(t,e,n){var r=n(1),o=n(179)(!0);r(r.S,"Object",{entries:function(t){return o(t)}})},function(t,e,n){"use strict";n(171),n(553),t.exports=n(12).Promise.finally},function(t,e,n){"use strict";var r=n(1),o=n(12),i=n(6),s=n(57),a=n(173);r(r.P+r.R,"Promise",{finally:function(t){var e=s(this,o.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){n(555),n(556),n(557),t.exports=n(12)},function(t,e,n){var r=n(6),o=n(1),i=n(76),s=[].slice,a=/MSIE .\./.test(i),u=function(t){return function(e,n){var r=arguments.length>2,o=!!r&&s.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,n)}};o(o.G+o.B+o.F*a,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(1),o=n(111);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(t,e,n){for(var r=n(108),o=n(37),i=n(16),s=n(6),a=n(19),u=n(47),l=n(10),c=l("iterator"),p=l("toStringTag"),f=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=o(h),g=0;g<d.length;g++){var y,m=d[g],v=h[m],b=s[m],_=b&&b.prototype;if(_&&(_[c]||a(_,c,f),_[p]||a(_,p,m),u[m]=f,v))for(y in r)_[y]||i(_,y,r[y],!0)}},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),s=new T(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===g){if("throw"===o)throw i;return M()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=P(s,n);if(a){if(a===y)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=p(t,e,n);if("normal"===u.type){if(r=n.done?g:h,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=g,n.method="throw",n.arg=u.arg)}}}(t,n,s),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",g="completed",y={};function m(){}function v(){}function b(){}var _={};_[s]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(R([])));x&&x!==r&&o.call(x,s)&&(_=x);var S=b.prototype=m.prototype=Object.create(_);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,n){function r(i,s,a,u){var l=p(t[i],t,s);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"===e(f)&&o.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):n.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(l.arg)}var i;this._invoke=function(t,e){function o(){return new n((function(n,o){r(t,e,n,o)}))}return i=i?i.then(o,o):o()}}function P(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,P(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=p(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function R(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:M}}function M(){return{value:n,done:!0}}return v.prototype=S.constructor=b,b.constructor=v,v.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(O.prototype),O.prototype[a]=function(){return this},t.AsyncIterator=O,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new O(c(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},E(S),l(S,u,"Generator"),S[s]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return a.type="throw",a.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=o.call(s,"catchLoc"),l=o.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:R(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),y}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(59)(t))},function(t,e,n){n(560),t.exports=n(180).global},function(t,e,n){var r=n(561);r(r.G,{global:n(113)})},function(t,e,n){var r=n(113),o=n(180),i=n(562),s=n(564),a=n(571),u=function t(e,n,u){var l,c,p,f=e&t.F,h=e&t.G,d=e&t.S,g=e&t.P,y=e&t.B,m=e&t.W,v=h?o:o[n]||(o[n]={}),b=v.prototype,_=h?r:d?r[n]:(r[n]||{}).prototype;for(l in h&&(u=n),u)(c=!f&&_&&void 0!==_[l])&&a(v,l)||(p=c?_[l]:u[l],v[l]=h&&"function"!=typeof _[l]?u[l]:y&&c?i(p,r):m&&_[l]==p?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(p):g&&"function"==typeof p?i(Function.call,p):p,g&&((v.virtual||(v.virtual={}))[l]=p,e&t.R&&b&&!b[l]&&s(b,l,p)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(563);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(565),o=n(570);t.exports=n(115)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(566),o=n(567),i=n(569),s=Object.defineProperty;e.f=n(115)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(114);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(115)&&!n(181)((function(){return 7!=Object.defineProperty(n(568)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(114),o=n(113).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){var r=n(114);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(79),i=n.n(o),s=n(5),a=["second","minute","hour","day","week","month","year"],u=["秒","分钟","小时","天","周","个月","年"],l={},c=function(t,e){l[t]=e},p=function(t){return l[t]||l.en_US},f=[60,60,24,7,365/7/12,12];function h(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}function d(t,e){for(var n=t<0?1:0,r=t=Math.abs(t),o=0;t>=f[o]&&o<f.length;o++)t/=f[o];return(t=Math.floor(t))>(0===(o*=2)?9:1)&&(o+=1),e(t,o,r)[n].replace("%s",t.toString())}function g(t,e){return(+(e?h(e):new Date)-+h(t))/1e3}var y="timeago-id";function m(t){return parseInt(t.getAttribute(y))}var v={},b=function(t){clearTimeout(t),delete v[t]};function _(t,e,n,r){b(m(t));var o=r.relativeDate,i=r.minInterval,s=g(e,o);t.innerText=d(s,n);var a=setTimeout((function(){_(t,e,n,r)}),Math.min(1e3*Math.max(function(t){for(var e=1,n=0,r=Math.abs(t);t>=f[n]&&n<f.length;n++)t/=f[n],e*=f[n];return r=(r%=e)?e-r:e,Math.ceil(r)}(s),i||1),2147483647));v[a]=0,function(t,e){t.setAttribute(y,e)}(t,a)}function w(t){t?b(m(t)):Object.keys(v).forEach(b)}c("en_US",(function(t,e){if(0===e)return["just now","right now"];var n=a[Math.floor(e/2)];return t>1&&(n+="s"),[t+" "+n+" ago","in "+t+" "+n]})),c("zh_CN",(function(t,e){if(0===e)return["刚刚","片刻后"];var n=u[~~(e/2)];return[t+" "+n+"前",t+" "+n+"后"]}));var x,S=(x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),E=function(){return(E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},O=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dom=null,e}return S(e,t),e.prototype.componentDidMount=function(){this.renderTimeAgo()},e.prototype.componentDidUpdate=function(){this.renderTimeAgo()},e.prototype.renderTimeAgo=function(){var t,e=this.props,n=e.live,r=e.datetime,o=e.locale,i=e.opts;w(this.dom),!1!==n&&(this.dom.setAttribute("datetime",""+((t=r)instanceof Date?t.getTime():t)),function(t,e,n){var r=t.length?t:[t];r.forEach((function(t){_(t,function(t){return t.getAttribute("datetime")}(t),p(e),n||{})}))}(this.dom,o,i))},e.prototype.componentWillUnmount=function(){w(this.dom)},e.prototype.render=function(){var t=this,e=this.props,n=e.datetime,o=(e.live,e.locale),i=e.opts,s=O(e,["datetime","live","locale","opts"]);return r.createElement("time",E({ref:function(e){t.dom=e}},s),function(t,e,n){return d(g(t,n&&n.relativeDate),p(e))}(n,o,i))},e.defaultProps={live:!0,className:""},e}(r.Component);var C=n(182),I=n(183),T=n.n(I),R=n(184),M=n.n(R),A=n(185),N=n.n(A),k=n(186),L=n.n(k),D=n(187),j=n.n(D),F=n(188),B=n.n(F),z=n(189),V=n.n(z),U=n(190),H=n.n(U),G=n(191),q=n.n(G),W=n(192),Y=n.n(W),X=n(193),$=n.n(X),K=n(194),Z=n.n(K),J=new C({allowMissing:!0});J.init=function(t,e){t&&(J.locale(t),J.extend(n(229)("./messages_".concat(t,".json")))),e&&J.extend(e)},c("ar",T.a),c("cs",M.a),c("de",N.a),c("el",L.a),c("es",j.a),c("gl",B.a),c("hi",V.a),c("it",H.a),c("nl",q.a),c("pt",Y.a),c("sv",$.a),c("tr",Z.a);var Q=J,tt=function(t){var e=Object(s.j)();return function(t,e){var n=function(n){t.current&&!t.current.contains(event.target)&&e()};Object(s.d)((function(){return document.addEventListener("mousedown",n),function(){return document.removeEventListener("mousedown",n)}}))}(e,(function(){return t.onClickOutside()})),r.default.createElement("ul",{ref:e,className:"r6o-comment-dropdown-menu"},r.default.createElement("li",{onClick:t.onEdit},Q.t("Edit")),r.default.createElement("li",{onClick:t.onDelete},Q.t("Delete")))},et=n(195),nt=n.n(et);function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct(t);if(e){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?lt(t):e}function lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(s,t);var e,n,o,i=at(s);function s(){var t;ot(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return pt(lt(t=i.call.apply(i,[this].concat(n))),"onKeyDown",(function(e){13===e.which&&e.ctrlKey&&t.props.onSaveAndClose()})),pt(lt(t),"onRender",(function(t){})),t}return e=s,(n=[{key:"render",value:function(){return r.default.createElement(nt.a,{ref:this.onRender,className:"r6o-editable-text",value:this.props.content,placeholder:this.props.placeholder||Q.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyDown:this.onKeyDown})}}])&&it(e.prototype,n),o&&it(e,o),s}(r.Component);n(249),n(251),n(252),n(256),n(260);function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e,n){return e&&dt(t.prototype,e),n&&dt(t,n),t}n(261);function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}var vt=n(116),bt=n.n(vt);function _t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wt(t,e){return!e||"object"!==bt()(e)&&"function"!=typeof e?_t(t):e}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var St=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function Et(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(r=t[n],o=e[n],!(r===o||St(r)&&St(o)))return!1;var r,o;return!0}var Ot=function(t,e){var n;void 0===e&&(e=Et);var r,o=[],i=!1;return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return i&&n===this&&e(s,o)||(r=t.apply(this,s),i=!0,n=this,o=s),r}};function Pt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,yt(t,e)}var Ct=function(){function t(t){this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.before=null}var e=t.prototype;return e.insert=function(t){if(this.ctr%(this.isSpeedy?65e3:1)==0){var e,n=function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e}(this);e=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,e),this.tags.push(n)}var r=this.tags[this.tags.length-1];if(this.isSpeedy){var o=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(r);try{var i=105===t.charCodeAt(1)&&64===t.charCodeAt(0);o.insertRule(t,i?0:o.cssRules.length)}catch(t){0}}else r.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}();function It(t){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Tt=function(t){function e(t,r,u,l,f){for(var h,d,g,y,_,x=0,S=0,E=0,O=0,P=0,A=0,k=g=h=0,D=0,j=0,F=0,B=0,z=u.length,V=z-1,U="",H="",G="",q="";D<z;){if(d=u.charCodeAt(D),D===V&&0!==S+O+E+x&&(0!==S&&(d=47===S?10:47),O=E=x=0,z++,V++),0===S+O+E+x){if(D===V&&(0<j&&(U=U.replace(p,"")),0<U.trim().length)){switch(d){case 32:case 9:case 59:case 13:case 10:break;default:U+=u.charAt(D)}d=59}switch(d){case 123:for(h=(U=U.trim()).charCodeAt(0),g=1,B=++D;D<z;){switch(d=u.charCodeAt(D)){case 123:g++;break;case 125:g--;break;case 47:switch(d=u.charCodeAt(D+1)){case 42:case 47:t:{for(k=D+1;k<V;++k)switch(u.charCodeAt(k)){case 47:if(42===d&&42===u.charCodeAt(k-1)&&D+2!==k){D=k+1;break t}break;case 10:if(47===d){D=k+1;break t}}D=k}}break;case 91:d++;case 40:d++;case 34:case 39:for(;D++<V&&u.charCodeAt(D)!==d;);}if(0===g)break;D++}switch(g=u.substring(B,D),0===h&&(h=(U=U.replace(c,"").trim()).charCodeAt(0)),h){case 64:switch(0<j&&(U=U.replace(p,"")),d=U.charCodeAt(1)){case 100:case 109:case 115:case 45:j=r;break;default:j=M}if(B=(g=e(r,j,g,d,f+1)).length,0<N&&(_=a(3,g,j=n(M,U,F),r,I,C,B,d,f,l),U=j.join(""),void 0!==_&&0===(B=(g=_.trim()).length)&&(d=0,g="")),0<B)switch(d){case 115:U=U.replace(w,s);case 100:case 109:case 45:g=U+"{"+g+"}";break;case 107:g=(U=U.replace(m,"$1 $2"))+"{"+g+"}",g=1===R||2===R&&i("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=U+g,112===l&&(H+=g,g="")}else g="";break;default:g=e(r,n(r,U,F),g,l,f+1)}G+=g,g=F=j=k=h=0,U="",d=u.charCodeAt(++D);break;case 125:case 59:if(1<(B=(U=(0<j?U.replace(p,""):U).trim()).length))switch(0===k&&(h=U.charCodeAt(0),45===h||96<h&&123>h)&&(B=(U=U.replace(" ",":")).length),0<N&&void 0!==(_=a(1,U,r,t,I,C,H.length,l,f,l))&&0===(B=(U=_.trim()).length)&&(U="\0\0"),h=U.charCodeAt(0),d=U.charCodeAt(1),h){case 0:break;case 64:if(105===d||99===d){q+=U+u.charAt(D);break}default:58!==U.charCodeAt(B-1)&&(H+=o(U,h,d,U.charCodeAt(2)))}F=j=k=h=0,U="",d=u.charCodeAt(++D)}}switch(d){case 13:case 10:47===S?S=0:0===1+h&&107!==l&&0<U.length&&(j=1,U+="\0"),0<N*L&&a(0,U,r,t,I,C,H.length,l,f,l),C=1,I++;break;case 59:case 125:if(0===S+O+E+x){C++;break}default:switch(C++,y=u.charAt(D),d){case 9:case 32:if(0===O+x+S)switch(P){case 44:case 58:case 9:case 32:y="";break;default:32!==d&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===O+S+x&&(j=F=1,y="\f"+y);break;case 108:if(0===O+S+x+T&&0<k)switch(D-k){case 2:112===P&&58===u.charCodeAt(D-3)&&(T=P);case 8:111===A&&(T=A)}break;case 58:0===O+S+x&&(k=D);break;case 44:0===S+E+O+x&&(j=1,y+="\r");break;case 34:case 39:0===S&&(O=O===d?0:0===O?d:O);break;case 91:0===O+S+E&&x++;break;case 93:0===O+S+E&&x--;break;case 41:0===O+S+x&&E--;break;case 40:if(0===O+S+x){if(0===h)switch(2*P+3*A){case 533:break;default:h=1}E++}break;case 64:0===S+E+O+x+k+g&&(g=1);break;case 42:case 47:if(!(0<O+x+E))switch(S){case 0:switch(2*d+3*u.charCodeAt(D+1)){case 235:S=47;break;case 220:B=D,S=42}break;case 42:47===d&&42===P&&B+2!==D&&(33===u.charCodeAt(B+2)&&(H+=u.substring(B,D+1)),y="",S=0)}}0===S&&(U+=y)}A=P,P=d,D++}if(0<(B=H.length)){if(j=r,0<N&&(void 0!==(_=a(2,H,j,t,I,C,B,l,f,l))&&0===(H=_).length))return q+H+G;if(H=j.join(",")+"{"+H+"}",0!=R*T){switch(2!==R||i(H,2)||(T=0),T){case 111:H=H.replace(b,":-moz-$1")+H;break;case 112:H=H.replace(v,"::-webkit-input-$1")+H.replace(v,"::-moz-$1")+H.replace(v,":-ms-input-$1")+H}T=0}}return q+H+G}function n(t,e,n){var o=e.trim().split(g);e=o;var i=o.length,s=t.length;switch(s){case 0:case 1:var a=0;for(t=0===s?"":t[0]+" ";a<i;++a)e[a]=r(t,e[a],n).trim();break;default:var u=a=0;for(e=[];a<i;++a)for(var l=0;l<s;++l)e[u++]=r(t[l]+" ",o[a],n).trim()}return e}function r(t,e,n){var r=e.charCodeAt(0);switch(33>r&&(r=(e=e.trim()).charCodeAt(0)),r){case 38:return e.replace(y,"$1"+t.trim());case 58:return t.trim()+e.replace(y,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(y,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function o(t,e,n,r){var s=t+";",a=2*e+3*n+4*r;if(944===a){t=s.indexOf(":",9)+1;var u=s.substring(t,s.length-1).trim();return u=s.substring(0,t).trim()+u+";",1===R||2===R&&i(u,1)?"-webkit-"+u+u:u}if(0===R||2===R&&!i(s,1))return s;switch(a){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(P,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(u=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+u+s;case 1005:return h.test(s)?s.replace(f,":-webkit-")+s.replace(f,":-moz-")+s:s;case 1e3:switch(e=(u=s.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(e)){case 226:u=s.replace(_,"tb");break;case 232:u=s.replace(_,"tb-rl");break;case 220:u=s.replace(_,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+u+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(e=(s=t).length-10,a=(u=(33===s.charCodeAt(e)?s.substring(0,e):s).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:s=s.replace(u,"-webkit-"+u)+";"+s;break;case 207:case 102:s=s.replace(u,"-webkit-"+(102<a?"inline-":"")+"box")+";"+s.replace(u,"-webkit-"+u)+";"+s.replace(u,"-ms-"+u+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return u=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+u+"-ms-flex-"+u+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(S,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(S,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===O.test(t))return 115===(u=t.substring(t.indexOf(":")+1)).charCodeAt(0)?o(t.replace("stretch","fill-available"),e,n,r).replace(":fill-available",":stretch"):s.replace(u,"-webkit-"+u)+s.replace(u,"-moz-"+u.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+r&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(d,"$1-webkit-$2")+s}return s}function i(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),k(2!==e?r:r.replace(E,"$1"),n,e)}function s(t,e){var n=o(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(x," or ($1)").substring(4):"("+e+")"}function a(t,e,n,r,o,i,s,a,u,c){for(var p,f=0,h=e;f<N;++f)switch(p=A[f].call(l,t,h,n,r,o,i,s,a,u,c)){case void 0:case!1:case!0:case null:break;default:h=p}if(h!==e)return h}function u(t){return void 0!==(t=t.prefix)&&(k=null,t?"function"!=typeof t?R=1:(R=2,k=t):R=0),u}function l(t,n){var r=t;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<N){var o=a(-1,n,r,r,I,C,0,0,0,0);void 0!==o&&"string"==typeof o&&(n=o)}var i=e(M,r,n,0,0);return 0<N&&(void 0!==(o=a(-2,i,r,r,I,C,i.length,0,0,0))&&(i=o)),"",T=0,C=I=1,i}var c=/^\0+/g,p=/[\0\r\f]/g,f=/: */g,h=/zoo|gra/,d=/([,: ])(transform)/g,g=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,S=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,O=/stretch|:\s*\w+\-(?:conte|avail)/,P=/([^-])(image-set\()/,C=1,I=1,T=0,R=1,M=[],A=[],N=0,k=null,L=0;return l.use=function t(e){switch(e){case void 0:case null:N=A.length=0;break;default:if("function"==typeof e)A[N++]=e;else if("object"===It(e))for(var n=0,r=e.length;n<r;++n)t(e[n]);else L=0|!!e}return t},l.set=u,void 0!==t&&u(t),l},Rt="/*|*/";function Mt(t){t&&At.current.insert(t+"}")}var At={current:null},Nt=function(t,e,n,r,o,i,s,a,u,l){switch(t){case 1:switch(e.charCodeAt(0)){case 64:return At.current.insert(e+";"),"";case 108:if(98===e.charCodeAt(2))return""}break;case 2:if(0===a)return e+Rt;break;case 3:switch(a){case 102:case 112:return At.current.insert(n[0]+e),"";default:return e+(0===l?Rt:"")}case-2:e.split("/*|*/}").forEach(Mt)}},kt=function(t){void 0===t&&(t={});var e,n=t.key||"css";void 0!==t.prefix&&(e={prefix:t.prefix});var r=new Tt(e);var o,i={};o=t.container||document.head;var s,a=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(a,(function(t){t.getAttribute("data-emotion-"+n).split(" ").forEach((function(t){i[t]=!0})),t.parentNode!==o&&o.appendChild(t)})),r.use(t.stylisPlugins)(Nt),s=function(t,e,n,o){var i=e.name;At.current=n,r(t,e.styles),o&&(u.inserted[i]=!0)};var u={key:n,sheet:new Ct({key:n,container:o,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:i,registered:{},insert:s};return u};n(262);function Lt(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]):r+=n+" "})),r}var Dt=function(t,e,n){var r=t.key+"-"+e.name;if(!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles),void 0===t.inserted[e.name]){var o=e;do{t.insert("."+r,o,t.sheet,!0);o=o.next}while(void 0!==o)}};var jt=function(t){for(var e,n=0,r=0,o=t.length;o>=4;++r,o-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Ft={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zt=/[A-Z]|^ms/g,Vt=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ut=function(t){return 45===t.charCodeAt(1)},Ht=function(t){return null!=t&&"boolean"!=typeof t},Gt=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return Ut(t)?t:t.replace(zt,"-$&").toLowerCase()})),qt=function(t,e){switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(Vt,(function(t,e,n){return Yt={name:e,styles:n,next:Yt},e}))}return 1===Ft[t]||Ut(t)||"number"!=typeof e||0===e?e:e+"px"};function Wt(t,e,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(Bt(n)){case"boolean":return"";case"object":if(1===n.anim)return Yt={name:n.name,styles:n.styles,next:Yt},n.name;if(void 0!==n.styles){var o=n.next;if(void 0!==o)for(;void 0!==o;)Yt={name:o.name,styles:o.styles,next:Yt},o=o.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Wt(t,e,n[o],!1);else for(var i in n){var s=n[i];if("object"!==Bt(s))null!=e&&void 0!==e[s]?r+=i+"{"+e[s]+"}":Ht(s)&&(r+=Gt(i)+":"+qt(i,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=e&&void 0!==e[s[0]]){var a=Wt(t,e,s,!1);switch(i){case"animation":case"animationName":r+=Gt(i)+":"+a+";";break;default:r+=i+"{"+a+"}"}}else for(var u=0;u<s.length;u++)Ht(s[u])&&(r+=Gt(i)+":"+qt(i,s[u])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=Yt,s=n(t);return Yt=i,Wt(t,e,s,r)}break;case"string":}if(null==e)return n;var a=e[n];return void 0===a||r?n:a}var Yt,Xt=/label:\s*([^\s;\n{]+)\s*;/g;var $t=function(t,e,n){if(1===t.length&&"object"===Bt(t[0])&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,o="";Yt=void 0;var i=t[0];null==i||void 0===i.raw?(r=!1,o+=Wt(n,e,i,!1)):o+=i[0];for(var s=1;s<t.length;s++)o+=Wt(n,e,t[s],46===o.charCodeAt(o.length-1)),r&&(o+=i[s]);Xt.lastIndex=0;for(var a,u="";null!==(a=Xt.exec(o));)u+="-"+a[1];return{name:jt(o)+u,styles:o,next:Yt}},Kt=Object.prototype.hasOwnProperty,Zt=Object(r.createContext)("undefined"!=typeof HTMLElement?kt():null),Jt=Object(r.createContext)({}),Qt=Zt.Provider,te=function(t){var e=function(e,n){return Object(r.createElement)(Zt.Consumer,null,(function(r){return t(e,r,n)}))};return Object(r.forwardRef)(e)},ee="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ne=function(t,e){var n={};for(var r in e)Kt.call(e,r)&&(n[r]=e[r]);return n[ee]=t,n},re=function(t,e,n,o){var i=null===n?e.css:e.css(n);"string"==typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var s=e[ee],a=[i],u="";"string"==typeof e.className?u=Lt(t.registered,a,e.className):null!=e.className&&(u=e.className+" ");var l=$t(a);Dt(t,l,"string"==typeof s);u+=t.key+"-"+l.name;var c={};for(var p in e)Kt.call(e,p)&&"css"!==p&&p!==ee&&(c[p]=e[p]);return c.ref=o,c.className=u,Object(r.createElement)(s,c)},oe=te((function(t,e,n){return"function"==typeof t.css?Object(r.createElement)(Jt.Consumer,null,(function(r){return re(e,t,r,n)})):re(e,t,null,n)}));var ie=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $t(e)};function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ae=function(t,e){var n=arguments;if(null==e||!Kt.call(e,"css"))return r.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=oe,i[1]=ne(t,e);for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)},ue=(r.Component,function t(e){for(var n=e.length,r=0,o="";r<n;r++){var i=e[r];if(null!=i){var s=void 0;switch(se(i)){case"boolean":break;case"object":if(Array.isArray(i))s=t(i);else for(var a in s="",i)i[a]&&a&&(s&&(s+=" "),s+=a);break;default:s=i}s&&(o&&(o+=" "),o+=s)}}return o});function le(t,e,n){var r=[],o=Lt(t,r,n);return r.length<2?n:o+e(r)}var ce=te((function(t,e){return Object(r.createElement)(Jt.Consumer,null,(function(n){var r=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=$t(n,e.registered);return Dt(e,o,!1),e.key+"-"+o.name},o={css:r,cx:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return le(e.registered,r,ue(n))},theme:n},i=t.children(o);return!0,i}))}));function pe(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function fe(t,e){if(null==t)return{};var n,r,o=pe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function he(){return(he=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ge(t,e){if(t){if("string"==typeof t)return de(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(t,e):void 0}}function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(t,e)||ge(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(t){return function(t){if(Array.isArray(t))return de(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ge(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var _e=n(117),we=n.n(_e),xe=function(){};function Se(t,e){return e?"-"===e[0]?t+e:t+"__"+e:t}function Ee(t,e,n){var r=[n];if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&r.push("".concat(Se(t,o)));return r.filter((function(t){return t})).map((function(t){return String(t).trim()})).join(" ")}var Oe=function(t){return Array.isArray(t)?t.filter(Boolean):"object"===be(t)&&null!==t?[t]:[]};function Pe(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Ce(t){return Pe(t)?window.pageYOffset:t.scrollTop}function Ie(t,e){Pe(t)?window.scrollTo(0,e):t.scrollTop=e}function Te(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function Re(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xe,o=Ce(t),i=e-o,s=10,a=0;function u(){var e=Te(a+=s,o,i,n);Ie(t,e),a<n?window.requestAnimationFrame(u):r(t)}u()}function Me(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}function Ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}function Le(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,o=t.placement,i=t.shouldScroll,s=t.isFixedPosition,a=t.theme.spacing,u=function(t){var e=getComputedStyle(t),n="absolute"===e.position,r=/(auto|scroll)/,o=document.documentElement;if("fixed"===e.position)return o;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),(!n||"static"!==e.position)&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return o}(n),l={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return l;var c=u.getBoundingClientRect().height,p=n.getBoundingClientRect(),f=p.bottom,h=p.height,d=p.top,g=n.offsetParent.getBoundingClientRect().top,y=window.innerHeight,m=Ce(u),v=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),_=g-b,w=y-d,x=_+m,S=c-m-d,E=f-y+m+v,O=m+d-b,P=160;switch(o){case"auto":case"bottom":if(w>=h)return{placement:"bottom",maxHeight:e};if(S>=h&&!s)return i&&Re(u,E,P),{placement:"bottom",maxHeight:e};if(!s&&S>=r||s&&w>=r)return i&&Re(u,E,P),{placement:"bottom",maxHeight:s?w-v:S-v};if("auto"===o||s){var C=e,I=s?_:x;return I>=r&&(C=Math.min(I-v-a.controlHeight,e)),{placement:"top",maxHeight:C}}if("bottom"===o)return Ie(u,E),{placement:"bottom",maxHeight:e};break;case"top":if(_>=h)return{placement:"top",maxHeight:e};if(x>=h&&!s)return i&&Re(u,O,P),{placement:"top",maxHeight:e};if(!s&&x>=r||s&&_>=r){var T=e;return(!s&&x>=r||s&&_>=r)&&(T=s?_-b:x-b),i&&Re(u,O,P),{placement:"top",maxHeight:T}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return l}var De=function(t){return"auto"===t?"bottom":t},je=Object(r.createContext)({getPortalPlacement:null}),Fe=function(t){mt(n,t);var e=ke(n);function n(){var t;ht(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={maxHeight:t.props.maxMenuHeight,placement:null},t.getPlacement=function(e){var n=t.props,r=n.minMenuHeight,o=n.maxMenuHeight,i=n.menuPlacement,s=n.menuPosition,a=n.menuShouldScrollIntoView,u=n.theme;if(e){var l="fixed"===s,c=Le({maxHeight:o,menuEl:e,minHeight:r,placement:i,shouldScroll:a&&!l,isFixedPosition:l,theme:u}),p=t.context.getPortalPlacement;p&&p(c),t.setState(c)}},t.getUpdatedProps=function(){var e=t.props.menuPlacement,n=t.state.placement||De(e);return Ne(Ne({},t.props),{},{placement:n,maxHeight:t.state.maxHeight})},t}return gt(n,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),n}(r.Component);Fe.contextType=je;var Be=function(t){var e=t.theme,n=e.spacing.baseUnit;return{color:e.colors.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px"),textAlign:"center"}},ze=Be,Ve=Be,Ue=function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return ae("div",he({css:o("noOptionsMessage",t),className:r({"menu-notice":!0,"menu-notice--no-options":!0},n)},i),e)};Ue.defaultProps={children:"No options"};var He=function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return ae("div",he({css:o("loadingMessage",t),className:r({"menu-notice":!0,"menu-notice--loading":!0},n)},i),e)};He.defaultProps={children:"Loading..."};var Ge=function(t){mt(n,t);var e=ke(n);function n(){var t;ht(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={placement:null},t.getPortalPlacement=function(e){var n=e.placement;n!==De(t.props.menuPlacement)&&t.setState({placement:n})},t}return gt(n,[{key:"render",value:function(){var t=this.props,e=t.appendTo,n=t.children,o=t.controlElement,i=t.menuPlacement,s=t.menuPosition,a=t.getStyles,u="fixed"===s;if(!e&&!u||!o)return null;var l=this.state.placement||De(i),c=function(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}(o),p=u?0:window.pageYOffset,f=c[l]+p,h=ae("div",{css:a("menuPortal",{offset:f,position:s,rect:c})},n);return ae(je.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},e?Object(r.createPortal)(h,e):h)}}]),n}(r.Component),qe=Array.isArray,We=Object.keys,Ye=Object.prototype.hasOwnProperty;function Xe(t,e){if(t===e)return!0;if(t&&e&&"object"==be(t)&&"object"==be(e)){var n,r,o,i=qe(t),s=qe(e);if(i&&s){if((r=t.length)!=e.length)return!1;for(n=r;0!=n--;)if(!Xe(t[n],e[n]))return!1;return!0}if(i!=s)return!1;var a=t instanceof Date,u=e instanceof Date;if(a!=u)return!1;if(a&&u)return t.getTime()==e.getTime();var l=t instanceof RegExp,c=e instanceof RegExp;if(l!=c)return!1;if(l&&c)return t.toString()==e.toString();var p=We(t);if((r=p.length)!==We(e).length)return!1;for(n=r;0!=n--;)if(!Ye.call(e,p[n]))return!1;for(n=r;0!=n--;)if(!("_owner"===(o=p[n])&&t.$$typeof||Xe(t[o],e[o])))return!1;return!0}return t!=t&&e!=e}function $e(t,e){try{return Xe(t,e)}catch(t){if(t.message&&t.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",t.name,t.message),!1;throw t}}function Ke(){var t,e,n=(t=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}})));return Ke=function(){return n},n}var Ze={name:"19bqh2r",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;"},Je=function(t){var e=t.size,n=fe(t,["size"]);return ae("svg",he({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Ze},n))},Qe=function(t){return ae(Je,he({size:20},t),ae("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},tn=function(t){return ae(Je,he({size:20},t),ae("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},en=function(t){var e=t.isFocused,n=t.theme,r=n.spacing.baseUnit,o=n.colors;return{label:"indicatorContainer",color:e?o.neutral60:o.neutral20,display:"flex",padding:2*r,transition:"color 150ms",":hover":{color:e?o.neutral80:o.neutral40}}},nn=en,rn=en,on=function(){var t=ie.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(Ke()),sn=function(t){var e=t.delay,n=t.offset;return ae("span",{css:ie({animation:"".concat(on," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"")})},an=function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerProps,i=t.isRtl;return ae("div",he({},o,{css:r("loadingIndicator",t),className:n({indicator:!0,"loading-indicator":!0},e)}),ae(sn,{delay:0,offset:i}),ae(sn,{delay:160,offset:!0}),ae(sn,{delay:320,offset:!i}))};an.defaultProps={size:4};function un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ln(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?un(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cn(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fn=function(t){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:t?0:1,outline:0,padding:0,color:"inherit"}};function hn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hn(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var gn=function(t){var e=t.children,n=t.innerProps;return ae("div",n,e)},yn=gn,mn=gn;var vn=function(t){var e=t.children,n=t.className,r=t.components,o=t.cx,i=t.data,s=t.getStyles,a=t.innerProps,u=t.isDisabled,l=t.removeProps,c=t.selectProps,p=r.Container,f=r.Label,h=r.Remove;return ae(ce,null,(function(r){var d=r.css,g=r.cx;return ae(p,{data:i,innerProps:dn(dn({},a),{},{className:g(d(s("multiValue",t)),o({"multi-value":!0,"multi-value--is-disabled":u},n))}),selectProps:c},ae(f,{data:i,innerProps:{className:g(d(s("multiValueLabel",t)),o({"multi-value__label":!0},n))},selectProps:c},e),ae(h,{data:i,innerProps:dn({className:g(d(s("multiValueRemove",t)),o({"multi-value__remove":!0},n))},l),selectProps:c}))}))};vn.defaultProps={cropWithEllipsis:!0};function bn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bn(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}for(var wn={ClearIndicator:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return ae("div",he({},i,{css:o("clearIndicator",t),className:r({indicator:!0,"clear-indicator":!0},n)}),e||ae(Qe,null))},Control:function(t){var e=t.children,n=t.cx,r=t.getStyles,o=t.className,i=t.isDisabled,s=t.isFocused,a=t.innerRef,u=t.innerProps,l=t.menuIsOpen;return ae("div",he({ref:a,css:r("control",t),className:n({control:!0,"control--is-disabled":i,"control--is-focused":s,"control--menu-is-open":l},o)},u),e)},DropdownIndicator:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return ae("div",he({},i,{css:o("dropdownIndicator",t),className:r({indicator:!0,"dropdown-indicator":!0},n)}),e||ae(tn,null))},DownChevron:tn,CrossIcon:Qe,Group:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.Heading,s=t.headingProps,a=t.label,u=t.theme,l=t.selectProps;return ae("div",{css:o("group",t),className:r({group:!0},n)},ae(i,he({},s,{selectProps:l,theme:u,getStyles:o,cx:r}),a),ae("div",null,e))},GroupHeading:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.theme,i=(t.selectProps,fe(t,["className","cx","getStyles","theme","selectProps"]));return ae("div",he({css:r("groupHeading",ln({theme:o},i)),className:n({"group-heading":!0},e)},i))},IndicatorsContainer:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles;return ae("div",{css:o("indicatorsContainer",t),className:r({indicators:!0},n)},e)},IndicatorSeparator:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerProps;return ae("span",he({},o,{css:r("indicatorSeparator",t),className:n({"indicator-separator":!0},e)}))},Input:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerRef,i=t.isHidden,s=t.isDisabled,a=t.theme,u=(t.selectProps,fe(t,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]));return ae("div",{css:r("input",pn({theme:a},u))},ae(we.a,he({className:n({input:!0},e),inputRef:o,inputStyle:fn(i),disabled:s},u)))},LoadingIndicator:an,Menu:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerRef,s=t.innerProps;return ae("div",he({css:o("menu",t),className:r({menu:!0},n)},s,{ref:i}),e)},MenuList:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.isMulti,s=t.innerRef,a=t.innerProps;return ae("div",he({css:o("menuList",t),className:r({"menu-list":!0,"menu-list--is-multi":i},n),ref:s},a),e)},MenuPortal:Ge,LoadingMessage:He,NoOptionsMessage:Ue,MultiValue:vn,MultiValueContainer:yn,MultiValueLabel:mn,MultiValueRemove:function(t){var e=t.children,n=t.innerProps;return ae("div",n,e||ae(Qe,{size:14}))},Option:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.isDisabled,s=t.isFocused,a=t.isSelected,u=t.innerRef,l=t.innerProps;return ae("div",he({css:o("option",t),className:r({option:!0,"option--is-disabled":i,"option--is-focused":s,"option--is-selected":a},n),ref:u},l),e)},Placeholder:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return ae("div",he({css:o("placeholder",t),className:r({placeholder:!0},n)},i),e)},SelectContainer:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps,s=t.isDisabled,a=t.isRtl;return ae("div",he({css:o("container",t),className:r({"--is-disabled":s,"--is-rtl":a},n)},i),e)},SingleValue:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.isDisabled,s=t.innerProps;return ae("div",he({css:o("singleValue",t),className:r({"single-value":!0,"single-value--is-disabled":i},n)},s),e)},ValueContainer:function(t){var e=t.children,n=t.className,r=t.cx,o=t.isMulti,i=t.getStyles,s=t.hasValue;return ae("div",{css:i("valueContainer",t),className:r({"value-container":!0,"value-container--is-multi":o,"value-container--has-value":s},n)},e)}},xn=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Sn=new RegExp("["+xn.map((function(t){return t.letters})).join("")+"]","g"),En={},On=0;On<xn.length;On++)for(var Pn=xn[On],Cn=0;Cn<Pn.letters.length;Cn++)En[Pn.letters[Cn]]=Pn.base;var In=function(t){return t.replace(Sn,(function(t){return En[t]}))};function Tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Rn=function(t){return t.replace(/^\s+|\s+$/g,"")},Mn=function(t){return"".concat(t.label," ").concat(t.value)};var An={name:"1laao21-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;"},Nn=function(t){return ae("span",he({css:An},t))};function kn(t){t.in,t.out,t.onExited,t.appear,t.enter,t.exit;var e=t.innerRef,n=(t.emotion,fe(t,["in","out","onExited","appear","enter","exit","innerRef","emotion"]));return ae("input",he({ref:e},n,{css:ie({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"")}))}function Ln(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}var Dn=function(t){mt(n,t);var e=Ln(n);function n(){return ht(this,n),e.apply(this,arguments)}return gt(n,[{key:"componentDidMount",value:function(){this.props.innerRef(Object(r.findDOMNode)(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),n}(r.Component),jn=["boxSizing","height","overflow","paddingRight","position"],Fn={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Bn(t){t.preventDefault()}function zn(t){t.stopPropagation()}function Vn(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;0===t?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function Un(){return"ontouchstart"in window||navigator.maxTouchPoints}function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}var Gn=!(!window.document||!window.document.createElement),qn=0,Wn=function(t){mt(n,t);var e=Hn(n);function n(){var t;ht(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).originalStyles={},t.listenerOptions={capture:!1,passive:!1},t}return gt(n,[{key:"componentDidMount",value:function(){var t=this;if(Gn){var e=this.props,n=e.accountForScrollbars,r=e.touchScrollTarget,o=document.body,i=o&&o.style;if(n&&jn.forEach((function(e){var n=i&&i[e];t.originalStyles[e]=n})),n&&qn<1){var s=parseInt(this.originalStyles.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,u=window.innerWidth-a+s||0;Object.keys(Fn).forEach((function(t){var e=Fn[t];i&&(i[t]=e)})),i&&(i.paddingRight="".concat(u,"px"))}o&&Un()&&(o.addEventListener("touchmove",Bn,this.listenerOptions),r&&(r.addEventListener("touchstart",Vn,this.listenerOptions),r.addEventListener("touchmove",zn,this.listenerOptions))),qn+=1}}},{key:"componentWillUnmount",value:function(){var t=this;if(Gn){var e=this.props,n=e.accountForScrollbars,r=e.touchScrollTarget,o=document.body,i=o&&o.style;qn=Math.max(qn-1,0),n&&qn<1&&jn.forEach((function(e){var n=t.originalStyles[e];i&&(i[e]=n)})),o&&Un()&&(o.removeEventListener("touchmove",Bn,this.listenerOptions),r&&(r.removeEventListener("touchstart",Vn,this.listenerOptions),r.removeEventListener("touchmove",zn,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),n}(r.Component);function Yn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}Wn.defaultProps={accountForScrollbars:!0};var Xn={name:"1dsbpcp",styles:"position:fixed;left:0;bottom:0;right:0;top:0;"},$n=function(t){mt(n,t);var e=Yn(n);function n(){var t;ht(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={touchScrollTarget:null},t.getScrollTarget=function(e){e!==t.state.touchScrollTarget&&t.setState({touchScrollTarget:e})},t.blurSelectInput=function(){document.activeElement&&document.activeElement.blur()},t}return gt(n,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.isEnabled,r=this.state.touchScrollTarget;return n?ae("div",null,ae("div",{onClick:this.blurSelectInput,css:Xn}),ae(Dn,{innerRef:this.getScrollTarget},e),r?ae(Wn,{touchScrollTarget:r}):null):e}}]),n}(r.PureComponent);function Kn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}var Zn=function(t){mt(n,t);var e=Kn(n);function n(){var t;ht(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).isBottom=!1,t.isTop=!1,t.scrollTarget=void 0,t.touchStart=void 0,t.cancelScroll=function(t){t.preventDefault(),t.stopPropagation()},t.handleEventDelta=function(e,n){var r=t.props,o=r.onBottomArrive,i=r.onBottomLeave,s=r.onTopArrive,a=r.onTopLeave,u=t.scrollTarget,l=u.scrollTop,c=u.scrollHeight,p=u.clientHeight,f=t.scrollTarget,h=n>0,d=c-p-l,g=!1;d>n&&t.isBottom&&(i&&i(e),t.isBottom=!1),h&&t.isTop&&(a&&a(e),t.isTop=!1),h&&n>d?(o&&!t.isBottom&&o(e),f.scrollTop=c,g=!0,t.isBottom=!0):!h&&-n>l&&(s&&!t.isTop&&s(e),f.scrollTop=0,g=!0,t.isTop=!0),g&&t.cancelScroll(e)},t.onWheel=function(e){t.handleEventDelta(e,e.deltaY)},t.onTouchStart=function(e){t.touchStart=e.changedTouches[0].clientY},t.onTouchMove=function(e){var n=t.touchStart-e.changedTouches[0].clientY;t.handleEventDelta(e,n)},t.getScrollTarget=function(e){t.scrollTarget=e},t}return gt(n,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(t){t&&("function"==typeof t.addEventListener&&t.addEventListener("wheel",this.onWheel,!1),"function"==typeof t.addEventListener&&t.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof t.addEventListener&&t.addEventListener("touchmove",this.onTouchMove,!1))}},{key:"stopListening",value:function(t){t&&("function"==typeof t.removeEventListener&&t.removeEventListener("wheel",this.onWheel,!1),"function"==typeof t.removeEventListener&&t.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof t.removeEventListener&&t.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return r.default.createElement(Dn,{innerRef:this.getScrollTarget},this.props.children)}}]),n}(r.Component);function Jn(t){var e=t.isEnabled,n=void 0===e||e,o=fe(t,["isEnabled"]);return n?r.default.createElement(Zn,o):o.children}var Qn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isSearchable,r=e.isMulti,o=e.label,i=e.isDisabled,s=e.tabSelectsValue;switch(t){case"menu":return"Use Up and Down to choose options".concat(i?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(o||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}},tr=function(t,e){var n=e.value,r=e.isDisabled;if(n)switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"select-option":return"option ".concat(n,r?" is disabled. Select another option.":", selected.")}},er=function(t){return!!t.isDisabled};var nr={clearIndicator:rn,container:function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":null,pointerEvents:e?"none":null,position:"relative"}},control:function(t){var e=t.isDisabled,n=t.isFocused,r=t.theme,o=r.colors,i=r.borderRadius,s=r.spacing;return{label:"control",alignItems:"center",backgroundColor:e?o.neutral5:o.neutral0,borderColor:e?o.neutral10:n?o.primary:o.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(o.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?o.primary:o.neutral30}}},dropdownIndicator:nn,group:function(t){var e=t.theme.spacing;return{paddingBottom:2*e.baseUnit,paddingTop:2*e.baseUnit}},groupHeading:function(t){var e=t.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*e.baseUnit,paddingRight:3*e.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing.baseUnit,o=n.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:e?o.neutral10:o.neutral20,marginBottom:2*r,marginTop:2*r,width:1}},input:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing,o=n.colors;return{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,visibility:e?"hidden":"visible",color:o.neutral80}},loadingIndicator:function(t){var e=t.isFocused,n=t.size,r=t.theme,o=r.colors,i=r.spacing.baseUnit;return{label:"loadingIndicator",color:e?o.neutral60:o.neutral20,display:"flex",padding:2*i,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:Ve,menu:function(t){var e,n=t.placement,r=t.theme,o=r.borderRadius,i=r.spacing,s=r.colors;return ve(e={label:"menu"},function(t){return t?{bottom:"top",top:"bottom"}[t]:"bottom"}(n),"100%"),ve(e,"backgroundColor",s.neutral0),ve(e,"borderRadius",o),ve(e,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),ve(e,"marginBottom",i.menuGutter),ve(e,"marginTop",i.menuGutter),ve(e,"position","absolute"),ve(e,"width","100%"),ve(e,"zIndex",1),e},menuList:function(t){var e=t.maxHeight,n=t.theme.spacing.baseUnit;return{maxHeight:e,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(t){var e=t.rect,n=t.offset,r=t.position;return{left:e.left,position:r,top:n,width:e.width,zIndex:1}},multiValue:function(t){var e=t.theme,n=e.spacing,r=e.borderRadius;return{label:"multiValue",backgroundColor:e.colors.neutral10,borderRadius:r/2,display:"flex",margin:n.baseUnit/2,minWidth:0}},multiValueLabel:function(t){var e=t.theme,n=e.borderRadius,r=e.colors,o=t.cropWithEllipsis;return{borderRadius:n/2,color:r.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:o?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(t){var e=t.theme,n=e.spacing,r=e.borderRadius,o=e.colors;return{alignItems:"center",borderRadius:r/2,backgroundColor:t.isFocused&&o.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}}},noOptionsMessage:ze,option:function(t){var e=t.isDisabled,n=t.isFocused,r=t.isSelected,o=t.theme,i=o.spacing,s=o.colors;return{label:"option",backgroundColor:r?s.primary:n?s.primary25:"transparent",color:e?s.neutral20:r?s.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!e&&(r?s.primary:s.primary50)}}},placeholder:function(t){var e=t.theme,n=e.spacing;return{label:"placeholder",color:e.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing,o=n.colors;return{label:"singleValue",color:e?o.neutral40:o.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,maxWidth:"calc(100% - ".concat(2*r.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(t){var e=t.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(e.baseUnit/2,"px ").concat(2*e.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}};var rr={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}};function or(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?or(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}var ar,ur={backspaceRemovesValue:!0,blurInputOnSelect:Me(),captureMenuScroll:!Me(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(t,e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(n),!0).forEach((function(e){ve(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({ignoreCase:!0,ignoreAccents:!0,stringify:Mn,trim:!0,matchFrom:"any"},ar),r=n.ignoreCase,o=n.ignoreAccents,i=n.stringify,s=n.trim,a=n.matchFrom,u=s?Rn(e):e,l=s?Rn(i(t)):i(t);return r&&(u=u.toLowerCase(),l=l.toLowerCase()),o&&(u=In(u),l=In(l)),"start"===a?l.substr(0,u.length)===u:l.indexOf(u)>-1},formatGroupLabel:function(t){return t.label},getOptionLabel:function(t){return t.label},getOptionValue:function(t){return t.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:er,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(1!==e?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0},lr=1,cr=function(t){mt(n,t);var e=sr(n);function n(t){var r;ht(this,n),(r=e.call(this,t)).state={ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]},r.blockOptionHover=!1,r.isComposing=!1,r.clearFocusValueOnUpdate=!1,r.commonProps=void 0,r.components=void 0,r.hasGroups=!1,r.initialTouchX=0,r.initialTouchY=0,r.inputIsHiddenAfterUpdate=void 0,r.instancePrefix="",r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.controlRef=null,r.getControlRef=function(t){r.controlRef=t},r.focusedOptionRef=null,r.getFocusedOptionRef=function(t){r.focusedOptionRef=t},r.menuListRef=null,r.getMenuListRef=function(t){r.menuListRef=t},r.inputRef=null,r.getInputRef=function(t){r.inputRef=t},r.cacheComponents=function(t){var e;r.components=(e={components:t},_n(_n({},wn),e.components))},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(t,e){var n=r.props,o=n.onChange,i=n.name;o(t,ir(ir({},e),{},{name:i}))},r.setValue=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set-value",n=arguments.length>2?arguments[2]:void 0,o=r.props,i=o.closeMenuOnSelect,s=o.isMulti;r.onInputChange("",{action:"set-value"}),i&&(r.inputIsHiddenAfterUpdate=!s,r.onMenuClose()),r.clearFocusValueOnUpdate=!0,r.onChange(t,{action:e,option:n})},r.selectOption=function(t){var e=r.props,n=e.blurInputOnSelect,o=e.isMulti,i=r.state.selectValue;if(o)if(r.isOptionSelected(t,i)){var s=r.getOptionValue(t);r.setValue(i.filter((function(t){return r.getOptionValue(t)!==s})),"deselect-option",t),r.announceAriaLiveSelection({event:"deselect-option",context:{value:r.getOptionLabel(t)}})}else r.isOptionDisabled(t,i)?r.announceAriaLiveSelection({event:"select-option",context:{value:r.getOptionLabel(t),isDisabled:!0}}):(r.setValue([].concat(me(i),[t]),"select-option",t),r.announceAriaLiveSelection({event:"select-option",context:{value:r.getOptionLabel(t)}}));else r.isOptionDisabled(t,i)?r.announceAriaLiveSelection({event:"select-option",context:{value:r.getOptionLabel(t),isDisabled:!0}}):(r.setValue(t,"select-option"),r.announceAriaLiveSelection({event:"select-option",context:{value:r.getOptionLabel(t)}}));n&&r.blurInput()},r.removeValue=function(t){var e=r.state.selectValue,n=r.getOptionValue(t),o=e.filter((function(t){return r.getOptionValue(t)!==n}));r.onChange(o.length?o:null,{action:"remove-value",removedValue:t}),r.announceAriaLiveSelection({event:"remove-value",context:{value:t?r.getOptionLabel(t):""}}),r.focusInput()},r.clearValue=function(){r.onChange(null,{action:"clear"})},r.popValue=function(){var t=r.state.selectValue,e=t[t.length-1],n=t.slice(0,t.length-1);r.announceAriaLiveSelection({event:"pop-value",context:{value:e?r.getOptionLabel(e):""}}),r.onChange(n.length?n:null,{action:"pop-value",removedValue:e})},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ee.apply(void 0,[r.props.classNamePrefix].concat(e))},r.getOptionLabel=function(t){return r.props.getOptionLabel(t)},r.getOptionValue=function(t){return r.props.getOptionValue(t)},r.getStyles=function(t,e){var n=nr[t](e);n.boxSizing="border-box";var o=r.props.styles[t];return o?o(n,e):n},r.getElementId=function(t){return"".concat(r.instancePrefix,"-").concat(t)},r.getActiveDescendentId=function(){var t=r.props.menuIsOpen,e=r.state,n=e.menuOptions,o=e.focusedOption;if(o&&t){var i=n.focusable.indexOf(o),s=n.render[i];return s&&s.key}},r.announceAriaLiveSelection=function(t){var e=t.event,n=t.context;r.setState({ariaLiveSelection:tr(e,n)})},r.announceAriaLiveContext=function(t){var e=t.event,n=t.context;r.setState({ariaLiveContext:Qn(e,ir(ir({},n),{},{label:r.props["aria-label"]}))})},r.onMenuMouseDown=function(t){0===t.button&&(t.stopPropagation(),t.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(t){r.blockOptionHover=!1},r.onControlMouseDown=function(t){var e=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&r.onMenuClose():e&&r.openMenu("first"):(e&&(r.openAfterFocus=!0),r.focusInput()),"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&t.preventDefault()},r.onDropdownIndicatorMouseDown=function(t){if(!(t&&"mousedown"===t.type&&0!==t.button||r.props.isDisabled)){var e=r.props,n=e.isMulti,o=e.menuIsOpen;r.focusInput(),o?(r.inputIsHiddenAfterUpdate=!n,r.onMenuClose()):r.openMenu("first"),t.preventDefault(),t.stopPropagation()}},r.onClearIndicatorMouseDown=function(t){t&&"mousedown"===t.type&&0!==t.button||(r.clearValue(),t.stopPropagation(),r.openAfterFocus=!1,"touchend"===t.type?r.focusInput():setTimeout((function(){return r.focusInput()})))},r.onScroll=function(t){"boolean"==typeof r.props.closeMenuOnScroll?t.target instanceof HTMLElement&&Pe(t.target)&&r.props.onMenuClose():"function"==typeof r.props.closeMenuOnScroll&&r.props.closeMenuOnScroll(t)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(t){var e=t.touches,n=e&&e.item(0);n&&(r.initialTouchX=n.clientX,r.initialTouchY=n.clientY,r.userIsDragging=!1)},r.onTouchMove=function(t){var e=t.touches,n=e&&e.item(0);if(n){var o=Math.abs(n.clientX-r.initialTouchX),i=Math.abs(n.clientY-r.initialTouchY);r.userIsDragging=o>5||i>5}},r.onTouchEnd=function(t){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(t.target)&&r.menuListRef&&!r.menuListRef.contains(t.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(t){r.userIsDragging||r.onControlMouseDown(t)},r.onClearIndicatorTouchEnd=function(t){r.userIsDragging||r.onClearIndicatorMouseDown(t)},r.onDropdownIndicatorTouchEnd=function(t){r.userIsDragging||r.onDropdownIndicatorMouseDown(t)},r.handleInputChange=function(t){var e=t.currentTarget.value;r.inputIsHiddenAfterUpdate=!1,r.onInputChange(e,{action:"input-change"}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(t){var e=r.props,n=e.isSearchable,o=e.isMulti;r.props.onFocus&&r.props.onFocus(t),r.inputIsHiddenAfterUpdate=!1,r.announceAriaLiveContext({event:"input",context:{isSearchable:n,isMulti:o}}),r.setState({isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(t){r.menuListRef&&r.menuListRef.contains(document.activeElement)?r.inputRef.focus():(r.props.onBlur&&r.props.onBlur(t),r.onInputChange("",{action:"input-blur"}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1}))},r.onOptionHover=function(t){r.blockOptionHover||r.state.focusedOption===t||r.setState({focusedOption:t})},r.shouldHideSelectedOptions=function(){var t=r.props,e=t.hideSelectedOptions,n=t.isMulti;return void 0===e?n:e},r.onKeyDown=function(t){var e=r.props,n=e.isMulti,o=e.backspaceRemovesValue,i=e.escapeClearsValue,s=e.inputValue,a=e.isClearable,u=e.isDisabled,l=e.menuIsOpen,c=e.onKeyDown,p=e.tabSelectsValue,f=e.openMenuOnFocus,h=r.state,d=h.focusedOption,g=h.focusedValue,y=h.selectValue;if(!(u||"function"==typeof c&&(c(t),t.defaultPrevented))){switch(r.blockOptionHover=!0,t.key){case"ArrowLeft":if(!n||s)return;r.focusValue("previous");break;case"ArrowRight":if(!n||s)return;r.focusValue("next");break;case"Delete":case"Backspace":if(s)return;if(g)r.removeValue(g);else{if(!o)return;n?r.popValue():a&&r.clearValue()}break;case"Tab":if(r.isComposing)return;if(t.shiftKey||!l||!p||!d||f&&r.isOptionSelected(d,y))return;r.selectOption(d);break;case"Enter":if(229===t.keyCode)break;if(l){if(!d)return;if(r.isComposing)return;r.selectOption(d);break}return;case"Escape":l?(r.inputIsHiddenAfterUpdate=!1,r.onInputChange("",{action:"menu-close"}),r.onMenuClose()):a&&i&&r.clearValue();break;case" ":if(s)return;if(!l){r.openMenu("first");break}if(!d)return;r.selectOption(d);break;case"ArrowUp":l?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":l?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!l)return;r.focusOption("pageup");break;case"PageDown":if(!l)return;r.focusOption("pagedown");break;case"Home":if(!l)return;r.focusOption("first");break;case"End":if(!l)return;r.focusOption("last");break;default:return}t.preventDefault()}},r.buildMenuOptions=function(t,e){var n=t.inputValue,o=void 0===n?"":n,i=t.options,s=function(t,n){var i=r.isOptionDisabled(t,e),s=r.isOptionSelected(t,e),a=r.getOptionLabel(t),u=r.getOptionValue(t);if(!(r.shouldHideSelectedOptions()&&s||!r.filterOption({label:a,value:u,data:t},o))){var l=i?void 0:function(){return r.onOptionHover(t)},c=i?void 0:function(){return r.selectOption(t)},p="".concat(r.getElementId("option"),"-").concat(n);return{innerProps:{id:p,onClick:c,onMouseMove:l,onMouseOver:l,tabIndex:-1},data:t,isDisabled:i,isSelected:s,key:p,label:a,type:"option",value:u}}};return i.reduce((function(t,e,n){if(e.options){r.hasGroups||(r.hasGroups=!0);var o=e.options.map((function(e,r){var o=s(e,"".concat(n,"-").concat(r));return o&&t.focusable.push(e),o})).filter(Boolean);if(o.length){var i="".concat(r.getElementId("group"),"-").concat(n);t.render.push({type:"group",key:i,data:e,options:o})}}else{var a=s(e,"".concat(n));a&&(t.render.push(a),t.focusable.push(e))}return t}),{render:[],focusable:[]})};var o=t.value;r.cacheComponents=Ot(r.cacheComponents,$e).bind(_t(r)),r.cacheComponents(t.components),r.instancePrefix="react-select-"+(r.props.instanceId||++lr);var i=Oe(o);r.buildMenuOptions=Ot(r.buildMenuOptions,(function(t,e){var n=ye(t,2),r=n[0],o=n[1],i=ye(e,2),s=i[0];return o===i[1]&&r.inputValue===s.inputValue&&r.options===s.options})).bind(_t(r));var s=t.menuIsOpen?r.buildMenuOptions(t,i):{render:[],focusable:[]};return r.state.menuOptions=s,r.state.selectValue=i,r}return gt(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.props,n=e.options,r=e.value,o=e.menuIsOpen,i=e.inputValue;if(this.cacheComponents(t.components),t.value!==r||t.options!==n||t.menuIsOpen!==o||t.inputValue!==i){var s=Oe(t.value),a=t.menuIsOpen?this.buildMenuOptions(t,s):{render:[],focusable:[]},u=this.getNextFocusedValue(s),l=this.getNextFocusedOption(a.focusable);this.setState({menuOptions:a,selectValue:s,focusedOption:l,focusedValue:u})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(t){var e,n,r,o,i,s=this.props,a=s.isDisabled,u=s.menuIsOpen,l=this.state.isFocused;(l&&!a&&t.isDisabled||l&&u&&!t.menuIsOpen)&&this.focusInput(),l&&a&&!t.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(e=this.menuListRef,n=this.focusedOptionRef,r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),i=n.offsetHeight/3,o.bottom+i>r.bottom?Ie(e,Math.min(n.offsetTop+n.clientHeight-e.offsetHeight+i,e.scrollHeight)):o.top-i<r.top&&Ie(e,Math.max(n.offsetTop-i,0)),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var t=this.props,e=t.isSearchable,n=t.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:e,isMulti:n}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,e){this.props.onInputChange(t,e)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var e=this,n=this.state,r=n.selectValue,o=n.isFocused,i=this.buildMenuOptions(this.props,r),s=this.props,a=s.isMulti,u=s.tabSelectsValue,l="first"===t?0:i.focusable.length-1;if(!a){var c=i.focusable.indexOf(r[0]);c>-1&&(l=c)}this.scrollToFocusedOptionOnUpdate=!(o&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.setState({menuOptions:i,focusedValue:null,focusedOption:i.focusable[l]},(function(){e.onMenuOpen(),e.announceAriaLiveContext({event:"menu",context:{tabSelectsValue:u}})}))}},{key:"focusValue",value:function(t){var e=this.props,n=e.isMulti,r=e.isSearchable,o=this.state,i=o.selectValue,s=o.focusedValue;if(n){this.setState({focusedOption:null});var a=i.indexOf(s);s||(a=-1,this.announceAriaLiveContext({event:"value"}));var u=i.length-1,l=-1;if(i.length){switch(t){case"previous":l=0===a?0:-1===a?u:a-1;break;case"next":a>-1&&a<u&&(l=a+1)}-1===l&&this.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:n}}),this.setState({inputIsHidden:-1!==l,focusedValue:i[l]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",e=this.props,n=e.pageSize,r=e.tabSelectsValue,o=this.state,i=o.focusedOption,s=o.menuOptions,a=s.focusable;if(a.length){var u=0,l=a.indexOf(i);i||(l=-1,this.announceAriaLiveContext({event:"menu",context:{tabSelectsValue:r}})),"up"===t?u=l>0?l-1:a.length-1:"down"===t?u=(l+1)%a.length:"pageup"===t?(u=l-n)<0&&(u=0):"pagedown"===t?(u=l+n)>a.length-1&&(u=a.length-1):"last"===t&&(u=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[u],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:er(a[u]),tabSelectsValue:r}})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(rr):ir(ir({},rr),this.props.theme):rr}},{key:"getCommonProps",value:function(){var t=this.clearValue,e=this.cx,n=this.getStyles,r=this.getValue,o=this.setValue,i=this.selectOption,s=this.props,a=s.isMulti,u=s.isRtl,l=s.options;return{cx:e,clearValue:t,getStyles:n,getValue:r,hasValue:this.hasValue(),isMulti:a,isRtl:u,options:l,selectOption:i,setValue:o,selectProps:s,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(t){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var e=this.state,n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}},{key:"getNextFocusedOption",value:function(t){var e=this.state.focusedOption;return e&&t.indexOf(e)>-1?e:t[0]}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var t=this.props,e=t.isClearable,n=t.isMulti;return void 0===e?n:e}},{key:"isOptionDisabled",value:function(t,e){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(t,e)}},{key:"isOptionSelected",value:function(t,e){var n=this;if(e.indexOf(t)>-1)return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(t,e);var r=this.getOptionValue(t);return e.some((function(t){return n.getOptionValue(t)===r}))}},{key:"filterOption",value:function(t,e){return!this.props.filterOption||this.props.filterOption(t,e)}},{key:"formatOptionLabel",value:function(t,e){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(t,{context:e,inputValue:n,selectValue:r})}return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"constructAriaLiveMessage",value:function(){var t=this.state,e=t.ariaLiveContext,n=t.selectValue,r=t.focusedValue,o=t.focusedOption,i=this.props,s=i.options,a=i.menuIsOpen,u=i.inputValue,l=i.screenReaderStatus,c=r?function(t){var e=t.focusedValue,n=t.getOptionLabel,r=t.selectValue;return"value ".concat(n(e)," focused, ").concat(r.indexOf(e)+1," of ").concat(r.length,".")}({focusedValue:r,getOptionLabel:this.getOptionLabel,selectValue:n}):"",p=o&&a?function(t){var e=t.focusedOption,n=t.getOptionLabel,r=t.options;return"option ".concat(n(e)," focused").concat(e.isDisabled?" disabled":"",", ").concat(r.indexOf(e)+1," of ").concat(r.length,".")}({focusedOption:o,getOptionLabel:this.getOptionLabel,options:s}):"",f=function(t){var e=t.inputValue,n=t.screenReaderMessage;return"".concat(n).concat(e?" for search term "+e:"",".")}({inputValue:u,screenReaderMessage:l({count:this.countOptions()})});return"".concat(c," ").concat(p," ").concat(f," ").concat(e)}},{key:"renderInput",value:function(){var t=this.props,e=t.isDisabled,n=t.isSearchable,o=t.inputId,i=t.inputValue,s=t.tabIndex,a=t.form,u=this.components.Input,l=this.state.inputIsHidden,c=o||this.getElementId("input"),p={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};if(!n)return r.default.createElement(kn,he({id:c,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:xe,onFocus:this.onInputFocus,readOnly:!0,disabled:e,tabIndex:s,form:a,value:""},p));var f=this.commonProps,h=f.cx,d=f.theme,g=f.selectProps;return r.default.createElement(u,he({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:h,getStyles:this.getStyles,id:c,innerRef:this.getInputRef,isDisabled:e,isHidden:l,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:g,spellCheck:"false",tabIndex:s,form:a,theme:d,type:"text",value:i},p))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,e=this.components,n=e.MultiValue,o=e.MultiValueContainer,i=e.MultiValueLabel,s=e.MultiValueRemove,a=e.SingleValue,u=e.Placeholder,l=this.commonProps,c=this.props,p=c.controlShouldRenderValue,f=c.isDisabled,h=c.isMulti,d=c.inputValue,g=c.placeholder,y=this.state,m=y.selectValue,v=y.focusedValue,b=y.isFocused;if(!this.hasValue()||!p)return d?null:r.default.createElement(u,he({},l,{key:"placeholder",isDisabled:f,isFocused:b}),g);if(h)return m.map((function(e,a){var u=e===v;return r.default.createElement(n,he({},l,{components:{Container:o,Label:i,Remove:s},isFocused:u,isDisabled:f,key:"".concat(t.getOptionValue(e)).concat(a),index:a,removeProps:{onClick:function(){return t.removeValue(e)},onTouchEnd:function(){return t.removeValue(e)},onMouseDown:function(t){t.preventDefault(),t.stopPropagation()}},data:e}),t.formatOptionLabel(e,"value"))}));if(d)return null;var _=m[0];return r.default.createElement(a,he({},l,{data:_,isDisabled:f}),this.formatOptionLabel(_,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.components.ClearIndicator,e=this.commonProps,n=this.props,o=n.isDisabled,i=n.isLoading,s=this.state.isFocused;if(!this.isClearable()||!t||o||!this.hasValue()||i)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return r.default.createElement(t,he({},e,{innerProps:a,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var t=this.components.LoadingIndicator,e=this.commonProps,n=this.props,o=n.isDisabled,i=n.isLoading,s=this.state.isFocused;if(!t||!i)return null;return r.default.createElement(t,he({},e,{innerProps:{"aria-hidden":"true"},isDisabled:o,isFocused:s}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.components,e=t.DropdownIndicator,n=t.IndicatorSeparator;if(!e||!n)return null;var o=this.commonProps,i=this.props.isDisabled,s=this.state.isFocused;return r.default.createElement(n,he({},o,{isDisabled:i,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var t=this.components.DropdownIndicator;if(!t)return null;var e=this.commonProps,n=this.props.isDisabled,o=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return r.default.createElement(t,he({},e,{innerProps:i,isDisabled:n,isFocused:o}))}},{key:"renderMenu",value:function(){var t=this,e=this.components,n=e.Group,o=e.GroupHeading,i=e.Menu,s=e.MenuList,a=e.MenuPortal,u=e.LoadingMessage,l=e.NoOptionsMessage,c=e.Option,p=this.commonProps,f=this.state,h=f.focusedOption,d=f.menuOptions,g=this.props,y=g.captureMenuScroll,m=g.inputValue,v=g.isLoading,b=g.loadingMessage,_=g.minMenuHeight,w=g.maxMenuHeight,x=g.menuIsOpen,S=g.menuPlacement,E=g.menuPosition,O=g.menuPortalTarget,P=g.menuShouldBlockScroll,C=g.menuShouldScrollIntoView,I=g.noOptionsMessage,T=g.onMenuScrollToTop,R=g.onMenuScrollToBottom;if(!x)return null;var M,A=function(e){var n=h===e.data;return e.innerRef=n?t.getFocusedOptionRef:void 0,r.default.createElement(c,he({},p,e,{isFocused:n}),t.formatOptionLabel(e.data,"menu"))};if(this.hasOptions())M=d.render.map((function(e){if("group"===e.type){e.type;var i=fe(e,["type"]),s="".concat(e.key,"-heading");return r.default.createElement(n,he({},p,i,{Heading:o,headingProps:{id:s,data:e.data},label:t.formatGroupLabel(e.data)}),e.options.map((function(t){return A(t)})))}if("option"===e.type)return A(e)}));else if(v){var N=b({inputValue:m});if(null===N)return null;M=r.default.createElement(u,p,N)}else{var k=I({inputValue:m});if(null===k)return null;M=r.default.createElement(l,p,k)}var L={minMenuHeight:_,maxMenuHeight:w,menuPlacement:S,menuPosition:E,menuShouldScrollIntoView:C},D=r.default.createElement(Fe,he({},p,L),(function(e){var n=e.ref,o=e.placerProps,a=o.placement,u=o.maxHeight;return r.default.createElement(i,he({},p,L,{innerRef:n,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:v,placement:a}),r.default.createElement(Jn,{isEnabled:y,onTopArrive:T,onBottomArrive:R},r.default.createElement($n,{isEnabled:P},r.default.createElement(s,he({},p,{innerRef:t.getMenuListRef,isLoading:v,maxHeight:u}),M))))}));return O||"fixed"===E?r.default.createElement(a,he({},p,{appendTo:O,controlElement:this.controlRef,menuPlacement:S,menuPosition:E}),D):D}},{key:"renderFormField",value:function(){var t=this,e=this.props,n=e.delimiter,o=e.isDisabled,i=e.isMulti,s=e.name,a=this.state.selectValue;if(s&&!o){if(i){if(n){var u=a.map((function(e){return t.getOptionValue(e)})).join(n);return r.default.createElement("input",{name:s,type:"hidden",value:u})}var l=a.length>0?a.map((function(e,n){return r.default.createElement("input",{key:"i-".concat(n),name:s,type:"hidden",value:t.getOptionValue(e)})})):r.default.createElement("input",{name:s,type:"hidden"});return r.default.createElement("div",null,l)}var c=a[0]?this.getOptionValue(a[0]):"";return r.default.createElement("input",{name:s,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?r.default.createElement(Nn,{"aria-live":"polite"},r.default.createElement("span",{id:"aria-selection-event"}," ",this.state.ariaLiveSelection),r.default.createElement("span",{id:"aria-context"}," ",this.constructAriaLiveMessage())):null}},{key:"render",value:function(){var t=this.components,e=t.Control,n=t.IndicatorsContainer,o=t.SelectContainer,i=t.ValueContainer,s=this.props,a=s.className,u=s.id,l=s.isDisabled,c=s.menuIsOpen,p=this.state.isFocused,f=this.commonProps=this.getCommonProps();return r.default.createElement(o,he({},f,{className:a,innerProps:{id:u,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:p}),this.renderLiveRegion(),r.default.createElement(e,he({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:p,menuIsOpen:c}),r.default.createElement(i,he({},f,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),r.default.createElement(n,he({},f,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}]),n}(r.Component);cr.defaultProps=ur;n(264);function pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}var fr={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null};function hr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wt(this,n)}}r.Component;var dr,gr,yr,mr=(dr=cr,yr=gr=function(t){mt(n,t);var e=pr(n);function n(){var t;ht(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).select=void 0,t.state={inputValue:void 0!==t.props.inputValue?t.props.inputValue:t.props.defaultInputValue,menuIsOpen:void 0!==t.props.menuIsOpen?t.props.menuIsOpen:t.props.defaultMenuIsOpen,value:void 0!==t.props.value?t.props.value:t.props.defaultValue},t.onChange=function(e,n){t.callProp("onChange",e,n),t.setState({value:e})},t.onInputChange=function(e,n){var r=t.callProp("onInputChange",e,n);t.setState({inputValue:void 0!==r?r:e})},t.onMenuOpen=function(){t.callProp("onMenuOpen"),t.setState({menuIsOpen:!0})},t.onMenuClose=function(){t.callProp("onMenuClose"),t.setState({menuIsOpen:!1})},t}return gt(n,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(t){return void 0!==this.props[t]?this.props[t]:this.state[t]}},{key:"callProp",value:function(t){if("function"==typeof this.props[t]){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(e=this.props)[t].apply(e,r)}}},{key:"render",value:function(){var t=this,e=this.props,n=(e.defaultInputValue,e.defaultMenuIsOpen,e.defaultValue,fe(e,["defaultInputValue","defaultMenuIsOpen","defaultValue"]));return r.default.createElement(dr,he({},n,{ref:function(e){t.select=e},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),n}(r.Component),gr.defaultProps=fr,yr),vr=[{value:"assessing",label:"Assessing"},{value:"bookmarking",label:"Bookmarking"},{value:"classifying",label:"Classifying"},{value:"commenting",label:"Commenting"},{value:"describing",label:"Describing"},{value:"editing",label:"Editing"},{value:"highlighting",label:"Highlighting"},{value:"identifying",label:"Identifying"},{value:"linking",label:"Linking"},{value:"moderating",label:"Moderating"},{value:"questioning",label:"Questioning"},{value:"replying",label:"Replying"}],br=function(t){var e=t.content?vr.find((function(e){return e.value===t.content})):null;return r.default.createElement("div",{class:"r6o-purposedropdown"},r.default.createElement(mr,{value:e,onChange:t.onChange,options:vr,isDisabled:!t.editable}))},_r=function(t){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:t.width},r.default.createElement("metadata",null,"IcoFont Icons"),r.default.createElement("title",null,"simple-down"),r.default.createElement("glyph",{glyphName:"simple-down",unicode:"",horizAdvX:"1000"}),r.default.createElement("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"}))},wr=function(t){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"180 150 700 800",width:t.width},r.default.createElement("metadata",null,"IcoFont Icons"),r.default.createElement("title",null,"close"),r.default.createElement("glyph",{glyphName:"close",unicode:"",horizAdvX:"1000"}),r.default.createElement("path",{fill:"currentColor",d:"M709.8 206.6c-64.39999999999998 65.50000000000003-128.89999999999998 131.20000000000002-194.19999999999993 197.6-8.600000000000023 8.699999999999989-22.400000000000034 8.800000000000011-31 0-65-66-129.70000000000005-131.8-194.5-197.6-8.600000000000023-8.699999999999989-22.400000000000034-8.599999999999994-30.900000000000034 0.09999999999999432-15.699999999999989 16.200000000000017-31.099999999999994 32.30000000000001-47.099999999999994 48.80000000000001-8.5 8.800000000000011-8.299999999999983 23 0.20000000000001705 31.69999999999999 63.099999999999966 64.19999999999999 127.89999999999998 130.10000000000002 193.59999999999997 197 8.600000000000023 8.699999999999989 8.5 22.80000000000001 0 31.599999999999966-65.19999999999999 66.40000000000009-130.2 132.5-194.7 198.10000000000002-8.5 8.700000000000045-8.5 22.800000000000068 0.20000000000001705 31.399999999999977l47.79999999999998 47.90000000000009c8.600000000000023 8.599999999999909 22.600000000000023 8.599999999999909 31.100000000000023-0.10000000000002274l194.2-197.30000000000007c8.600000000000023-8.699999999999932 22.399999999999977-8.699999999999932 31 0 64.70000000000005 65.80000000000007 129.20000000000005 131.4000000000001 194.20000000000005 197.5 8.599999999999909 8.700000000000045 22.5 8.800000000000068 31 0.10000000000002274 16-16.199999999999932 31.699999999999932-32.19999999999993 47.59999999999991-48.299999999999955 8.600000000000023-8.700000000000045 8.600000000000023-22.899999999999977 0.10000000000002274-31.600000000000023-63.799999999999955-65-128.5-130.89999999999998-194.19999999999993-197.79999999999995-8.600000000000023-8.700000000000045-8.600000000000023-22.900000000000034 0-31.600000000000023 65.19999999999993-66.40000000000003 130.0999999999999-132.5 194.5-198.20000000000005 8.599999999999909-8.699999999999989 8.5-22.799999999999955-0.10000000000002274-31.49999999999997l-47.80000000000007-48.099999999999994c-8.5-8.5-22.399999999999977-8.400000000000006-31 0.29999999999998295z"}))},xr=function(t){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:t.width},r.default.createElement("path",{fill:"currentColor",d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"}))};function Sr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sr(Object(n),!0).forEach((function(e){Or(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Or(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Cr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ir=function(t){var e=Pr(Object(s.k)(!1),2),n=e[0],o=e[1],i=Pr(Object(s.k)(!1),2),a=i[0],u=i[1],l=t.body.modified||t.body.created,c=t.body.creator&&r.default.createElement("div",{className:"r6o-lastmodified"},r.default.createElement("span",{className:"r6o-lastmodified-by"},t.body.creator.name||t.body.creator.id),t.body.created&&r.default.createElement("span",{className:"r6o-lastmodified-at"},r.default.createElement(P,{datetime:t.env.toClientTime(l),locale:Q.locale()})));return t.readOnly?r.default.createElement("div",{className:"r6o-widget comment"},r.default.createElement("div",{className:"r6o-readonly-comment"},t.body.value),c):r.default.createElement("div",{className:n?"r6o-widget comment editable":"r6o-widget comment"},r.default.createElement(ft,{editable:n,content:t.body.value,onChange:function(e){return t.onUpdate(t.body,Er(Er({},t.body),{},{value:e.target.value}))},onSaveAndClose:t.onSaveAndClose}),!n&&c,t.purposeSelector&&r.default.createElement(br,{editable:n,content:t.body.purpose,onChange:function(e){return t.onUpdate(t.body,Er(Er({},t.body),{},{purpose:e.value}))},onSaveAndClose:t.onSaveAndClose}),r.default.createElement("div",{className:a?"r6o-icon r6o-arrow-down r6o-menu-open":"r6o-icon r6o-arrow-down",onClick:function(){return u(!a)}},r.default.createElement(_r,{width:12})),a&&r.default.createElement(tt,{onEdit:function(t){o(!0),u(!1)},onDelete:function(e){t.onDelete(t.body),u(!1)},onClickOutside:function(){return u(!1)}}))};function Tr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tr(Object(n),!0).forEach((function(e){Mr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ar=vr.map((function(t){return t.value})),Nr=function(t,e){var n=e?Ar.indexOf(t.purpose)>-1:"commenting"==t.purpose||"replying"==t.purpose;return"TextualBody"===t.type&&(!t.hasOwnProperty("purpose")||n)},kr=function(t,e){if(!0===e.editable)return!1;if(!1===e.editable)return!0;if("MINE_ONLY"===e.editable){var n,r,o=null===(n=t.creator)||void 0===n?void 0:n.id;return(null===(r=e.env.user)||void 0===r?void 0:r.id)!==o}return e.readOnly},Lr=function(t){var e,n,o=t.annotation?t.annotation.bodies.filter((function(e){return Nr(e,t.purposeSelector)})):[],i=(e=o.find((function(t){return 1==t.draft})),n=o.length>1,e||{type:"TextualBody",value:"",purpose:n?"replying":"commenting",draft:!0}),s=o.filter((function(t){return t!=i}));return r.default.createElement(r.default.Fragment,null,s.map((function(e,n){return r.default.createElement(Ir,{key:n,env:t.env,purposeSelector:t.purposeSelector,readOnly:kr(e,t),body:e,onUpdate:t.onUpdateBody,onDelete:t.onRemoveBody,onSaveAndClose:t.onSaveAndClose})})),!t.readOnly&&t.annotation&&r.default.createElement("div",{className:"r6o-widget comment editable"},r.default.createElement(ft,{content:i.value,editable:!0,placeholder:s.length>0?Q.t("Add a reply..."):Q.t("Add a comment..."),onChange:function(e){var n=i.value,r=e.target.value;0===n.length&&r.length>0?t.onAppendBody(Rr(Rr({},i),{},{value:r})):n.length>0&&0===r.length?t.onRemoveBody(i):t.onUpdateBody(i,Rr(Rr({},i),{},{value:r}))},onSaveAndClose:function(){return t.onSaveAndClose()}}),t.purposeSelector&&i.value.length>0&&r.default.createElement(br,{editable:!0,content:i.purpose,onChange:function(e){return t.onUpdateBody(i,Rr(Rr({},i),{},{purpose:e.value}))},onSaveAndClose:function(){return t.onSaveAndClose()}})))};Lr.disableDelete=function(t,e){return t.bodies.filter((function(t){return Nr(t,e.purposeSelector)})).some((function(t){return kr(t,e)}))};var Dr=Lr,jr=n(2),Fr=n.n(jr);function Br(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var zr=!1,Vr=r.default.createContext(null),Ur="unmounted",Hr="exited",Gr="entering",qr="entered",Wr="exiting",Yr=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var o,i=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?i?(o=Hr,r.appearStatus=Gr):o=qr:o=e.unmountOnExit||e.mountOnEnter?Ur:Hr,r.state={status:o},r.nextCallback=null,r}Pt(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===Ur?{status:Hr}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Gr&&n!==qr&&(e=Gr):n!==Gr&&n!==qr||(e=Wr)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!=typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===Gr?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&this.state.status===Hr&&this.setState({status:Ur})},n.performEnter=function(t){var e=this,n=this.props.enter,o=this.context?this.context.isMounting:t,i=this.props.nodeRef?[o]:[r.default.findDOMNode(this),o],s=i[0],a=i[1],u=this.getTimeouts(),l=o?u.appear:u.enter;!t&&!n||zr?this.safeSetState({status:qr},(function(){e.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:Gr},(function(){e.props.onEntering(s,a),e.onTransitionEnd(l,(function(){e.safeSetState({status:qr},(function(){e.props.onEntered(s,a)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:r.default.findDOMNode(this);e&&!zr?(this.props.onExit(o),this.safeSetState({status:Wr},(function(){t.props.onExiting(o),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Hr},(function(){t.props.onExited(o)}))}))}))):this.safeSetState({status:Hr},(function(){t.props.onExited(o)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:r.default.findDOMNode(this),o=null==t&&!this.props.addEndListener;if(n&&!o){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],a=i[1];this.props.addEndListener(s,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===Ur)return null;var e=this.props,n=e.children,o=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,pe(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.default.createElement(Vr.Provider,{value:null},"function"==typeof n?n(t,o):r.default.cloneElement(r.default.Children.only(n),o))},e}(r.default.Component);function Xr(){}Yr.contextType=Vr,Yr.propTypes={},Yr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xr,onEntering:Xr,onEntered:Xr,onExit:Xr,onExiting:Xr,onExited:Xr},Yr.UNMOUNTED=Ur,Yr.EXITED=Hr,Yr.ENTERING=Gr,Yr.ENTERED=qr,Yr.EXITING=Wr;var $r=Yr,Kr=function(t,e){return t&&e&&e.split(" ").forEach((function(e){return r=e,void((n=t).classList?n.classList.remove(r):"string"==typeof n.className?n.className=Br(n.className,r):n.setAttribute("class",Br(n.className&&n.className.baseVal||"",r)));var n,r}))},Zr=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(t,n){var r=e.resolveArguments(t,n),o=r[0],i=r[1];e.removeClasses(o,"exit"),e.addClass(o,i?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(t,n)},e.onEntering=function(t,n){var r=e.resolveArguments(t,n),o=r[0],i=r[1]?"appear":"enter";e.addClass(o,i,"active"),e.props.onEntering&&e.props.onEntering(t,n)},e.onEntered=function(t,n){var r=e.resolveArguments(t,n),o=r[0],i=r[1]?"appear":"enter";e.removeClasses(o,i),e.addClass(o,i,"done"),e.props.onEntered&&e.props.onEntered(t,n)},e.onExit=function(t){var n=e.resolveArguments(t)[0];e.removeClasses(n,"appear"),e.removeClasses(n,"enter"),e.addClass(n,"exit","base"),e.props.onExit&&e.props.onExit(t)},e.onExiting=function(t){var n=e.resolveArguments(t)[0];e.addClass(n,"exit","active"),e.props.onExiting&&e.props.onExiting(t)},e.onExited=function(t){var n=e.resolveArguments(t)[0];e.removeClasses(n,"exit"),e.addClass(n,"exit","done"),e.props.onExited&&e.props.onExited(t)},e.resolveArguments=function(t,n){return e.props.nodeRef?[e.props.nodeRef.current,t]:[t,n]},e.getClassNames=function(t){var n=e.props.classNames,r="string"==typeof n,o=r?""+(r&&n?n+"-":"")+t:n[t];return{baseClassName:o,activeClassName:r?o+"-active":n[t+"Active"],doneClassName:r?o+"-done":n[t+"Done"]}},e}Pt(e,t);var n=e.prototype;return n.addClass=function(t,e,n){var r=this.getClassNames(e)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===e&&"done"===n&&o&&(r+=" "+o),"active"===n&&t&&t.scrollTop,r&&(this.appliedClasses[e][n]=r,function(t,e){t&&e&&e.split(" ").forEach((function(e){return r=e,void((n=t).classList?n.classList.add(r):function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(t,r))},n.removeClasses=function(t,e){var n=this.appliedClasses[e],r=n.base,o=n.active,i=n.done;this.appliedClasses[e]={},r&&Kr(t,r),o&&Kr(t,o),i&&Kr(t,i)},n.render=function(){var t=this.props,e=(t.classNames,pe(t,["classNames"]));return r.default.createElement($r,he({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(r.default.Component);Zr.defaultProps={classNames:""},Zr.propTypes={};var Jr=Zr;n(120);function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t){return"object"==Qr(t)&&null!=t&&1===t.nodeType}function eo(t,e){return(!e||"hidden"!==t)&&"visible"!==t&&"clip"!==t}function no(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var n=getComputedStyle(t,null);return eo(n.overflowY,e)||eo(n.overflowX,e)||function(t){var e=function(t){if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}}(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)}(t)}return!1}function ro(t,e,n,r,o,i,s,a){return i<t&&s>e||i>t&&s<e?0:i<=t&&a<=n||s>=e&&a>=n?i-t-r:s>e&&a<n||i<t&&a>n?s-e+o:0}var oo=0;function io(t,e){t&&function(t,e){var n=window,r=e.scrollMode,o=e.block,i=e.inline,s=e.boundary,a=e.skipOverflowHiddenElements,u="function"==typeof s?s:function(t){return t!==s};if(!to(t))throw new TypeError("Invalid target");for(var l=document.scrollingElement||document.documentElement,c=[],p=t;to(p)&&u(p);){if((p=p.parentElement)===l){c.push(p);break}null!=p&&p===document.body&&no(p)&&!no(document.documentElement)||null!=p&&no(p,a)&&c.push(p)}for(var f=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,d=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,y=t.getBoundingClientRect(),m=y.height,v=y.width,b=y.top,_=y.right,w=y.bottom,x=y.left,S="start"===o||"nearest"===o?b:"end"===o?w:b+m/2,E="center"===i?x+v/2:"end"===i?_:x,O=[],P=0;P<c.length;P++){var C=c[P],I=C.getBoundingClientRect(),T=I.height,R=I.width,M=I.top,A=I.right,N=I.bottom,k=I.left;if("if-needed"===r&&b>=0&&x>=0&&w<=h&&_<=f&&b>=M&&w<=N&&x>=k&&_<=A)return O;var L=getComputedStyle(C),D=parseInt(L.borderLeftWidth,10),j=parseInt(L.borderTopWidth,10),F=parseInt(L.borderRightWidth,10),B=parseInt(L.borderBottomWidth,10),z=0,V=0,U="offsetWidth"in C?C.offsetWidth-C.clientWidth-D-F:0,H="offsetHeight"in C?C.offsetHeight-C.clientHeight-j-B:0;if(l===C)z="start"===o?S:"end"===o?S-h:"nearest"===o?ro(g,g+h,h,j,B,g+S,g+S+m,m):S-h/2,V="start"===i?E:"center"===i?E-f/2:"end"===i?E-f:ro(d,d+f,f,D,F,d+E,d+E+v,v),z=Math.max(0,z+g),V=Math.max(0,V+d);else{z="start"===o?S-M-j:"end"===o?S-N+B+H:"nearest"===o?ro(M,N,T,j,B+H,S,S+m,m):S-(M+T/2)+H/2,V="start"===i?E-k-D:"center"===i?E-(k+R/2)+U/2:"end"===i?E-A+F+U:ro(k,A,R,D,F+U,E,E+v,v);var G=C.scrollLeft,q=C.scrollTop;S+=q-(z=Math.max(0,Math.min(q+z,C.scrollHeight-T+H))),E+=G-(V=Math.max(0,Math.min(G+V,C.scrollWidth-R+U)))}O.push({el:C,top:z,left:V})}return O}(t,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach((function(t){var e=t.el,n=t.top,r=t.left;e.scrollTop=n,e.scrollLeft=r}))}function so(t,e){return t===e||t.contains&&t.contains(e)}function ao(t,e){var n;function r(){n&&clearTimeout(n)}function o(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];r(),n=setTimeout((function(){n=null,t.apply(void 0,i)}),e)}return o.cancel=r,o}function uo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e.some((function(e){return e&&e.apply(void 0,[t].concat(r)),t.preventDownshiftDefault||t.hasOwnProperty("nativeEvent")&&t.nativeEvent.preventDownshiftDefault}))}}function lo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.forEach((function(e){"function"==typeof e?e(t):e&&(e.current=t)}))}}function co(){return String(oo++)}function po(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function fo(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=ho(e,r)?e[r]:t[r],n}),{})}function ho(t,e){return void 0!==t[e]}function go(t){var e=t.key,n=t.keyCode;return n>=37&&n<=40&&0!==e.indexOf("Arrow")?"Arrow"+e:e}function yo(t,e,n,r,o){if(void 0===o&&(o=!0),0===n)return-1;var i=n-1;("number"!=typeof e||e<0||e>=n)&&(e=t>0?-1:i+1);var s=e+t;s<0?s=o?i:0:s>i&&(s=o?0:i);var a=mo(t,s,n,r,o);return-1===a?e>=n?-1:e:a}function mo(t,e,n,r,o){var i=r(e);if(!i||!i.hasAttribute("disabled"))return e;if(t>0){for(var s=e+1;s<n;s++)if(!r(s).hasAttribute("disabled"))return s}else for(var a=e-1;a>=0;a--)if(!r(a).hasAttribute("disabled"))return a;return o?t>0?mo(1,0,n,r,!1):mo(-1,n-1,n,r,!1):-1}function vo(t,e,n,r){return void 0===r&&(r=!0),e.some((function(e){return e&&(so(e,t)||r&&so(e,n.activeElement))}))}var bo=ao((function(){wo().textContent=""}),500);function _o(t,e){var n=wo(e);t&&(n.textContent=t,bo())}function wo(t){void 0===t&&(t=document);var e=t.getElementById("a11y-status-message");return e||((e=t.createElement("div")).setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var xo={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function So(t,e,n){var r=t.props,o=t.type,i={};Object.keys(e).forEach((function(t){!function(t,e,n,r){var o="on"+Co(t)+"Change";e[o]&&void 0!==r[t]&&r[t]!==n[t]&&e[o](r)}(t,r,e,n),n[t]!==e[t]&&(i[t]=n[t])})),r.onStateChange&&Object.keys(i).length&&r.onStateChange(he({type:o},i))}var Eo=ao((function(t,e){_o(t(),e)}),200);function Oo(t){var e=t.id,n=t.labelId,r=t.menuId,o=t.getItemId,i=t.toggleButtonId,s=void 0===e?"downshift-"+co():e;return{labelId:n||s+"-label",menuId:r||s+"-menu",getItemId:o||function(t){return s+"-item-"+t},toggleButtonId:i||s+"-toggle-button"}}function Po(t,e,n){return void 0!==t?t:0===n.length?-1:n.indexOf(e)}function Co(t){return""+t.slice(0,1).toUpperCase()+t.slice(1)}function Io(t){var e=Object(r.useRef)(t);return e.current=t,e}function To(t,e,n){var o=Object(r.useRef)(),i=Object(r.useRef)(),s=Object(r.useCallback)((function(e,n){i.current=n,e=fo(e,n.props);var r=t(e,n);return n.props.stateReducer(e,he({},n,{changes:r}))}),[t]),a=Object(r.useReducer)(s,e),u=a[0],l=a[1],c=Io(n),p=Object(r.useCallback)((function(t){return l(he({props:c.current},t))}),[c]),f=i.current;return Object(r.useEffect)((function(){f&&o.current&&o.current!==u&&So(f,fo(o.current,f.props),u),o.current=u}),[u,n,f]),[u,p]}var Ro={itemToString:function(t){return t?String(t):""},stateReducer:function(t,e){return e.changes},getA11ySelectionMessage:function(t){var e=t.selectedItem,n=t.itemToString;return e?n(e)+" has been selected.":""},scrollIntoView:io,circularNavigation:!1,environment:"undefined"==typeof window?{}:window};function Mo(t,e,n){void 0===n&&(n=xo);var r="default"+Co(e);return r in t?t[r]:n[e]}function Ao(t,e,n){if(void 0===n&&(n=xo),e in t)return t[e];var r="initial"+Co(e);return r in t?t[r]:Mo(t,e,n)}function No(t){var e=Ao(t,"selectedItem"),n=Ao(t,"isOpen"),r=Ao(t,"highlightedIndex"),o=Ao(t,"inputValue");return{highlightedIndex:r<0&&e&&n?t.items.indexOf(e):r,isOpen:n,selectedItem:e,inputValue:o}}function ko(t,e,n,r){var o=t.items,i=t.initialHighlightedIndex,s=t.defaultHighlightedIndex,a=e.selectedItem,u=e.highlightedIndex;return 0===o.length?-1:void 0!==i&&u===i?i:void 0!==s?s:a?0===n?o.indexOf(a):yo(n,o.indexOf(a),o.length,r,!1):0===n?-1:n<0?o.length-1:0}function Lo(t,e,n,o){var i=Object(r.useRef)({isMouseDown:!1,isTouchMove:!1});return Object(r.useEffect)((function(){var r=function(){i.current.isMouseDown=!0},s=function(r){i.current.isMouseDown=!1,t&&!vo(r.target,e.map((function(t){return t.current})),n.document)&&o()},a=function(){i.current.isTouchMove=!1},u=function(){i.current.isTouchMove=!0},l=function(r){!t||i.current.isTouchMove||vo(r.target,e.map((function(t){return t.current})),n.document,!1)||o()};return n.addEventListener("mousedown",r),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",u),n.addEventListener("touchend",l),function(){n.removeEventListener("mousedown",r),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",u),n.removeEventListener("touchend",l)}}),[t,n]),i}function Do(){for(var t=!1,e=Object(r.useRef)(!0),n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=Object(r.useRef)(o.reduce((function(t,e){return t[e]={},t}),{}));Object(r.useEffect)((function(){t&&(Object.keys(s.current).forEach((function(t){var n=s.current[t];if(!e.current||Object.keys(n).length){var r=n.suppressRefError,o=n.refKey,i=n.elementRef;i&&i.current||r||console.error('downshift: The ref prop "'+o+'" from '+t+" was not applied correctly on your element.")}else console.error("downshift: You forgot to call the "+t+" getter function on your component / element.")})),e.current=!1)}));var a=Object(r.useCallback)((function(t,e,n,r){0}),[]);return a}Fr.a.array.isRequired,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.bool,Fr.a.number,Fr.a.number,Fr.a.number,Fr.a.bool,Fr.a.bool,Fr.a.bool,Fr.a.any,Fr.a.any,Fr.a.any,Fr.a.string,Fr.a.string,Fr.a.string,Fr.a.func,Fr.a.string,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.shape({addEventListener:Fr.a.func,removeEventListener:Fr.a.func,document:Fr.a.shape({getElementById:Fr.a.func,activeElement:Fr.a.any,body:Fr.a.any})});he({},Ro,{getA11yStatusMessage:function(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.":"":"No results are available.":""}});var jo=Object.freeze({__proto__:null,InputKeyDownArrowDown:0,InputKeyDownArrowUp:1,InputKeyDownEscape:2,InputKeyDownHome:3,InputKeyDownEnd:4,InputKeyDownEnter:5,InputChange:6,InputBlur:7,MenuMouseLeave:8,ItemMouseMove:9,ItemClick:10,ToggleButtonClick:11,FunctionToggleMenu:12,FunctionOpenMenu:13,FunctionCloseMenu:14,FunctionSetHighlightedIndex:15,FunctionSelectItem:16,FunctionSetInputValue:17,FunctionReset:18,ControlledPropUpdatedSelectedItem:19});Fr.a.array.isRequired,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.bool,Fr.a.number,Fr.a.number,Fr.a.number,Fr.a.bool,Fr.a.bool,Fr.a.bool,Fr.a.any,Fr.a.any,Fr.a.any,Fr.a.string,Fr.a.string,Fr.a.string,Fr.a.string,Fr.a.string,Fr.a.string,Fr.a.func,Fr.a.string,Fr.a.string,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.shape({addEventListener:Fr.a.func,removeEventListener:Fr.a.func,document:Fr.a.shape({getElementById:Fr.a.func,activeElement:Fr.a.any,body:Fr.a.any})});var Fo=he({},Ro,{getA11yStatusMessage:po,circularNavigation:!0});function Bo(t,e){var n,r=e.type,o=e.props,i=e.shiftKey;switch(r){case 9:n={highlightedIndex:e.index};break;case 10:n={isOpen:Mo(o,"isOpen"),highlightedIndex:Mo(o,"highlightedIndex"),selectedItem:o.items[e.index],inputValue:o.itemToString(o.items[e.index])};break;case 0:n=t.isOpen?{highlightedIndex:yo(i?5:1,t.highlightedIndex,o.items.length,e.getItemNodeFromIndex,o.circularNavigation)}:{highlightedIndex:ko(o,t,1,e.getItemNodeFromIndex),isOpen:!0};break;case 1:n=t.isOpen?{highlightedIndex:yo(i?-5:-1,t.highlightedIndex,o.items.length,e.getItemNodeFromIndex,o.circularNavigation)}:{highlightedIndex:ko(o,t,-1,e.getItemNodeFromIndex),isOpen:!0};break;case 5:n=he({},t.highlightedIndex>=0&&{selectedItem:o.items[t.highlightedIndex],isOpen:Mo(o,"isOpen"),highlightedIndex:Mo(o,"highlightedIndex"),inputValue:o.itemToString(o.items[t.highlightedIndex])});break;case 2:n={isOpen:!1,selectedItem:null,highlightedIndex:-1,inputValue:""};break;case 3:n={highlightedIndex:mo(1,0,o.items.length,e.getItemNodeFromIndex,!1)};break;case 4:n={highlightedIndex:mo(-1,o.items.length-1,o.items.length,e.getItemNodeFromIndex,!1)};break;case 7:n=he({isOpen:!1},t.highlightedIndex>=0&&{selectedItem:o.items[t.highlightedIndex],inputValue:o.itemToString(o.items[t.highlightedIndex]),highlightedIndex:-1});break;case 6:n={isOpen:!0,highlightedIndex:Mo(o,"highlightedIndex"),inputValue:e.inputValue};break;case 8:n={highlightedIndex:-1};break;case 11:case 12:n={isOpen:!t.isOpen,highlightedIndex:t.isOpen?-1:ko(o,t,0)};break;case 13:n={isOpen:!0,highlightedIndex:ko(o,t,0)};break;case 14:n={isOpen:!1};break;case 15:n={highlightedIndex:e.highlightedIndex};break;case 16:n={selectedItem:e.selectedItem,inputValue:o.itemToString(e.selectedItem)};break;case 19:case 17:n={inputValue:e.inputValue};break;case 18:n={highlightedIndex:Mo(o,"highlightedIndex"),isOpen:Mo(o,"isOpen"),selectedItem:Mo(o,"selectedItem"),inputValue:Mo(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return he({},t,n)}function zo(t){void 0===t&&(t={});var e=he({},Fo,t),n=e.initialIsOpen,o=e.defaultIsOpen,i=e.items,s=e.scrollIntoView,a=e.environment,u=e.getA11yStatusMessage,l=e.getA11ySelectionMessage,c=e.itemToString,p=function(t,e,n){var o=Object(r.useRef)(),i=To(t,e,n),s=i[0],a=i[1];return Object(r.useEffect)((function(){ho(n,"selectedItem")&&(o.current!==n.selectedItem&&a({type:19,inputValue:n.itemToString(n.selectedItem)}),o.current=s.selectedItem===o.current?n.selectedItem:s.selectedItem)})),[fo(s,n),a]}(Bo,function(t){var e=No(t),n=e.selectedItem,r=e.inputValue;return""===r&&n&&void 0===t.defaultInputValue&&void 0===t.initialInputValue&&void 0===t.inputValue&&(r=t.itemToString(n)),he({},e,{inputValue:r})}(e),e),f=p[0],h=p[1],d=f.isOpen,g=f.highlightedIndex,y=f.selectedItem,m=f.inputValue,v=Object(r.useRef)(null),b=Object(r.useRef)(),_=Object(r.useRef)(null),w=Object(r.useRef)(null),x=Object(r.useRef)(null);b.current={};var S,E,O,P,C,I=Object(r.useRef)(!0),T=Object(r.useRef)(!0),R=Object(r.useRef)((E=(S=e).id,O=S.inputId,P=pe(S,["id","inputId"]),C=void 0===E?"downshift-"+co():E,he({inputId:O||C+"-input"},Oo(he({id:E},P))))),M=Object(r.useRef)(),A=Object(r.useRef)(e),N=Io({state:f,props:e}),k=function(t){return b.current[R.current.getItemId(t)]};Object(r.useEffect)((function(){if(!T.current){var t=M.current;Eo((function(){return u({isOpen:d,highlightedIndex:g,selectedItem:y,inputValue:m,highlightedItem:i[g],resultCount:i.length,itemToString:c,previousResultCount:t})}),a.document)}}),[d,g,m,i]),Object(r.useEffect)((function(){if(!T.current){var t=M.current;Eo((function(){return l({isOpen:d,highlightedIndex:g,selectedItem:y,inputValue:m,highlightedItem:i[g],resultCount:i.length,itemToString:c,previousResultCount:t})}),a.document)}}),[y]),Object(r.useEffect)((function(){g<0||!d||!Object.keys(b.current).length||(!1===I.current?I.current=!0:s(k(g),v.current))}),[g]),Object(r.useEffect)((function(){T.current&&(n||o||d)&&_.current&&_.current.focus()}),[d]),Object(r.useEffect)((function(){T.current||(M.current=i.length)})),Object(r.useEffect)((function(){T.current||(A.current,A.current=e)}),[f,e]);var L=Lo(d,[x,v,w],a,(function(){h({type:7})})),D=Do("getInputProps","getComboboxProps","getMenuProps");Object(r.useEffect)((function(){T.current=!1}),[]);var j=Object(r.useMemo)((function(){return{ArrowDown:function(t){t.preventDefault(),h({type:0,shiftKey:t.shiftKey,getItemNodeFromIndex:k})},ArrowUp:function(t){t.preventDefault(),h({type:1,shiftKey:t.shiftKey,getItemNodeFromIndex:k})},Home:function(t){t.preventDefault(),h({type:3,getItemNodeFromIndex:k})},End:function(t){t.preventDefault(),h({type:4,getItemNodeFromIndex:k})},Escape:function(){h({type:2})},Enter:function(t){if(229!==t.which){var e=N.current.state;e.isOpen&&e.highlightedIndex>-1&&(t.preventDefault(),h({type:5,getItemNodeFromIndex:k}))}}}}),[h,N]),F=Object(r.useCallback)((function(t){return he({id:R.current.labelId,htmlFor:R.current.inputId},t)}),[]),B=Object(r.useCallback)((function(t,e){var n,r=void 0===t?{}:t,o=r.onMouseLeave,i=r.refKey,s=void 0===i?"ref":i,a=r.ref,u=pe(r,["onMouseLeave","refKey","ref"]),l=(void 0===e?{}:e).suppressRefError;return D("getMenuProps",void 0!==l&&l,s,v),he(((n={})[s]=lo(a,(function(t){v.current=t})),n.id=R.current.menuId,n.role="listbox",n["aria-labelledby"]=R.current.labelId,n.onMouseLeave=uo(o,(function(){h({type:8})})),n),u)}),[h,D]),z=Object(r.useCallback)((function(t){var e,n,r=void 0===t?{}:t,o=r.item,i=r.index,s=r.refKey,a=void 0===s?"ref":s,u=r.ref,l=r.onMouseMove,c=r.onClick,p=(r.onPress,pe(r,["item","index","refKey","ref","onMouseMove","onClick","onPress"])),f=N.current,d=f.props,g=f.state,y=Po(i,o,d.items);if(y<0)throw new Error("Pass either item or item index in getItemProps!");var m=c;return he(((e={})[a]=lo(u,(function(t){t&&(b.current[R.current.getItemId(y)]=t)})),e.role="option",e["aria-selected"]=""+(y===g.highlightedIndex),e.id=R.current.getItemId(y),e),!p.disabled&&((n={onMouseMove:uo(l,(function(){i!==g.highlightedIndex&&(I.current=!1,h({type:9,index:i}))}))}).onClick=uo(m,(function(){h({type:10,index:i}),_.current&&_.current.focus()})),n),p)}),[h,N]),V=Object(r.useCallback)((function(t){var e,n=void 0===t?{}:t,r=n.onClick,o=(n.onPress,n.refKey),i=void 0===o?"ref":o,s=n.ref,a=pe(n,["onClick","onPress","refKey","ref"]);return he(((e={})[i]=lo(s,(function(t){w.current=t})),e.id=R.current.toggleButtonId,e.tabIndex=-1,e),!a.disabled&&he({},{onClick:uo(r,(function(){h({type:11}),!N.current.state.isOpen&&_.current&&_.current.focus()}))}),a)}),[h,N]),U=Object(r.useCallback)((function(t,e){var n,r=void 0===t?{}:t,o=r.onKeyDown,i=r.onChange,s=r.onInput,a=r.onBlur,u=(r.onChangeText,r.refKey),l=void 0===u?"ref":u,c=r.ref,p=pe(r,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),f=(void 0===e?{}:e).suppressRefError;D("getInputProps",void 0!==f&&f,l,_);var d,g=N.current.state,y={};p.disabled||((d={}).onChange=uo(i,s,(function(t){h({type:6,inputValue:t.target.value})})),d.onKeyDown=uo(o,(function(t){var e=go(t);e&&j[e]&&j[e](t)})),d.onBlur=uo(a,(function(){L.current.isMouseDown||h({type:7})})),y=d);return he(((n={})[l]=lo(c,(function(t){_.current=t})),n.id=R.current.inputId,n["aria-autocomplete"]="list",n["aria-controls"]=R.current.menuId,n),g.isOpen&&g.highlightedIndex>-1&&{"aria-activedescendant":R.current.getItemId(g.highlightedIndex)},{"aria-labelledby":R.current.labelId,autoComplete:"off",value:g.inputValue},y,p)}),[h,j,N,L,D]),H=Object(r.useCallback)((function(t,e){var n,r=void 0===t?{}:t,o=r.refKey,i=void 0===o?"ref":o,s=r.ref,a=pe(r,["refKey","ref"]),u=(void 0===e?{}:e).suppressRefError;return D("getComboboxProps",void 0!==u&&u,i,x),he(((n={})[i]=lo(s,(function(t){x.current=t})),n.role="combobox",n["aria-haspopup"]="listbox",n["aria-owns"]=R.current.menuId,n["aria-expanded"]=N.current.state.isOpen,n),a)}),[N,D]),G=Object(r.useCallback)((function(){h({type:12})}),[h]),q=Object(r.useCallback)((function(){h({type:14})}),[h]),W=Object(r.useCallback)((function(){h({type:13})}),[h]),Y=Object(r.useCallback)((function(t){h({type:15,highlightedIndex:t})}),[h]),X=Object(r.useCallback)((function(t){h({type:16,selectedItem:t})}),[h]);return{getItemProps:z,getLabelProps:F,getMenuProps:B,getInputProps:U,getComboboxProps:H,getToggleButtonProps:V,toggleMenu:G,openMenu:W,closeMenu:q,setHighlightedIndex:Y,setInputValue:Object(r.useCallback)((function(t){h({type:17,inputValue:t})}),[h]),selectItem:X,reset:Object(r.useCallback)((function(){h({type:18})}),[h]),highlightedIndex:g,isOpen:d,selectedItem:y,inputValue:m}}zo.stateChangeTypes=jo;Fr.a.array,Fr.a.array,Fr.a.array,Fr.a.func,Fr.a.func,Fr.a.func,Fr.a.number,Fr.a.number,Fr.a.number,Fr.a.func,Fr.a.func,Fr.a.string,Fr.a.string,Fr.a.shape({addEventListener:Fr.a.func,removeEventListener:Fr.a.func,document:Fr.a.shape({getElementById:Fr.a.func,activeElement:Fr.a.any,body:Fr.a.any})});function Vo(t){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uo(){return(Uo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Ho(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Go(t,e){return(Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xo(t);if(e){var o=Xo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wo(this,n)}}function Wo(t,e){return!e||"object"!==Vo(e)&&"function"!=typeof e?Yo(t):e}function Yo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xo(t){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Go(t,e)}(s,t);var e,n,o,i=qo(s);function s(t){var e,n,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),e=i.call(this,t),n=Yo(e),a=function(t){var n=t.inputValue;if(n.length>0){var r=e.props.vocabulary.filter((function(t){return t.toLowerCase().startsWith(n.toLowerCase())}));e.setState({inputItems:r})}else e.setState({inputItems:[]})},(o="onInputValueChange")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,e.element=Object(r.createRef)(),e.state={inputItems:t.vocabulary||[]},e}return e=s,(n=[{key:"componentDidMount",value:function(){this.props.initialValue&&this.element.current&&(this.element.current.querySelector("input").value=this.props.initialValue)}},{key:"render",value:function(){var t=this,e=zo({items:this.state.inputItems,onInputValueChange:this.onInputValueChange,onSelectedItemChange:function(t){var e=t.inputValue;c(e),l("")}}),n=e.isOpen,o=e.getMenuProps,i=e.getInputProps,s=e.getComboboxProps,a=e.highlightedIndex,u=e.getItemProps,l=e.setInputValue,c=function(e){l(""),e.trim().length>0&&t.props.onSubmit(e)};return r.default.createElement("div",{className:"r6o-autocomplete",ref:this.element},r.default.createElement("div",s(),r.default.createElement("input",Uo({},i({onKeyUp:function(e){var n=e.target.value;13==e.which&&-1==a?c(n):40==e.which&&0==n.length?t.setState({inputItems:t.props.vocabulary}):27==e.which?t.props.onCancel&&t.props.onCancel():t.props.onChange&&t.props.onChange(n)}}),{placeholder:this.props.placeholder}))),r.default.createElement("ul",o(),n&&this.state.inputItems.map((function(t,e){return r.default.createElement("li",Uo({style:a===e?{backgroundColor:"#bde4ff"}:{},key:"".concat(t).concat(e)},u({item:t,index:e})),t)}))))}}])&&Ho(e.prototype,n),o&&Ho(e,o),s}(r.Component);function Ko(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Zo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zo(Object(n),!0).forEach((function(e){Qo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ti(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ei(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ei(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ni=function(t){var e=t.annotation?t.annotation.bodies.filter((function(t){return"TextualBody"===t.type&&"tagging"===t.purpose})):[],n=e.slice().reverse().find((function(t){return t.draft}))||{type:"TextualBody",value:"",purpose:"tagging",draft:!0},o=e.filter((function(t){return t!=n})),i=ti(Object(s.k)(!1),2),a=i[0],u=i[1],l=function(t){return function(e){u(a!==t&&t)}},c=function(e){return function(n){n.stopPropagation(),t.onRemoveBody(e)}};return r.default.createElement("div",{className:"r6o-widget r6o-tag"},o.length>0&&r.default.createElement("ul",{className:"r6o-taglist"},o.map((function(e){return r.default.createElement("li",{key:e.value,onClick:l(e.value)},r.default.createElement("span",{className:"r6o-label"},e.value),!t.readOnly&&r.default.createElement(Jr,{in:a===e.value,timeout:200,classNames:"r6o-delete"},r.default.createElement("span",{className:"r6o-delete-wrapper",onClick:c(e)},r.default.createElement("span",{className:"r6o-delete"},r.default.createElement(wr,{width:12})))))}))),!t.readOnly&&r.default.createElement($o,{placeholder:Q.t("Add tag..."),initialValue:n.value,onChange:function(e){var r=n.value.trim(),o=e.trim();0===r.length&&o.length>0?t.onAppendBody(Jo(Jo({},n),{},{value:o})):r.length>0&&0===o.length?t.onRemoveBody(n):t.onUpdateBody(n,Jo(Jo({},n),{},{value:o}))},onSubmit:function(e){var r=Jo(Jo({},n),{},{value:e}),o=(r.draft,Ko(r,["draft"]));0===n.value.trim().length?t.onAppendBody(o):t.onUpdateBody(n,o)},vocabulary:t.vocabulary||[]}))};function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ii(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oi(Object(n),!0).forEach((function(e){si(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function si(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ui(t,e){return(ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function li(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pi(t);if(e){var o=pi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ci(this,n)}}function ci(t,e){return!e||"object"!==ri(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pi(t){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ui(t,e)}(s,t);var e,n,o,i=li(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this,t)).element=r.default.createRef(),e}return e=s,(n=[{key:"componentWillReceiveProps",value:function(t){if(this.element.current&&this.props.annotation!==t.annotation){for(var e=this.props.widget(ii(ii({annotation:t.annotation,readOnly:t.readOnly},this.props.config),{},{onAppendBody:function(e){return t.onAppendBody(e)},onUpdateBody:function(e,n){return t.onUpdateBody(e,n)},onRemoveBody:function(e){return t.onRemoveBody(e)},onSaveAndClose:function(){return t.onSaveAndClose()}}));this.element.current.firstChild;)this.element.current.removeChild(this.element.current.lastChild);this.element.current.appendChild(e)}}},{key:"render",value:function(){return r.default.createElement("div",{ref:this.element,className:"widget"})}}])&&ai(e.prototype,n),o&&ai(e,o),s}(r.Component),hi=n(80),di=n.n(hi),gi=n(51),yi=n.n(gi);function mi(t){return(mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(){return(vi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function bi(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function _i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wi(t,e){return(wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oi(t);if(e){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Si(this,n)}}function Si(t,e){return!e||"object"!==mi(e)&&"function"!=typeof e?Ei(t):e}function Ei(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oi(t){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}r.Component;function Ci(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ii(t,e){return(Ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ti(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ai(t);if(e){var o=Ai(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ri(this,n)}}function Ri(t,e){return!e||"object"!==ki(e)&&"function"!=typeof e?Mi(t):e}function Mi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ai(t){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ni(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ki(t){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Li=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ii(t,e)}(s,t);var e,n,o,i=Ti(s);function s(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),Ni(Mi(e=i.call(this,t)),"componentWillReceiveProps",(function(t){if(!yi()(t.annotation,e.state.annotation)&&(e.setState({annotation:t.annotation}),t.annotation)){var n=t.tree;e.searchTreeForChecked(t.annotation.body,e.state.data),e.setState((function(t){return{data:n}}))}})),Ni(Mi(e),"shouldComponentUpdate",(function(t){return!0})),Ni(Mi(e),"onDelete",(function(t){return function(n){n.stopPropagation(),e.props.onRemoveBody(t)}})),Ni(Mi(e),"onSubmit",(function(t){e.props.onAppendBody({type:"TextualBody",purpose:"tagging",value:t.trim()})})),Ni(Mi(e),"onAction",(function(t,e){})),Ni(Mi(e),"onChange",(function(t,n){e.state.data;var r=!1;if(t.id&&(r=!0),n.includes(t)){var o={type:"TextualBody",value:t.label,image:e.props.image};r&&(o.id=t.id),e.props.onAppendBody(o)}else{o={type:"TextualBody",value:t.label,image:e.props.image};r&&(o.id=t.id),e.props.onRemoveBody(o),e.searchTreeForChecked(t.label,e.state.data,!1)}}));var n=t.tree;return t.annotation?e.searchTreeForChecked(t.annotation.bodies,n):e.searchTreeForChecked({},n),e.state={data:n,annotation:t.annotation},e}return e=s,(n=[{key:"searchTreeForChecked",value:function(t,e){for(var n in e){var r=!1;for(var o in t)e[n].id?e[n].label==t[o].value&e[n].id==t[o].id&&(r=!0):e[n].label==t[o].value&&(r=!0);e[n].checked=!!r,e[n].children&&this.searchTreeForChecked(t,e[n].children)}}},{key:"searchPredicate",value:function(t,e){return t.search?t.search&&t.search.toLowerCase().indexOf(e)>=0:t.label&&t.label.toLowerCase().indexOf(e)>=0}},{key:"render",value:function(){return this.props.annotation&&this.props.annotation.id,r.default.createElement("div",{className:"r6o-widget tree"},r.default.createElement("table",{style:"width:100%; white-space: break-spaces;"},this.props.annotation&&this.props.annotation.id&&r.default.createElement("tr",null,r.default.createElement("td",{style:"user-select: text;"},r.default.createElement("b",null,"AnnotationID:")," ",this.props.annotation.id)),r.default.createElement("tr",null,r.default.createElement("td",null,r.default.createElement(di.a,{data:this.state.data,searchPredicate:this.searchPredicate,keepTreeOnSearch:!0,onAction:this.onAction,onChange:this.onChange,showPartiallySelected:!1,hierarchical:!0})))))}}])&&Ci(e.prototype,n),o&&Ci(e,o),s}(r.Component);function Di(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var ji={COMMENT:Dr,TAG:ni,TREE:Li},Fi=[r.default.createElement(Li,null)],Bi=function(t){var e=function(t,e){if("string"==typeof t||t instanceof String)return r.default.createElement(ji[t],e);if(function(t){return"function"==typeof t&&!!t.prototype.isReactComponent}(n=t)||function(t){return"function"==typeof t&&String(t).match(/return .+\(['|"].+['|"],\s*\{/g)}(n))return r.default.createElement(t,e);if("function"==typeof t||t instanceof Function)return r.default.createElement(fi,{widget:t,config:e});throw"".concat(t," is not a valid plugin");var n};return t.widget?e(t.widget,Di(t,["widget"])):e(t)},zi=function(t,e,n){var r=t.getBoundingClientRect(),o=window.pageYOffset;e.className="r6o-editor",e.style.opacity=1;var i=n.getBoundingClientRect(),s=i.left,a=i.top,u=i.right,l=i.height,c=i.bottom;e.style.top="".concat(a+l-r.top,"px"),e.style.left="".concat(s-r.left,"px");var p=e.children[1].getBoundingClientRect();if(p.right>window.innerWidth&&(e.classList.add("align-right"),e.style.left="".concat(u-p.width-r.left,"px")),p.bottom>window.innerHeight){var f=a+o,h=r.bottom+o;e.classList.add("align-bottom"),e.style.top="auto",e.style.bottom="".concat(h-f,"px")}var d=e.children[1].getBoundingClientRect();if(d.top<0){e.style.top="".concat(-r.top,"px"),e.style.bottom="auto";var g=c-r.top;d.height-r.top>g&&e.classList.remove("align-bottom")}d.left<0&&(e.style.left="".concat(-r.left,"px"))};function Vi(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Ui(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Hi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ui(Object(n),!0).forEach((function(e){Gi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qi(t){return function(t){if(Array.isArray(t))return Xi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Yi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||Yi(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yi(t,e){if(t){if("string"==typeof t)return Xi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xi(t,e):void 0}}function Xi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $i,Ki=function(t){var e,n,o,i,a,u,l=Wi(Object(s.k)(),2),c=l[0],p=l[1],f=Object(s.j)();Object(s.d)((function(){p(t.annotation)}),[t.annotation]),Object(s.d)((function(){if(f.current)return h()}),[(e=t.selectedElement,n=e.getBoundingClientRect(),o=n.top,i=n.left,a=n.width,u=n.height,"".concat(o,", ").concat(i,", ").concat(a,", ").concat(u))]),Object(s.d)((function(){c&&p(c.clone({target:t.modifiedTarget}))}),[t.modifiedTarget]);var h=function(){var e;if(null!==(e=window)&&void 0!==e&&e.ResizeObserver){var n=new ResizeObserver((function(){zi(t.wrapperEl,f.current,t.selectedElement)}));return n.observe(t.wrapperEl),function(){return n.disconnect()}}zi(t.wrapperEl,f.current,t.selectedElement)},d=function(e){var n={},r=t.env.user;return r&&(n.creator={},r.id&&(n.creator.id=r.id),r.displayName&&(n.creator.name=r.displayName),n[e.created?"modified":"created"]=t.env.getCurrentTimeAdjusted()),n},g=function(t){return p(c.clone({body:[].concat(qi(c.bodies),[Hi(Hi({},t),d(t))])}))},y=function(t,e){return p(c.clone({body:c.bodies.map((function(n){return n===t?Hi(Hi({},e),d(e)):n}))}))},m=function(t){var e=[];for(var n in c.bodies)c.bodies[n].value===t.value||e.push(c.bodies[n]);var r=c.clone({body:e});p(r)},v=function(t,e){return t?y(t,e):g(e)},b=function(t,e){if(["@context","id","type","body","target"].includes(t))throw new Exception("Cannot set ".concat(t," - not allowed"));if(e)p(c.clone(Gi({},t,e)));else{var n=c.clone();delete n[t],p(n)}},_=function(){return t.onCancel(t.annotation)},w=function(e){var n=function(t){return t.clone({body:t.bodies.map((function(t){t.draft;return Vi(t,["draft"])}))})};0!==c.bodies.length||t.config.allowEmpty?c.isSelection?t.onAnnotationCreated(n(c).toAnnotation()):t.onAnnotationUpdated(n(c),t.annotation):c.isSelection?_():t.onAnnotationDeleted(t.annotation)},x=t.config.widgets?t.config.widgets.map(Bi):Fi,S=c&&(c.bodies.length>0||t.config.allowEmpty)&&!t.readOnly&&!c.isSelection&&!x.some((function(e){return!!e.type.disableDelete&&e.type.disableDelete(c,Hi(Hi({},e.props),{},{readOnly:t.readOnly,env:t.env}))}));return r.default.createElement("div",{ref:f,className:"r6o-editor"},r.default.createElement("div",{className:"r6o-arrow"}),r.default.createElement("div",{className:"r6o-editor-inner"},x.map((function(e){return r.default.cloneElement(e,{annotation:c,readOnly:t.readOnly,env:t.env,onAppendBody:g,onUpdateBody:y,onRemoveBody:m,onUpsertBody:v,onSetProperty:b,onSaveAndClose:w})})),t.readOnly?r.default.createElement("div",{className:"r6o-footer"},r.default.createElement("button",{className:"r6o-btn",onClick:_},Q.t("Close"))):r.default.createElement("div",{className:"r6o-footer"},S&&r.default.createElement("button",{className:"r6o-btn left delete-annotation",title:Q.t("Delete"),onClick:function(){return t.onAnnotationDeleted(t.annotation)}},r.default.createElement(xr,{width:12})),r.default.createElement("button",{className:"r6o-btn outline",onClick:_},Q.t("Cancel")),r.default.createElement("button",{className:"r6o-btn ",onClick:w},Q.t("Ok")))))},Zi=new Uint8Array(16);function Ji(){if(!$i&&!($i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $i(Zi)}var Qi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var ts=function(t){return"string"==typeof t&&Qi.test(t)},es=[],ns=0;ns<256;++ns)es.push((ns+256).toString(16).substr(1));var rs=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(es[t[e+0]]+es[t[e+1]]+es[t[e+2]]+es[t[e+3]]+"-"+es[t[e+4]]+es[t[e+5]]+"-"+es[t[e+6]]+es[t[e+7]]+"-"+es[t[e+8]]+es[t[e+9]]+"-"+es[t[e+10]]+es[t[e+11]]+es[t[e+12]]+es[t[e+13]]+es[t[e+14]]+es[t[e+15]]).toLowerCase();if(!ts(n))throw TypeError("Stringified UUID is invalid");return n};var os=function(t,e,n){var r=(t=t||{}).random||(t.rng||Ji)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=r[o];return e}return rs(r)},is=n(81);function ss(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function as(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ss(Object(n),!0).forEach((function(e){ls(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ls(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var cs=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ls(this,"clone",(function(e,n){return new t(as(as({},r.underlying),e),as(as({},r.opts),n))})),ls(this,"selector",(function(t){var e=r.underlying.target;if(e.selector)return(Array.isArray(e.selector)?e.selector:[e.selector]).find((function(e){return e.type===t}))})),this.underlying=e,this.opts=n}var e,n,r;return e=t,(n=[{key:"isEqual",value:function(t){return console.log("this",this),console.log("other",t),"Annotation"===(null==t?void 0:t.type)&&(this.underlying===t.underlying||!(!this.underlying.id||!t.underlying.id)&&is(this.underlying,t.underlying))}},{key:"readOnly",get:function(){var t;return null===(t=this.opts)||void 0===t?void 0:t.readOnly}},{key:"id",get:function(){return this.underlying.id}},{key:"type",get:function(){return this.underlying.type}},{key:"motivation",get:function(){return this.underlying.motivation}},{key:"body",get:function(){return this.underlying.body}},{key:"target",get:function(){return this.underlying.target}},{key:"bodies",get:function(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]},set:function(t){this.underlying.body=t}},{key:"targets",get:function(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}},{key:"quote",get:function(){return this.selector("TextQuoteSelector").exact}},{key:"start",get:function(){return this.selector("TextPositionSelector").start}},{key:"end",get:function(){return this.selector("TextPositionSelector").end}}])&&us(e.prototype,n),r&&us(e,r),t}();function ps(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ps(Object(n),!0).forEach((function(e){ds(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function hs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ds(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ls(cs,"create",(function(t){console.log("initiate Annotation");var e={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"#".concat(os()),body:[]};return new cs(as(as({},e),t))}));var gs=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ds(this,"clone",(function(e){var n=new t;return n.underlying=JSON.parse(JSON.stringify(r.underlying)),e&&(n.underlying=fs(fs({},n.underlying),e)),n})),ds(this,"selector",(function(t){var e=r.underlying.target;if(e.selector)return(Array.isArray(e.selector)?e.selector:[e.selector]).find((function(e){return e.type===t}))})),ds(this,"toAnnotation",(function(){var t=Object.assign({},r.underlying,{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"#".concat(os())});return new cs(t)})),this.underlying={type:"Selection",body:n||[],target:e}}var e,n,r;return e=t,(n=[{key:"type",get:function(){return this.underlying.type}},{key:"body",get:function(){return this.underlying.body}},{key:"target",get:function(){return this.underlying.target}},{key:"targets",get:function(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}},{key:"isEqual",value:function(t){return!!t&&is(this.underlying,t.underlying)}},{key:"bodies",get:function(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}},{key:"quote",get:function(){return this.selector("TextQuoteSelector").exact}},{key:"isSelection",get:function(){return!0}}])&&hs(e.prototype,n),r&&hs(e,r),t}(),ys=0,ms=n(53),vs=n.n(ms),bs="http://www.w3.org/2000/svg",_s=function(t,e){var n=new Set(t.getAttribute("class").split(" "));n.add(e),t.setAttribute("class",Array.from(n).join(" "))},ws=n(52),xs=n.n(ws),Ss=["second","minute","hour","day","week","month","year"],Es=["秒","分钟","小时","天","周","个月","年"],Os={},Ps=function(t,e){Os[t]=e},Cs=function(t){return Os[t]||Os.en_US},Is=[60,60,24,7,365/7/12,12];function Ts(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}function Rs(t,e){for(var n=t<0?1:0,r=t=Math.abs(t),o=0;t>=Is[o]&&o<Is.length;o++)t/=Is[o];return(t=Math.floor(t))>(0===(o*=2)?9:1)&&(o+=1),e(t,o,r)[n].replace("%s",t.toString())}function Ms(t,e){return(+(e?Ts(e):new Date)-+Ts(t))/1e3}var As="timeago-id";function Ns(t){return parseInt(t.getAttribute(As))}var ks={},Ls=function(t){clearTimeout(t),delete ks[t]};function Ds(t,e,n,r){Ls(Ns(t));var o=r.relativeDate,i=r.minInterval,s=Ms(e,o);t.innerText=Rs(s,n);var a=setTimeout((function(){Ds(t,e,n,r)}),Math.min(1e3*Math.max(function(t){for(var e=1,n=0,r=Math.abs(t);t>=Is[n]&&n<Is.length;n++)t/=Is[n],e*=Is[n];return r=(r%=e)?e-r:e,Math.ceil(r)}(s),i||1),2147483647));ks[a]=0,function(t,e){t.setAttribute(As,e)}(t,a)}function js(t){t?Ls(Ns(t)):Object.keys(ks).forEach(Ls)}Ps("en_US",(function(t,e){if(0===e)return["just now","right now"];var n=Ss[Math.floor(e/2)];return t>1&&(n+="s"),[t+" "+n+" ago","in "+t+" "+n]})),Ps("zh_CN",(function(t,e){if(0===e)return["刚刚","片刻后"];var n=Es[~~(e/2)];return[t+" "+n+"前",t+" "+n+"后"]}));var Fs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bs=function(){return(Bs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},zs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},Vs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dom=null,e}return Fs(e,t),e.prototype.componentDidMount=function(){this.renderTimeAgo()},e.prototype.componentDidUpdate=function(){this.renderTimeAgo()},e.prototype.renderTimeAgo=function(){var t,e=this.props,n=e.live,r=e.datetime,o=e.locale,i=e.opts;js(this.dom),!1!==n&&(this.dom.setAttribute("datetime",""+((t=r)instanceof Date?t.getTime():t)),function(t,e,n){var r=t.length?t:[t];r.forEach((function(t){Ds(t,function(t){return t.getAttribute("datetime")}(t),Cs(e),n||{})}))}(this.dom,o,i))},e.prototype.componentWillUnmount=function(){js(this.dom)},e.prototype.render=function(){var t=this,e=this.props,n=e.datetime,o=(e.live,e.locale),i=e.opts,s=zs(e,["datetime","live","locale","opts"]);return r.createElement("time",Bs({ref:function(e){t.dom=e}},s),function(t,e,n){return Rs(Ms(t,n&&n.relativeDate),Cs(e))}(n,o,i))},e.defaultProps={live:!0,className:""},e}(r.Component);var Us=n(196),Hs=n(197),Gs=n.n(Hs),qs=n(198),Ws=n.n(qs),Ys=n(199),Xs=n.n(Ys),$s=n(200),Ks=n.n($s),Zs=n(201),Js=n.n(Zs),Qs=n(202),ta=n.n(Qs),ea=n(203),na=n.n(ea),ra=n(204),oa=n.n(ra),ia=n(205),sa=n.n(ia),aa=n(206),ua=n.n(aa),la=n(207),ca=n.n(la),pa=n(208),fa=n.n(pa),ha=new Us({allowMissing:!0});ha.init=function(t){ha.locale(t),ha.extend(n(348)("./messages_".concat(t,".json")))},Ps("ar",Gs.a),Ps("cs",Ws.a),Ps("de",Xs.a),Ps("el",Ks.a),Ps("es",Js.a),Ps("gl",ta.a),Ps("hi",na.a),Ps("it",oa.a),Ps("nl",sa.a),Ps("pt",ua.a),Ps("sv",ca.a),Ps("tr",fa.a);var da=ha,ga=function(t){var e=Object(s.j)();return function(t,e){var n=function(n){t.current&&!t.current.contains(event.target)&&e()};Object(s.d)((function(){return document.addEventListener("mousedown",n),function(){return document.removeEventListener("mousedown",n)}}))}(e,(function(){return t.onClickOutside()})),r.default.createElement("ul",{ref:e,className:"r6o-comment-dropdown-menu"},r.default.createElement("li",{onClick:t.onEdit},da.t("Edit")),r.default.createElement("li",{onClick:t.onDelete},da.t("Delete")))},ya=n(209),ma=n.n(ya);function va(t){return(va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ba(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wa(t,e){return(wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oa(t);if(e){var o=Oa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sa(this,n)}}function Sa(t,e){return!e||"object"!==va(e)&&"function"!=typeof e?Ea(t):e}function Ea(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oa(t){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ca=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wa(t,e)}(s,t);var e,n,o,i=xa(s);function s(){var t;ba(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Pa(Ea(t=i.call.apply(i,[this].concat(n))),"onKeyDown",(function(e){13===e.which&&e.ctrlKey&&t.props.onSaveAndClose()})),Pa(Ea(t),"onRender",(function(t){})),t}return e=s,(n=[{key:"render",value:function(){return r.default.createElement(ma.a,{ref:this.onRender,className:"r6o-editable-text",value:this.props.content,placeholder:this.props.placeholder||da.t("Add a comment..."),disabled:!this.props.editable,onChange:this.props.onChange,onKeyDown:this.onKeyDown})}}])&&_a(e.prototype,n),o&&_a(e,o),s}(r.Component);n(368),n(370),n(371),n(375),n(379);function Ia(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ta(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ra(t,e,n){return e&&Ta(t.prototype,e),n&&Ta(t,n),t}n(380);function Ma(t,e){return(Ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Aa(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ma(t,e)}var Na=n(118),ka=n.n(Na);function La(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Da(t,e){return!e||"object"!==ka()(e)&&"function"!=typeof e?La(t):e}function ja(t){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fa=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function Ba(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(r=t[n],o=e[n],!(r===o||Fa(r)&&Fa(o)))return!1;var r,o;return!0}var za=function(t,e){var n;void 0===e&&(e=Ba);var r,o=[],i=!1;return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return i&&n===this&&e(s,o)||(r=t.apply(this,s),i=!0,n=this,o=s),r}};function Va(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ma(t,e)}var Ua=function(){function t(t){this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.before=null}var e=t.prototype;return e.insert=function(t){if(this.ctr%(this.isSpeedy?65e3:1)==0){var e,n=function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e}(this);e=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,e),this.tags.push(n)}var r=this.tags[this.tags.length-1];if(this.isSpeedy){var o=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(r);try{var i=105===t.charCodeAt(1)&&64===t.charCodeAt(0);o.insertRule(t,i?0:o.cssRules.length)}catch(t){0}}else r.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}();function Ha(t){return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ga=function(t){function e(t,r,u,l,f){for(var h,d,g,y,_,x=0,S=0,E=0,O=0,P=0,A=0,k=g=h=0,D=0,j=0,F=0,B=0,z=u.length,V=z-1,U="",H="",G="",q="";D<z;){if(d=u.charCodeAt(D),D===V&&0!==S+O+E+x&&(0!==S&&(d=47===S?10:47),O=E=x=0,z++,V++),0===S+O+E+x){if(D===V&&(0<j&&(U=U.replace(p,"")),0<U.trim().length)){switch(d){case 32:case 9:case 59:case 13:case 10:break;default:U+=u.charAt(D)}d=59}switch(d){case 123:for(h=(U=U.trim()).charCodeAt(0),g=1,B=++D;D<z;){switch(d=u.charCodeAt(D)){case 123:g++;break;case 125:g--;break;case 47:switch(d=u.charCodeAt(D+1)){case 42:case 47:t:{for(k=D+1;k<V;++k)switch(u.charCodeAt(k)){case 47:if(42===d&&42===u.charCodeAt(k-1)&&D+2!==k){D=k+1;break t}break;case 10:if(47===d){D=k+1;break t}}D=k}}break;case 91:d++;case 40:d++;case 34:case 39:for(;D++<V&&u.charCodeAt(D)!==d;);}if(0===g)break;D++}switch(g=u.substring(B,D),0===h&&(h=(U=U.replace(c,"").trim()).charCodeAt(0)),h){case 64:switch(0<j&&(U=U.replace(p,"")),d=U.charCodeAt(1)){case 100:case 109:case 115:case 45:j=r;break;default:j=M}if(B=(g=e(r,j,g,d,f+1)).length,0<N&&(_=a(3,g,j=n(M,U,F),r,I,C,B,d,f,l),U=j.join(""),void 0!==_&&0===(B=(g=_.trim()).length)&&(d=0,g="")),0<B)switch(d){case 115:U=U.replace(w,s);case 100:case 109:case 45:g=U+"{"+g+"}";break;case 107:g=(U=U.replace(m,"$1 $2"))+"{"+g+"}",g=1===R||2===R&&i("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=U+g,112===l&&(H+=g,g="")}else g="";break;default:g=e(r,n(r,U,F),g,l,f+1)}G+=g,g=F=j=k=h=0,U="",d=u.charCodeAt(++D);break;case 125:case 59:if(1<(B=(U=(0<j?U.replace(p,""):U).trim()).length))switch(0===k&&(h=U.charCodeAt(0),45===h||96<h&&123>h)&&(B=(U=U.replace(" ",":")).length),0<N&&void 0!==(_=a(1,U,r,t,I,C,H.length,l,f,l))&&0===(B=(U=_.trim()).length)&&(U="\0\0"),h=U.charCodeAt(0),d=U.charCodeAt(1),h){case 0:break;case 64:if(105===d||99===d){q+=U+u.charAt(D);break}default:58!==U.charCodeAt(B-1)&&(H+=o(U,h,d,U.charCodeAt(2)))}F=j=k=h=0,U="",d=u.charCodeAt(++D)}}switch(d){case 13:case 10:47===S?S=0:0===1+h&&107!==l&&0<U.length&&(j=1,U+="\0"),0<N*L&&a(0,U,r,t,I,C,H.length,l,f,l),C=1,I++;break;case 59:case 125:if(0===S+O+E+x){C++;break}default:switch(C++,y=u.charAt(D),d){case 9:case 32:if(0===O+x+S)switch(P){case 44:case 58:case 9:case 32:y="";break;default:32!==d&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===O+S+x&&(j=F=1,y="\f"+y);break;case 108:if(0===O+S+x+T&&0<k)switch(D-k){case 2:112===P&&58===u.charCodeAt(D-3)&&(T=P);case 8:111===A&&(T=A)}break;case 58:0===O+S+x&&(k=D);break;case 44:0===S+E+O+x&&(j=1,y+="\r");break;case 34:case 39:0===S&&(O=O===d?0:0===O?d:O);break;case 91:0===O+S+E&&x++;break;case 93:0===O+S+E&&x--;break;case 41:0===O+S+x&&E--;break;case 40:if(0===O+S+x){if(0===h)switch(2*P+3*A){case 533:break;default:h=1}E++}break;case 64:0===S+E+O+x+k+g&&(g=1);break;case 42:case 47:if(!(0<O+x+E))switch(S){case 0:switch(2*d+3*u.charCodeAt(D+1)){case 235:S=47;break;case 220:B=D,S=42}break;case 42:47===d&&42===P&&B+2!==D&&(33===u.charCodeAt(B+2)&&(H+=u.substring(B,D+1)),y="",S=0)}}0===S&&(U+=y)}A=P,P=d,D++}if(0<(B=H.length)){if(j=r,0<N&&(void 0!==(_=a(2,H,j,t,I,C,B,l,f,l))&&0===(H=_).length))return q+H+G;if(H=j.join(",")+"{"+H+"}",0!=R*T){switch(2!==R||i(H,2)||(T=0),T){case 111:H=H.replace(b,":-moz-$1")+H;break;case 112:H=H.replace(v,"::-webkit-input-$1")+H.replace(v,"::-moz-$1")+H.replace(v,":-ms-input-$1")+H}T=0}}return q+H+G}function n(t,e,n){var o=e.trim().split(g);e=o;var i=o.length,s=t.length;switch(s){case 0:case 1:var a=0;for(t=0===s?"":t[0]+" ";a<i;++a)e[a]=r(t,e[a],n).trim();break;default:var u=a=0;for(e=[];a<i;++a)for(var l=0;l<s;++l)e[u++]=r(t[l]+" ",o[a],n).trim()}return e}function r(t,e,n){var r=e.charCodeAt(0);switch(33>r&&(r=(e=e.trim()).charCodeAt(0)),r){case 38:return e.replace(y,"$1"+t.trim());case 58:return t.trim()+e.replace(y,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(y,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function o(t,e,n,r){var s=t+";",a=2*e+3*n+4*r;if(944===a){t=s.indexOf(":",9)+1;var u=s.substring(t,s.length-1).trim();return u=s.substring(0,t).trim()+u+";",1===R||2===R&&i(u,1)?"-webkit-"+u+u:u}if(0===R||2===R&&!i(s,1))return s;switch(a){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(P,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(u=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+u+s;case 1005:return h.test(s)?s.replace(f,":-webkit-")+s.replace(f,":-moz-")+s:s;case 1e3:switch(e=(u=s.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(e)){case 226:u=s.replace(_,"tb");break;case 232:u=s.replace(_,"tb-rl");break;case 220:u=s.replace(_,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+u+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(e=(s=t).length-10,a=(u=(33===s.charCodeAt(e)?s.substring(0,e):s).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:s=s.replace(u,"-webkit-"+u)+";"+s;break;case 207:case 102:s=s.replace(u,"-webkit-"+(102<a?"inline-":"")+"box")+";"+s.replace(u,"-webkit-"+u)+";"+s.replace(u,"-ms-"+u+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return u=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+u+"-ms-flex-"+u+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(S,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(S,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===O.test(t))return 115===(u=t.substring(t.indexOf(":")+1)).charCodeAt(0)?o(t.replace("stretch","fill-available"),e,n,r).replace(":fill-available",":stretch"):s.replace(u,"-webkit-"+u)+s.replace(u,"-moz-"+u.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+r&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(d,"$1-webkit-$2")+s}return s}function i(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),k(2!==e?r:r.replace(E,"$1"),n,e)}function s(t,e){var n=o(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(x," or ($1)").substring(4):"("+e+")"}function a(t,e,n,r,o,i,s,a,u,c){for(var p,f=0,h=e;f<N;++f)switch(p=A[f].call(l,t,h,n,r,o,i,s,a,u,c)){case void 0:case!1:case!0:case null:break;default:h=p}if(h!==e)return h}function u(t){return void 0!==(t=t.prefix)&&(k=null,t?"function"!=typeof t?R=1:(R=2,k=t):R=0),u}function l(t,n){var r=t;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<N){var o=a(-1,n,r,r,I,C,0,0,0,0);void 0!==o&&"string"==typeof o&&(n=o)}var i=e(M,r,n,0,0);return 0<N&&(void 0!==(o=a(-2,i,r,r,I,C,i.length,0,0,0))&&(i=o)),"",T=0,C=I=1,i}var c=/^\0+/g,p=/[\0\r\f]/g,f=/: */g,h=/zoo|gra/,d=/([,: ])(transform)/g,g=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,S=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,O=/stretch|:\s*\w+\-(?:conte|avail)/,P=/([^-])(image-set\()/,C=1,I=1,T=0,R=1,M=[],A=[],N=0,k=null,L=0;return l.use=function t(e){switch(e){case void 0:case null:N=A.length=0;break;default:if("function"==typeof e)A[N++]=e;else if("object"===Ha(e))for(var n=0,r=e.length;n<r;++n)t(e[n]);else L=0|!!e}return t},l.set=u,void 0!==t&&u(t),l},qa="/*|*/";function Wa(t){t&&Ya.current.insert(t+"}")}var Ya={current:null},Xa=function(t,e,n,r,o,i,s,a,u,l){switch(t){case 1:switch(e.charCodeAt(0)){case 64:return Ya.current.insert(e+";"),"";case 108:if(98===e.charCodeAt(2))return""}break;case 2:if(0===a)return e+qa;break;case 3:switch(a){case 102:case 112:return Ya.current.insert(n[0]+e),"";default:return e+(0===l?qa:"")}case-2:e.split("/*|*/}").forEach(Wa)}},$a=function(t){void 0===t&&(t={});var e,n=t.key||"css";void 0!==t.prefix&&(e={prefix:t.prefix});var r=new Ga(e);var o,i={};o=t.container||document.head;var s,a=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(a,(function(t){t.getAttribute("data-emotion-"+n).split(" ").forEach((function(t){i[t]=!0})),t.parentNode!==o&&o.appendChild(t)})),r.use(t.stylisPlugins)(Xa),s=function(t,e,n,o){var i=e.name;Ya.current=n,r(t,e.styles),o&&(u.inserted[i]=!0)};var u={key:n,sheet:new Ua({key:n,container:o,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:i,registered:{},insert:s};return u};n(381);function Ka(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]):r+=n+" "})),r}var Za=function(t,e,n){var r=t.key+"-"+e.name;if(!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles),void 0===t.inserted[e.name]){var o=e;do{t.insert("."+r,o,t.sheet,!0);o=o.next}while(void 0!==o)}};var Ja=function(t){for(var e,n=0,r=0,o=t.length;o>=4;++r,o-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Qa={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function tu(t){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var eu=/[A-Z]|^ms/g,nu=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ru=function(t){return 45===t.charCodeAt(1)},ou=function(t){return null!=t&&"boolean"!=typeof t},iu=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return ru(t)?t:t.replace(eu,"-$&").toLowerCase()})),su=function(t,e){switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(nu,(function(t,e,n){return uu={name:e,styles:n,next:uu},e}))}return 1===Qa[t]||ru(t)||"number"!=typeof e||0===e?e:e+"px"};function au(t,e,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(tu(n)){case"boolean":return"";case"object":if(1===n.anim)return uu={name:n.name,styles:n.styles,next:uu},n.name;if(void 0!==n.styles){var o=n.next;if(void 0!==o)for(;void 0!==o;)uu={name:o.name,styles:o.styles,next:uu},o=o.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=au(t,e,n[o],!1);else for(var i in n){var s=n[i];if("object"!==tu(s))null!=e&&void 0!==e[s]?r+=i+"{"+e[s]+"}":ou(s)&&(r+=iu(i)+":"+su(i,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=e&&void 0!==e[s[0]]){var a=au(t,e,s,!1);switch(i){case"animation":case"animationName":r+=iu(i)+":"+a+";";break;default:r+=i+"{"+a+"}"}}else for(var u=0;u<s.length;u++)ou(s[u])&&(r+=iu(i)+":"+su(i,s[u])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=uu,s=n(t);return uu=i,au(t,e,s,r)}break;case"string":}if(null==e)return n;var a=e[n];return void 0===a||r?n:a}var uu,lu=/label:\s*([^\s;\n{]+)\s*;/g;var cu=function(t,e,n){if(1===t.length&&"object"===tu(t[0])&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,o="";uu=void 0;var i=t[0];null==i||void 0===i.raw?(r=!1,o+=au(n,e,i,!1)):o+=i[0];for(var s=1;s<t.length;s++)o+=au(n,e,t[s],46===o.charCodeAt(o.length-1)),r&&(o+=i[s]);lu.lastIndex=0;for(var a,u="";null!==(a=lu.exec(o));)u+="-"+a[1];return{name:Ja(o)+u,styles:o,next:uu}},pu=Object.prototype.hasOwnProperty,fu=Object(r.createContext)("undefined"!=typeof HTMLElement?$a():null),hu=Object(r.createContext)({}),du=fu.Provider,gu=function(t){var e=function(e,n){return Object(r.createElement)(fu.Consumer,null,(function(r){return t(e,r,n)}))};return Object(r.forwardRef)(e)},yu="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",mu=function(t,e){var n={};for(var r in e)pu.call(e,r)&&(n[r]=e[r]);return n.__EMOTION_TYPE_PLEASE_DO_NOT_USE__=t,n},vu=function(t,e,n,o){var i=null===n?e.css:e.css(n);"string"==typeof i&&void 0!==t.registered[i]&&(i=t.registered[i]);var s=e.__EMOTION_TYPE_PLEASE_DO_NOT_USE__,a=[i],u="";"string"==typeof e.className?u=Ka(t.registered,a,e.className):null!=e.className&&(u=e.className+" ");var l=cu(a);Za(t,l,"string"==typeof s);u+=t.key+"-"+l.name;var c={};for(var p in e)pu.call(e,p)&&"css"!==p&&p!==yu&&(c[p]=e[p]);return c.ref=o,c.className=u,Object(r.createElement)(s,c)},bu=gu((function(t,e,n){return"function"==typeof t.css?Object(r.createElement)(hu.Consumer,null,(function(r){return vu(e,t,r,n)})):vu(e,t,null,n)}));var _u=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return cu(e)};function wu(t){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var xu=function(t,e){var n=arguments;if(null==e||!pu.call(e,"css"))return r.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=bu,i[1]=mu(t,e);for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)},Su=(r.Component,function t(e){for(var n=e.length,r=0,o="";r<n;r++){var i=e[r];if(null!=i){var s=void 0;switch(wu(i)){case"boolean":break;case"object":if(Array.isArray(i))s=t(i);else for(var a in s="",i)i[a]&&a&&(s&&(s+=" "),s+=a);break;default:s=i}s&&(o&&(o+=" "),o+=s)}}return o});function Eu(t,e,n){var r=[],o=Ka(t,r,n);return r.length<2?n:o+e(r)}var Ou=gu((function(t,e){return Object(r.createElement)(hu.Consumer,null,(function(n){var r=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=cu(n,e.registered);return Za(e,o,!1),e.key+"-"+o.name},o={css:r,cx:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Eu(e.registered,r,Su(n))},theme:n},i=t.children(o);return!0,i}))}));function Pu(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function Cu(t,e){if(null==t)return{};var n,r,o=Pu(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Iu(){return(Iu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Tu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ru(t,e){if(t){if("string"==typeof t)return Tu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tu(t,e):void 0}}function Mu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,e)||Ru(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Au(t){return function(t){if(Array.isArray(t))return Tu(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ru(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ku(t){return(ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Lu=n(119),Du=n.n(Lu),ju=function(){};function Fu(t,e){return e?"-"===e[0]?t+e:t+"__"+e:t}function Bu(t,e,n){var r=[n];if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&r.push("".concat(Fu(t,o)));return r.filter((function(t){return t})).map((function(t){return String(t).trim()})).join(" ")}var zu=function(t){return Array.isArray(t)?t.filter(Boolean):"object"===ku(t)&&null!==t?[t]:[]};function Vu(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function Uu(t){return Vu(t)?window.pageYOffset:t.scrollTop}function Hu(t,e){Vu(t)?window.scrollTo(0,e):t.scrollTop=e}function Gu(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function qu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ju,o=Uu(t),i=e-o,s=10,a=0;function u(){var e=Gu(a+=s,o,i,n);Hu(t,e),a<n?window.requestAnimationFrame(u):r(t)}u()}function Wu(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}function Yu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yu(Object(n),!0).forEach((function(e){Nu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Da(this,n)}}function Ku(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,o=t.placement,i=t.shouldScroll,s=t.isFixedPosition,a=t.theme.spacing,u=function(t){var e=getComputedStyle(t),n="absolute"===e.position,r=/(auto|scroll)/,o=document.documentElement;if("fixed"===e.position)return o;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),(!n||"static"!==e.position)&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return o}(n),l={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return l;var c=u.getBoundingClientRect().height,p=n.getBoundingClientRect(),f=p.bottom,h=p.height,d=p.top,g=n.offsetParent.getBoundingClientRect().top,y=window.innerHeight,m=Uu(u),v=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),_=g-b,w=y-d,x=_+m,S=c-m-d,E=f-y+m+v,O=m+d-b,P=160;switch(o){case"auto":case"bottom":if(w>=h)return{placement:"bottom",maxHeight:e};if(S>=h&&!s)return i&&qu(u,E,P),{placement:"bottom",maxHeight:e};if(!s&&S>=r||s&&w>=r)return i&&qu(u,E,P),{placement:"bottom",maxHeight:s?w-v:S-v};if("auto"===o||s){var C=e,I=s?_:x;return I>=r&&(C=Math.min(I-v-a.controlHeight,e)),{placement:"top",maxHeight:C}}if("bottom"===o)return Hu(u,E),{placement:"bottom",maxHeight:e};break;case"top":if(_>=h)return{placement:"top",maxHeight:e};if(x>=h&&!s)return i&&qu(u,O,P),{placement:"top",maxHeight:e};if(!s&&x>=r||s&&_>=r){var T=e;return(!s&&x>=r||s&&_>=r)&&(T=s?_-b:x-b),i&&qu(u,O,P),{placement:"top",maxHeight:T}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return l}var Zu=function(t){return"auto"===t?"bottom":t},Ju=Object(r.createContext)({getPortalPlacement:null}),Qu=function(t){Aa(n,t);var e=$u(n);function n(){var t;Ia(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={maxHeight:t.props.maxMenuHeight,placement:null},t.getPlacement=function(e){var n=t.props,r=n.minMenuHeight,o=n.maxMenuHeight,i=n.menuPlacement,s=n.menuPosition,a=n.menuShouldScrollIntoView,u=n.theme;if(e){var l="fixed"===s,c=Ku({maxHeight:o,menuEl:e,minHeight:r,placement:i,shouldScroll:a&&!l,isFixedPosition:l,theme:u}),p=t.context.getPortalPlacement;p&&p(c),t.setState(c)}},t.getUpdatedProps=function(){var e=t.props.menuPlacement,n=t.state.placement||Zu(e);return Xu(Xu({},t.props),{},{placement:n,maxHeight:t.state.maxHeight})},t}return Ra(n,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),n}(r.Component);Qu.contextType=Ju;var tl=function(t){var e=t.theme,n=e.spacing.baseUnit;return{color:e.colors.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px"),textAlign:"center"}},el=tl,nl=tl,rl=function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return xu("div",Iu({css:o("noOptionsMessage",t),className:r({"menu-notice":!0,"menu-notice--no-options":!0},n)},i),e)};rl.defaultProps={children:"No options"};var ol=function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return xu("div",Iu({css:o("loadingMessage",t),className:r({"menu-notice":!0,"menu-notice--loading":!0},n)},i),e)};ol.defaultProps={children:"Loading..."};var il=function(t){Aa(n,t);var e=$u(n);function n(){var t;Ia(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={placement:null},t.getPortalPlacement=function(e){var n=e.placement;n!==Zu(t.props.menuPlacement)&&t.setState({placement:n})},t}return Ra(n,[{key:"render",value:function(){var t=this.props,e=t.appendTo,n=t.children,o=t.controlElement,i=t.menuPlacement,s=t.menuPosition,a=t.getStyles,u="fixed"===s;if(!e&&!u||!o)return null;var l=this.state.placement||Zu(i),c=function(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}(o),p=u?0:window.pageYOffset,f=c[l]+p,h=xu("div",{css:a("menuPortal",{offset:f,position:s,rect:c})},n);return xu(Ju.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},e?Object(r.createPortal)(h,e):h)}}]),n}(r.Component),sl=Array.isArray,al=Object.keys,ul=Object.prototype.hasOwnProperty;function ll(t,e){if(t===e)return!0;if(t&&e&&"object"==ku(t)&&"object"==ku(e)){var n,r,o,i=sl(t),s=sl(e);if(i&&s){if((r=t.length)!=e.length)return!1;for(n=r;0!=n--;)if(!ll(t[n],e[n]))return!1;return!0}if(i!=s)return!1;var a=t instanceof Date,u=e instanceof Date;if(a!=u)return!1;if(a&&u)return t.getTime()==e.getTime();var l=t instanceof RegExp,c=e instanceof RegExp;if(l!=c)return!1;if(l&&c)return t.toString()==e.toString();var p=al(t);if((r=p.length)!==al(e).length)return!1;for(n=r;0!=n--;)if(!ul.call(e,p[n]))return!1;for(n=r;0!=n--;)if(!("_owner"===(o=p[n])&&t.$$typeof||ll(t[o],e[o])))return!1;return!0}return t!=t&&e!=e}function cl(t,e){try{return ll(t,e)}catch(t){if(t.message&&t.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",t.name,t.message),!1;throw t}}function pl(){var t,e,n=(t=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}})));return pl=function(){return n},n}var fl={name:"19bqh2r",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;"},hl=function(t){var e=t.size,n=Cu(t,["size"]);return xu("svg",Iu({height:e,width:e,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:fl},n))},dl=function(t){return xu(hl,Iu({size:20},t),xu("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},gl=function(t){return xu(hl,Iu({size:20},t),xu("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},yl=function(t){var e=t.isFocused,n=t.theme,r=n.spacing.baseUnit,o=n.colors;return{label:"indicatorContainer",color:e?o.neutral60:o.neutral20,display:"flex",padding:2*r,transition:"color 150ms",":hover":{color:e?o.neutral80:o.neutral40}}},ml=yl,vl=yl,bl=function(){var t=_u.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(pl()),_l=function(t){var e=t.delay,n=t.offset;return xu("span",{css:_u({animation:"".concat(bl," 1s ease-in-out ").concat(e,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"")})},wl=function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerProps,i=t.isRtl;return xu("div",Iu({},o,{css:r("loadingIndicator",t),className:n({indicator:!0,"loading-indicator":!0},e)}),xu(_l,{delay:0,offset:i}),xu(_l,{delay:160,offset:!0}),xu(_l,{delay:320,offset:!i}))};wl.defaultProps={size:4};function xl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Sl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xl(Object(n),!0).forEach((function(e){Nu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function El(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ol(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?El(Object(n),!0).forEach((function(e){Nu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):El(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pl=function(t){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:t?0:1,outline:0,padding:0,color:"inherit"}};function Cl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Il(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cl(Object(n),!0).forEach((function(e){Nu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tl=function(t){var e=t.children,n=t.innerProps;return xu("div",n,e)},Rl=Tl,Ml=Tl;var Al=function(t){var e=t.children,n=t.className,r=t.components,o=t.cx,i=t.data,s=t.getStyles,a=t.innerProps,u=t.isDisabled,l=t.removeProps,c=t.selectProps,p=r.Container,f=r.Label,h=r.Remove;return xu(Ou,null,(function(r){var d=r.css,g=r.cx;return xu(p,{data:i,innerProps:Il(Il({},a),{},{className:g(d(s("multiValue",t)),o({"multi-value":!0,"multi-value--is-disabled":u},n))}),selectProps:c},xu(f,{data:i,innerProps:{className:g(d(s("multiValueLabel",t)),o({"multi-value__label":!0},n))},selectProps:c},e),xu(h,{data:i,innerProps:Il({className:g(d(s("multiValueRemove",t)),o({"multi-value__remove":!0},n))},l),selectProps:c}))}))};Al.defaultProps={cropWithEllipsis:!0};function Nl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nl(Object(n),!0).forEach((function(e){Nu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}for(var Ll={ClearIndicator:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return xu("div",Iu({},i,{css:o("clearIndicator",t),className:r({indicator:!0,"clear-indicator":!0},n)}),e||xu(dl,null))},Control:function(t){var e=t.children,n=t.cx,r=t.getStyles,o=t.className,i=t.isDisabled,s=t.isFocused,a=t.innerRef,u=t.innerProps,l=t.menuIsOpen;return xu("div",Iu({ref:a,css:r("control",t),className:n({control:!0,"control--is-disabled":i,"control--is-focused":s,"control--menu-is-open":l},o)},u),e)},DropdownIndicator:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return xu("div",Iu({},i,{css:o("dropdownIndicator",t),className:r({indicator:!0,"dropdown-indicator":!0},n)}),e||xu(gl,null))},DownChevron:gl,CrossIcon:dl,Group:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.Heading,s=t.headingProps,a=t.label,u=t.theme,l=t.selectProps;return xu("div",{css:o("group",t),className:r({group:!0},n)},xu(i,Iu({},s,{selectProps:l,theme:u,getStyles:o,cx:r}),a),xu("div",null,e))},GroupHeading:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.theme,i=(t.selectProps,Cu(t,["className","cx","getStyles","theme","selectProps"]));return xu("div",Iu({css:r("groupHeading",Sl({theme:o},i)),className:n({"group-heading":!0},e)},i))},IndicatorsContainer:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles;return xu("div",{css:o("indicatorsContainer",t),className:r({indicators:!0},n)},e)},IndicatorSeparator:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerProps;return xu("span",Iu({},o,{css:r("indicatorSeparator",t),className:n({"indicator-separator":!0},e)}))},Input:function(t){var e=t.className,n=t.cx,r=t.getStyles,o=t.innerRef,i=t.isHidden,s=t.isDisabled,a=t.theme,u=(t.selectProps,Cu(t,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]));return xu("div",{css:r("input",Ol({theme:a},u))},xu(Du.a,Iu({className:n({input:!0},e),inputRef:o,inputStyle:Pl(i),disabled:s},u)))},LoadingIndicator:wl,Menu:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerRef,s=t.innerProps;return xu("div",Iu({css:o("menu",t),className:r({menu:!0},n)},s,{ref:i}),e)},MenuList:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.isMulti,s=t.innerRef,a=t.innerProps;return xu("div",Iu({css:o("menuList",t),className:r({"menu-list":!0,"menu-list--is-multi":i},n),ref:s},a),e)},MenuPortal:il,LoadingMessage:ol,NoOptionsMessage:rl,MultiValue:Al,MultiValueContainer:Rl,MultiValueLabel:Ml,MultiValueRemove:function(t){var e=t.children,n=t.innerProps;return xu("div",n,e||xu(dl,{size:14}))},Option:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.isDisabled,s=t.isFocused,a=t.isSelected,u=t.innerRef,l=t.innerProps;return xu("div",Iu({css:o("option",t),className:r({option:!0,"option--is-disabled":i,"option--is-focused":s,"option--is-selected":a},n),ref:u},l),e)},Placeholder:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps;return xu("div",Iu({css:o("placeholder",t),className:r({placeholder:!0},n)},i),e)},SelectContainer:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.innerProps,s=t.isDisabled,a=t.isRtl;return xu("div",Iu({css:o("container",t),className:r({"--is-disabled":s,"--is-rtl":a},n)},i),e)},SingleValue:function(t){var e=t.children,n=t.className,r=t.cx,o=t.getStyles,i=t.isDisabled,s=t.innerProps;return xu("div",Iu({css:o("singleValue",t),className:r({"single-value":!0,"single-value--is-disabled":i},n)},s),e)},ValueContainer:function(t){var e=t.children,n=t.className,r=t.cx,o=t.isMulti,i=t.getStyles,s=t.hasValue;return xu("div",{css:i("valueContainer",t),className:r({"value-container":!0,"value-container--is-multi":o,"value-container--has-value":s},n)},e)}},Dl=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],jl=new RegExp("["+Dl.map((function(t){return t.letters})).join("")+"]","g"),Fl={},Bl=0;Bl<Dl.length;Bl++)for(var zl=Dl[Bl],Vl=0;Vl<zl.letters.length;Vl++)Fl[zl.letters[Vl]]=zl.base;var Ul=function(t){return t.replace(jl,(function(t){return Fl[t]}))};function Hl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Gl=function(t){return t.replace(/^\s+|\s+$/g,"")},ql=function(t){return"".concat(t.label," ").concat(t.value)};var Wl={name:"1laao21-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;"},Yl=function(t){return xu("span",Iu({css:Wl},t))};function Xl(t){t.in,t.out,t.onExited,t.appear,t.enter,t.exit;var e=t.innerRef,n=(t.emotion,Cu(t,["in","out","onExited","appear","enter","exit","innerRef","emotion"]));return xu("input",Iu({ref:e},n,{css:_u({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"")}))}function $l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Da(this,n)}}var Kl=function(t){Aa(n,t);var e=$l(n);function n(){return Ia(this,n),e.apply(this,arguments)}return Ra(n,[{key:"componentDidMount",value:function(){this.props.innerRef(Object(r.findDOMNode)(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),n}(r.Component),Zl=["boxSizing","height","overflow","paddingRight","position"],Jl={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Ql(t){t.preventDefault()}function tc(t){t.stopPropagation()}function ec(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;0===t?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function nc(){return"ontouchstart"in window||navigator.maxTouchPoints}function rc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Da(this,n)}}var oc=!(!window.document||!window.document.createElement),ic=0,sc=function(t){Aa(n,t);var e=rc(n);function n(){var t;Ia(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).originalStyles={},t.listenerOptions={capture:!1,passive:!1},t}return Ra(n,[{key:"componentDidMount",value:function(){var t=this;if(oc){var e=this.props,n=e.accountForScrollbars,r=e.touchScrollTarget,o=document.body,i=o&&o.style;if(n&&Zl.forEach((function(e){var n=i&&i[e];t.originalStyles[e]=n})),n&&ic<1){var s=parseInt(this.originalStyles.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,u=window.innerWidth-a+s||0;Object.keys(Jl).forEach((function(t){var e=Jl[t];i&&(i[t]=e)})),i&&(i.paddingRight="".concat(u,"px"))}o&&nc()&&(o.addEventListener("touchmove",Ql,this.listenerOptions),r&&(r.addEventListener("touchstart",ec,this.listenerOptions),r.addEventListener("touchmove",tc,this.listenerOptions))),ic+=1}}},{key:"componentWillUnmount",value:function(){var t=this;if(oc){var e=this.props,n=e.accountForScrollbars,r=e.touchScrollTarget,o=document.body,i=o&&o.style;ic=Math.max(ic-1,0),n&&ic<1&&Zl.forEach((function(e){var n=t.originalStyles[e];i&&(i[e]=n)})),o&&nc()&&(o.removeEventListener("touchmove",Ql,this.listenerOptions),r&&(r.removeEventListener("touchstart",ec,this.listenerOptions),r.removeEventListener("touchmove",tc,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),n}(r.Component);function ac(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Da(this,n)}}sc.defaultProps={accountForScrollbars:!0};var uc={name:"1dsbpcp",styles:"position:fixed;left:0;bottom:0;right:0;top:0;"},lc=function(t){Aa(n,t);var e=ac(n);function n(){var t;Ia(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={touchScrollTarget:null},t.getScrollTarget=function(e){e!==t.state.touchScrollTarget&&t.setState({touchScrollTarget:e})},t.blurSelectInput=function(){document.activeElement&&document.activeElement.blur()},t}return Ra(n,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.isEnabled,r=this.state.touchScrollTarget;return n?xu("div",null,xu("div",{onClick:this.blurSelectInput,css:uc}),xu(Kl,{innerRef:this.getScrollTarget},e),r?xu(sc,{touchScrollTarget:r}):null):e}}]),n}(r.PureComponent);function cc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Da(this,n)}}var pc=function(t){Aa(n,t);var e=cc(n);function n(){var t;Ia(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).isBottom=!1,t.isTop=!1,t.scrollTarget=void 0,t.touchStart=void 0,t.cancelScroll=function(t){t.preventDefault(),t.stopPropagation()},t.handleEventDelta=function(e,n){var r=t.props,o=r.onBottomArrive,i=r.onBottomLeave,s=r.onTopArrive,a=r.onTopLeave,u=t.scrollTarget,l=u.scrollTop,c=u.scrollHeight,p=u.clientHeight,f=t.scrollTarget,h=n>0,d=c-p-l,g=!1;d>n&&t.isBottom&&(i&&i(e),t.isBottom=!1),h&&t.isTop&&(a&&a(e),t.isTop=!1),h&&n>d?(o&&!t.isBottom&&o(e),f.scrollTop=c,g=!0,t.isBottom=!0):!h&&-n>l&&(s&&!t.isTop&&s(e),f.scrollTop=0,g=!0,t.isTop=!0),g&&t.cancelScroll(e)},t.onWheel=function(e){t.handleEventDelta(e,e.deltaY)},t.onTouchStart=function(e){t.touchStart=e.changedTouches[0].clientY},t.onTouchMove=function(e){var n=t.touchStart-e.changedTouches[0].clientY;t.handleEventDelta(e,n)},t.getScrollTarget=function(e){t.scrollTarget=e},t}return Ra(n,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(t){t&&("function"==typeof t.addEventListener&&t.addEventListener("wheel",this.onWheel,!1),"function"==typeof t.addEventListener&&t.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof t.addEventListener&&t.addEventListener("touchmove",this.onTouchMove,!1))}},{key:"stopListening",value:function(t){t&&("function"==typeof t.removeEventListener&&t.removeEventListener("wheel",this.onWheel,!1),"function"==typeof t.removeEventListener&&t.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof t.removeEventListener&&t.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return r.default.createElement(Kl,{innerRef:this.getScrollTarget},this.props.children)}}]),n}(r.Component);function fc(t){var e=t.isEnabled,n=void 0===e||e,o=Cu(t,["isEnabled"]);return n?r.default.createElement(pc,o):o.children}var hc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isSearchable,r=e.isMulti,o=e.label,i=e.isDisabled,s=e.tabSelectsValue;switch(t){case"menu":return"Use Up and Down to choose options".concat(i?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(o||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}},dc=function(t,e){var n=e.value,r=e.isDisabled;if(n)switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"select-option":return"option ".concat(n,r?" is disabled. Select another option.":", selected.")}},gc=function(t){return!!t.isDisabled};var yc={clearIndicator:vl,container:function(t){var e=t.isDisabled;return{label:"container",direction:t.isRtl?"rtl":null,pointerEvents:e?"none":null,position:"relative"}},control:function(t){var e=t.isDisabled,n=t.isFocused,r=t.theme,o=r.colors,i=r.borderRadius,s=r.spacing;return{label:"control",alignItems:"center",backgroundColor:e?o.neutral5:o.neutral0,borderColor:e?o.neutral10:n?o.primary:o.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(o.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?o.primary:o.neutral30}}},dropdownIndicator:ml,group:function(t){var e=t.theme.spacing;return{paddingBottom:2*e.baseUnit,paddingTop:2*e.baseUnit}},groupHeading:function(t){var e=t.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*e.baseUnit,paddingRight:3*e.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing.baseUnit,o=n.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:e?o.neutral10:o.neutral20,marginBottom:2*r,marginTop:2*r,width:1}},input:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing,o=n.colors;return{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,visibility:e?"hidden":"visible",color:o.neutral80}},loadingIndicator:function(t){var e=t.isFocused,n=t.size,r=t.theme,o=r.colors,i=r.spacing.baseUnit;return{label:"loadingIndicator",color:e?o.neutral60:o.neutral20,display:"flex",padding:2*i,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:nl,menu:function(t){var e,n=t.placement,r=t.theme,o=r.borderRadius,i=r.spacing,s=r.colors;return Nu(e={label:"menu"},function(t){return t?{bottom:"top",top:"bottom"}[t]:"bottom"}(n),"100%"),Nu(e,"backgroundColor",s.neutral0),Nu(e,"borderRadius",o),Nu(e,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),Nu(e,"marginBottom",i.menuGutter),Nu(e,"marginTop",i.menuGutter),Nu(e,"position","absolute"),Nu(e,"width","100%"),Nu(e,"zIndex",1),e},menuList:function(t){var e=t.maxHeight,n=t.theme.spacing.baseUnit;return{maxHeight:e,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(t){var e=t.rect,n=t.offset,r=t.position;return{left:e.left,position:r,top:n,width:e.width,zIndex:1}},multiValue:function(t){var e=t.theme,n=e.spacing,r=e.borderRadius;return{label:"multiValue",backgroundColor:e.colors.neutral10,borderRadius:r/2,display:"flex",margin:n.baseUnit/2,minWidth:0}},multiValueLabel:function(t){var e=t.theme,n=e.borderRadius,r=e.colors,o=t.cropWithEllipsis;return{borderRadius:n/2,color:r.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:o?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(t){var e=t.theme,n=e.spacing,r=e.borderRadius,o=e.colors;return{alignItems:"center",borderRadius:r/2,backgroundColor:t.isFocused&&o.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}}},noOptionsMessage:el,option:function(t){var e=t.isDisabled,n=t.isFocused,r=t.isSelected,o=t.theme,i=o.spacing,s=o.colors;return{label:"option",backgroundColor:r?s.primary:n?s.primary25:"transparent",color:e?s.neutral20:r?s.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!e&&(r?s.primary:s.primary50)}}},placeholder:function(t){var e=t.theme,n=e.spacing;return{label:"placeholder",color:e.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(t){var e=t.isDisabled,n=t.theme,r=n.spacing,o=n.colors;return{label:"singleValue",color:e?o.neutral40:o.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,maxWidth:"calc(100% - ".concat(2*r.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(t){var e=t.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(e.baseUnit/2,"px ").concat(2*e.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}};var mc={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}};function vc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vc(Object(n),!0).forEach((function(e){Nu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Da(this,n)}}var wc={backspaceRemovesValue:!0,blurInputOnSelect:Wu(),captureMenuScroll:!Wu(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(t){return function(e,n){var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hl(Object(n),!0).forEach((function(e){Nu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({ignoreCase:!0,ignoreAccents:!0,stringify:ql,trim:!0,matchFrom:"any"},t),o=r.ignoreCase,i=r.ignoreAccents,s=r.stringify,a=r.trim,u=r.matchFrom,l=a?Gl(n):n,c=a?Gl(s(e)):s(e);return o&&(l=l.toLowerCase(),c=c.toLowerCase()),i&&(l=Ul(l),c=Ul(c)),"start"===u?c.substr(0,l.length)===l:c.indexOf(l)>-1}}(),formatGroupLabel:function(t){return t.label},getOptionLabel:function(t){return t.label},getOptionValue:function(t){return t.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:gc,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(t){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var e=t.count;return"".concat(e," result").concat(1!==e?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0},xc=1,Sc=function(t){Aa(n,t);var e=_c(n);function n(t){var r;Ia(this,n),(r=e.call(this,t)).state={ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]},r.blockOptionHover=!1,r.isComposing=!1,r.clearFocusValueOnUpdate=!1,r.commonProps=void 0,r.components=void 0,r.hasGroups=!1,r.initialTouchX=0,r.initialTouchY=0,r.inputIsHiddenAfterUpdate=void 0,r.instancePrefix="",r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.controlRef=null,r.getControlRef=function(t){r.controlRef=t},r.focusedOptionRef=null,r.getFocusedOptionRef=function(t){r.focusedOptionRef=t},r.menuListRef=null,r.getMenuListRef=function(t){r.menuListRef=t},r.inputRef=null,r.getInputRef=function(t){r.inputRef=t},r.cacheComponents=function(t){var e;r.components=(e={components:t},kl(kl({},Ll),e.components))},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(t,e){var n=r.props,o=n.onChange,i=n.name;o(t,bc(bc({},e),{},{name:i}))},r.setValue=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set-value",n=arguments.length>2?arguments[2]:void 0,o=r.props,i=o.closeMenuOnSelect,s=o.isMulti;r.onInputChange("",{action:"set-value"}),i&&(r.inputIsHiddenAfterUpdate=!s,r.onMenuClose()),r.clearFocusValueOnUpdate=!0,r.onChange(t,{action:e,option:n})},r.selectOption=function(t){var e=r.props,n=e.blurInputOnSelect,o=e.isMulti,i=r.state.selectValue;if(o)if(r.isOptionSelected(t,i)){var s=r.getOptionValue(t);r.setValue(i.filter((function(t){return r.getOptionValue(t)!==s})),"deselect-option",t),r.announceAriaLiveSelection({event:"deselect-option",context:{value:r.getOptionLabel(t)}})}else r.isOptionDisabled(t,i)?r.announceAriaLiveSelection({event:"select-option",context:{value:r.getOptionLabel(t),isDisabled:!0}}):(r.setValue([].concat(Au(i),[t]),"select-option",t),r.announceAriaLiveSelection({event:"select-option",context:{value:r.getOptionLabel(t)}}));else r.isOptionDisabled(t,i)?r.announceAriaLiveSelection({event:"select-option",context:{value:r.getOptionLabel(t),isDisabled:!0}}):(r.setValue(t,"select-option"),r.announceAriaLiveSelection({event:"select-option",context:{value:r.getOptionLabel(t)}}));n&&r.blurInput()},r.removeValue=function(t){var e=r.state.selectValue,n=r.getOptionValue(t),o=e.filter((function(t){return r.getOptionValue(t)!==n}));r.onChange(o.length?o:null,{action:"remove-value",removedValue:t}),r.announceAriaLiveSelection({event:"remove-value",context:{value:t?r.getOptionLabel(t):""}}),r.focusInput()},r.clearValue=function(){r.onChange(null,{action:"clear"})},r.popValue=function(){var t=r.state.selectValue,e=t[t.length-1],n=t.slice(0,t.length-1);r.announceAriaLiveSelection({event:"pop-value",context:{value:e?r.getOptionLabel(e):""}}),r.onChange(n.length?n:null,{action:"pop-value",removedValue:e})},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Bu.apply(void 0,[r.props.classNamePrefix].concat(e))},r.getOptionLabel=function(t){return r.props.getOptionLabel(t)},r.getOptionValue=function(t){return r.props.getOptionValue(t)},r.getStyles=function(t,e){var n=yc[t](e);n.boxSizing="border-box";var o=r.props.styles[t];return o?o(n,e):n},r.getElementId=function(t){return"".concat(r.instancePrefix,"-").concat(t)},r.getActiveDescendentId=function(){var t=r.props.menuIsOpen,e=r.state,n=e.menuOptions,o=e.focusedOption;if(o&&t){var i=n.focusable.indexOf(o),s=n.render[i];return s&&s.key}},r.announceAriaLiveSelection=function(t){var e=t.event,n=t.context;r.setState({ariaLiveSelection:dc(e,n)})},r.announceAriaLiveContext=function(t){var e=t.event,n=t.context;r.setState({ariaLiveContext:hc(e,bc(bc({},n),{},{label:r.props["aria-label"]}))})},r.onMenuMouseDown=function(t){0===t.button&&(t.stopPropagation(),t.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(t){r.blockOptionHover=!1},r.onControlMouseDown=function(t){var e=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&r.onMenuClose():e&&r.openMenu("first"):(e&&(r.openAfterFocus=!0),r.focusInput()),"INPUT"!==t.target.tagName&&"TEXTAREA"!==t.target.tagName&&t.preventDefault()},r.onDropdownIndicatorMouseDown=function(t){if(!(t&&"mousedown"===t.type&&0!==t.button||r.props.isDisabled)){var e=r.props,n=e.isMulti,o=e.menuIsOpen;r.focusInput(),o?(r.inputIsHiddenAfterUpdate=!n,r.onMenuClose()):r.openMenu("first"),t.preventDefault(),t.stopPropagation()}},r.onClearIndicatorMouseDown=function(t){t&&"mousedown"===t.type&&0!==t.button||(r.clearValue(),t.stopPropagation(),r.openAfterFocus=!1,"touchend"===t.type?r.focusInput():setTimeout((function(){return r.focusInput()})))},r.onScroll=function(t){"boolean"==typeof r.props.closeMenuOnScroll?t.target instanceof HTMLElement&&Vu(t.target)&&r.props.onMenuClose():"function"==typeof r.props.closeMenuOnScroll&&r.props.closeMenuOnScroll(t)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(t){var e=t.touches,n=e&&e.item(0);n&&(r.initialTouchX=n.clientX,r.initialTouchY=n.clientY,r.userIsDragging=!1)},r.onTouchMove=function(t){var e=t.touches,n=e&&e.item(0);if(n){var o=Math.abs(n.clientX-r.initialTouchX),i=Math.abs(n.clientY-r.initialTouchY);r.userIsDragging=o>5||i>5}},r.onTouchEnd=function(t){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(t.target)&&r.menuListRef&&!r.menuListRef.contains(t.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(t){r.userIsDragging||r.onControlMouseDown(t)},r.onClearIndicatorTouchEnd=function(t){r.userIsDragging||r.onClearIndicatorMouseDown(t)},r.onDropdownIndicatorTouchEnd=function(t){r.userIsDragging||r.onDropdownIndicatorMouseDown(t)},r.handleInputChange=function(t){var e=t.currentTarget.value;r.inputIsHiddenAfterUpdate=!1,r.onInputChange(e,{action:"input-change"}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(t){var e=r.props,n=e.isSearchable,o=e.isMulti;r.props.onFocus&&r.props.onFocus(t),r.inputIsHiddenAfterUpdate=!1,r.announceAriaLiveContext({event:"input",context:{isSearchable:n,isMulti:o}}),r.setState({isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(t){r.menuListRef&&r.menuListRef.contains(document.activeElement)?r.inputRef.focus():(r.props.onBlur&&r.props.onBlur(t),r.onInputChange("",{action:"input-blur"}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1}))},r.onOptionHover=function(t){r.blockOptionHover||r.state.focusedOption===t||r.setState({focusedOption:t})},r.shouldHideSelectedOptions=function(){var t=r.props,e=t.hideSelectedOptions,n=t.isMulti;return void 0===e?n:e},r.onKeyDown=function(t){var e=r.props,n=e.isMulti,o=e.backspaceRemovesValue,i=e.escapeClearsValue,s=e.inputValue,a=e.isClearable,u=e.isDisabled,l=e.menuIsOpen,c=e.onKeyDown,p=e.tabSelectsValue,f=e.openMenuOnFocus,h=r.state,d=h.focusedOption,g=h.focusedValue,y=h.selectValue;if(!(u||"function"==typeof c&&(c(t),t.defaultPrevented))){switch(r.blockOptionHover=!0,t.key){case"ArrowLeft":if(!n||s)return;r.focusValue("previous");break;case"ArrowRight":if(!n||s)return;r.focusValue("next");break;case"Delete":case"Backspace":if(s)return;if(g)r.removeValue(g);else{if(!o)return;n?r.popValue():a&&r.clearValue()}break;case"Tab":if(r.isComposing)return;if(t.shiftKey||!l||!p||!d||f&&r.isOptionSelected(d,y))return;r.selectOption(d);break;case"Enter":if(229===t.keyCode)break;if(l){if(!d)return;if(r.isComposing)return;r.selectOption(d);break}return;case"Escape":l?(r.inputIsHiddenAfterUpdate=!1,r.onInputChange("",{action:"menu-close"}),r.onMenuClose()):a&&i&&r.clearValue();break;case" ":if(s)return;if(!l){r.openMenu("first");break}if(!d)return;r.selectOption(d);break;case"ArrowUp":l?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":l?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!l)return;r.focusOption("pageup");break;case"PageDown":if(!l)return;r.focusOption("pagedown");break;case"Home":if(!l)return;r.focusOption("first");break;case"End":if(!l)return;r.focusOption("last");break;default:return}t.preventDefault()}},r.buildMenuOptions=function(t,e){var n=t.inputValue,o=void 0===n?"":n,i=t.options,s=function(t,n){var i=r.isOptionDisabled(t,e),s=r.isOptionSelected(t,e),a=r.getOptionLabel(t),u=r.getOptionValue(t);if(!(r.shouldHideSelectedOptions()&&s||!r.filterOption({label:a,value:u,data:t},o))){var l=i?void 0:function(){return r.onOptionHover(t)},c=i?void 0:function(){return r.selectOption(t)},p="".concat(r.getElementId("option"),"-").concat(n);return{innerProps:{id:p,onClick:c,onMouseMove:l,onMouseOver:l,tabIndex:-1},data:t,isDisabled:i,isSelected:s,key:p,label:a,type:"option",value:u}}};return i.reduce((function(t,e,n){if(e.options){r.hasGroups||(r.hasGroups=!0);var o=e.options.map((function(e,r){var o=s(e,"".concat(n,"-").concat(r));return o&&t.focusable.push(e),o})).filter(Boolean);if(o.length){var i="".concat(r.getElementId("group"),"-").concat(n);t.render.push({type:"group",key:i,data:e,options:o})}}else{var a=s(e,"".concat(n));a&&(t.render.push(a),t.focusable.push(e))}return t}),{render:[],focusable:[]})};var o=t.value;r.cacheComponents=za(r.cacheComponents,cl).bind(La(r)),r.cacheComponents(t.components),r.instancePrefix="react-select-"+(r.props.instanceId||++xc);var i=zu(o);r.buildMenuOptions=za(r.buildMenuOptions,(function(t,e){var n=Mu(t,2),r=n[0],o=n[1],i=Mu(e,2),s=i[0];return o===i[1]&&r.inputValue===s.inputValue&&r.options===s.options})).bind(La(r));var s=t.menuIsOpen?r.buildMenuOptions(t,i):{render:[],focusable:[]};return r.state.menuOptions=s,r.state.selectValue=i,r}return Ra(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.props,n=e.options,r=e.value,o=e.menuIsOpen,i=e.inputValue;if(this.cacheComponents(t.components),t.value!==r||t.options!==n||t.menuIsOpen!==o||t.inputValue!==i){var s=zu(t.value),a=t.menuIsOpen?this.buildMenuOptions(t,s):{render:[],focusable:[]},u=this.getNextFocusedValue(s),l=this.getNextFocusedOption(a.focusable);this.setState({menuOptions:a,selectValue:s,focusedOption:l,focusedValue:u})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(t){var e,n,r,o,i,s=this.props,a=s.isDisabled,u=s.menuIsOpen,l=this.state.isFocused;(l&&!a&&t.isDisabled||l&&u&&!t.menuIsOpen)&&this.focusInput(),l&&a&&!t.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(e=this.menuListRef,n=this.focusedOptionRef,r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),i=n.offsetHeight/3,o.bottom+i>r.bottom?Hu(e,Math.min(n.offsetTop+n.clientHeight-e.offsetHeight+i,e.scrollHeight)):o.top-i<r.top&&Hu(e,Math.max(n.offsetTop-i,0)),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var t=this.props,e=t.isSearchable,n=t.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:e,isMulti:n}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(t,e){this.props.onInputChange(t,e)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(t){var e=this,n=this.state,r=n.selectValue,o=n.isFocused,i=this.buildMenuOptions(this.props,r),s=this.props,a=s.isMulti,u=s.tabSelectsValue,l="first"===t?0:i.focusable.length-1;if(!a){var c=i.focusable.indexOf(r[0]);c>-1&&(l=c)}this.scrollToFocusedOptionOnUpdate=!(o&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.setState({menuOptions:i,focusedValue:null,focusedOption:i.focusable[l]},(function(){e.onMenuOpen(),e.announceAriaLiveContext({event:"menu",context:{tabSelectsValue:u}})}))}},{key:"focusValue",value:function(t){var e=this.props,n=e.isMulti,r=e.isSearchable,o=this.state,i=o.selectValue,s=o.focusedValue;if(n){this.setState({focusedOption:null});var a=i.indexOf(s);s||(a=-1,this.announceAriaLiveContext({event:"value"}));var u=i.length-1,l=-1;if(i.length){switch(t){case"previous":l=0===a?0:-1===a?u:a-1;break;case"next":a>-1&&a<u&&(l=a+1)}-1===l&&this.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:n}}),this.setState({inputIsHidden:-1!==l,focusedValue:i[l]})}}}},{key:"focusOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",e=this.props,n=e.pageSize,r=e.tabSelectsValue,o=this.state,i=o.focusedOption,s=o.menuOptions,a=s.focusable;if(a.length){var u=0,l=a.indexOf(i);i||(l=-1,this.announceAriaLiveContext({event:"menu",context:{tabSelectsValue:r}})),"up"===t?u=l>0?l-1:a.length-1:"down"===t?u=(l+1)%a.length:"pageup"===t?(u=l-n)<0&&(u=0):"pagedown"===t?(u=l+n)>a.length-1&&(u=a.length-1):"last"===t&&(u=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[u],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:gc(a[u]),tabSelectsValue:r}})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(mc):bc(bc({},mc),this.props.theme):mc}},{key:"getCommonProps",value:function(){var t=this.clearValue,e=this.cx,n=this.getStyles,r=this.getValue,o=this.setValue,i=this.selectOption,s=this.props,a=s.isMulti,u=s.isRtl,l=s.options;return{cx:e,clearValue:t,getStyles:n,getValue:r,hasValue:this.hasValue(),isMulti:a,isRtl:u,options:l,selectOption:i,setValue:o,selectProps:s,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(t){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var e=this.state,n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}},{key:"getNextFocusedOption",value:function(t){var e=this.state.focusedOption;return e&&t.indexOf(e)>-1?e:t[0]}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var t=this.props,e=t.isClearable,n=t.isMulti;return void 0===e?n:e}},{key:"isOptionDisabled",value:function(t,e){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(t,e)}},{key:"isOptionSelected",value:function(t,e){var n=this;if(e.indexOf(t)>-1)return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(t,e);var r=this.getOptionValue(t);return e.some((function(t){return n.getOptionValue(t)===r}))}},{key:"filterOption",value:function(t,e){return!this.props.filterOption||this.props.filterOption(t,e)}},{key:"formatOptionLabel",value:function(t,e){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(t,{context:e,inputValue:n,selectValue:r})}return this.getOptionLabel(t)}},{key:"formatGroupLabel",value:function(t){return this.props.formatGroupLabel(t)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"constructAriaLiveMessage",value:function(){var t=this.state,e=t.ariaLiveContext,n=t.selectValue,r=t.focusedValue,o=t.focusedOption,i=this.props,s=i.options,a=i.menuIsOpen,u=i.inputValue,l=i.screenReaderStatus,c=r?function(t){var e=t.focusedValue,n=t.getOptionLabel,r=t.selectValue;return"value ".concat(n(e)," focused, ").concat(r.indexOf(e)+1," of ").concat(r.length,".")}({focusedValue:r,getOptionLabel:this.getOptionLabel,selectValue:n}):"",p=o&&a?function(t){var e=t.focusedOption,n=t.getOptionLabel,r=t.options;return"option ".concat(n(e)," focused").concat(e.isDisabled?" disabled":"",", ").concat(r.indexOf(e)+1," of ").concat(r.length,".")}({focusedOption:o,getOptionLabel:this.getOptionLabel,options:s}):"",f=function(t){var e=t.inputValue,n=t.screenReaderMessage;return"".concat(n).concat(e?" for search term "+e:"",".")}({inputValue:u,screenReaderMessage:l({count:this.countOptions()})});return"".concat(c," ").concat(p," ").concat(f," ").concat(e)}},{key:"renderInput",value:function(){var t=this.props,e=t.isDisabled,n=t.isSearchable,o=t.inputId,i=t.inputValue,s=t.tabIndex,a=t.form,u=this.components.Input,l=this.state.inputIsHidden,c=o||this.getElementId("input"),p={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};if(!n)return r.default.createElement(Xl,Iu({id:c,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ju,onFocus:this.onInputFocus,readOnly:!0,disabled:e,tabIndex:s,form:a,value:""},p));var f=this.commonProps,h=f.cx,d=f.theme,g=f.selectProps;return r.default.createElement(u,Iu({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:h,getStyles:this.getStyles,id:c,innerRef:this.getInputRef,isDisabled:e,isHidden:l,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:g,spellCheck:"false",tabIndex:s,form:a,theme:d,type:"text",value:i},p))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,e=this.components,n=e.MultiValue,o=e.MultiValueContainer,i=e.MultiValueLabel,s=e.MultiValueRemove,a=e.SingleValue,u=e.Placeholder,l=this.commonProps,c=this.props,p=c.controlShouldRenderValue,f=c.isDisabled,h=c.isMulti,d=c.inputValue,g=c.placeholder,y=this.state,m=y.selectValue,v=y.focusedValue,b=y.isFocused;if(!this.hasValue()||!p)return d?null:r.default.createElement(u,Iu({},l,{key:"placeholder",isDisabled:f,isFocused:b}),g);if(h)return m.map((function(e,a){var u=e===v;return r.default.createElement(n,Iu({},l,{components:{Container:o,Label:i,Remove:s},isFocused:u,isDisabled:f,key:"".concat(t.getOptionValue(e)).concat(a),index:a,removeProps:{onClick:function(){return t.removeValue(e)},onTouchEnd:function(){return t.removeValue(e)},onMouseDown:function(t){t.preventDefault(),t.stopPropagation()}},data:e}),t.formatOptionLabel(e,"value"))}));if(d)return null;var _=m[0];return r.default.createElement(a,Iu({},l,{data:_,isDisabled:f}),this.formatOptionLabel(_,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.components.ClearIndicator,e=this.commonProps,n=this.props,o=n.isDisabled,i=n.isLoading,s=this.state.isFocused;if(!this.isClearable()||!t||o||!this.hasValue()||i)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return r.default.createElement(t,Iu({},e,{innerProps:a,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var t=this.components.LoadingIndicator,e=this.commonProps,n=this.props,o=n.isDisabled,i=n.isLoading,s=this.state.isFocused;if(!t||!i)return null;return r.default.createElement(t,Iu({},e,{innerProps:{"aria-hidden":"true"},isDisabled:o,isFocused:s}))}},{key:"renderIndicatorSeparator",value:function(){var t=this.components,e=t.DropdownIndicator,n=t.IndicatorSeparator;if(!e||!n)return null;var o=this.commonProps,i=this.props.isDisabled,s=this.state.isFocused;return r.default.createElement(n,Iu({},o,{isDisabled:i,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var t=this.components.DropdownIndicator;if(!t)return null;var e=this.commonProps,n=this.props.isDisabled,o=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return r.default.createElement(t,Iu({},e,{innerProps:i,isDisabled:n,isFocused:o}))}},{key:"renderMenu",value:function(){var t=this,e=this.components,n=e.Group,o=e.GroupHeading,i=e.Menu,s=e.MenuList,a=e.MenuPortal,u=e.LoadingMessage,l=e.NoOptionsMessage,c=e.Option,p=this.commonProps,f=this.state,h=f.focusedOption,d=f.menuOptions,g=this.props,y=g.captureMenuScroll,m=g.inputValue,v=g.isLoading,b=g.loadingMessage,_=g.minMenuHeight,w=g.maxMenuHeight,x=g.menuIsOpen,S=g.menuPlacement,E=g.menuPosition,O=g.menuPortalTarget,P=g.menuShouldBlockScroll,C=g.menuShouldScrollIntoView,I=g.noOptionsMessage,T=g.onMenuScrollToTop,R=g.onMenuScrollToBottom;if(!x)return null;var M,A=function(e){var n=h===e.data;return e.innerRef=n?t.getFocusedOptionRef:void 0,r.default.createElement(c,Iu({},p,e,{isFocused:n}),t.formatOptionLabel(e.data,"menu"))};if(this.hasOptions())M=d.render.map((function(e){if("group"===e.type){e.type;var i=Cu(e,["type"]),s="".concat(e.key,"-heading");return r.default.createElement(n,Iu({},p,i,{Heading:o,headingProps:{id:s,data:e.data},label:t.formatGroupLabel(e.data)}),e.options.map((function(t){return A(t)})))}if("option"===e.type)return A(e)}));else if(v){var N=b({inputValue:m});if(null===N)return null;M=r.default.createElement(u,p,N)}else{var k=I({inputValue:m});if(null===k)return null;M=r.default.createElement(l,p,k)}var L={minMenuHeight:_,maxMenuHeight:w,menuPlacement:S,menuPosition:E,menuShouldScrollIntoView:C},D=r.default.createElement(Qu,Iu({},p,L),(function(e){var n=e.ref,o=e.placerProps,a=o.placement,u=o.maxHeight;return r.default.createElement(i,Iu({},p,L,{innerRef:n,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:v,placement:a}),r.default.createElement(fc,{isEnabled:y,onTopArrive:T,onBottomArrive:R},r.default.createElement(lc,{isEnabled:P},r.default.createElement(s,Iu({},p,{innerRef:t.getMenuListRef,isLoading:v,maxHeight:u}),M))))}));return O||"fixed"===E?r.default.createElement(a,Iu({},p,{appendTo:O,controlElement:this.controlRef,menuPlacement:S,menuPosition:E}),D):D}},{key:"renderFormField",value:function(){var t=this,e=this.props,n=e.delimiter,o=e.isDisabled,i=e.isMulti,s=e.name,a=this.state.selectValue;if(s&&!o){if(i){if(n){var u=a.map((function(e){return t.getOptionValue(e)})).join(n);return r.default.createElement("input",{name:s,type:"hidden",value:u})}var l=a.length>0?a.map((function(e,n){return r.default.createElement("input",{key:"i-".concat(n),name:s,type:"hidden",value:t.getOptionValue(e)})})):r.default.createElement("input",{name:s,type:"hidden"});return r.default.createElement("div",null,l)}var c=a[0]?this.getOptionValue(a[0]):"";return r.default.createElement("input",{name:s,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?r.default.createElement(Yl,{"aria-live":"polite"},r.default.createElement("span",{id:"aria-selection-event"}," ",this.state.ariaLiveSelection),r.default.createElement("span",{id:"aria-context"}," ",this.constructAriaLiveMessage())):null}},{key:"render",value:function(){var t=this.components,e=t.Control,n=t.IndicatorsContainer,o=t.SelectContainer,i=t.ValueContainer,s=this.props,a=s.className,u=s.id,l=s.isDisabled,c=s.menuIsOpen,p=this.state.isFocused,f=this.commonProps=this.getCommonProps();return r.default.createElement(o,Iu({},f,{className:a,innerProps:{id:u,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:p}),this.renderLiveRegion(),r.default.createElement(e,Iu({},f,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:p,menuIsOpen:c}),r.default.createElement(i,Iu({},f,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),r.default.createElement(n,Iu({},f,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}]),n}(r.Component);Sc.defaultProps=wc;n(383);function Ec(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Da(this,n)}}var Oc={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null};function Pc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ja(t);if(e){var o=ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Da(this,n)}}r.Component;var Cc=function(t){var e,n;return n=e=function(e){Aa(o,e);var n=Ec(o);function o(){var t;Ia(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=n.call.apply(n,[this].concat(r))).select=void 0,t.state={inputValue:void 0!==t.props.inputValue?t.props.inputValue:t.props.defaultInputValue,menuIsOpen:void 0!==t.props.menuIsOpen?t.props.menuIsOpen:t.props.defaultMenuIsOpen,value:void 0!==t.props.value?t.props.value:t.props.defaultValue},t.onChange=function(e,n){t.callProp("onChange",e,n),t.setState({value:e})},t.onInputChange=function(e,n){var r=t.callProp("onInputChange",e,n);t.setState({inputValue:void 0!==r?r:e})},t.onMenuOpen=function(){t.callProp("onMenuOpen"),t.setState({menuIsOpen:!0})},t.onMenuClose=function(){t.callProp("onMenuClose"),t.setState({menuIsOpen:!1})},t}return Ra(o,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(t){return void 0!==this.props[t]?this.props[t]:this.state[t]}},{key:"callProp",value:function(t){if("function"==typeof this.props[t]){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(e=this.props)[t].apply(e,r)}}},{key:"render",value:function(){var e=this,n=this.props,o=(n.defaultInputValue,n.defaultMenuIsOpen,n.defaultValue,Cu(n,["defaultInputValue","defaultMenuIsOpen","defaultValue"]));return r.default.createElement(t,Iu({},o,{ref:function(t){e.select=t},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),o}(r.Component),e.defaultProps=Oc,n}(Sc),Ic=[{value:"assessing",label:"Assessing"},{value:"bookmarking",label:"Bookmarking"},{value:"classifying",label:"Classifying"},{value:"commenting",label:"Commenting"},{value:"describing",label:"Describing"},{value:"editing",label:"Editing"},{value:"highlighting",label:"Highlighting"},{value:"identifying",label:"Identifying"},{value:"linking",label:"Linking"},{value:"moderating",label:"Moderating"},{value:"questioning",label:"Questioning"},{value:"replying",label:"Replying"}],Tc=function(t){var e=t.content?Ic.find((function(e){return e.value===t.content})):null;return r.default.createElement("div",{class:"r6o-purposedropdown"},r.default.createElement(Cc,{value:e,onChange:t.onChange,options:Ic,isDisabled:!t.editable}))},Rc=function(t){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 940",width:t.width},r.default.createElement("metadata",null,"IcoFont Icons"),r.default.createElement("title",null,"simple-down"),r.default.createElement("glyph",{glyphName:"simple-down",unicode:"",horizAdvX:"1000"}),r.default.createElement("path",{fill:"currentColor",d:"M200 392.6l300 300 300-300-85.10000000000002-85.10000000000002-214.89999999999998 214.79999999999995-214.89999999999998-214.89999999999998-85.10000000000002 85.20000000000005z"}))};function Mc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ac(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mc(Object(n),!0).forEach((function(e){Nc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Nc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Lc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lc(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Dc=function(t){var e=kc(Object(s.k)(!1),2),n=e[0],o=e[1],i=kc(Object(s.k)(!1),2),a=i[0],u=i[1],l=t.body.modified||t.body.created,c=t.body.creator&&r.default.createElement("div",{className:"r6o-lastmodified"},r.default.createElement("span",{className:"r6o-lastmodified-by"},t.body.creator.name||t.body.creator.id),t.body.created&&r.default.createElement("span",{className:"r6o-lastmodified-at"},r.default.createElement(Vs,{datetime:t.env.toClientTime(l),locale:da.locale()})));return t.readOnly?r.default.createElement("div",{className:"r6o-widget comment"},r.default.createElement("div",{className:"r6o-readonly-comment"},t.body.value),c):r.default.createElement("div",{className:n?"r6o-widget comment editable":"r6o-widget comment"},r.default.createElement(Ca,{editable:n,content:t.body.value,onChange:function(e){return t.onUpdate(t.body,Ac(Ac({},t.body),{},{value:e.target.value}))},onSaveAndClose:t.onSaveAndClose}),!n&&c,t.purposeSelector&&r.default.createElement(Tc,{editable:n,content:t.body.purpose,onChange:function(e){return t.onUpdate(t.body,Ac(Ac({},t.body),{},{purpose:e.value}))},onSaveAndClose:t.onSaveAndClose}),r.default.createElement("div",{className:a?"r6o-icon r6o-arrow-down r6o-menu-open":"r6o-icon r6o-arrow-down",onClick:function(){return u(!a)}},r.default.createElement(Rc,{width:12})),a&&r.default.createElement(ga,{onEdit:function(t){o(!0),u(!1)},onDelete:function(e){t.onDelete(t.body),u(!1)},onClickOutside:function(){return u(!1)}}))};function jc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jc(Object(n),!0).forEach((function(e){Bc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zc=Ic.map((function(t){return t.value})),Vc=function(t,e){var n=e?zc.indexOf(t.purpose)>-1:"commenting"==t.purpose||"replying"==t.purpose;return"TextualBody"===t.type&&(!t.hasOwnProperty("purpose")||n)},Uc=function(t,e){if(!0===e.editable)return!1;if(!1===e.editable)return!0;if("MINE_ONLY"===e.editable){var n,r,o=null===(n=t.creator)||void 0===n?void 0:n.id;return(null===(r=e.env.user)||void 0===r?void 0:r.id)!==o}return e.readOnly},Hc=function(t){var e,n,o=t.annotation?t.annotation.bodies.filter((function(e){return Vc(e,t.purposeSelector)})):[],i=(e=o.find((function(t){return 1==t.draft})),n=o.length>1,e||{type:"TextualBody",value:"",purpose:n?"replying":"commenting",draft:!0}),s=o.filter((function(t){return t!=i}));return r.default.createElement(r.default.Fragment,null,s.map((function(e,n){return r.default.createElement(Dc,{key:n,env:t.env,purposeSelector:t.purposeSelector,readOnly:Uc(e,t),body:e,onUpdate:t.onUpdateBody,onDelete:t.onRemoveBody,onSaveAndClose:t.onSaveAndClose})})),!t.readOnly&&t.annotation&&r.default.createElement("div",{className:"r6o-widget comment editable"},r.default.createElement(Ca,{content:i.value,editable:!0,placeholder:s.length>0?da.t("Add a reply..."):da.t("Add a comment..."),onChange:function(e){var n=i.value,r=e.target.value;0===n.length&&r.length>0?t.onAppendBody(Fc(Fc({},i),{},{value:r})):n.length>0&&0===r.length?t.onRemoveBody(i):t.onUpdateBody(i,Fc(Fc({},i),{},{value:r}))},onSaveAndClose:function(){return t.onSaveAndClose()}}),t.purposeSelector&&i.value.length>0&&r.default.createElement(Tc,{editable:!0,content:i.purpose,onChange:function(e){return t.onUpdateBody(i,Fc(Fc({},i),{},{purpose:e.value}))},onSaveAndClose:function(){return t.onSaveAndClose()}})))};Hc.disableDelete=function(t,e){return t.bodies.filter((function(t){return Vc(t,e.purposeSelector)})).some((function(t){return Uc(t,e)}))};var Gc=n(3),qc=n.n(Gc);function Wc(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Yc=!1,Xc=r.default.createContext(null),$c="unmounted",Kc="exited",Zc="entering",Jc="entered",Qc="exiting",tp=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var o,i=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?i?(o=Kc,r.appearStatus=Zc):o=Jc:o=e.unmountOnExit||e.mountOnEnter?$c:Kc,r.state={status:o},r.nextCallback=null,r}Va(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===$c?{status:Kc}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==Zc&&n!==Jc&&(e=Zc):n!==Zc&&n!==Jc||(e=Qc)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!=typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===Zc?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&this.state.status===Kc&&this.setState({status:$c})},n.performEnter=function(t){var e=this,n=this.props.enter,o=this.context?this.context.isMounting:t,i=this.props.nodeRef?[o]:[r.default.findDOMNode(this),o],s=i[0],a=i[1],u=this.getTimeouts(),l=o?u.appear:u.enter;!t&&!n||Yc?this.safeSetState({status:Jc},(function(){e.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:Zc},(function(){e.props.onEntering(s,a),e.onTransitionEnd(l,(function(){e.safeSetState({status:Jc},(function(){e.props.onEntered(s,a)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),o=this.props.nodeRef?void 0:r.default.findDOMNode(this);e&&!Yc?(this.props.onExit(o),this.safeSetState({status:Qc},(function(){t.props.onExiting(o),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:Kc},(function(){t.props.onExited(o)}))}))}))):this.safeSetState({status:Kc},(function(){t.props.onExited(o)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:r.default.findDOMNode(this),o=null==t&&!this.props.addEndListener;if(n&&!o){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],a=i[1];this.props.addEndListener(s,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===$c)return null;var e=this.props,n=e.children,o=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,Pu(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.default.createElement(Xc.Provider,{value:null},"function"==typeof n?n(t,o):r.default.cloneElement(r.default.Children.only(n),o))},e}(r.default.Component);function ep(){}tp.contextType=Xc,tp.propTypes={},tp.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ep,onEntering:ep,onEntered:ep,onExit:ep,onExiting:ep,onExited:ep},tp.UNMOUNTED=$c,tp.EXITED=Kc,tp.ENTERING=Zc,tp.ENTERED=Jc,tp.EXITING=Qc;var np=tp,rp=function(t,e){return t&&e&&e.split(" ").forEach((function(e){return r=e,void((n=t).classList?n.classList.remove(r):"string"==typeof n.className?n.className=Wc(n.className,r):n.setAttribute("class",Wc(n.className&&n.className.baseVal||"",r)));var n,r}))},op=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(t,n){var r=e.resolveArguments(t,n),o=r[0],i=r[1];e.removeClasses(o,"exit"),e.addClass(o,i?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(t,n)},e.onEntering=function(t,n){var r=e.resolveArguments(t,n),o=r[0],i=r[1]?"appear":"enter";e.addClass(o,i,"active"),e.props.onEntering&&e.props.onEntering(t,n)},e.onEntered=function(t,n){var r=e.resolveArguments(t,n),o=r[0],i=r[1]?"appear":"enter";e.removeClasses(o,i),e.addClass(o,i,"done"),e.props.onEntered&&e.props.onEntered(t,n)},e.onExit=function(t){var n=e.resolveArguments(t)[0];e.removeClasses(n,"appear"),e.removeClasses(n,"enter"),e.addClass(n,"exit","base"),e.props.onExit&&e.props.onExit(t)},e.onExiting=function(t){var n=e.resolveArguments(t)[0];e.addClass(n,"exit","active"),e.props.onExiting&&e.props.onExiting(t)},e.onExited=function(t){var n=e.resolveArguments(t)[0];e.removeClasses(n,"exit"),e.addClass(n,"exit","done"),e.props.onExited&&e.props.onExited(t)},e.resolveArguments=function(t,n){return e.props.nodeRef?[e.props.nodeRef.current,t]:[t,n]},e.getClassNames=function(t){var n=e.props.classNames,r="string"==typeof n,o=r?""+(r&&n?n+"-":"")+t:n[t];return{baseClassName:o,activeClassName:r?o+"-active":n[t+"Active"],doneClassName:r?o+"-done":n[t+"Done"]}},e}Va(e,t);var n=e.prototype;return n.addClass=function(t,e,n){var r=this.getClassNames(e)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===e&&"done"===n&&o&&(r+=" "+o),"active"===n&&t&&t.scrollTop,r&&(this.appliedClasses[e][n]=r,function(t,e){t&&e&&e.split(" ").forEach((function(e){return r=e,void((n=t).classList?n.classList.add(r):function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(t,r))},n.removeClasses=function(t,e){var n=this.appliedClasses[e],r=n.base,o=n.active,i=n.done;this.appliedClasses[e]={},r&&rp(t,r),o&&rp(t,o),i&&rp(t,i)},n.render=function(){var t=this.props,e=(t.classNames,Pu(t,["classNames"]));return r.default.createElement(np,Iu({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(r.default.Component);op.defaultProps={classNames:""},op.propTypes={};n(121);function ip(t){return(ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sp(t){return"object"==ip(t)&&null!=t&&1===t.nodeType}function ap(t,e){return(!e||"hidden"!==t)&&"visible"!==t&&"clip"!==t}function up(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var n=getComputedStyle(t,null);return ap(n.overflowY,e)||ap(n.overflowX,e)||function(t){var e=function(t){if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}}(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)}(t)}return!1}function lp(t,e,n,r,o,i,s,a){return i<t&&s>e||i>t&&s<e?0:i<=t&&a<=n||s>=e&&a>=n?i-t-r:s>e&&a<n||i<t&&a>n?s-e+o:0}var cp=0;function pp(t,e){t&&function(t,e){var n=window,r=e.scrollMode,o=e.block,i=e.inline,s=e.boundary,a=e.skipOverflowHiddenElements,u="function"==typeof s?s:function(t){return t!==s};if(!sp(t))throw new TypeError("Invalid target");for(var l=document.scrollingElement||document.documentElement,c=[],p=t;sp(p)&&u(p);){if((p=p.parentElement)===l){c.push(p);break}null!=p&&p===document.body&&up(p)&&!up(document.documentElement)||null!=p&&up(p,a)&&c.push(p)}for(var f=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,d=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,y=t.getBoundingClientRect(),m=y.height,v=y.width,b=y.top,_=y.right,w=y.bottom,x=y.left,S="start"===o||"nearest"===o?b:"end"===o?w:b+m/2,E="center"===i?x+v/2:"end"===i?_:x,O=[],P=0;P<c.length;P++){var C=c[P],I=C.getBoundingClientRect(),T=I.height,R=I.width,M=I.top,A=I.right,N=I.bottom,k=I.left;if("if-needed"===r&&b>=0&&x>=0&&w<=h&&_<=f&&b>=M&&w<=N&&x>=k&&_<=A)return O;var L=getComputedStyle(C),D=parseInt(L.borderLeftWidth,10),j=parseInt(L.borderTopWidth,10),F=parseInt(L.borderRightWidth,10),B=parseInt(L.borderBottomWidth,10),z=0,V=0,U="offsetWidth"in C?C.offsetWidth-C.clientWidth-D-F:0,H="offsetHeight"in C?C.offsetHeight-C.clientHeight-j-B:0;if(l===C)z="start"===o?S:"end"===o?S-h:"nearest"===o?lp(g,g+h,h,j,B,g+S,g+S+m,m):S-h/2,V="start"===i?E:"center"===i?E-f/2:"end"===i?E-f:lp(d,d+f,f,D,F,d+E,d+E+v,v),z=Math.max(0,z+g),V=Math.max(0,V+d);else{z="start"===o?S-M-j:"end"===o?S-N+B+H:"nearest"===o?lp(M,N,T,j,B+H,S,S+m,m):S-(M+T/2)+H/2,V="start"===i?E-k-D:"center"===i?E-(k+R/2)+U/2:"end"===i?E-A+F+U:lp(k,A,R,D,F+U,E,E+v,v);var G=C.scrollLeft,q=C.scrollTop;S+=q-(z=Math.max(0,Math.min(q+z,C.scrollHeight-T+H))),E+=G-(V=Math.max(0,Math.min(G+V,C.scrollWidth-R+U)))}O.push({el:C,top:z,left:V})}return O}(t,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach((function(t){var e=t.el,n=t.top,r=t.left;e.scrollTop=n,e.scrollLeft=r}))}function fp(t,e){return t===e||t.contains&&t.contains(e)}function hp(t,e){var n;function r(){n&&clearTimeout(n)}function o(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];r(),n=setTimeout((function(){n=null,t.apply(void 0,i)}),e)}return o.cancel=r,o}function dp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e.some((function(e){return e&&e.apply(void 0,[t].concat(r)),t.preventDownshiftDefault||t.hasOwnProperty("nativeEvent")&&t.nativeEvent.preventDownshiftDefault}))}}function gp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.forEach((function(e){"function"==typeof e?e(t):e&&(e.current=t)}))}}function yp(){return String(cp++)}function mp(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function vp(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=bp(e,r)?e[r]:t[r],n}),{})}function bp(t,e){return void 0!==t[e]}function _p(t){var e=t.key,n=t.keyCode;return n>=37&&n<=40&&0!==e.indexOf("Arrow")?"Arrow"+e:e}function wp(t,e,n,r,o){if(void 0===o&&(o=!0),0===n)return-1;var i=n-1;("number"!=typeof e||e<0||e>=n)&&(e=t>0?-1:i+1);var s=e+t;s<0?s=o?i:0:s>i&&(s=o?0:i);var a=xp(t,s,n,r,o);return-1===a?e>=n?-1:e:a}function xp(t,e,n,r,o){var i=r(e);if(!i||!i.hasAttribute("disabled"))return e;if(t>0){for(var s=e+1;s<n;s++)if(!r(s).hasAttribute("disabled"))return s}else for(var a=e-1;a>=0;a--)if(!r(a).hasAttribute("disabled"))return a;return o?t>0?xp(1,0,n,r,!1):xp(-1,n-1,n,r,!1):-1}function Sp(t,e,n,r){return void 0===r&&(r=!0),e.some((function(e){return e&&(fp(e,t)||r&&fp(e,n.activeElement))}))}var Ep=hp((function(){Pp().textContent=""}),500);function Op(t,e){var n=Pp(e);t&&(n.textContent=t,Ep())}function Pp(t){void 0===t&&(t=document);var e=t.getElementById("a11y-status-message");return e||((e=t.createElement("div")).setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var Cp={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function Ip(t,e,n){var r=t.props,o=t.type,i={};Object.keys(e).forEach((function(t){!function(t,e,n,r){var o="on"+Ap(t)+"Change";e[o]&&void 0!==r[t]&&r[t]!==n[t]&&e[o](r)}(t,r,e,n),n[t]!==e[t]&&(i[t]=n[t])})),r.onStateChange&&Object.keys(i).length&&r.onStateChange(Iu({type:o},i))}var Tp=hp((function(t,e){Op(t(),e)}),200);function Rp(t){var e=t.id,n=t.labelId,r=t.menuId,o=t.getItemId,i=t.toggleButtonId,s=void 0===e?"downshift-"+yp():e;return{labelId:n||s+"-label",menuId:r||s+"-menu",getItemId:o||function(t){return s+"-item-"+t},toggleButtonId:i||s+"-toggle-button"}}function Mp(t,e,n){return void 0!==t?t:0===n.length?-1:n.indexOf(e)}function Ap(t){return""+t.slice(0,1).toUpperCase()+t.slice(1)}function Np(t){var e=Object(r.useRef)(t);return e.current=t,e}function kp(t,e,n){var o=Object(r.useRef)(),i=Object(r.useRef)(),s=Object(r.useCallback)((function(e,n){i.current=n,e=vp(e,n.props);var r=t(e,n);return n.props.stateReducer(e,Iu({},n,{changes:r}))}),[t]),a=Object(r.useReducer)(s,e),u=a[0],l=a[1],c=Np(n),p=Object(r.useCallback)((function(t){return l(Iu({props:c.current},t))}),[c]),f=i.current;return Object(r.useEffect)((function(){f&&o.current&&o.current!==u&&Ip(f,vp(o.current,f.props),u),o.current=u}),[u,n,f]),[u,p]}var Lp={itemToString:function(t){return t?String(t):""},stateReducer:function(t,e){return e.changes},getA11ySelectionMessage:function(t){var e=t.selectedItem,n=t.itemToString;return e?n(e)+" has been selected.":""},scrollIntoView:pp,circularNavigation:!1,environment:"undefined"==typeof window?{}:window};function Dp(t,e,n){void 0===n&&(n=Cp);var r="default"+Ap(e);return r in t?t[r]:n[e]}function jp(t,e,n){if(void 0===n&&(n=Cp),e in t)return t[e];var r="initial"+Ap(e);return r in t?t[r]:Dp(t,e,n)}function Fp(t){var e=jp(t,"selectedItem"),n=jp(t,"isOpen"),r=jp(t,"highlightedIndex"),o=jp(t,"inputValue");return{highlightedIndex:r<0&&e&&n?t.items.indexOf(e):r,isOpen:n,selectedItem:e,inputValue:o}}function Bp(t,e,n,r){var o=t.items,i=t.initialHighlightedIndex,s=t.defaultHighlightedIndex,a=e.selectedItem,u=e.highlightedIndex;return 0===o.length?-1:void 0!==i&&u===i?i:void 0!==s?s:a?0===n?o.indexOf(a):wp(n,o.indexOf(a),o.length,r,!1):0===n?-1:n<0?o.length-1:0}function zp(t,e,n,o){var i=Object(r.useRef)({isMouseDown:!1,isTouchMove:!1});return Object(r.useEffect)((function(){var r=function(){i.current.isMouseDown=!0},s=function(r){i.current.isMouseDown=!1,t&&!Sp(r.target,e.map((function(t){return t.current})),n.document)&&o()},a=function(){i.current.isTouchMove=!1},u=function(){i.current.isTouchMove=!0},l=function(r){!t||i.current.isTouchMove||Sp(r.target,e.map((function(t){return t.current})),n.document,!1)||o()};return n.addEventListener("mousedown",r),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",u),n.addEventListener("touchend",l),function(){n.removeEventListener("mousedown",r),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",u),n.removeEventListener("touchend",l)}}),[t,n]),i}function Vp(){for(var t=!1,e=Object(r.useRef)(!0),n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=Object(r.useRef)(o.reduce((function(t,e){return t[e]={},t}),{}));Object(r.useEffect)((function(){t&&(Object.keys(s.current).forEach((function(t){var n=s.current[t];if(!e.current||Object.keys(n).length){var r=n.suppressRefError,o=n.refKey,i=n.elementRef;i&&i.current||r||console.error('downshift: The ref prop "'+o+'" from '+t+" was not applied correctly on your element.")}else console.error("downshift: You forgot to call the "+t+" getter function on your component / element.")})),e.current=!1)}));var a=Object(r.useCallback)((function(t,e,n,r){0}),[]);return a}qc.a.array.isRequired,qc.a.func,qc.a.func,qc.a.func,qc.a.bool,qc.a.number,qc.a.number,qc.a.number,qc.a.bool,qc.a.bool,qc.a.bool,qc.a.any,qc.a.any,qc.a.any,qc.a.string,qc.a.string,qc.a.string,qc.a.func,qc.a.string,qc.a.func,qc.a.func,qc.a.func,qc.a.func,qc.a.func,qc.a.shape({addEventListener:qc.a.func,removeEventListener:qc.a.func,document:qc.a.shape({getElementById:qc.a.func,activeElement:qc.a.any,body:qc.a.any})});Iu({},Lp,{getA11yStatusMessage:function(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.":"":"No results are available.":""}});var Up=Object.freeze({__proto__:null,InputKeyDownArrowDown:0,InputKeyDownArrowUp:1,InputKeyDownEscape:2,InputKeyDownHome:3,InputKeyDownEnd:4,InputKeyDownEnter:5,InputChange:6,InputBlur:7,MenuMouseLeave:8,ItemMouseMove:9,ItemClick:10,ToggleButtonClick:11,FunctionToggleMenu:12,FunctionOpenMenu:13,FunctionCloseMenu:14,FunctionSetHighlightedIndex:15,FunctionSelectItem:16,FunctionSetInputValue:17,FunctionReset:18,ControlledPropUpdatedSelectedItem:19});qc.a.array.isRequired,qc.a.func,qc.a.func,qc.a.func,qc.a.bool,qc.a.number,qc.a.number,qc.a.number,qc.a.bool,qc.a.bool,qc.a.bool,qc.a.any,qc.a.any,qc.a.any,qc.a.string,qc.a.string,qc.a.string,qc.a.string,qc.a.string,qc.a.string,qc.a.func,qc.a.string,qc.a.string,qc.a.func,qc.a.func,qc.a.func,qc.a.func,qc.a.func,qc.a.func,qc.a.shape({addEventListener:qc.a.func,removeEventListener:qc.a.func,document:qc.a.shape({getElementById:qc.a.func,activeElement:qc.a.any,body:qc.a.any})});var Hp=Iu({},Lp,{getA11yStatusMessage:mp,circularNavigation:!0});function Gp(t,e){var n,r=e.type,o=e.props,i=e.shiftKey;switch(r){case 9:n={highlightedIndex:e.index};break;case 10:n={isOpen:Dp(o,"isOpen"),highlightedIndex:Dp(o,"highlightedIndex"),selectedItem:o.items[e.index],inputValue:o.itemToString(o.items[e.index])};break;case 0:n=t.isOpen?{highlightedIndex:wp(i?5:1,t.highlightedIndex,o.items.length,e.getItemNodeFromIndex,o.circularNavigation)}:{highlightedIndex:Bp(o,t,1,e.getItemNodeFromIndex),isOpen:!0};break;case 1:n=t.isOpen?{highlightedIndex:wp(i?-5:-1,t.highlightedIndex,o.items.length,e.getItemNodeFromIndex,o.circularNavigation)}:{highlightedIndex:Bp(o,t,-1,e.getItemNodeFromIndex),isOpen:!0};break;case 5:n=Iu({},t.highlightedIndex>=0&&{selectedItem:o.items[t.highlightedIndex],isOpen:Dp(o,"isOpen"),highlightedIndex:Dp(o,"highlightedIndex"),inputValue:o.itemToString(o.items[t.highlightedIndex])});break;case 2:n={isOpen:!1,selectedItem:null,highlightedIndex:-1,inputValue:""};break;case 3:n={highlightedIndex:xp(1,0,o.items.length,e.getItemNodeFromIndex,!1)};break;case 4:n={highlightedIndex:xp(-1,o.items.length-1,o.items.length,e.getItemNodeFromIndex,!1)};break;case 7:n=Iu({isOpen:!1},t.highlightedIndex>=0&&{selectedItem:o.items[t.highlightedIndex],inputValue:o.itemToString(o.items[t.highlightedIndex]),highlightedIndex:-1});break;case 6:n={isOpen:!0,highlightedIndex:Dp(o,"highlightedIndex"),inputValue:e.inputValue};break;case 8:n={highlightedIndex:-1};break;case 11:case 12:n={isOpen:!t.isOpen,highlightedIndex:t.isOpen?-1:Bp(o,t,0)};break;case 13:n={isOpen:!0,highlightedIndex:Bp(o,t,0)};break;case 14:n={isOpen:!1};break;case 15:n={highlightedIndex:e.highlightedIndex};break;case 16:n={selectedItem:e.selectedItem,inputValue:o.itemToString(e.selectedItem)};break;case 19:case 17:n={inputValue:e.inputValue};break;case 18:n={highlightedIndex:Dp(o,"highlightedIndex"),isOpen:Dp(o,"isOpen"),selectedItem:Dp(o,"selectedItem"),inputValue:Dp(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Iu({},t,n)}function qp(t){void 0===t&&(t={});var e=Iu({},Hp,t),n=e.initialIsOpen,o=e.defaultIsOpen,i=e.items,s=e.scrollIntoView,a=e.environment,u=e.getA11yStatusMessage,l=e.getA11ySelectionMessage,c=e.itemToString,p=function(t,e,n){var o=Object(r.useRef)(),i=kp(t,e,n),s=i[0],a=i[1];return Object(r.useEffect)((function(){bp(n,"selectedItem")&&(o.current!==n.selectedItem&&a({type:19,inputValue:n.itemToString(n.selectedItem)}),o.current=s.selectedItem===o.current?n.selectedItem:s.selectedItem)})),[vp(s,n),a]}(Gp,function(t){var e=Fp(t),n=e.selectedItem,r=e.inputValue;return""===r&&n&&void 0===t.defaultInputValue&&void 0===t.initialInputValue&&void 0===t.inputValue&&(r=t.itemToString(n)),Iu({},e,{inputValue:r})}(e),e),f=p[0],h=p[1],d=f.isOpen,g=f.highlightedIndex,y=f.selectedItem,m=f.inputValue,v=Object(r.useRef)(null),b=Object(r.useRef)(),_=Object(r.useRef)(null),w=Object(r.useRef)(null),x=Object(r.useRef)(null);b.current={};var S,E,O,P,C,I=Object(r.useRef)(!0),T=Object(r.useRef)(!0),R=Object(r.useRef)((E=(S=e).id,O=S.inputId,P=Pu(S,["id","inputId"]),C=void 0===E?"downshift-"+yp():E,Iu({inputId:O||C+"-input"},Rp(Iu({id:E},P))))),M=Object(r.useRef)(),A=Object(r.useRef)(e),N=Np({state:f,props:e}),k=function(t){return b.current[R.current.getItemId(t)]};Object(r.useEffect)((function(){if(!T.current){var t=M.current;Tp((function(){return u({isOpen:d,highlightedIndex:g,selectedItem:y,inputValue:m,highlightedItem:i[g],resultCount:i.length,itemToString:c,previousResultCount:t})}),a.document)}}),[d,g,m,i]),Object(r.useEffect)((function(){if(!T.current){var t=M.current;Tp((function(){return l({isOpen:d,highlightedIndex:g,selectedItem:y,inputValue:m,highlightedItem:i[g],resultCount:i.length,itemToString:c,previousResultCount:t})}),a.document)}}),[y]),Object(r.useEffect)((function(){g<0||!d||!Object.keys(b.current).length||(!1===I.current?I.current=!0:s(k(g),v.current))}),[g]),Object(r.useEffect)((function(){T.current&&(n||o||d)&&_.current&&_.current.focus()}),[d]),Object(r.useEffect)((function(){T.current||(M.current=i.length)})),Object(r.useEffect)((function(){T.current||(A.current,A.current=e)}),[f,e]);var L=zp(d,[x,v,w],a,(function(){h({type:7})})),D=Vp("getInputProps","getComboboxProps","getMenuProps");Object(r.useEffect)((function(){T.current=!1}),[]);var j=Object(r.useMemo)((function(){return{ArrowDown:function(t){t.preventDefault(),h({type:0,shiftKey:t.shiftKey,getItemNodeFromIndex:k})},ArrowUp:function(t){t.preventDefault(),h({type:1,shiftKey:t.shiftKey,getItemNodeFromIndex:k})},Home:function(t){t.preventDefault(),h({type:3,getItemNodeFromIndex:k})},End:function(t){t.preventDefault(),h({type:4,getItemNodeFromIndex:k})},Escape:function(){h({type:2})},Enter:function(t){if(229!==t.which){var e=N.current.state;e.isOpen&&e.highlightedIndex>-1&&(t.preventDefault(),h({type:5,getItemNodeFromIndex:k}))}}}}),[h,N]),F=Object(r.useCallback)((function(t){return Iu({id:R.current.labelId,htmlFor:R.current.inputId},t)}),[]),B=Object(r.useCallback)((function(t,e){var n,r=void 0===t?{}:t,o=r.onMouseLeave,i=r.refKey,s=void 0===i?"ref":i,a=r.ref,u=Pu(r,["onMouseLeave","refKey","ref"]),l=(void 0===e?{}:e).suppressRefError;return D("getMenuProps",void 0!==l&&l,s,v),Iu(((n={})[s]=gp(a,(function(t){v.current=t})),n.id=R.current.menuId,n.role="listbox",n["aria-labelledby"]=R.current.labelId,n.onMouseLeave=dp(o,(function(){h({type:8})})),n),u)}),[h,D]),z=Object(r.useCallback)((function(t){var e,n,r=void 0===t?{}:t,o=r.item,i=r.index,s=r.refKey,a=void 0===s?"ref":s,u=r.ref,l=r.onMouseMove,c=r.onClick,p=(r.onPress,Pu(r,["item","index","refKey","ref","onMouseMove","onClick","onPress"])),f=N.current,d=f.props,g=f.state,y=Mp(i,o,d.items);if(y<0)throw new Error("Pass either item or item index in getItemProps!");var m=c;return Iu(((e={})[a]=gp(u,(function(t){t&&(b.current[R.current.getItemId(y)]=t)})),e.role="option",e["aria-selected"]=""+(y===g.highlightedIndex),e.id=R.current.getItemId(y),e),!p.disabled&&((n={onMouseMove:dp(l,(function(){i!==g.highlightedIndex&&(I.current=!1,h({type:9,index:i}))}))}).onClick=dp(m,(function(){h({type:10,index:i}),_.current&&_.current.focus()})),n),p)}),[h,N]),V=Object(r.useCallback)((function(t){var e,n=void 0===t?{}:t,r=n.onClick,o=(n.onPress,n.refKey),i=void 0===o?"ref":o,s=n.ref,a=Pu(n,["onClick","onPress","refKey","ref"]);return Iu(((e={})[i]=gp(s,(function(t){w.current=t})),e.id=R.current.toggleButtonId,e.tabIndex=-1,e),!a.disabled&&Iu({},{onClick:dp(r,(function(){h({type:11}),!N.current.state.isOpen&&_.current&&_.current.focus()}))}),a)}),[h,N]),U=Object(r.useCallback)((function(t,e){var n,r=void 0===t?{}:t,o=r.onKeyDown,i=r.onChange,s=r.onInput,a=r.onBlur,u=(r.onChangeText,r.refKey),l=void 0===u?"ref":u,c=r.ref,p=Pu(r,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),f=(void 0===e?{}:e).suppressRefError;D("getInputProps",void 0!==f&&f,l,_);var d,g=N.current.state,y={};p.disabled||((d={}).onChange=dp(i,s,(function(t){h({type:6,inputValue:t.target.value})})),d.onKeyDown=dp(o,(function(t){var e=_p(t);e&&j[e]&&j[e](t)})),d.onBlur=dp(a,(function(){L.current.isMouseDown||h({type:7})})),y=d);return Iu(((n={})[l]=gp(c,(function(t){_.current=t})),n.id=R.current.inputId,n["aria-autocomplete"]="list",n["aria-controls"]=R.current.menuId,n),g.isOpen&&g.highlightedIndex>-1&&{"aria-activedescendant":R.current.getItemId(g.highlightedIndex)},{"aria-labelledby":R.current.labelId,autoComplete:"off",value:g.inputValue},y,p)}),[h,j,N,L,D]),H=Object(r.useCallback)((function(t,e){var n,r=void 0===t?{}:t,o=r.refKey,i=void 0===o?"ref":o,s=r.ref,a=Pu(r,["refKey","ref"]),u=(void 0===e?{}:e).suppressRefError;return D("getComboboxProps",void 0!==u&&u,i,x),Iu(((n={})[i]=gp(s,(function(t){x.current=t})),n.role="combobox",n["aria-haspopup"]="listbox",n["aria-owns"]=R.current.menuId,n["aria-expanded"]=N.current.state.isOpen,n),a)}),[N,D]),G=Object(r.useCallback)((function(){h({type:12})}),[h]),q=Object(r.useCallback)((function(){h({type:14})}),[h]),W=Object(r.useCallback)((function(){h({type:13})}),[h]),Y=Object(r.useCallback)((function(t){h({type:15,highlightedIndex:t})}),[h]),X=Object(r.useCallback)((function(t){h({type:16,selectedItem:t})}),[h]);return{getItemProps:z,getLabelProps:F,getMenuProps:B,getInputProps:U,getComboboxProps:H,getToggleButtonProps:V,toggleMenu:G,openMenu:W,closeMenu:q,setHighlightedIndex:Y,setInputValue:Object(r.useCallback)((function(t){h({type:17,inputValue:t})}),[h]),selectItem:X,reset:Object(r.useCallback)((function(){h({type:18})}),[h]),highlightedIndex:g,isOpen:d,selectedItem:y,inputValue:m}}qp.stateChangeTypes=Up;qc.a.array,qc.a.array,qc.a.array,qc.a.func,qc.a.func,qc.a.func,qc.a.number,qc.a.number,qc.a.number,qc.a.func,qc.a.func,qc.a.string,qc.a.string,qc.a.shape({addEventListener:qc.a.func,removeEventListener:qc.a.func,document:qc.a.shape({getElementById:qc.a.func,activeElement:qc.a.any,body:qc.a.any})});function Wp(t){return(Wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yp(){return(Yp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Xp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $p(t,e){return($p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qp(t);if(e){var o=Qp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zp(this,n)}}function Zp(t,e){return!e||"object"!==Wp(e)&&"function"!=typeof e?Jp(t):e}function Jp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qp(t){return(Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.Component;function tf(t){return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ef(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ef(Object(n),!0).forEach((function(e){rf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function of(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sf(t,e){return(sf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function af(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lf(t);if(e){var o=lf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return uf(this,n)}}function uf(t,e){return!e||"object"!==tf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lf(t){return(lf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.Component;var cf,pf=new Uint8Array(16);function ff(){if(!cf&&!(cf="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cf(pf)}var hf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var df=function(t){return"string"==typeof t&&hf.test(t)},gf=[],yf=0;yf<256;++yf)gf.push((yf+256).toString(16).substr(1));var mf=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(gf[t[e+0]]+gf[t[e+1]]+gf[t[e+2]]+gf[t[e+3]]+"-"+gf[t[e+4]]+gf[t[e+5]]+"-"+gf[t[e+6]]+gf[t[e+7]]+"-"+gf[t[e+8]]+gf[t[e+9]]+"-"+gf[t[e+10]]+gf[t[e+11]]+gf[t[e+12]]+gf[t[e+13]]+gf[t[e+14]]+gf[t[e+15]]).toLowerCase();if(!df(n))throw TypeError("Stringified UUID is invalid");return n};var vf=function(t,e,n){var r=(t=t||{}).random||(t.rng||ff)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=r[o];return e}return mf(r)},bf=n(82);function _f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_f(Object(n),!0).forEach((function(e){Sf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ef=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Sf(this,"clone",(function(e,n){return new t(wf(wf({},r.underlying),e),wf(wf({},r.opts),n))})),Sf(this,"selector",(function(t){var e=r.underlying.target;if(e.selector)return(Array.isArray(e.selector)?e.selector:[e.selector]).find((function(e){return e.type===t}))})),this.underlying=e,this.opts=n}var e,n,r;return e=t,(n=[{key:"isEqual",value:function(t){return"Annotation"===(null==t?void 0:t.type)&&(this.underlying===t.underlying||!(!this.underlying.id||!t.underlying.id)&&bf(this.underlying,t.underlying))}},{key:"readOnly",get:function(){var t;return null===(t=this.opts)||void 0===t?void 0:t.readOnly}},{key:"id",get:function(){return this.underlying.id}},{key:"type",get:function(){return this.underlying.type}},{key:"motivation",get:function(){return this.underlying.motivation}},{key:"body",get:function(){return this.underlying.body}},{key:"target",get:function(){return this.underlying.target}},{key:"bodies",get:function(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]},set:function(t){this.underlying.body=t}},{key:"targets",get:function(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}},{key:"quote",get:function(){return this.selector("TextQuoteSelector").exact}},{key:"start",get:function(){return this.selector("TextPositionSelector").start}},{key:"end",get:function(){return this.selector("TextPositionSelector").end}}])&&xf(e.prototype,n),r&&xf(e,r),t}();function Of(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Of(Object(n),!0).forEach((function(e){If(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Of(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function If(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Sf(Ef,"create",(function(t){var e={"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"#".concat(vf()),body:[]};return new Ef(wf(wf({},e),t))}));var Tf=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),If(this,"clone",(function(e){var n=new t;return n.underlying=JSON.parse(JSON.stringify(r.underlying)),e&&(n.underlying=Pf(Pf({},n.underlying),e)),n})),If(this,"selector",(function(t){var e=r.underlying.target;if(e.selector)return(Array.isArray(e.selector)?e.selector:[e.selector]).find((function(e){return e.type===t}))})),If(this,"toAnnotation",(function(){var t=Object.assign({},r.underlying,{"@context":"http://www.w3.org/ns/anno.jsonld",type:"Annotation",id:"#".concat(vf())});return new Ef(t)})),this.underlying={type:"Selection",body:n||[],target:e}}var e,n,r;return e=t,(n=[{key:"type",get:function(){return this.underlying.type}},{key:"body",get:function(){return this.underlying.body}},{key:"target",get:function(){return this.underlying.target}},{key:"targets",get:function(){return Array.isArray(this.underlying.target)?this.underlying.target:[this.underlying.target]}},{key:"isEqual",value:function(t){return!!t&&bf(this.underlying,t.underlying)}},{key:"bodies",get:function(){return Array.isArray(this.underlying.body)?this.underlying.body:[this.underlying.body]}},{key:"quote",get:function(){return this.selector("TextQuoteSelector").exact}},{key:"isSelection",get:function(){return!0}}])&&Cf(e.prototype,n),r&&Cf(e,r),t}();function Rf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Mf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mf(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Af=function(t){var e=t.selector("FragmentSelector");if(null!=e&&e.conformsTo.startsWith("http://www.w3.org/TR/media-frags")){var n=e.value,r=n.includes(":")?n.substring(n.indexOf("=")+1,n.indexOf(":")):"pixel",o=Rf((n.includes(":")?n.substring(n.indexOf(":")+1):n.substring(n.indexOf("=")+1)).split(",").map(parseFloat),4);return{x:o[0],y:o[1],w:o[2],h:o[3],format:r}}},Nf=function(t,e,n,r,o){return{source:o.src,selector:{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:"xywh=pixel:".concat(t,",").concat(e,",").concat(n,",").concat(r)}}},kf=function(t,e,n,r,o){t.setAttribute("x",e),t.setAttribute("y",n),t.setAttribute("width",r),t.setAttribute("height",o)},Lf=function(t,e,n,r,o){var i=document.createElementNS(bs,"path");i.setAttribute("fill-rule","evenodd");var s=t.naturalWidth,a=t.naturalHeight;return i.setAttribute("d","M0 0 h".concat(s," v").concat(a," h-").concat(s," z M").concat(e," ").concat(n," h").concat(r," v").concat(o," h-").concat(r," z")),i},Df=function(t,e,n,r,o,i){var s=e.naturalWidth,a=e.naturalHeight;t.setAttribute("d","M0 0 h".concat(s," v").concat(a," h-").concat(s," z M").concat(n," ").concat(r," h").concat(o," v").concat(i," h-").concat(o," z"))},jf=function(t,e,n,r){var o="Annotation"===t.type||"Selection"===t.type?Af(t):{x:t,y:e,w:n,h:r},i=o.x,s=o.y,a=o.w,u=o.h,l=document.createElementNS(bs,"g"),c=document.createElementNS(bs,"rect"),p=document.createElementNS(bs,"rect");return p.setAttribute("class","a9s-inner"),kf(p,i,s,a,u),c.setAttribute("class","a9s-outer"),kf(c,i,s,a,u),l.appendChild(c),l.appendChild(p),l},Ff=function(t){var e=t.querySelector(".a9s-outer");return{x:parseFloat(e.getAttribute("x")),y:parseFloat(e.getAttribute("y")),w:parseFloat(e.getAttribute("width")),h:parseFloat(e.getAttribute("height"))}},Bf=function(t,e,n,r,o){var i=t.querySelector(".a9s-inner"),s=t.querySelector(".a9s-outer");kf(i,e,n,r,o),kf(s,e,n,r,o)};function zf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Uf=function(){function t(e,n,r,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Vf(this,"dragTo",(function(t,e){i.group.style.display=null,i.opposite=[t,e];var n=i.bbox,r=n.x,o=n.y,s=n.w,a=n.h;Df(i.mask,i.env.image,r,o,s,a),Bf(i.rect,r,o,s,a)})),Vf(this,"getBoundingClientRect",(function(){return i.rect.getBoundingClientRect()})),Vf(this,"toSelection",(function(){var t=i.bbox,e=t.x,n=t.y,r=t.w,o=t.h;return new Tf(Nf(e,n,r,o,i.env.image))})),Vf(this,"destroy",(function(){i.group.parentNode.removeChild(i.group),i.mask=null,i.rect=null,i.group=null})),this.anchor=[e,n],this.opposite=[e,n],this.env=o,this.group=document.createElementNS(bs,"g"),this.mask=Lf(o.image,e,n,2,2),this.mask.setAttribute("class","a9s-selection-mask"),this.rect=jf(e,n,2,2),this.rect.setAttribute("class","a9s-selection"),this.group.style.pointerEvents="none",this.group.style.display="none",this.group.appendChild(this.mask),this.group.appendChild(this.rect),r.appendChild(this.group)}var e,n,r;return e=t,(n=[{key:"bbox",get:function(){var t=this.opposite[0]-this.anchor[0],e=this.opposite[1]-this.anchor[1];return{x:t>0?this.anchor[0]:this.opposite[0],y:e>0?this.anchor[1]:this.opposite[1],w:Math.max(1,Math.abs(t)),h:Math.max(1,Math.abs(e))}}},{key:"element",get:function(){return this.rect}}])&&zf(e.prototype,n),r&&zf(e,r),t}();function Hf(t){return(Hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gf(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function qf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yf(t,e){return(Yf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zf(t);if(e){var o=Zf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $f(this,n)}}function $f(t,e){return!e||"object"!==Hf(e)&&"function"!=typeof e?Kf(t):e}function Kf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zf(t){return(Zf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yf(t,e)}(i,t);var e,n,r,o=Xf(i);function i(t,e,n,r){var s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Jf(Kf(s=o.call(this)),"enableResponsive",(function(){window.ResizeObserver&&(s.resizeObserver=new ResizeObserver((function(){var t=s.svg.getBoundingClientRect(),e=s.svg.viewBox.baseVal,n=e.width,r=e.height,o=Math.max(n/t.width,r/t.height);s.scaleHandles(o)})),s.resizeObserver.observe(s.svg.parentNode))})),Jf(Kf(s),"drawHandle",(function(t,e){var n=document.createElementNS(bs,"g");n.setAttribute("class","a9s-handle"),n.setAttribute("transform-origin","".concat(t,"px ").concat(e,"px"));var r=document.createElementNS(bs,"g");r.setAttribute("transform-origin","".concat(t,"px ").concat(e,"px"));var o=function(n){var r=document.createElementNS(bs,"circle");return r.setAttribute("cx",t),r.setAttribute("cy",e),r.setAttribute("r",n),r},i=s.config.handleRadius||6,a=o(i);a.setAttribute("class","a9s-handle-inner");var u=o(i+1);return u.setAttribute("class","a9s-handle-outer"),r.appendChild(u),r.appendChild(a),n.appendChild(r),n})),Jf(Kf(s),"setHandleXY",(function(t,e,n){t.setAttribute("transform-origin","".concat(e,"px ").concat(n,"px")),t.firstChild.setAttribute("transform-origin","".concat(e,"px ").concat(n,"px"));var r=t.querySelector(".a9s-handle-inner");r.setAttribute("cx",e),r.setAttribute("cy",n);var o=t.querySelector(".a9s-handle-outer");o.setAttribute("cx",e),o.setAttribute("cy",n)})),Jf(Kf(s),"getHandleXY",(function(t){var e=t.querySelector(".a9s-handle-outer");return{x:parseFloat(e.getAttribute("cx")),y:parseFloat(e.getAttribute("cy"))}})),Jf(Kf(s),"scaleHandles",(function(t,e){var n=t,r=e||t;console.log("scaleHandles",s.handles);var o,i=Gf(s.handles);try{for(i.s();!(o=i.n()).done;){var a=o.value;console.log("handlesList",a),a.forEach((function(t){return t.firstChild.setAttribute("transform","scale(".concat(n,", ").concat(r,")"))}))}}catch(t){i.e(t)}finally{i.f()}})),Jf(Kf(s),"getSVGPoint",(function(t){var e=s.svg.getBoundingClientRect(),n=t.clientX-e.x,r=t.clientY-e.y,o=s.svg.createSVGPoint(),i=s.svg.getBoundingClientRect(),a=i.left,u=i.top;return o.x=n+a,o.y=r+u,o.matrixTransform(s.g.getScreenCTM().inverse())})),s.annotation=t,s.g=e,s.config=n,s.env=r,s.svg=e.closest("svg"),s.handles=[];var a=r.image;return(a instanceof Element||a instanceof HTMLDocument)&&s.enableResponsive(),s}return e=i,(n=[{key:"element",get:function(){throw new Error("An implementation is missing")}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=null}}])&&Wf(e.prototype,n),r&&Wf(e,r),i}(xs.a),th=function(t,e){var n=e.getBBox(),r=n.x,o=n.y,i=n.width,s=n.height,a=document.createElementNS(bs,"svg");a.setAttribute("class","a9s-formatter-el"),a.setAttribute("x",r),a.setAttribute("y",o),a.setAttribute("width",i),a.setAttribute("height",s),a.appendChild(t),e.append(a)},eh=function(t,e,n){if(!n)return t;var r=n(e);if(!r)return t;if("string"==typeof r||r instanceof String)_s(t,r);else if(r.nodeType===Node.ELEMENT_NODE)th(r,t);else{var o=r.className,i=r.style,s=r.element;for(var a in o&&_s(t,o),i&&t.setAttribute("style",i),s&&th(s,t),r)r.hasOwnProperty(a)&&a.startsWith("data-")&&t.setAttribute(a,r[a])}},nh=function(t,e,n,r,o){var i=t.querySelector(".a9s-formatter-el");i&&(i.setAttribute("x",e),i.setAttribute("y",n),i.setAttribute("width",r),i.setAttribute("height",o))};function rh(t){return(rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ih(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ih(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ih(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ah(t,e,n){return(ah="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function uh(t,e){return(uh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fh(t);if(e){var o=fh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ch(this,n)}}function ch(t,e){return!e||"object"!==rh(e)&&"function"!=typeof e?ph(t):e}function ph(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fh(t){return(fh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uh(t,e)}(i,t);var e,n,r,o=lh(i);function i(t,e,n,r){var s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),hh(ph(s=o.call(this,t,e,n,r)),"setSize",(function(t,e,n,r){Bf(s.rectangle,t,e,n,r),Df(s.mask,s.env.image,t,e,n,r),nh(s.elementGroup,t,e,n,r);var o=oh(s.handles,4),i=o[0],a=o[1],u=o[2],l=o[3];s.setHandleXY(i,t,e),s.setHandleXY(a,t+n,e),s.setHandleXY(u,t+n,e+r),s.setHandleXY(l,t,e+r)})),hh(ph(s),"stretchCorners",(function(t,e,n){var r=s.getHandleXY(e),o=n.x-r.x,i=n.y-r.y,a=o>0?r.x:n.x,u=i>0?r.y:n.y,l=Math.abs(o),c=Math.abs(i);Bf(s.rectangle,a,u,l,c),Df(s.mask,s.env.image,a,u,l,c),nh(s.elementGroup,a,u,l,c),s.setHandleXY(s.handles[t],n.x,n.y);var p=s.handles[(t+3)%4];s.setHandleXY(p,r.x,n.y);var f=s.handles[(t+5)%4];return s.setHandleXY(f,n.x,r.y),{x:a,y:u,w:l,h:c}})),hh(ph(s),"onGrab",(function(t){return function(e){s.grabbedElem=t;var n=s.getSVGPoint(e),r=Ff(s.rectangle),o=r.x,i=r.y;s.mouseOffset={x:n.x-o,y:n.y-i}}})),hh(ph(s),"onMouseMove",(function(t){if(s.grabbedElem){var e=s.getSVGPoint(t);if(s.grabbedElem===s.rectangle){var n=Ff(s.rectangle),r=n.w,o=n.h,i=e.x-s.mouseOffset.x,a=e.y-s.mouseOffset.y;s.setSize(i,a,r,o),s.emit("update",Nf(i,a,r,o,s.env.image))}else{var u=s.handles.indexOf(s.grabbedElem),l=u<2?s.handles[u+2]:s.handles[u-2],c=s.stretchCorners(u,l,e),p=c.x,f=c.y,h=c.w,d=c.h;s.emit("update",Nf(p,f,h,d,s.env.image))}}})),hh(ph(s),"onMouseUp",(function(t){s.grabbedElem=null,s.mouseOffset=null})),s.svg.addEventListener("mousemove",s.onMouseMove),s.svg.addEventListener("mouseup",s.onMouseUp);var a=Af(t),u=a.x,l=a.y,c=a.w,p=a.h;return s.containerGroup=document.createElementNS(bs,"g"),s.mask=Lf(r.image,u,l,c,p),s.mask.setAttribute("class","a9s-selection-mask"),s.containerGroup.appendChild(s.mask),s.elementGroup=document.createElementNS(bs,"g"),s.rectangle=jf(u,l,c,p),s.rectangle.setAttribute("class","a9s-annotation editable selected"),s.rectangle.querySelector(".a9s-inner").addEventListener("mousedown",s.onGrab(s.rectangle)),s.elementGroup.appendChild(s.rectangle),s.handles=[[u,l],[u+c,l],[u+c,l+p],[u,l+p]].map((function(t){var e=oh(t,2),n=e[0],r=e[1],o=s.drawHandle(n,r);return o.addEventListener("mousedown",s.onGrab(o)),s.elementGroup.appendChild(o),o})),s.containerGroup.appendChild(s.elementGroup),e.appendChild(s.containerGroup),eh(s.rectangle,t,n.formatter),s.grabbedElem=null,s.mouseOffset=null,s}return e=i,(n=[{key:"element",get:function(){return this.elementGroup}},{key:"destroy",value:function(){this.containerGroup.parentNode.removeChild(this.containerGroup),ah(fh(i.prototype),"destroy",this).call(this)}}])&&sh(e.prototype,n),r&&sh(e,r),i}(Qf);function gh(t){return(gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mh(t,e){return(mh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wh(t);if(e){var o=wh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bh(this,n)}}function bh(t,e){return!e||"object"!==gh(e)&&"function"!=typeof e?_h(t):e}function _h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wh(t){return(wh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Sh="An implementation is missing",Eh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mh(t,e)}(i,t);var e,n,r,o=vh(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),xh(_h(r=o.call(this)),"toSVG",(function(t){var e=r.svg.getBoundingClientRect(),n=t.clientX-e.x,o=t.clientY-e.y,i=r.svg.createSVGPoint(),s=r.svg.getBoundingClientRect(),a=s.left,u=s.top;return i.x=n+a,i.y=o+u,i.matrixTransform(r.g.getScreenCTM().inverse())})),xh(_h(r),"attachListeners",(function(t){var e=t.mouseMove,n=t.mouseUp,o=t.dblClick;e&&(r.mouseMove=function(t){var n=r.toSVG(t),o=n.x,i=n.y;e(o,i,t)},r.svg.addEventListener("mousemove",r.mouseMove)),n&&(r.mouseUp=function(t){var e=r.toSVG(t),o=e.x,i=e.y;n(o,i,t)},document.addEventListener("mouseup",r.mouseUp)),o&&(r.dblClick=function(t){var e=r.toSVG(t),n=e.x,i=e.y;o(n,i,t)})})),xh(_h(r),"detachListeners",(function(){r.mouseMove&&r.svg.removeEventListener("mousemove",r.mouseMove),r.mouseUp&&document.removeEventListener("mouseup",r.mouseUp),r.dblClick&&r.svg.removeEventListener("dblclick",r.dblClick)})),xh(_h(r),"start",(function(t){var e=r.toSVG(t),n=e.x,o=e.y;r.startDrawing(n,o,t)})),xh(_h(r),"startDrawing",(function(t){throw new Error(Sh)})),xh(_h(r),"createEditableShape",(function(t){throw new Error(Sh)})),r.svg=t.closest("svg"),r.g=t,r.config=e,r.env=n,r}return e=i,(n=[{key:"isDrawing",get:function(){throw new Error(Sh)}}])&&yh(e.prototype,n),r&&yh(e,r),i}(xs.a);Eh.supports=function(t){throw new Error(Sh)};function Oh(t){return(Oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ph(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ch(t,e){return(Ch=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ih(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mh(t);if(e){var o=Mh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Th(this,n)}}function Th(t,e){return!e||"object"!==Oh(e)&&"function"!=typeof e?Rh(t):e}function Rh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mh(t){return(Mh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ah(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ch(t,e)}(i,t);var e,n,r,o=Ih(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Ah(Rh(r=o.call(this,t,e,n)),"startDrawing",(function(t,e){r.attachListeners({mouseMove:r.onMouseMove,mouseUp:r.onMouseUp}),r.rubberband=new Uf(t,e,r.g,r.env)})),Ah(Rh(r),"stop",(function(){r.rubberband&&(r.rubberband.destroy(),r.rubberband=null)})),Ah(Rh(r),"onMouseMove",(function(t,e){r.rubberband.dragTo(t,e)})),Ah(Rh(r),"onMouseUp",(function(){r.detachListeners();var t=r.rubberband.getBoundingClientRect(),e=t.width,n=t.height,o=r.config.minSelectionWidth||4,i=r.config.minSelectionHeight||4;if(e>=o&&n>=i){var s=r.rubberband.element;s.annotation=r.rubberband.toSelection(),r.emit("complete",s)}else r.emit("cancel");r.stop()})),Ah(Rh(r),"createEditableShape",(function(t){return new dh(t,r.g,r.config,r.env)})),r.rubberband=null,r}return e=i,(n=[{key:"isDrawing",get:function(){return null!=this.rubberband}}])&&Ph(e.prototype,n),r&&Ph(e,r),i}(Eh);Nh.identifier="rect",Nh.supports=function(t){var e=t.selector("FragmentSelector");return null==e?void 0:e.conformsTo.startsWith("http://www.w3.org/TR/media-frags")};var kh=n(122);var Lh=function(t){var e,n,r=t.selector("SvgSelector");if(r){var o=new DOMParser,i=r.value,s=o.parseFromString(i,"image/svg+xml"),a=s.lookupPrefix(bs),u=s.lookupNamespaceURI(null);return a||u?s.firstChild:(e=s,n=(new XMLSerializer).serializeToString(e.documentElement).replace("<svg>",'<svg xmlns="'.concat(bs,'">')),(new DOMParser).parseFromString(n,"image/svg+xml").documentElement).firstChild}},Dh=function(t){var e=t.split("M"),n=[];return e.forEach((function(t,e){if(t.length>0){var r=[];(t=(t=(t=(t=(t=t.replace(/ Z/g,"Z")).replace(/Z /g,"Z")).replace(/Z/g,"")).replace(/L /g,"L")).replace(/ L/g,"L")).split("L").forEach((function(t,e){r.push([parseFloat(t.split(",")[0]).toFixed(2).toString(),parseFloat(t.split(",")[1]).toFixed(2).toString()])})),r[0]!==r[r.length-1]&&r.push(r[0]),n.push(r)}})),n},jh=function(t){var e=Lh(t).getAttribute("d");return Dh(e)},Fh=function(t){var e=Lh(t);jh(t);var n=document.createElementNS(bs,"g"),r=e.cloneNode(!0);r.setAttribute("class","a9s-inner");var o=e.cloneNode(!0);return o.setAttribute("class","a9s-outer"),n.appendChild(o),n.appendChild(r),n},Bh=function(t,e){var n=t.querySelector(".a9s-inner").cloneNode(!0);n.removeAttribute("class"),n.removeAttribute("xmlns");var r=n.outerHTML||(new XMLSerializer).serializeToString(n);return r=r.replace(' xmlns="'.concat(bs,'"'),""),{source:e.src,selector:{type:"SvgSelector",value:"<svg>".concat(r,"</svg>")}}};function zh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Uh=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Vh(this,"redraw",(function(){r.mask.setAttribute("d","".concat(r.polygon.attributes.d.nodeValue))})),Vh(this,"destroy",(function(){return r.mask.parentNode.removeChild(r.mask)})),this.w=e.naturalWidth,this.h=e.naturalHeight,this.polygon=n,this.mask=document.createElementNS(bs,"path"),this.mask.setAttribute("fill-rule","evenodd"),this.mask.setAttribute("fill","white"),this.mask.setAttribute("fill-opacity","0.2"),this.mask.setAttribute("class","a9s-selection-mask"),this.mask.setAttribute("d","".concat(this.polygon.attributes.d.nodeValue))}var e,n,r;return e=t,(n=[{key:"element",get:function(){return this.mask}}])&&zh(e.prototype,n),r&&zh(e,r),t}();function Hh(t){return function(t){if(Array.isArray(t))return Wh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||qh(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gh(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=qh(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function qh(t,e){if(t){if("string"==typeof t)return Wh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wh(t,e):void 0}}function Wh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $h=function(){function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Xh(this,"setPoints",(function(t){var e,n="",r=Gh(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,s="";if(i.length>0){var a,u=Gh(i);try{for(u.s();!(a=u.n()).done;){var l=a.value;l&&(s+=""===s?"M".concat(l[0],",").concat(l[1]):" L".concat(l[0],",").concat(l[1]))}}catch(t){u.e(t)}finally{u.f()}n+=s}}}catch(t){r.e(t)}finally{r.f()}n+=" Z",o.outer.setAttribute("d",n),o.inner.setAttribute("d",n)})),Xh(this,"getBoundingClientRect",(function(){return o.outer.getBoundingClientRect()})),Xh(this,"dragTo",(function(t){o.group.style.display=null;var e=o.points[o.points.length-1].slice(0,o.points[o.points.length-1].length-1),n=o.points.slice(0,-1),r=[].concat(Hh(e),[t,e[0]]);n.push(r),o.setPoints(n),o.mask.redraw()})),Xh(this,"addPoint",(function(t){if(o.points[o.points.length-1].length>0){var e=o.points[o.points.length-1].slice(0,o.points[o.points.length-1].length-1),n=e[e.length-1];Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)>4&&(o.points[o.points.length-1]=[].concat(Hh(e),[t,e[0]]),o.setPoints(o.points),o.mask.redraw())}else o.points[o.points.length-1]=[t,t],o.setPoints(o.points)})),Xh(this,"undo",(function(){console.log("last",o.points[o.points.length-1].length),o.points[o.points.length-1].length>2?o.points[o.points.length-1].pop():o.points.length>1&&o.points.pop()})),Xh(this,"newPart",(function(){o.points.push([])})),Xh(this,"destroy",(function(){o.group.parentNode.removeChild(o.group),o.polygon=null,o.group=null})),Xh(this,"toSelection",(function(){return new Tf(Bh(o.group,o.env.image))})),console.log("env of RubberbandPolygon",r),this.points=[],this.points.push([e,e]),this.env=r,this.group=document.createElementNS(bs,"g"),this.polygon=document.createElementNS(bs,"g"),this.polygon.setAttribute("class","a9s-selection"),this.outer=document.createElementNS(bs,"path"),this.outer.setAttribute("class","a9s-outer"),this.inner=document.createElementNS(bs,"path"),this.inner.setAttribute("class","a9s-inner"),this.setPoints(this.points),this.mask=new Uh(r.image,this.inner),this.polygon.appendChild(this.outer),this.polygon.appendChild(this.inner),this.group.style.display="none",this.group.appendChild(this.mask.element),this.group.appendChild(this.polygon),n.appendChild(this.group)}var e,n,r;return e=t,(n=[{key:"element",get:function(){return this.polygon}}])&&Yh(e.prototype,n),r&&Yh(e,r),t}();function Kh(t){return(Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jh(t,e){return(Jh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rd(t);if(e){var o=rd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return td(this,n)}}function td(t,e){return!e||"object"!==Kh(e)&&"function"!=typeof e?ed(t):e}function ed(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nd(t,e,n){return(nd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rd(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function rd(t){return(rd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function od(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function id(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return sd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function sd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ad=function(t){var e,n=[],r=id(Dh(t.querySelector(".a9s-inner").attributes.d.nodeValue));try{for(r.s();!(e=r.n()).done;){var o,i=e.value,s=[],a=id(i);try{for(a.s();!(o=a.n()).done;){var u=o.value,l={x:parseFloat(u[0]),y:parseFloat(u[1])};s.push(l)}}catch(t){a.e(t)}finally{a.f()}n.push(s)}}catch(t){r.e(t)}finally{r.f()}return n},ud=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jh(t,e)}(i,t);var e,n,r,o=Qh(i);function i(t,e,n,r){var s,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),od(ed(a=o.call(this,t,e,n,r)),"setPoints",(function(t){var e,n="",r=id(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n+="M";var i,s=!0,u=id(o);try{for(u.s();!(i=u.n()).done;){var l=i.value;s?(s=!1,n+=l.x.toString()+","+l.y.toString()):n+=" L"+l.x.toString()+","+l.y.toString()}}catch(t){u.e(t)}finally{u.f()}n+=" Z"}}catch(t){r.e(t)}finally{r.f()}a.shape.querySelector(".a9s-inner").setAttribute("d",n);var c=a.shape.querySelector(".a9s-outer");c.setAttribute("d",n),a.mask.redraw();var p=c.getBBox(),f=p.x,h=p.y,d=p.width,g=p.height;nh(a.elementGroup,f,h,d,g)})),od(ed(a),"onGrab",(function(t){return function(e){a.grabbedElem=t,a.grabbedAt=a.getSVGPoint(e)}})),od(ed(a),"onMouseMove",(function(t){var e;a.grabbedElem&&(e=a.getSVGPoint(t),a.grabbedElem===a.shape?function(){var t,n=e.x-a.grabbedAt.x,r=e.y-a.grabbedAt.y,o=[],i=id(ad(a.shape));try{for(i.s();!(t=i.n()).done;){var s=t.value;o.push(s.map((function(t){return{x:t.x+n,y:t.y+r}})))}}catch(t){i.e(t)}finally{i.f()}a.grabbedAt=e,a.setPoints(o);for(var u=0,l=0,c=o;l<c.length;l++)c[l].forEach((function(t,e){return a.setHandleXY(a.handles[u][e],t.x,t.y)})),u+=1;a.emit("update",Bh(a.shape,a.env.image))}():function(){var t,n=-1,r=0,o=!1,i=id(a.handles);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.indexOf(a.grabbedElem)>0?(n=s.indexOf(a.grabbedElem),o=!0):o||(r+=1)}}catch(t){i.e(t)}finally{i.f()}var u,l=ad(a.shape),c=[],p=0,f=id(l);try{for(f.s();!(u=f.n()).done;){var h=u.value;p===r?function(){var t=[];h.forEach((function(r,o){o===n?t.push(e):t.push(r)})),c.push(t)}():c.push(h),p+=1}}catch(t){f.e(t)}finally{f.f()}a.setPoints(c),p=0;var d,g=id(a.handles);try{for(g.s();!(d=g.n()).done;){var y=d.value;p===r&&a.setHandleXY(y[n],e.x,e.y),p+=1}}catch(t){g.e(t)}finally{g.f()}a.emit("update",Bh(a.shape,a.env.image))}())})),od(ed(a),"onMouseUp",(function(t){a.grabbedElem=null,a.grabbedAt=null})),od(ed(a),"destroy",(function(){a.containerGroup.parentNode.removeChild(a.containerGroup),nd((s=ed(a),rd(i.prototype)),"destroy",s).call(s)})),a.svg.addEventListener("mousemove",a.onMouseMove),a.svg.addEventListener("mouseup",a.onMouseUp),a.containerGroup=document.createElementNS(bs,"g"),a.shape=Fh(t),a.shape.setAttribute("class","a9s-annotation editable selected"),a.shape.querySelector(".a9s-inner").addEventListener("mousedown",a.onGrab(a.shape)),a.mask=new Uh(r.image,a.shape.querySelector(".a9s-inner")),a.containerGroup.appendChild(a.mask.element),a.elementGroup=document.createElementNS(bs,"g"),a.elementGroup.appendChild(a.shape);var u=ad(a.shape);a.handles=[];var l,c=id(u);try{for(c.s();!(l=c.n()).done;){var p=l.value;a.handles.push(p.map((function(t){var e=a.drawHandle(t.x,t.y);return e.addEventListener("mousedown",a.onGrab(e)),a.elementGroup.appendChild(e),e})))}}catch(t){c.e(t)}finally{c.f()}return a.containerGroup.appendChild(a.elementGroup),e.appendChild(a.containerGroup),eh(a.shape,t,n.formatter),a.grabbedElem=null,a.grabbedAt=null,a}return e=i,(n=[{key:"element",get:function(){return this.elementGroup}}])&&Zh(e.prototype,n),r&&Zh(e,r),i}(Qf);function ld(t){return(ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pd(t,e){return(pd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gd(t);if(e){var o=gd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hd(this,n)}}function hd(t,e){return!e||"object"!==ld(e)&&"function"!=typeof e?dd(t):e}function dd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gd(t){return(gd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var md=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pd(t,e)}(i,t);var e,n,r,o=fd(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),yd(dd(r=o.call(this,t,e,n)),"startDrawing",(function(t,e){r._isDrawing=!0,r.attachListeners({mouseMove:r.onMouseMove,mouseUp:r.onMouseUp,dblClick:r.onDblClick}),r.rubberband=new $h([t,e],r.g,r.env)})),yd(dd(r),"stop",(function(){r.detachListeners(),r._isDrawing=!1,r.rubberband&&(r.rubberband.destroy(),r.rubberband=null)})),yd(dd(r),"undo",(function(){r.rubberband&&r.rubberband.undo()})),yd(dd(r),"newPart",(function(){r.rubberband&&r.rubberband.newPart()})),yd(dd(r),"onMouseMove",(function(t,e){return r.rubberband.dragTo([t,e])})),yd(dd(r),"onMouseUp",(function(t,e,n){if(n.altKey)r.onDblClick(n);else if(n.ctrlKey)r.rubberband.undo();else{var o=r.rubberband.getBoundingClientRect(),i=o.width,s=o.height,a=r.config.minSelectionWidth||4,u=r.config.minSelectionHeight||4;i>=a||s>=u?r.rubberband.addPoint([t,e]):(r.emit("cancel"),r.stop())}})),yd(dd(r),"onDblClick",(function(t,e){r._isDrawing=!1,r.rubberband.addPoint([t,e]);var n=r.rubberband.element;n.annotation=r.rubberband.toSelection(),r.emit("complete",n),r.stop()})),yd(dd(r),"createEditableShape",(function(t){return new ud(t,r.g,r.config,r.env)})),r._isDrawing=!1,r}return e=i,(n=[{key:"isDrawing",get:function(){return this._isDrawing}}])&&cd(e.prototype,n),r&&cd(e,r),i}(Eh);function vd(t){return(vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bd(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xd(t,e){return(xd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pd(t);if(e){var o=Pd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ed(this,n)}}function Ed(t,e){return!e||"object"!==vd(e)&&"function"!=typeof e?Od(t):e}function Od(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pd(t){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}md.identifier="polygon",md.supports=function(t){var e,n=t.selector("SvgSelector");if(n)return null===(e=n.value)||void 0===e?void 0:e.match(/^<svg.*<path/g)};var Id=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xd(t,e)}(i,t);var e,n,r,o=Sd(i);function i(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Cd(Od(r=o.call(this)),"listTools",(function(){return r._registered.map((function(t){return t.identifier}))})),Cd(Od(r),"registerTool",(function(t){return r._registered.push(t)})),Cd(Od(r),"unregisterTool",(function(t){return r._registered=r._registered.filter((function(e){return e.identifier!==t}))})),Cd(Od(r),"undo",(function(){r._current&&r._current.undo()})),Cd(Od(r),"newPart",(function(){r._current&&r._current.newPart()})),Cd(Od(r),"setCurrent",(function(t){var e="string"==typeof t||t instanceof String?r._registered.find((function(e){return e.identifier===t})):t;r._current=new e(r._g,r._config,r._env),r._current.on("complete",(function(t){return r.emit("complete",t)})),r._current.on("cancel",(function(t){return r.emit("cancel",t)}))})),Cd(Od(r),"forAnnotation",(function(t){var e,n=bd(t.targets),o=n[0],i=(n.slice(1),null===(e=o.renderedVia)||void 0===e?void 0:e.name),s=i?r._registered.find((function(t){return t.identifier===i})):r._registered.find((function(e){return e.supports(t)}));return s?new s(r._g,r._config,r._env):null})),r._g=t,r._config=e,r._env=n,r._registered=[Nh,md],r.setCurrent(Nh),r}return e=i,(n=[{key:"current",get:function(){return this._current}}])&&wd(e.prototype,n),r&&wd(e,r),i}(xs.a),Td={FragmentSelector:jf,SvgSelector:Fh},Rd={FragmentSelector:function(t){var e=Af(t);return e.w*e.h},SvgSelector:function(t){var e="Annotation"===t.type?jh(t):t,n=kh.polygon(e);return kh.area(n)}},Md=function(t){var e=t.targets[0];if(e)return Array.isArray(e.selector)?e.selector[0]:e.selector},Ad=function(t){return Rd[Md(t).type](t)},Nd={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},kd=function(t,e){var n=function(t,e){var n=t.getAttribute("class");if(n)return new Set(n.split(" ")).has(e)}(e,".a9s-annotation")?e:e.querySelector(".a9s-annotation"),r=t.drawer.canvas,o=r.getBoundingClientRect(),i=r.width/o.width,s=r.height/o.height,a=n.getBoundingClientRect(),u=a.x-o.x,l=a.y-o.y,c=a.width,p=a.height,f=document.createElement("CANVAS"),h=f.getContext("2d");f.width=c,f.height=p,h.drawImage(r,u*i,l*s,c*i,p*s,0,0,c,p);var d=t.viewport.viewportToImageCoordinates(a.x,a.y),g=t.viewport.viewportToImageZoom(t.viewport.getZoom());return{snippet:f,transform:function(t){return[d.x+t[0]/i/g,d.y+t[1]/s/g]}}};function Ld(t){return(Ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dd(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return jd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function jd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bd(t,e){return(Bd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Hd(t);if(e){var o=Hd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vd(this,n)}}function Vd(t,e){return!e||"object"!==Ld(e)&&"function"!=typeof e?Ud(t):e}function Ud(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hd(t){return(Hd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bd(t,e)}(i,t);var e,n,r,o=zd(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Gd(Ud(e=o.call(this)),"_initDrawingMouseTracker",(function(){e.mouseTracker=new vs.a.MouseTracker({element:e.svg,pressHandler:function(t){e.tools.current.isDrawing||e.tools.current.start(t.originalEvent)},moveHandler:function(t){if(e.tools.current.isDrawing){var n=e.tools.current.toSVG(t.originalEvent),r=n.x,o=n.y;e.tools.current.onMouseMove(r,o,t.originalEvent)}},releaseHandler:function(t){if(e.tools.current.isDrawing){var n=e.tools.current.toSVG(t.originalEvent),r=n.x,o=n.y;e.tools.current.onMouseUp(r,o,t.originalEvent)}}}).setTracking(!1),e.tools.on("complete",(function(t){e.mouseTracker.setTracking(!1),e.selectShape(t),e.emit("createSelection",t.annotation)})),document.addEventListener("keydown",(function(t){90==t.keyCode&&t.ctrlKey&&e.tools.undo(),78==t.keyCode&&e.tools.newPart(),16===t.which&&e.mouseTracker.setTracking(!0)})),document.addEventListener("keyup",(function(t){16!==t.which||e.tools.current.isDrawing||e.mouseTracker.setTracking(!1)}))})),Gd(Ud(e),"addAnnotation",(function(t,n){var r=function(t){return Td[Md(t).type](t)}(t);r.setAttribute("class","a9s-annotation"),eh(r,t,e.formatter),r.setAttribute("data-id",t.id),r.annotation=t,r.addEventListener("mouseenter",(function(n){var r;null!==(r=e.tools)&&void 0!==r&&r.current.isDrawing||e.emit("mouseEnterAnnotation",t,n)})),r.addEventListener("mouseleave",(function(o){var i;null!==(i=e.tools)&&void 0!==i&&i.current.isDrawing||e.emit("mouseLeaveAnnotation",t,o),n&&e.highlight(r)})),r.mouseTracker=new vs.a.MouseTracker({element:r,clickHandler:function(){return e.selectShape(r)}}).setTracking(!0),e.g.appendChild(r),e.highlight(t)})),Gd(Ud(e),"addDrawingTool",(function(t){return e.tools.registerTool(t)})),Gd(Ud(e),"addOrUpdateAnnotation",(function(t,n){var r,o;(null===(r=e.selectedShape)||void 0===r?void 0:r.annotation)!==t&&(null===(o=e.selectShape)||void 0===o?void 0:o.annotation)!=n||e.deselect(),n&&e.removeAnnotation(t),e.removeAnnotation(t),e.addAnnotation(t),e.redraw()})),Gd(Ud(e),"currentScale",(function(){var t=e.viewer.viewport.getContainerSize().x;return e.viewer.viewport.getZoom(!0)*t/e.viewer.world.getContentFactor()})),Gd(Ud(e),"deselect",(function(t){if(e.selectedShape){var n=e.selectedShape.annotation;n.isSelection&&e.tools.current.stop(),e.selectedShape.destroy&&(e.selectedShape.mouseTracker.destroy(),e.selectedShape.destroy(),n.isSelection||e.addAnnotation(n),t||e.redraw()),e.selectedShape=null}})),Gd(Ud(e),"destroy",(function(){e.deselect(),e.mouseTracker.destroy(),e.svg.parentNode.removeChild(e.svg)})),Gd(Ud(e),"findShape",(function(t){var n=null!=t&&t.id?t.id:t;return e.g.querySelector('.a9s-annotation[data-id="'.concat(n,'"]'))})),Gd(Ud(e),"fitBounds",(function(t,n){var r=null;if(Array.isArray(t)){var o,i=Dd(t);try{for(i.s();!(o=i.n()).done;){var s=o.value,a=e.findShape(s);if(a){var u=a.getBBox();if(r){var l=u.x+u.width,c=u.y+u.height,p=r.x+r.width,f=r.y+r.height;u.x<r.x&&(r.x=u.x),u.x<r.x&&(r.x=u.x,bigbox.width=p-r.x),u.y<r.y&&(r.y=u.y,r.height=f-r.y),l>p&&(r.width=l-r.x),c>f&&(r.height=c-r.y)}else r=u}}}catch(t){i.e(t)}finally{i.f()}}else{var h=e.findShape(t);h&&(r=h.getBBox())}var d=r,g=d.x,y=d.y,m=d.width,v=d.height;if(0!==m&&0!==v){var b=e.viewer.viewport.imageToViewportRectangle(g,y,m,v);e.viewer.viewport.fitBounds(b,n)}})),Gd(Ud(e),"getAnnotations",(function(){return Array.from(e.g.querySelectorAll(".a9s-annotation")).map((function(t){return t.annotation}))})),Gd(Ud(e),"getSelected",(function(){if(e.selectedShape)return{annotation:e.selectedShape.annotation,element:e.selectedShape.element||e.selectedShape}})),Gd(Ud(e),"getSelectedImageSnippet",(function(){if(e.selectedShape){var t,n=null!==(t=e.selectedShape.element)&&void 0!==t?t:e.selectedShape;return kd(e.viewer,n)}})),Gd(Ud(e),"init",(function(t,n){Array.from(e.g.querySelectorAll(".a9s-annotation")).forEach((function(t){return e.g.removeChild(t)}));var r,o=Dd(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;e.addAnnotation(i,n)}}catch(t){o.e(t)}finally{o.f()}})),Gd(Ud(e),"listDrawingTools",(function(){return e.tools.listTools()})),Gd(Ud(e),"overrideId",(function(t,n){var r=e.findShape(t);r.setAttribute("data-id",n);var o=r.annotation.clone({id:n});return r.annotation=o,o})),Gd(Ud(e),"panTo",(function(t,n){var r=e.findShape(t);if(r){var o=r.getBoundingClientRect(),i=o.top,s=o.left,a=o.width,u=o.height,l=s+a/2+window.scrollX,c=i+u/2+window.scrollY,p=e.viewer.viewport.windowToViewportCoordinates(new vs.a.Point(l,c));e.viewer.viewport.panTo(p,n)}})),Gd(Ud(e),"redraw",(function(){for(var t=Array.from(e.g.querySelectorAll(".a9s-annotation")),n=[],r=0,o=t;r<o.length;r++){var i=o[r];"green"===i.lastChild.style.fill&&n.push(i.annotation.id)}var s=t.map((function(t){return t.annotation}));s.sort((function(t,e){return Ad(e)-Ad(t)})),t.forEach((function(t){return e.g.removeChild(t)})),s.forEach(e.addAnnotation),n.forEach(e.highlight)})),Gd(Ud(e),"removeAnnotation",(function(t){var n,r=t.type?t.id:t;(null===(n=e.selectedShape)||void 0===n?void 0:n.annotation.id)===r&&e.deselect();var o,i=e.findShape(t);i&&((null===(o=e.selectedShape)||void 0===o?void 0:o.annotation)===i.annotation&&e.deselect(),i.mouseTracker.destroy(),i.parentNode.removeChild(i))})),Gd(Ud(e),"hideAnnotation",(function(t){var n=e.findShape(t);n&&(n.lastChild.style.fill="rgba(0, 128, 0,0)",n.lastChild.style.transition="fill 1s,stroke-width 0.7s",n.firstChild.style.transition="stroke-width 0.7s",n.lastChild.style["stroke-width"]="0px",n.firstChild.style["stroke-width"]="0px")})),Gd(Ud(e),"highlight",(function(t){var n=e.findShape(t);n&&(n.lastChild.style.fill="rgba(0, 128, 0,0.55)",n.lastChild.style["stroke-width"]="1px",n.firstChild.style["stroke-width"]="3px",n.lastChild.style.transition="fill 1s, stroke-width 0.7s",n.firstChild.style.transition="stroke-width 0.7s")})),Gd(Ud(e),"dehighlight",(function(t){var n=e.findShape(t);n&&(n.lastChild.style.fill="rgba(0, 128, 0,0.55)",n.lastChild.style["stroke-width"]="1px",n.firstChild.style["stroke-width"]="3px",n.lastChild.style.transition="fill 1s, stroke-width 0.7s",n.firstChild.style.transition="stroke-width 0.7s")})),Gd(Ud(e),"selectAnnotation",(function(t,n){e.selectedShape&&e.deselect();var r=e.findShape(t);if(r){e.selectShape(r,n);var o=e.selectedShape.element?e.selectedShape.element:e.selectedShape;return{annotation:r.annotation,element:o}}e.deselect()})),Gd(Ud(e),"selectShape",(function(t,n){var r;if((null===(r=e.selectedShape)||void 0===r?void 0:r.annotation)!==(null==t?void 0:t.annotation)||e.readOnly||e.headless){e.selectedShape&&e.selectedShape.annotation!==t.annotation&&e.deselect(!0);var o=t.annotation;if(e.readOnly||o.readOnly||e.headless)e.selectedShape=t,n||e.emit("select",{annotation:o,element:t,skipEvent:n});else{t.parentNode.removeChild(t);var i=e.tools.forAnnotation(o);e.selectedShape=i.createEditableShape(o),e.selectedShape.scaleHandles(1/e.currentScale()),e.selectedShape.element.annotation=o;var s=new vs.a.MouseTracker({element:e.svg}).setTracking(!0);e.selectedShape.element.addEventListener("mouseenter",(function(t){return s.setTracking(!0)})),e.selectedShape.element.addEventListener("mouseleave",(function(t){return s.setTracking(!1)})),e.selectedShape.mouseTracker=s,e.selectedShape.on("update",(function(t){e.emit("updateTarget",e.selectedShape.element,t)})),n||e.emit("select",{annotation:o,element:e.selectedShape.element})}}})),Gd(Ud(e),"setDrawingEnabled",(function(t){return e.mouseTracker.setTracking(t)})),Gd(Ud(e),"setDrawingTool",(function(t){var n;null===(n=e.tools.current)||void 0===n||n.stop(),e.tools.setCurrent(t)})),Gd(Ud(e),"setVisible",(function(t){e.svg.style.display=t?null:"none"})),e.viewer=t.viewer,e.readOnly=t.config.readOnly,e.headless=t.config.headless,e.formatter=t.config.formatter,e.svg=document.createElementNS(bs,"svg"),"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?(e.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer touch"),function(t){var e=null,n=function(t,e){return new MouseEvent(t,{screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY,bubbles:!0})},r=function(t){var r=t.changedTouches[0],o=n(Nd[t.type],r);r.target.dispatchEvent(o),t.preventDefault(),"touchstart"!==t.type&&"touchmove"!==t.type||(e&&clearTimeout(e),e=setTimeout((function(){var t=n("dblclick",r);r.target.dispatchEvent(t)}),800)),"touchend"===t.type&&e&&clearTimeout(e)};t.addEventListener("touchstart",r,!0),t.addEventListener("touchmove",r,!0),t.addEventListener("touchend",r,!0),t.addEventListener("touchcancel",r,!0)}(e.svg)):e.svg.setAttribute("class","a9s-annotationlayer a9s-osd-annotationlayer"),e.g=document.createElementNS(bs,"g"),e.svg.appendChild(e.g),e.viewer.canvas.appendChild(e.svg),e.viewer.addHandler("animation",(function(){return e.resize()})),e.viewer.addHandler("rotate",(function(){return e.resize()})),e.viewer.addHandler("resize",(function(){return e.resize()})),e.viewer.addHandler("flip",(function(){return e.resize()})),e.viewer.addHandler("open",(function(){var n=e.viewer.world.getItemAt(0).source.dimensions,r=n.x,o=n.y;t.env.image={src:e.viewer.world.getItemAt(0).source["@id"]||new URL(e.viewer.world.getItemAt(0).source.url,document.baseURI).href,naturalWidth:r,naturalHeight:o},e.resize()})),e.selectedShape=null,e.readOnly||(e.tools=new Id(e.g,t.config,t.env),e._initDrawingMouseTracker()),e}return e=i,(n=[{key:"resize",value:function(){var t=this.viewer.viewport.getFlip(),e=this.viewer.viewport.pixelFromPoint(new vs.a.Point(0,0),!0);t&&(e.x=this.viewer.viewport._containerInnerSize.x-e.x);var n=this.currentScale(),r=t?-n:n,o=this.viewer.viewport.getRotation();this.g.setAttribute("transform","translate(".concat(e.x,", ").concat(e.y,") scale(").concat(r,", ").concat(n,") rotate(").concat(o,")")),this.selectedShape&&(this.selectedShape.element?(this.selectedShape.scaleHandles(1/n),this.emit("viewportChange",this.selectedShape.element)):this.emit("viewportChange",this.selectedShape))}}])&&Fd(e.prototype,n),r&&Fd(e,r),i}(i.a);function Wd(t){return(Wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $d(t,e){return($d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qd(t);if(e){var o=Qd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zd(this,n)}}function Zd(t,e){return!e||"object"!==Wd(e)&&"function"!=typeof e?Jd(t):e}function Jd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qd(t){return(Qd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var eg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$d(t,e)}(s,t);var e,n,o,i=Kd(s);function s(){var t;Yd(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return tg(Jd(t=i.call.apply(i,[this].concat(n))),"state",{selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,readOnly:t.props.config.readOnly,editorDisabled:t.props.config.disableEditor,beforeHeadlessModify:null}),tg(Jd(t),"clearState",(function(e){return t.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null,beforeHeadlessModify:null},e)})),tg(Jd(t),"headlessCancel",(function(e){27===e.which&&(t.clearState(),t.annotationLayer.deselect())})),tg(Jd(t),"handleSelect",(function(e){console.log("handleSelect",e),t.state.editorDisabled?t.onHeadlessSelect(e):t.onNormalSelect(e)})),tg(Jd(t),"onNormalSelect",(function(e,n){console.log("normalSelect",e);var r=e.annotation,o=e.element;if(r){var i=function(){t.setState({selectedAnnotation:r,selectedDOMElement:o,modifiedTarget:null},(function(){n||(r.isSelection?(console.log("we are here"),t.props.onSelectionCreated(r.clone())):t.props.onAnnotationSelected(r.clone(),o))}))},s=t.state.selectedAnnotation;s?s.isEqual(r)?i():t.clearState((function(){t.props.onCancelSelected(s),i()})):i()}else{var a=t.state.selectedAnnotation;a?t.clearState((function(){return t.props.onCancelSelected(a)})):t.clearState()}})),tg(Jd(t),"onHeadlessSelect",(function(e){t.saveSelected().then((function(){t.onNormalSelect(e);e.annotation}))})),tg(Jd(t),"handleUpdateTarget",(function(e,n){t.setState({selectedDOMElement:e,modifiedTarget:n});var r=JSON.parse(JSON.stringify(n));t.props.onSelectionTargetChanged(r)})),tg(Jd(t),"handleMouseEnter",(function(e,n){return t.props.onMouseEnterAnnotation(e.clone(),n)})),tg(Jd(t),"handleMouseLeave",(function(e,n){return t.props.onMouseLeaveAnnotation(e.clone(),n)})),tg(Jd(t),"handleViewportChange",(function(e){return t.setState({selectedDOMElement:e})})),tg(Jd(t),"overrideAnnotationId",(function(e){return function(n){var r=e.id;t.state.selectedAnnotation?t.setState({selectedAnnotation:null,selectedDOMElement:null,modifiedTarget:null},(function(){t.annotationLayer.overrideId(r,n)})):t.annotationLayer.overrideId(r,n)}})),tg(Jd(t),"onCreateOrUpdateAnnotation",(function(e,n){return function(r,o){var i=r.isSelection?r.toAnnotation():r;i=t.state.modifiedTarget?i.clone({target:t.state.modifiedTarget}):i.clone(),t.clearState((function(){t.annotationLayer.deselect(),t.annotationLayer.addOrUpdateAnnotation(i,o),o?t.props[e](i,o.clone()):t.props[e](i,t.overrideAnnotationId(r)),n&&n()}))}})),tg(Jd(t),"onDeleteAnnotation",(function(e){t.clearState(),t.annotationLayer.removeAnnotation(e),t.props.onAnnotationDeleted(e)})),tg(Jd(t),"onCancelAnnotation",(function(e,n){t.state.editorDisabled||t.annotationLayer.deselect(),t.props.onCancelSelected(e),t.clearState(n)})),tg(Jd(t),"addAnnotation",(function(e){t.annotationLayer.addOrUpdateAnnotation(e.clone())})),tg(Jd(t),"addDrawingTool",(function(e){return t.annotationLayer.addDrawingTool(e)})),tg(Jd(t),"cancelSelected",(function(){var e=t.state.selectedAnnotation;e&&t.onCancelAnnotation(e)})),tg(Jd(t),"fitBounds",(function(e,n){return t.annotationLayer.fitBounds(e,n)})),tg(Jd(t),"getAnnotations",(function(){return t.annotationLayer.getAnnotations().map((function(t){return t.clone()}))})),tg(Jd(t),"getSelected",(function(){var e=t.annotationLayer.getSelected();return e?e.annotation.clone():null})),tg(Jd(t),"getSelectedImageSnippet",(function(){return t.annotationLayer.getSelectedImageSnippet()})),tg(Jd(t),"listDrawingTools",(function(){return t.annotationLayer.listDrawingTools()})),tg(Jd(t),"panTo",(function(e,n){return t.annotationLayer.panTo(e,n)})),tg(Jd(t),"removeAnnotation",(function(e){return t.annotationLayer.removeAnnotation(e)})),tg(Jd(t),"saveSelected",(function(){return new Promise((function(e){var n=t.state.selectedAnnotation;if(n)if(n.isSelection)n.bodies.length>0||t.props.config.allowEmpty?t.onCreateOrUpdateAnnotation("onAnnotationCreated",e)(n,n):(t.annotationLayer.deselect(),e());else{var r=t.state,o=r.beforeHeadlessModify,i=r.modifiedTarget;o?t.onCreateOrUpdateAnnotation("onAnnotationUpdated",e)(n,o):i?t.onCreateOrUpdateAnnotation("onAnnotationUpdated",e)(n,n):t.onCancelAnnotation(n,e)}else e()}))})),tg(Jd(t),"highlight",(function(e){t.annotationLayer.highlight(e)})),tg(Jd(t),"dehighlight",(function(e){t.annotationLayer.dehighlight(e)})),tg(Jd(t),"hideAnnotation",(function(e){t.annotationLayer.hideAnnotation(e)})),tg(Jd(t),"selectAnnotation",(function(e){console.log("selectAnnotation triggered");var n=t.annotationLayer.selectAnnotation(e,!0);if(n)return t.handleSelect(n),n.annotation.clone();t.clearState()})),tg(Jd(t),"setAnnotations",(function(e,n){t.annotationLayer.init(e.map((function(t){return t.clone()})),n)})),tg(Jd(t),"setDrawingEnabled",(function(e){return t.annotationLayer.setDrawingEnabled(e)})),tg(Jd(t),"setDrawingTool",(function(e){return t.annotationLayer.setDrawingTool(e)})),tg(Jd(t),"updateSelected",(function(e,n){return new Promise((function(r){t.state.selectedAnnotation&&(n?t.state.selectedAnnotation.isSelection?t.onCreateOrUpdateAnnotation("onAnnotationCreated",r)(e):t.onCreateOrUpdateAnnotation("onAnnotationUpdated",r)(e,t.state.selectedAnnotation):t.setState({selectedAnnotation:e,beforeHeadlessModify:t.state.beforeHeadlessModify||t.state.selectedAnnotation},r))}))})),t}return e=s,(n=[{key:"componentDidMount",value:function(){this.annotationLayer=new qd(this.props),this.annotationLayer.on("select",this.handleSelect),this.annotationLayer.on("updateTarget",this.handleUpdateTarget),this.annotationLayer.on("viewportChange",this.handleViewportChange),this.annotationLayer.on("mouseEnterAnnotation",this.handleMouseEnter),this.annotationLayer.on("mouseLeaveAnnotation",this.handleMouseLeave),this.props.config.disableEditor&&document.addEventListener("keyup",this.headlessCancel)}},{key:"componentWillUnmount",value:function(){this.annotationLayer.destroy(),this.state.editorDisabled&&document.removeEventListener("keyup",this.headlessCancel)}},{key:"disableEditor",get:function(){return this.state.editorDisabled},set:function(t){var e=this;this.setState({editorDisabled:t},(function(){t&&!e.state.editorDisabled?document.addEventListener("keyup",e.headlessCancel):!t&&e.state.editorDisabled&&document.removeEventListener("keyup",e.headlessCancel)}))}},{key:"readOnly",get:function(){return this.state.readOnly},set:function(t){this.annotationLayer.readOnly=t,this.setState({readOnly:t})}},{key:"render",value:function(){var t,e=this.state.selectedAnnotation&&!this.state.editorDisabled,n=this.state.readOnly||(null===(t=this.state.selectedAnnotation)||void 0===t?void 0:t.readOnly);return e&&r.default.createElement(Ki,{wrapperEl:this.props.wrapperEl,annotation:this.state.selectedAnnotation,modifiedTarget:this.state.modifiedTarget,selectedElement:this.state.selectedDOMElement,readOnly:n,config:this.props.config,env:this.props.env,onAnnotationCreated:this.onCreateOrUpdateAnnotation("onAnnotationCreated"),onAnnotationUpdated:this.onCreateOrUpdateAnnotation("onAnnotationUpdated"),onAnnotationDeleted:this.onDeleteAnnotation,onCancel:this.onCancelAnnotation})}}])&&Xd(e.prototype,n),o&&Xd(e,o),s}(r.Component);n(386),n(572),n(573);function ng(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(Element.prototype.matches.call(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var og=function(){function t(e,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),rg(this,"handleAnnotationCreated",(function(t,e){return o._emitter.emit("createAnnotation",t.underlying,e)})),rg(this,"handleAnnotationDeleted",(function(t){return o._emitter.emit("deleteAnnotation",t.underlying)})),rg(this,"handleAnnotationSelected",(function(t,e){return o._emitter.emit("selectAnnotation",t.underlying,e)})),rg(this,"handleAnnotationUpdated",(function(t,e){return o._emitter.emit("updateAnnotation",t.underlying,e.underlying)})),rg(this,"handleCancelSelected",(function(t){return o._emitter.emit("cancelSelected",t.underlying)})),rg(this,"handleSelectionCreated",(function(t){return o._emitter.emit("createSelection",t.underlying)})),rg(this,"handleSelectionTargetChanged",(function(t){return o._emitter.emit("changeSelectionTarget",t)})),rg(this,"hideAnnotation",(function(t){o._app.current.hideAnnotation(o._wrap(t))})),rg(this,"highlightAnnotation",(function(t){o._app.current.highlight(o._wrap(t))})),rg(this,"dehighlightAnnotation",(function(t){o._app.current.dehighlight(o._wrap(t))})),rg(this,"handleMouseEnterAnnotation",(function(t,e){return o._emitter.emit("mouseEnterAnnotation",t.underlying,e)})),rg(this,"handleMouseLeaveAnnotation",(function(t,e){return o._emitter.emit("mouseLeaveAnnotation",t.underlying,e)})),rg(this,"_wrap",(function(t){return"Annotation"===(null==t?void 0:t.type)?new cs(t):t})),rg(this,"addAnnotation",(function(t,e){return o._app.current.addAnnotation(new cs(t),e)})),rg(this,"addDrawingTool",(function(t){return o._app.current.addDrawingTool(t)})),rg(this,"cancelSelected",(function(){return o._app.current.cancelSelected()})),rg(this,"clearAnnotations",(function(){return o.setAnnotations([])})),rg(this,"clearAuthInfo",(function(){return o._env.user=null})),rg(this,"destroy",(function(){return r.default.unmountComponentAtNode(o.appContainerEl)})),rg(this,"fitBounds",(function(t,e){return o._app.current.fitBounds(o._wrap(t),e)})),rg(this,"getAnnotations",(function(){return o._app.current.getAnnotations().map((function(t){return t.underlying}))})),rg(this,"getSelected",(function(){var t=o._app.current.getSelected();return null==t?void 0:t.underlying})),rg(this,"getSelectedImageSnippet",(function(){return o._app.current.getSelectedImageSnippet()})),rg(this,"listDrawingTools",(function(){return o._app.current.listDrawingTools()})),rg(this,"loadAnnotations",(function(t){return fetch(t).then((function(t){return t.json()})).then((function(t){return o.setAnnotations(t),t}))})),rg(this,"loadAnnotationsfromObject",(function(t,e){return o.setAnnotations(t,e),t})),rg(this,"off",(function(t,e){return o._emitter.off(t,e)})),rg(this,"on",(function(t,e){return o._emitter.on(t,e)})),rg(this,"panTo",(function(t,e){return o._app.current.panTo(o._wrap(t),e)})),rg(this,"removeAnnotation",(function(t){return o._app.current.removeAnnotation(o._wrap(t))})),rg(this,"saveSelected",(function(){return o._app.current.saveSelected()})),rg(this,"selectAnnotation",(function(t){var e=o._app.current.selectAnnotation(o._wrap(t));return null==e?void 0:e.underlying})),rg(this,"setAnnotations",(function(t,e){var n=(t||[]).map((function(t){return new cs(t)}));o._app.current.setAnnotations(n,e)})),rg(this,"setAuthInfo",(function(t){return o._env.user=t})),rg(this,"setDrawingEnabled",(function(t){return o._app.current.setDrawingEnabled(t)})),rg(this,"setDrawingTool",(function(t){return o._app.current.setDrawingTool(t)})),rg(this,"setVisible",(function(t){return o._app.current.setVisible(t)})),rg(this,"setServerTime",(function(t){return o._env.setServerTime(t)})),rg(this,"updateSelected",(function(t){var e=null;"Annotation"===t.type?e=new cs(t):"Selection"===t.type&&(e=new gs(t.target,t.body)),e&&o._app.current.updateSelected(e)}));var s=n||{};s.disableEditor=s.disableEditor||s.headless,this._app=r.default.createRef(),this._emitter=new i.a,this._env={setServerTime:function(t){var e=Date.now();ys=t-e},getCurrentTimeAdjusted:function(){return new Date(Date.now()+ys).toISOString()},toClientTime:function(t){return Date.parse(t)-ys}},this._element=e.element,this._element.style.position||(this._element.style.position="relative"),function(t,e){if(t){var n="auto"===t?window.navigator.userLanguage||window.navigator.language:t;try{Q.init(n.split("-")[0].toLowerCase(),e)}catch(t){console.warn("Unsupported locale '".concat(n,"'. Falling back to default en."))}}else Q.init(null,e)}(s.locale,s.messages),this.appContainerEl=document.createElement("DIV"),this._element.appendChild(this.appContainerEl),r.default.render(r.default.createElement(eg,{ref:this._app,viewer:e,wrapperEl:this._element,config:s,env:this._env,onSelectionCreated:this.handleSelectionCreated,onSelectionTargetChanged:this.handleSelectionTargetChanged,onAnnotationCreated:this.handleAnnotationCreated,onAnnotationSelected:this.handleAnnotationSelected,onAnnotationUpdated:this.handleAnnotationUpdated,onAnnotationDeleted:this.handleAnnotationDeleted,onCancelSelected:this.handleCancelSelected,onMouseEnterAnnotation:this.handleMouseEnterAnnotation,onMouseLeaveAnnotation:this.handleMouseLeaveAnnotation}),this.appContainerEl)}var e,n,o;return e=t,(n=[{key:"disableEditor",get:function(){return this._app.current.disableEditor},set:function(t){this._app.current.disableEditor=t}},{key:"readOnly",get:function(){return this._app.current.readOnly},set:function(t){this._app.current.readOnly=t}}])&&ng(e.prototype,n),o&&ng(e,o),t}();e.default=function(t,e){return new og(t,e)}}]).default}));
//# sourceMappingURL=openseadragon-annotorious.min.js.map